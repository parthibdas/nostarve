"use strict";(self.webpackChunkappsheet_app=self.webpackChunkappsheet_app||[]).push([["scripts_editor_configure_store_ts"],{729815:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),o=n(a(689728)),s=n(a(861655)),l=n(a(994993)),u=n(a(73808)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var f=function(e){(0,s.default)(a,e);var t=d(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e="md-button-contained md-button-filled action-button";return c.createElement("div",{className:"action-buttons-container"},"{{#Row._Internal.Row.Actions}}",c.createElement("button",{type:"button",hidden:!0}),"{{/Row._Internal.Row.Actions}}","{{#Row._Internal.Row.Actions}}",c.createElement("button",{className:e,"data-amp-bind-disabled":"valid == false || submitting","data-amp-bind-hidden":'actions != null && (!actions.some(action => action.Name == "{{Name}}"))',"data-amp-bind-class":"'".concat(e," ' + (actions != null ?  (actions.filter(action=>action.Name ==\"{{Name}}\")[0].CssClasses) : '{{CssClasses}}')"),type:"submit",name:"_Internal[Action]",value:"{{Name}}",on:"tap:AMP.setState({disabled: true, showSubmitting: true, firstChanged: true}),rowForm.submit"},c.createElement("amp-img",{alt:"{{DisplayName}} icon",class:"action-button-icon",src:"{{IconUrl}}",height:"18",width:"18"}),"{{DisplayName}}"),"{{/Row._Internal.Row.Actions}}")}}]),a}(c.Component);t.default=f},42670:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.inputTypeToProps=t.default=void 0;var r=n(a(856690)),o=n(a(689728)),s=n(a(861655)),l=n(a(994993)),u=n(a(73808)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294)),p=n(a(840512)),d=n(a(187195)),f=n(a(801269)),m=n(a(606571)),v=n(a(240686)),h=n(a(225718)),g=n(a(729815));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(y=function(e){return e?a:t})(e)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var E={App:{type:"text"},Address:{type:"text"},DateTime:{type:"datetime-local",max:"9999-12-31T00:00:00.0",step:"1"},Date:{type:"date"},Decimal:{type:"number",step:.01,placeholder:"0.00"},Duration:{type:"text",pattern:"(-?(\\d+):([0-5][0-9]):([0-5][0-9]))",placeholder:"hh:mm:ss"},Email:{type:"email"},LatLong:{type:"text",pattern:"(-?\\d+(?:.\\d+)?),\\s?(-?\\d+(?:.\\d+)?)"},LongText:{type:"text"},Name:{type:"name"},Number:{type:"number"},Percent:{type:"number",placeholder:"%"},Phone:{type:"tel"},Text:{type:"text"},Time:{type:"time"},Url:{type:"url"}};t.inputTypeToProps=E;var A=["typeMismatch","stepMismatch","patternMismatch","badInput"],T=function(e){(0,s.default)(a,e);var t=S(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"renderInput",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(n&&(i.disabled="disabled"),e.Type in E)return i=Object.assign(Object.assign({},i),E[e.Type]),c.createElement(p.default,{dataValue:e,index:a,opts:i,isInitialRender:t});switch(e.Type){case"Show":return c.createElement(f.default,{dataValue:e});case"EnumList":return c.createElement(v.default,{dataValue:e,index:a,opts:i});case"Enum":case"Ref":return c.createElement(m.default,{dataValue:e,index:a,opts:i});case"Yes/No":return c.createElement(d.default,{dataValue:e,index:a,opts:i})}return c.createElement(c.Fragment,null)}},{key:"renderAllErrorSpans",value:function(e){return A.map((function(t,a){return c.createElement("span",{className:"error-description","visible-when-invalid":t,"validation-for":"column-".concat(e),key:a},"This entry is invalid")}))}},{key:"renderErrorDiv",value:function(e){return c.createElement("div",{hidden:!0,"data-amp-bind-hidden":'(errors["'.concat(e,'"]) == null'),className:"error-description","data-amp-bind-text":'errors["'.concat(e,'"].message')})}},{key:"renderDataValue",value:function(e,t,a,n){var i="Row.".concat(e.Name),r=this.renderInput(e,t,a),o=this.renderErrorDiv(e.Name),s=this.renderAllErrorSpans(a),l='localState.Rows.Row["'.concat(e.Name,'"]'),u="".concat(l," ? ").concat(l,".Hidden : {{Hidden}}"),p="(".concat(l," ? ").concat(l,".Editable : {{Editable}})");return c.createElement("div",null,"{{#".concat(i,"}}"),c.createElement("div",{className:"column-container","data-amp-bind-hidden":u,key:a},"form"===n&&r,"detail"===n&&("Show"===e.Type?this.renderInput(e,t,a,!0):c.createElement(c.Fragment,null,c.createElement("div",{"data-amp-bind-hidden":"!".concat(p)},r),c.createElement("div",{"data-amp-bind-hidden":p},c.createElement(h.default,{dataValue:e,index:a})))),o,s),"{{/".concat(i,"}}"))}},{key:"getFormEvents",value:function(e){var t={valid:"AMP.setState({valid: true})",invalid:"AMP.setState({valid: false })","submit-error":"AMP.setState({errors : event.response.Rows.Row.errors, genericError: event.response.Message || !event.response.Rows.Row.errors || event.response.Rows.Row.errors.GlobalErrorMessage, disabled: false, submitting: false, validating: false, showSubmitting: false })",submit:"AMP.setState({errors: null, success: false, genericError: null, submitting: true})","submit-success":"AMP.setState({success: event.response.Rows, disabled: false, submitting: false, validating: false, actions: event.response.Rows.Row._Internal.Row.Actions,warning: event.response.Rows.Row.Warning,localState: event.response,lastSync: event.response.Rows.Row._Internal.DateTime, showSubmitting: false, changed: !event.response.Rows})"};return"detail"===e&&(t.submit="AMP.setState({errors: null, success: false, genericError: null, showSubmitting: true, submitting: true})"),t}},{key:"render",value:function(){var e=this,t=this.props,a=t.postUrl,n=t.viewType,i=t.rowData,r=t.isInitialRender,o=t.isPreview,s=this.getFormEvents(n),l=i.Data.map((function(t,a){return e.renderDataValue(t,r,a,n)}));return c.createElement("form",Object.assign({id:"rowForm","action-xhr":a,method:"post",className:"row",on:Object.keys(s).map((function(e){return e+":"+s[e]})).join(";"),"custom-validation-reporting":"interact-and-submit"},o?{enctype:"application/x-www-form-urlencoded"}:{}),"detail"===n&&c.createElement(g.default,null),l,"detail"===n&&c.createElement("input",{type:"hidden",name:"PerformSubmit",value:"true"}),"form"===n&&c.createElement(c.Fragment,null,c.createElement("button",{type:"button",hidden:!0}),c.createElement("button",{className:"md-button-contained form-button md-button-filled","data-amp-bind-disabled":"!valid || submitting || !changed",type:"submit",name:"PerformSubmit",value:"true",on:"tap:AMP.setState({disabled: true, showSubmitting: true}),rowForm.submit"},"Submit")),r&&c.createElement("span",{className:"submit-state"},"Syncing..."),!r&&c.createElement(c.Fragment,null,"{{#Row._Internal.HasEditableFields}}",c.createElement("div",{className:"submit-state-container"},c.createElement("span",{className:"submit-state","data-amp-bind-hidden":"((valid == null || valid == true) && errors == null) || genericError != null"},"Form has one or more validation errors."),c.createElement("span",{className:"submit-state","data-amp-bind-hidden":"(valid == null || valid == true || valid == false) && genericError == null"},"An error occurred while attempting to save."),c.createElement("span",{className:"submit-state","data-amp-bind-hidden":"!showSubmitting",hidden:!0},"Saving..."),c.createElement("span",{className:"submit-state","data-amp-bind-hidden":"(valid == null || valid == false) || !success || genericError != null || errors != null",hidden:!0}," ","Last saved"," ",c.createElement("amp-timeago",{layout:"fixed-height",height:"1",datetime:"{{Rows.Row._Internal.DateTime}}",style:{display:"inline"}}," ")),"detail"===n&&c.createElement("span",{className:"submit-state","data-amp-bind-hidden":"firstChanged"},"Form has not yet been saved."),"form"===n&&c.createElement(c.Fragment,null,c.createElement("span",{className:"submit-state","data-amp-bind-hidden":"!valid || !validating"},"Validating..."),c.createElement("span",{className:"submit-state","data-amp-bind-hidden":"!firstChanged || showSubmitting || validating || success != null"},"Form has not yet been saved."))),"{{/Row._Internal.HasEditableFields}}"))}}]),a}(c.Component);t.default=T},604495:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SUPPORTED_VIEW_TYPES=t.SUPPORTED_COLUMN_TYPES=t.SUPPORTED_ACTION_TYPES=void 0;var r=n(a(856690)),o=n(a(689728)),s=n(a(861655)),l=n(a(994993)),u=n(a(73808)),c=h(a(667294)),p=h(a(42670)),d=h(a(910643)),f=n(a(990022)),m=n(a(173954));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}t.SUPPORTED_VIEW_TYPES=["detail","form"];var y=Object.keys(p.inputTypeToProps).concat(["EnumList","Enum","Yes/No","LongText","Show","Ref"]);t.SUPPORTED_COLUMN_TYPES=y;t.SUPPORTED_ACTION_TYPES=["ADD_RECORD_TO","SET_COLUMN_VALUE"];var S="Please reload this email or try opening the application directly.",E="tap:AMP.setState({warning: null}),ampListContainer.refresh,viewContainerLoading.show",A=function(e){(0,s.default)(a,e);var t=g(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"renderHeaderImage",value:function(e){return e&&c.createElement("div",{className:"fixed-header-img-container"},c.createElement("amp-img",{alt:"Header image",role:"button",tabindex:"0",on:"tap:lightbox",src:e.includes("localhost")?"https://www.appsheet.com/content/img/appicons/brick.png":e,class:"contain",layout:"fill"}))}},{key:"renderReply",value:function(e,t){return c.createElement("div",null,c.createElement(d.default,Object.assign({},this.props,{hidden:"!genericError",bannerType:d.BannerType.ERROR,bannerMessage:c.createElement("p",{className:d.BANNER_MESSAGE_CSS_CLASS,"data-amp-bind-text":"genericError == true ? 'Please open the application in AppSheet instead.' : genericError"},"Please open the application in AppSheet instead.")})),this.props.body&&c.createElement("p",{className:"prebody-text"},this.props.body),c.createElement("div",{className:"email-container"},c.createElement("div",{className:"content"},c.createElement(m.default,{viewContainerClassName:"row-container"}),c.createElement("div",{id:"viewContainer",className:"row-container"},c.createElement("div",{className:"app-header-container"},e.AppLogoUrl&&c.createElement("amp-img",{alt:"App logo",class:"app-logo contain",src:e.AppLogoUrl,height:"36",width:"36"}),"{{#Row._Internal.Row}}",c.createElement("span",null,"{{DisplayName}}"),"{{/Row._Internal.Row}}",c.createElement("amp-img",{alt:"Refresh",title:"Refresh",class:"refresh-icon",src:"https://www.appsheet.com/Content/styles/_shared/external/font-awesome/raster/regular/redo.png",height:"20",width:"20",on:E,role:"button",tabindex:"0"})),"{{#Row._Internal.Row}}","{{#ImageUrl}}",c.createElement("div",{className:"header-container-with-image"},this.renderHeaderImage("{{ImageUrl}}"),"{{#Name}}",c.createElement("h3",null,"{{Name}}"),"{{/Name}}"),"{{/ImageUrl}}","{{^ImageUrl}}","{{#Name}}",c.createElement("div",{className:"header-container"},c.createElement("h3",null,"{{Name}}")),"{{/Name}}","{{/ImageUrl}}","{{/Row._Internal.Row}}",c.createElement(p.default,{postUrl:this.props.postUrl,rowData:e,isInitialRender:t,viewType:this.props.viewType,isPreview:this.props.isPreview}))),c.createElement("amp-image-lightbox",{id:"lightbox",layout:"nodisplay"}),this.renderFooter()))}},{key:"renderWarningDiv",value:function(){return c.createElement(d.default,Object.assign({},this.props,{hidden:"!warning",bannerType:d.BannerType.WARNING,bannerMessage:c.createElement("p",{className:d.BANNER_MESSAGE_CSS_CLASS,"data-amp-bind-text":"warning['Text']"}),bannerCta:c.createElement("div",{className:"banner-ctas"},c.createElement("p",{className:d.BANNER_CTA_CSS_CLASS},c.createElement("a",{on:"tap:AMP.setState({warning: null})"},"Dismiss")),c.createElement("p",{className:d.BANNER_CTA_CSS_CLASS,"data-amp-bind-hidden":"warning['CtaType'] != 'Refresh'"},c.createElement("a",{on:E,"data-amp-bind-text":"warning && warning['CtaText'] || 'Refresh'"})))}))}},{key:"renderFallbackErrorDiv",value:function(){return c.createElement("div",{className:"fallback-div"},c.createElement(d.default,Object.assign({},this.props,{bannerType:d.BannerType.ERROR,bannerMessage:c.createElement("p",{className:d.BANNER_MESSAGE_CSS_CLASS},S)})),this.renderFooter())}},{key:"renderFooter",value:function(){return c.createElement("div",{className:"footer"},this.props.footer&&c.createElement("p",{className:"footer-text"},this.props.footer),c.createElement("div",{className:"legal-footer"},c.createElement("div",{className:"legal-text"},c.createElement("a",{href:this.props.deepLink}," ",this.props.appTemplate.ShortName," ",c.createElement("amp-img",{alt:"Open application in AppSheet",src:"https://www.gstatic.com/images/icons/material/system/2x/open_in_new_black_24dp.png",height:"15",width:"15"})," ")),c.createElement("div",{className:"legal-links"},c.createElement("a",{href:"https://www.appsheet.com/appinfo/termsofuse?appId="+this.props.appTemplate.Id},"Terms"),c.createElement("a",{href:"https://www.appsheet.com/appinfo/privacypolicy?appId="+this.props.appTemplate.Id},"Privacy"),c.createElement("a",{href:"https://www.appsheet.com/oss/notices"},"Licenses"))))}},{key:"render",value:function(){return c.createElement(c.Fragment,null,c.createElement("amp-list",{id:"ampListContainer",src:this.props.getUrl,layout:"container","single-item":!0,items:"Rows"},c.createElement("template",{type:"amp-mustache"},this.renderWarningDiv(),"{{#Row}}","{{#errors}}","{{#GlobalErrorType_Default}}",c.createElement(d.default,Object.assign({},this.props,{bannerType:d.BannerType.ERROR,bannerMessage:c.createElement(c.Fragment,null,"{{#GlobalErrorMessage}}",c.createElement("p",{className:d.BANNER_MESSAGE_CSS_CLASS}," ","{{GlobalErrorMessage}}"),"{{/GlobalErrorMessage}}","{{^GlobalErrorMessage}}",c.createElement("p",null,S+" "),"{{/GlobalErrorMessage}}"),bannerCta:c.createElement(c.Fragment,null,"{{#GlobalErrorMessageLink}}",c.createElement("p",{className:d.BANNER_CTA_CSS_CLASS},c.createElement("a",{href:"{{Url}}"},"{{LinkText}}")),"{{/GlobalErrorMessageLink}}","{{^GlobalErrorMessageLink}}",d.default.renderFallbackCta(this.props.helpCenterArticleLink),"{{/GlobalErrorMessageLink}}")})),this.renderFooter(),"{{/GlobalErrorType_Default}}","{{#GlobalErrorType_LoginPrompt}}",c.createElement("div",{className:"email-container error-container"},c.createElement(m.default,null),c.createElement(f.default,{appTemplate:this.props.appTemplate,primaryCta:c.createElement(c.Fragment,null,"{{#GlobalErrorMessageLink}}",c.createElement("a",{href:"{{Url}}",className:"md-button-flat"},"{{LinkText}}"),"{{/GlobalErrorMessageLink}}"),message:c.createElement(c.Fragment,null,"{{#GlobalErrorMessage}}","{{GlobalErrorMessage}}","{{/GlobalErrorMessage}}","{{^GlobalErrorMessage}}",S,"{{/GlobalErrorMessage}}"),onRefresh:E}),this.renderFooter()),"{{/GlobalErrorType_LoginPrompt}}","{{/errors}}","{{^errors}}",this.renderReply(this.props.reply,!1),"{{/errors}}","{{/Row}}","{{^Row}}",this.renderFallbackErrorDiv(),"{{/Row}}"),c.createElement("div",{placeholder:""},c.createElement("div",{style:{display:"flex",justifyContent:"center",height:"200px"}})),c.createElement("div",{fallback:""},this.renderFallbackErrorDiv())),c.createElement("amp-img",{height:"1",width:"1",src:this.props.ampTrackingUrl}))}}]),a}(c.Component);t.default=A},840512:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.InputType=void 0;var r,o=n(a(856690)),s=n(a(689728)),l=n(a(861655)),u=n(a(994993)),c=n(a(73808)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.InputType=r,function(e){e.DEFAULT="Default",e.SELECTOR="Selector"}(r||(t.InputType=r={}));var m="AMP.setState({validating: true, firstChanged: true, changed: true}),rowForm.submit",v=function(e){(0,l.default)(a,e);var t=f(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"renderLabel",value:function(){return p.createElement("label",{htmlFor:"column-".concat(this.props.index),className:"display-label","data-amp-bind-text":this.getLabel()})}},{key:"getValue",value:function(){return"(".concat(this.getColumnBindSelector()," ? ").concat(this.getColumnBindSelector(),'.Value : "{{Value}}")')}},{key:"getLabel",value:function(){return"(".concat(this.getColumnBindSelector()," ? ").concat(this.getColumnBindSelector(),'.Label : "{{Label}}")')}},{key:"isDisabled",value:function(){return"(".concat(this.getColumnBindSelector()," ? !").concat(this.getColumnBindSelector(),".Editable : !{{Editable}})")}},{key:"getColumnBindSelector",value:function(){var e=this.props.dataValue;return'localState.Rows.Row["'.concat(e.Name,'"]')}},{key:"getInputProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.DEFAULT,t={};return e===r.SELECTOR?t.on="select:"+m:t.on="change:"+m,t["data-amp-bind-disabled"]="disabled || ".concat(this.isDisabled()),t}},{key:"render",value:function(){var e=this.props,t=e.index,a=e.dataValue,n=e.opts,i=e.isInitialRender;return p.createElement("div",{"data-amp-bind-class":'(errors["'.concat(a.Name,'"] ? "error-text-field " : "") + "md-textfield"'),className:"md-textfield"},this.renderLabel(),p.createElement("input",Object.assign({id:"column-".concat(t),value:i?"":"{{Value}}",name:a.Name,className:"md-textfield-input input","data-amp-bind-value":"".concat(this.getValue())},n,this.getInputProps())))}}]),a}(p.Component);t.default=v},187195:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),o=n(a(689728)),s=n(a(861655)),l=n(a(994993)),u=n(a(73808)),c=f(a(667294)),p=f(a(840512));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var v=function(e){(0,s.default)(a,e);var t=m(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.index,a=e.dataValue,n=e.opts;return c.createElement("div",null,this.renderLabel(),c.createElement("amp-selector",Object.assign({id:"column-".concat(t),"aria-label":"{{Label}} selector",class:"button-selector",layout:"container",name:a.Name},n,this.getInputProps(p.InputType.SELECTOR)),"{{#Items}}","{{#Selected}}",c.createElement("button",{className:"toggle-button",option:"{{Value}}",type:"button",selected:!0},"{{Label}}"),"{{/Selected}}","{{^Selected}}",c.createElement("button",{className:"toggle-button",option:"{{Value}}",type:"button"},"{{Label}}"),"{{/Selected}}","{{/Items}}"))}}]),a}(p.default);t.default=v},240686:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),o=n(a(689728)),s=n(a(861655)),l=n(a(994993)),u=n(a(73808)),c=f(a(667294)),p=f(a(840512));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var v=function(e){(0,s.default)(a,e);var t=m(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.index,a=e.dataValue,n=e.opts;return c.createElement("div",null,this.renderLabel(),c.createElement("amp-selector",Object.assign({id:"column-".concat(t),class:"multi-selector radio-selector",layout:"container",name:a.Name,multiple:""},n,this.getInputProps(p.InputType.SELECTOR),{"aria-label":"Checkboxes for {{Label}}"}),"{{#Items}}","{{#Selected}}",c.createElement("div",{className:"checkbox-option",option:"{{Value}}",selected:!0},c.createElement("div",{className:"checkbox"},c.createElement("amp-img",{alt:"{{Label}} checkbox icon",class:"checkmark",src:"https://www.gstatic.com/images/icons/material/system/2x/done_white_24dp.png",height:"18",width:"18"})),c.createElement("span",null,"{{Label}}")),"{{/Selected}}","{{^Selected}}",c.createElement("div",{className:"checkbox-option",option:"{{Value}}"},c.createElement("div",{className:"checkbox"},c.createElement("amp-img",{alt:"{{Label}} checkbox icon",class:"checkmark",src:"https://www.gstatic.com/images/icons/material/system/2x/done_white_24dp.png",height:"18",width:"18"})),c.createElement("span",null,"{{Label}}")),"{{/Selected}}","{{/Items}}"))}}]),a}(p.default);t.default=v},606571:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),o=n(a(689728)),s=n(a(861655)),l=n(a(994993)),u=n(a(73808)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294)),p=n(a(840512)),d=n(a(187195));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var v=function(e){(0,s.default)(a,e);var t=m(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.index,a=e.dataValue,n=e.opts;return"Dropdown"===a.InputMode?c.createElement("div",{className:"md-select-container"},this.renderLabel(),c.createElement("select",Object.assign({id:"column-".concat(t),className:"md-select input",name:a.Name},n,this.getInputProps()),"{{#Value}}",c.createElement("option",{className:"md-select-option",value:""}),"{{/Value}}","{{^Value}}",c.createElement("option",{className:"md-select-option",value:"",selected:!0}),"{{/Value}}","{{#Items}}","{{#Selected}}",c.createElement("option",{className:"md-select-option",value:"{{Value}}",selected:!0},"{{Label}}"),"{{/Selected}}","{{^Selected}}",c.createElement("option",{className:"md-select-option",value:"{{Value}}"},"{{Label}}"),"{{/Selected}}","{{/Items}}")):c.createElement(d.default,{dataValue:a,index:t,opts:n})}}]),a}(p.default);t.default=v},875226:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),o=n(a(689728)),s=n(a(861655)),l=n(a(994993)),u=n(a(73808)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var f=function(e){(0,s.default)(a,e);var t=d(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){return c.createElement("amp-img",{alt:"{{Label}} image",class:"row-image contain",role:"button",tabindex:"0",on:"tap:lightbox",src:"{{Value}}",height:"100",width:"100"})}}]),a}(c.Component);t.default=f},173954:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),o=n(a(689728)),s=n(a(861655)),l=n(a(994993)),u=n(a(73808)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var f=function(e){(0,s.default)(a,e);var t=d(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props.viewContainerClassName;return c.createElement("div",{id:"viewContainerLoading",className:"".concat(e," loading"),hidden:!0},c.createElement("amp-img",{alt:"Loading...",src:"https://www.gstatic.com/cloudssh/images/theia_progress_spinner_color.gif",height:"50",width:"50"}))}}]),a}(c.Component);t.default=f},990022:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),o=n(a(689728)),s=n(a(861655)),l=n(a(994993)),u=n(a(73808)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var f=function(e){(0,s.default)(a,e);var t=d(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e,t=this.props,a=t.appTemplate,n=t.primaryCta,i=t.onRefresh,r=t.message,o=null===(e=a.Presentation)||void 0===e?void 0:e.LogoUrl,s=a.ShortName,l=a.Title;return c.createElement("div",{className:"login-prompt-container"},c.createElement("div",{className:"app-information-container center-content"},o&&c.createElement("amp-img",{alt:"App logo",class:"app-logo contain",src:o,height:"48",width:"48"}),c.createElement("div",{className:"app-info"},c.createElement("div",{className:"header"},c.createElement("p",{className:"app-title"},s),c.createElement("amp-img",{alt:"Refresh",title:"Refresh",class:"refresh-icon",src:"https://www.appsheet.com/Content/styles/_shared/external/font-awesome/raster/regular/redo.png",height:"20",width:"20",on:i,role:"button",tabindex:"0"})),c.createElement("p",{className:"subtitle"},l))),c.createElement("p",null,r),n)}}]),a}(c.Component);t.default=f},225718:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),o=n(a(689728)),s=n(a(861655)),l=n(a(994993)),u=n(a(73808)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294)),p=n(a(840512)),d=n(a(875226));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var v=function(e){(0,s.default)(a,e);var t=m(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e,t=this.props.dataValue;return e="Image"===t.Type?c.createElement(d.default,null):"Url"===t.Type?c.createElement("a",{href:"{{Value}}"},"{{Value}}"):"File"===t.Type||"App"===t.Type?c.createElement("a",{href:"{{Value}}"},"{{DisplayValue}}"):c.createElement("span",{"data-amp-bind-text":this.getValue()},"{{Value}}"),c.createElement("div",{"data-amp-bind-hidden":"!".concat(this.getValue())},this.renderLabel(),c.createElement("span",{className:"display-value"},e))}}]),a}(p.default);t.default=v},801269:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),o=n(a(689728)),s=n(a(861655)),l=n(a(994993)),u=n(a(73808)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294)),p=n(a(875226));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var m=function(e){(0,s.default)(a,e);var t=f(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){return c.createElement("div",{className:"show-type"},"{{#ShowType_Section_Header}}",c.createElement("span",{className:"section-header"},"{{Value}}"),"{{/ShowType_Section_Header}}","{{#ShowType_Text}}",c.createElement("span",{className:"display-value"},"{{Value}}"),"{{/ShowType_Text}}","{{#ShowType_Url}}",c.createElement("a",{href:"{{Value}}"},"{{Value}}"),"{{/ShowType_Url}}","{{#ShowType_Image}}",c.createElement(p.default,null),"{{/ShowType_Image}}","{{#ShowType_Video}}",c.createElement("a",{href:"{{Value}}"},"Play video"),"{{/ShowType_Video}}")}}]),a}(c.Component);t.default=m},910643:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BannerType=t.BANNER_MESSAGE_CSS_CLASS=t.BANNER_CTA_CSS_CLASS=void 0;var r,o=n(a(856690)),s=n(a(689728)),l=n(a(861655)),u=n(a(994993)),c=n(a(73808)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.BannerType=r,function(e){e[e.WARNING=0]="WARNING",e[e.ERROR=1]="ERROR"}(r||(t.BannerType=r={}));t.BANNER_MESSAGE_CSS_CLASS="banner-message";var m="banner-cta";t.BANNER_CTA_CSS_CLASS=m;var v=function(e){(0,l.default)(a,e);var t=f(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"render",value:function(){var e=this.props,t=e.bannerType,n=e.bannerMessage,i=e.bannerCta,o=e.helpCenterArticleLink,s=e.hidden,l={};return s&&(l.hidden=!0),p.createElement("div",Object.assign({},l,{"data-amp-bind-hidden":s,className:"top-banner ".concat(this.getBannerTypeCssClass(t))}),this.renderIcon(t),t===r.ERROR&&p.createElement("h3",null,"Something went wrong"),n,null!=i?i:a.renderFallbackCta(o))}},{key:"renderIcon",value:function(e){switch(e){case r.ERROR:return p.createElement("amp-img",{height:"20",width:"20",src:"https://ssl.gstatic.com/images/icons/material/system/1x/error_outline_red_48dp.png"});case r.WARNING:return p.createElement("amp-img",{height:"20",width:"20",src:"https://ssl.gstatic.com/images/icons/material/system/1x/warning_amber_gm_yellow700_48dp.png"})}return p.createElement(p.Fragment,null)}},{key:"getBannerTypeCssClass",value:function(e){switch(e){case r.ERROR:return"error";case r.WARNING:return"warning"}return""}}],[{key:"renderFallbackCta",value:function(e){return p.createElement("p",{className:m},p.createElement("a",{href:e},"Learn more"))}}]),a}(p.Component);t.default=v},233330:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(856690)),r=n(a(689728)),o=a(604495),s=n(a(496486)),l=function(){function e(){(0,i.default)(this,e)}return(0,r.default)(e,null,[{key:"getViewNamesToExclude",value:function(e,t){var a=e.isSlice(t);return e.views.filter((function(n){var i=n.TableOrFolderName,r=e.sourceTableName(i);return!(!a||t===i)||(!a&&r!==t||!o.SUPPORTED_VIEW_TYPES.includes(n.Action))})).map((function(e){return e.Name}))}},{key:"getUnsupportedColumnsForView",value:function(t,a){var n=e.getViewObject(t,a),i=n.TableOrFolderName,r=t.columnsFor(i),l=n.Action;if("detail"===l){var u=n.ViewDefinition.QuickEditColumns||[];return r.filter((function(e){return u.includes(e.Name)&&!o.SUPPORTED_COLUMN_TYPES.includes(e.Type)}))}if("form"===l){var c=n.ViewDefinition.ColumnOrder||[],p=t.schemaByTableOrSliceName(i),d=t.columnNames(i,p),f=!c.length||s.default.includes(c,"**all other columns**")?d:d.filter((function(e){return s.default.includes(c,e)}));return r.filter((function(t){return e.IsColumnUpdatable(t)&&f.includes(t.Name)&&!o.SUPPORTED_COLUMN_TYPES.includes(t.Type)}))}return[]}},{key:"IsColumnUpdatable",value:function(e){return!e.IsVirtual&&!e.IsReadOnly&&!e.IsSys}},{key:"getViewObject",value:function(e,t){return e.views.find((function(e){return e.Name===t}))}},{key:"isValidView",value:function(t,a){var n=e.getViewObject(t,a);if(null==n)return!1;var i=e.getViewNamesToExclude(t,n.TableOrFolderName),r=e.getUnsupportedColumnsForView(t,a);return!i.includes(a)&&0===r.length}},{key:"getTableViews",value:function(e,t){return e.views.filter((function(e){return e.TableOrFolderName===t}))}},{key:"getDefaultView",value:function(t,a){var n=e.getTableViews(t,a).filter((function(e){return"detail"===e.Action||"form"===e.Action}));if(0===n.length)return"";var i=n.find((function(a){return e.isValidView(t,a.Name)&&"detail"===a.Action&&"System"===a.CreatedBy}));return i?i.Name:n[0].Name}},{key:"getInvalidViewErrorMessage",value:function(t,a){var n=e.getViewObject(t,a);if(null==n)return"The selected view does not exist.";var i=e.getViewNamesToExclude(t,n.TableOrFolderName),r=e.getUnsupportedColumnsForView(t,a);return i.includes(a)?"The selected view is not supported for Dynamic Emails. The view must be of type: "+o.SUPPORTED_VIEW_TYPES.join(", "):r.length>0?"The selected view is not supported for Dynamic Emails. The view contains the following columns that are editable but are currently unsupported in a Dynamic Email: "+r.map((function(e){return e.Name+" ("+e.Type+")"})).join(", "):""}}]),e}();t.default=l},229183:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.trendlineTypes=t.labelTypes=t.getAllowedChartColumnTypes=t.colSeries=t.aggregateTypes=void 0;var i=n(a(496486)),r=a(150198),o=["Histogram","Horizontal Histogram","Aggregate PieChart","Aggregate DonutChart","Aggregate Number"];t.aggregateTypes=o;t.trendlineTypes=["Histogram","Horizontal Histogram","Col Series"];t.labelTypes=["PieChart","DonutChart","Aggregate PieChart","Aggregate DonutChart"];t.colSeries=["Col Series","Col Series [Stack]","Col Series [Line]"];t.getAllowedChartColumnTypes=function(e){return i.default.includes(o,e)?[]:i.default.keys(r.numberTypes)}},334524:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.useAppDispatch=t.editorMiddleware=t.default=void 0;var i=a(664202),r=n(a(753894)),o=a(197170),s=a(929804),l=a(639257),u=n(a(548577)),c=a(381053),p=a(478969),d=(0,i.applyMiddleware)(r.default,l.patchMiddleware,c.suggestionsApiMiddleware,p.appEditMiddleware);t.editorMiddleware=d;var f=(0,s.composeWithDevTools)((0,i.compose)(d)),m=(0,i.createStore)(u.default,f);t.default=m;t.useAppDispatch=function(){return(0,o.useDispatch)()}},639257:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.patchMiddleware=t.default=void 0;var i=n(a(496486)),r=a(55836),o=a(51424),s=a(486097),l=a(521273),u=a(49835),c=a(354547),p=n(a(66665)),d=n(a(434187)),f=a(251347),m=a(285697),v=a(545180),h=n(a(593186)),g=a(637491),y=a(943942);function S(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw r}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var A,T=/^\d+$/,N=f.dynamicRollouts.includeByUserId("AutoResolution")||f.dynamicRollouts.includeByUserId("FixColumnMetaDataRegex")?y.isColumnMetadata.New:y.isColumnMetadata.Old,_=function(e,t){var a,n=[],i=S((0,r.compare)(e,t));try{for(i.s();!(a=i.n()).done;){var o=a.value,s=o.path,l=o.op,u=o.value;if(s){var c=s.substring(s.lastIndexOf("/")+1,s.length);c.startsWith("_")||"add"===l&&N.test(s)||("add"!==l||null!=u||T.test(c))&&("replace"===l&&null==u&&(o.op="remove"),n.push(o))}}}catch(e){i.e(e)}finally{i.f()}return n},b=i.default.debounce((function(e,t,a,n,i){var r=_(t,a);e((0,u.submitWorkingVersion)(t,r,n,i))}),3e3,{maxWait:1e4}),w=function(e){return function(t){return function(a){var n,i,r,m,h=t(a),g=e.getState();if(a.type===u.workingVersionActionTypes.WORKING_VERSION_FLUSH)return A.flush(),h;if(a.type===u.workingVersionActionTypes.WORKING_VERSION_CANCEL)return A.cancel(),h;var y,S=null===(n=p.default.currentApp(g))||void 0===n?void 0:n.appTemplate,E=(0,o.getLastSavedAppTemplate)();if(!S||!E)return h;if(f.dynamicRollouts.includeByUserId("AutoResolution")&&(null!=(y=a.type===l.globalActionTypes.UNDO?null===(i=p.default.nextApp(g))||void 0===i?void 0:i.appTemplate:null===(r=p.default.previousApp(g))||void 0===r?void 0:r.appTemplate)||(y=E),g.wasm.isWasmLoaded&&function(e){return e.type in l.globalActionTypes&&e.type!==l.globalActionTypes.RESET||e.type in s.appTemplateActionTypes&&e.type!==s.appTemplateActionTypes.LOADED_RESET}(a)&&S!==y&&(A.setAppTemplateJson(y,S),d.default.isInUXViewsTab()))){var T=(0,v.getCurrViewIndex)(g);e.dispatch((0,v.fetchResolvedColumns)(T>=0?T:void 0))}if(!function(e,t){if(t.type===s.appTemplateActionTypes.SAVE_FAILED)return!0;if(!f.dynamicRollouts.includeByOwnerId("ActionRequiresSubmitAllTabs")){var a=(0,c.getCurrentTabName)(e);if("Automation"!==a&&"Data"!==a)return!1}return!!(t.type in l.globalActionTypes&&t.type!==l.globalActionTypes.RESET||t.type in s.appTemplateActionTypes)}(g,a))return h;var N=null===(m=g.editorSettings)||void 0===m?void 0:m.workingVersion,_=null==N?void 0:N.version,b=(null==N?void 0:N.pendingSync)||(null==N?void 0:N.needsSync);if(S!==E||_||b){var w=new Date;A.submitDiff(e.dispatch,E,S,_,w),e.dispatch((0,u.workingVersionNeedsSync)(!0))}return h}}};t.patchMiddleware=w;var O=A={patchMiddleware:w,submitDiff:b,cancel:function(){return b.cancel()},flush:function(){return b.flush()},setAppTemplateJson:function(e,t){var a=_(e,t);if(0!==a.length){var n=performance.now(),i=JSON.stringify(a);m.EditorGlobals.patchAppTemplate(i).then((function(){return(0,g.recordWasmLatency)(n,{FunctionName:"Patch",Status:"success"})})).catch((function(e){h.default.ReportError({errorMessage:"Failed to send patch to WASM",e:e}),(0,g.recordWasmLatency)(n,{FunctionName:"Patch",Status:"failure"})}))}}};t.default=O},214453:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.apiKeys=void 0;var i=n(a(600861));t.apiKeys=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_API_KEYS":return t.apiKeys;case"CREATE_API_KEY":return e.concat([t.apiKey]);case"UPDATE_API_KEY":var a=e.findIndex((function(e){return e.ApiKey===t.apiKey.ApiKey}));return a>=0?[].concat((0,i.default)(e.slice(0,a)),[t.apiKey],(0,i.default)(e.slice(a+1))):e;default:return e||[]}}},998466:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.appTemplate=t.APP_TEMPLATE_INITIAL_STATE=void 0;var i=a(354547),r=n(a(113861)),o=n(a(796586)),s=n(a(692090)),l=n(a(66665)),u=n(a(434187)),c=a(486097),p=n(a(496486)),d=a(49835),f=a(729633),m=a(604246),v=a(930908),h=a(445333),g=a(844165),y=a(537057),S=a(357794),E=a(993625),A=a(723439),T=a(115634),N=a(476218),_=a(804172),b=a(539969),w=a(542177),O=a(838484),D=a(684690),C=a(628872),P=a(408602),I=a(959532),R=a(812711),k=a(195434),M=a(257248),V=a(895706),F=a(568839),L=a(855002),j=a(400782),B=a(835625);window.okToShowSaveButton=!1;var x=function(e,t,a,n,i){var r;if((0,m.appSet)(e,t,a,n),t.startsWith("Presentation.Controls")&&(0,m.appSet)(e,"Presentation.MenuEntries",e.extractMenuEntries()),!i&&t.endsWith(".Name")){var o=e.get(t),s=(null===(r=e.reduxRootStateDuringDispatch().editorSettings)||void 0===r?void 0:r.location)||[];u.default.setLocationEntity(o,s)}},U=function(e,t){var a;if("SET_EDITOR_OPTION"===t.type)x(e,t.name,t.value,t.ignoreConstraints,t.skipNavigation);else if("SET_EDITOR_OPTIONS"===t.type)Object.keys(t.nameValueDict).forEach((function(a){x(e,a,t.nameValueDict[a],t.ignoreConstraints,t.skipNavigation)}));else if("CHANGE_SOURCE"===t.type){var n=s.default.getSourceById(t.sourceId,e.reduxRootStateDuringDispatch().sources);n&&((0,m.appSet)(e,t.name+".Source",n.TableSource,!0),(0,m.appSet)(e,t.name+".SourcePath",n.SourcePath,!0),(0,m.appSet)(e,t.name+".ProviderName",n.ProviderName,!0),(0,m.appSet)(e,t.name+".LocaleName",n.LocaleName,!0),(0,m.appSet)(e,t.name+".DataSourceName",n.DataSourceName,t.ignoreConstraints))}else if("ADD_TABLE"===t.type)(0,v.addTable)(e,t.name,t.value,t.skipNavigation,t.saveChanges);else if("ADD_TABLES"===t.type)t.tables.forEach((function(t){(0,v.addTable)(e,"AppData.DataSets",t,!0,!1)}));else if("ADD_NEW_COLUMN"===t.type)(0,h.addNewColumn)(e,t.name,t.schema,t.value,t.skipNavigation);else if("ADD_VIRTUAL_COLUMN"===t.type)(0,g.addVirtualColumn)(e,t.name,t.schema,t.value,t.skipNavigation);else if("ADD_SLICE"===t.type)(0,y.addSlice)(e,t.name,t.value,t.skipNavigation);else if("ADD_PREDICTIVE_MODEL"===t.type)(0,S.addPredictiveModel)(e,t.name,t.value);else if("ADD_OCR_MODEL"===t.type)(0,E.addOcrModel)(e,t.name,t.value);else if("ADD_ACTION"===t.type||"ADD_AUTOMATION_ACTION"===t.type)a=(0,A.addAction)(e,t.name,t.value,"ADD_AUTOMATION_ACTION"===t.type,t.skipNavigation);else if("ADD_TASK"===t.type)(0,T.addTask)(e,t.name,t.value,t.skipNavigation);else if("ADD_VIEW"===t.type)a=(0,N.addView)(e,t.name,t.value,t.skipNavigation),(0,m.appSet)(e,"Presentation.MenuEntries",e.extractMenuEntries());else if("ADD_FORMAT_RULE"===t.type)(0,_.addFormatRule)(e,t.name,t.value,t.skipNavigation);else if("ADD_SORT_BY_ITEM"===t.type){var r=(e.get(t.name)||[]).map((function(e){return e.Column})),l={Column:e.defaultColumn(t.sourceTable,o.default.schemaFor("SortInfo").property("Column"),{excludeColumns:r}),Order:"Ascending"};(0,m.appAppend)(e,t.name,l)}else if("ADD_GROUP_BY_ITEM"===t.type){var u=(e.get(t.name)||[]).map((function(e){return e.Column})),c={Column:e.defaultColumn(t.sourceTable,o.default.schemaFor("GroupInfo").property("Column"),{excludeColumns:u}),Order:"Ascending"};(0,m.appAppend)(e,t.name,c)}else if("ADD_BCC_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,"")}else if("ADD_CC_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,"")}else if("ADD_COLUMN_TO_LIST"===t.type){var p=e.get(t.name)||[],d=e.defaultColumn(t.sourceTable,t.schema,{allowedTypes:t.value?t.value.allowedTypes:[],excludeColumns:p});d&&(0,m.appAppend)(e,t.name,d)}else if("ADD_ACTION_ITEM_TO_LIST"===t.type){var U={ActionName:e.defaultAction(t.sourceTable,t.schema)||""};(0,m.appAppend)(e,t.name,U)}else if("ADD_GROUPINFO_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,{AuthGroup:null,AuthGroupRole:"User"})}else if("ADD_ACTION_TO_LIST"===t.type){var W=e.defaultAction(t.sourceTable,t.schema);(0,m.appAppend)(e,t.name,W)}else if("ADD_ASSIGNMENT_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,{ColumnToEdit:"",NewColumnValue:""})}else if("ADD_INPUT_PARAMETER_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,{InputName:"",InputValue:""})}else if("ADD_COLOR_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,"red")}else if("ADD_COUNTRYCODE_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,"")}else if("ADD_EMAIL_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,"")}else if("ADD_HEADER_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,"")}else if("ADD_APPS_SCRIPT_PARAMETER_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,"")}else if("ADD_MEDIAURL_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,"")}else if("ADD_OTHERATTACHMENT_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,"")}else if("ADD_PHONE_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,"")}else if("ADD_CHAT_SPACE_ID_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,"")}else if("ADD_SLASH_COMMAND_TO_LIST"===t.type){var G={SlashCommand:e.nextSlashCommand(),ViewName:null};(0,m.appAppend)(e,t.name,G)}else if("ADD_TO_TO_LIST"===t.type){(0,m.appAppend)(e,t.name,"")}else if("ADD_VIEW_ENTRY_ITEM"===t.type){var H=e.defaultView(o.default.schemaFor("ViewEntry").property("ViewName"));if(""!==H){var q={ViewName:H,ViewSize:"Large"};(0,m.appAppend)(e,t.name,q)}}else if("ADD_PARTITION_ITEM"===t.type){(0,m.appAppend)(e,t.name,{Name:"",Value:""})}else"REARRANGE_MENU"===t.type?t.menuOrder.forEach((function(t){(0,m.appSet)(e,"Presentation.Controls["+t.viewIndex+"].ViewDefinition.MenuOrder",t.orderValue)})):"REARRANGE_ACTIONS"===t.type?t.actionOrder.forEach((function(t){(0,m.appSet)(e,"AppData.DataActions["+t.actionIndex+"].ActionOrder",t.orderValue)})):"REARRANGE_ENTITIES"===t.type?t.name&&t.itemOrder.forEach((function(t){(0,m.appSet)(e,"Presentation.FormatRules["+t.itemIndex+"].RuleOrder",t.orderValue)})):"APPLY_SUGGESTION"===t.type?(0,b.applySuggestion)(e,t.suggestion,t.options):"ADD_APP_PROCESS"===t.type?(0,w.addAppProcess)(e,t.name,t.value,t.skipNavigation):"CREATE_PROCESS_FOR_BOT"===t.type?(0,O.createProcessForBot)(e,t.name,t.skipNavigation):"CREATE_EVENT_FOR_BOT"===t.type?(0,D.createEventForBot)(e,t.name,t.value):"CREATE_ACTION_FOR_NODE"===t.type?(0,C.createActionForNode)(e,t.name,t.value):"CREATE_TASK_FOR_NODE"===t.type?(0,I.createTaskForNode)(e,t.name,t.taskProperties):"ADD_APP_BOT"===t.type?!t.value&&e.bots.some((function(e){return!!e._uninitialized}))||(0,R.addAppBot)(e,t.name,t.value,t.cloneBotChildren):"ADD_APP_EVENT"===t.type?(0,k.addAppEvent)(e,t.name,t.value):"COMMIT_NEW_NODE"===t.type?(0,M.commitNewNode)(e,t.name,t.value):"PATCH_NODE"===t.type?(0,V.patchNode)(e,t.name,t.value):"INSERT_NEW_NODE"===t.type?(0,F.insertNewNode)(e,t.name,t.value):"DELETE_NODE"===t.type?(0,L.deleteNode)(e,t.name):"ADD_ARGUMENT_TO_RETURN_NODE"===t.type?(0,m.appAppend)(e,t.name,{ColumnToEdit:"",NewColumnValue:""}):"CREATE_ACTION_FOR_TASK"===t.type?(0,j.createActionForTask)(e,t.name,t.value):"ADD_PROCESS_TO_TRIGGER"===t.type?(0,m.appAppend)(e,t.name,{ProcessName:null}):"CREATE_ACTION_FOR_CHAT"===t.type&&(0,P.createActionForChat)(e,t.name);var K=t.name;if(a)if("AppData.DataActions"===K){var Y=e.viewsOfType(["detail"]).filter((function(e){return e.TableOrFolderName===a.Table}));Y.length>0&&(K="Presentation.Controls["+Y[0]._index.toString()+"]")}else if("Presentation.Controls"===K){var J=e.entityByName(f.TemplatePath.Views,a.Name);(null==J?void 0:J._path)&&(K=J._path)}e.appTemplate=(0,B.updateDeepLink)(e.appTemplate,K,t.suggestion?t.suggestion.DeepLink:null),e.appTemplate&&function(e,t){if(t.recordHistory){var a=e._deepLink;(0,i.reflectChangeInEmulator)(e,a)}}(e.appTemplate,t)},W={current:0,history:[],numChanges:0};t.APP_TEMPLATE_INITIAL_STATE=W;t.appTemplate=function(e,t,a){if(!e&&"LOADED_RESET"!==t.type)return W;e||(e=W);var n=t.type===d.workingVersionActionTypes.WORKING_VERSION_REPLACE_LAST_SAVED;if((n||"LOADED_RESET"===t.type)&&p.default.isObject(t.appTemplate)){var i=new r.default(t.appTemplate);return l.default.updateLastSavedApp(e,i,!n)}var o=r.default.current(a);if(!function(e,t){return"SET_EDITOR_OPTION"===t.type?e.get(t.name)!==t.value:t.type in c.appTemplateActionTypes}(o,t))return e;var s=new r.default(o.appTemplate);return s.__DO_NOT_USE__rootState=a,U(s,t),s.__DO_NOT_USE__rootState=void 0,t.recordHistory?(window.okToShowSaveButton=!0,l.default.add(e,s,t,a.editorSettings.historyLimit)):l.default.replaceCurrent(e,s,t)}},259230:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.authDomainSources=void 0;var i=n(a(496486)),r=a(978002);t.authDomainSources=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===r.authDomainSourceActionTypes.UPDATE_AUTH_DOMAIN_SOURCES?i.default.concat(e,t.sources):e||[]}},226792:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.authDomains=void 0;var n=a(474592);t.authDomains=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===n.authDomainActionTypes.UPDATE_AUTH_DOMAINS?t.domains:e||[]}},839742:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.authGroups=void 0;var n=a(996978);t.authGroups=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===n.authGroupsActionTypes.UPDATE_AUTH_GROUPS?t.groups:e||[]}},801503:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.automationUI=t.AUTOMATION_UI_INITIAL_STATE=void 0;var n=a(501432),i={currentBot:"",showSettingsFromBot:!0};t.AUTOMATION_UI_INITIAL_STATE=i;t.automationUI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.AutomationUiActionTypes.SET_OPENED_BOT:return Object.assign(Object.assign({},e),{currentBot:"botpath"in t?t.botpath:e.currentBot});case n.AutomationUiActionTypes.USE_BOT_FOR_SETTINGS:return Object.assign(Object.assign({},e),{showSettingsFromBot:"useBotForSettings"in t?t.useBotForSettings:e.showSettingsFromBot});default:return e||i}}},334692:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.setMessages=t.removeMessage=t.messengerReducer=t.getMessages=t.addUserMessage=void 0;var i=a(829829),r=n(a(365914)),o=a(883943),s=a(295523),l=a(65201),u=a(293379),c=a(521987),p=(0,i.createSlice)({name:"messenger",initialState:l.messengerInitialState,reducers:{removeMessage:function(e,t){l.messagesAdapter.removeOne(e.messages,t.payload)},setMessages:function(e,t){l.messagesAdapter.setMany(e.messages,t.payload)},addUserMessage:function(e,t){var a={type:"user",id:r.default.uuid(),content:(0,o.makeTextResponse)(t.payload||""),index:performance.now()};e.indexOfLastUserMessage=a.index,l.messagesAdapter.addOne(e.messages,a)}},extraReducers:function(e){e.addCase(u.startConversationSession.pending,(function(e){e.status=c.MessengerStatus.FETCHING_SESSION,l.messagesAdapter.removeAll(e.messages)})).addCase(u.startConversationSession.fulfilled,(function(e,t){e.status=c.MessengerStatus.SUCCESS,e.sessionId=t.payload.sessionId,t.payload.messages.map((function(t){var a={type:"agent",id:t.messageId&&t.messageId.length>0?t.messageId:r.default.uuid(),content:t,index:performance.now()};l.messagesAdapter.addOne(e.messages,a)}))})).addCase(u.startConversationSession.rejected,(function(e){e.retries<s.RETRY_COUNT-1?(e.retries++,e.status=c.MessengerStatus.INITIAL):(e.status=c.MessengerStatus.SESSION_ERROR,e.sessionId=void 0,l.messagesAdapter.setAll(e.messages,s.ERROR_MESSAGES))})).addCase(u.callDetectIntent.fulfilled,(function(e,t){e.status=c.MessengerStatus.SUCCESS,t.payload.messages.map((function(t){var a={type:"agent",id:t.messageId&&t.messageId.length>0?t.messageId:r.default.uuid(),content:t,index:performance.now()};l.messagesAdapter.addOne(e.messages,a)}))})).addCase(u.callDetectIntent.pending,(function(e){e.status=c.MessengerStatus.REQUEST_IN_PROGRESS})).addCase(u.callDetectIntent.rejected,(function(e){e.status=c.MessengerStatus.REQUEST_ERROR;var t={type:"agent",id:r.default.uuid(),content:(0,o.makeTextResponse)("There was an error. Please try again."),index:performance.now()};l.messagesAdapter.addOne(e.messages,t)})).addCase(u.callUpdateSession.fulfilled,(function(e,t){e.status=c.MessengerStatus.SUCCESS,t.payload.messages.map((function(t){var a={type:"agent",id:t.messageId&&t.messageId.length>0?t.messageId:r.default.uuid(),content:t,index:performance.now()};l.messagesAdapter.addOne(e.messages,a)}))})).addCase(u.callUpdateSession.rejected,(function(e){e.status=c.MessengerStatus.REQUEST_ERROR;var t={type:"agent",id:r.default.uuid(),content:(0,o.makeTextResponse)("Suggestion has been applied."),index:performance.now()};l.messagesAdapter.addOne(e.messages,t)}))}}),d=p.reducer;t.messengerReducer=d;var f=p.actions,m=f.removeMessage,v=f.setMessages,h=f.addUserMessage;t.addUserMessage=h,t.setMessages=v,t.removeMessage=m;var g=l.messagesAdapter.getSelectors((function(e){return e.messages})).selectAll;t.getMessages=g},293379:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.startConversationSession=t.callUpdateSession=t.callDetectIntent=void 0;var i=n(a(364687)),r=a(829829),o=a(197170),s=a(457470),l=a(149852),u=a(436435),c=n(a(593186)),p=a(308721),d=a(501432),f=a(160647),m=a(44617),v=a(95903),h=a(874898),g=function(e,t,a,n){return new(a||(a=Promise))((function(i,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},y=function(e){var t=!0;return m.dynamicRollouts.includeByUserId("LLMSwitch")&&(t=e.editorSettings.useLLM),t?["UseLLM"]:[]},S=(0,r.createAsyncThunk)("conversation/start-session",(function(e,t){var a=t.getState;return g(void 0,void 0,void 0,i.default.mark((function e(){var t,n,r,o,p,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,l.makeConversationClient)(),n=a(),r=u.appTemplateSelectors.currentAppId(n),o=u.appTemplateSelectors.currentAppTemplate(n),p=s.AppSheetConversationProto.StartSessionRequest.create({appId:r,appTemplateJson:JSON.stringify(o),features:y(a())}),e.prev=5,c.default.logToDevConsole("Start Session Request",p),e.next=9,t.startSession(p);case 9:return d=e.sent,c.default.logToDevConsole("Start Session Response",d),e.abrupt("return",d);case 14:throw e.prev=14,e.t0=e.catch(5),"Error calling start conversation session",c.default.ReportErrorOnce({errorMessage:"Error calling start conversation session",appId:(null==o?void 0:o.Id)||"",appVersion:(null==o?void 0:o.Version)||""}),e.t0;case 19:case"end":return e.stop()}}),e,null,[[5,14]])})))}));t.startConversationSession=S;var E=(0,r.createAsyncThunk)("conversation/update-session",(function(e,t){var a=t.getState;return g(void 0,void 0,void 0,i.default.mark((function t(){var n,r,o,p,d,f,m,v;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(0,l.makeConversationClient)(),r=a(),o=r.messengerState.sessionId){t.next=5;break}throw Error("cannnot call updateSession before conversation session has started");case 5:return p=u.appTemplateSelectors.currentAppTemplate(r),d=[],e.updateAppTemplate&&d.push(s.AppSheetConversationProto.SessionUpdate.create({appTemplateJson:JSON.stringify(p)})),e.suggestionId&&e.suggestionId.length>0&&d.push(s.AppSheetConversationProto.SessionUpdate.create({suggestionId:e.suggestionId})),f=u.appTemplateSelectors.currentAppId(r),m=s.AppSheetConversationProto.UpdateSessionRequest.create({sessionId:o,appId:f,sessionUpdates:d,features:y(a())}),t.prev=11,c.default.logToDevConsole("Update Session Request",m),t.next=15,n.updateSession(m);case 15:return v=t.sent,c.default.logToDevConsole("Update Session Response",v),t.abrupt("return",v);case 20:throw t.prev=20,t.t0=t.catch(11),"Error calling updateSession",c.default.ReportErrorOnce({errorMessage:"Error calling updateSession"}),t.t0;case 25:case"end":return t.stop()}}),t,null,[[11,20]])})))}));t.callUpdateSession=E;var A=(0,r.createAsyncThunk)("conversation/detect-intent",(function(e,t){return g(void 0,void 0,void 0,i.default.mark((function a(){var n,r,u,m,S,A,T,N;return i.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=(0,l.makeConversationClient)(),r=t.getState(),u=r.messengerState.sessionId,m=r.editingEmulator.currentAppComponent,u){a.next=6;break}throw Error("cannnot call detectIntent before conversation session has started");case 6:return S=s.AppSheetConversationProto.DetectIntentRequest.create({sessionId:u,queryInput:s.AppSheetConversationProto.QueryInput.create({text:s.AppSheetConversationProto.TextInput.create({value:e.utterance}),languageCode:"en"}),queryContext:s.AppSheetConversationProto.QueryContext.create({appContext:s.AppSheetConversationProto.AppContext.create({appComponentReference:m})}),features:y(r)}),a.prev=7,c.default.logToDevConsole("Detect Intent Request",S),a.next=11,n.detectIntent(S);case 11:return A=a.sent,c.default.logToDevConsole("Detect Intent Response",A),T=(0,h.extractAutoApplyResponses)(A),N=T.updatedResponse,T.itemsToAutoApply.forEach((function(e){return g(void 0,void 0,void 0,i.default.mark((function a(){var n,r,s,l;return i.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:"navigation"===e.type?(s=null===(r=null===(n=null==e?void 0:e.app)||void 0===n?void 0:n.appComponent)||void 0===r?void 0:r.componentId)?t.dispatch((0,f.setIdToBroadcast)(s)):c.default.ReportError({errorMessage:"DetectIntent response returned autoApply for a prompt that cannot be handled or component that cannot be found",autoApplyItem:e}):"suggestion"===e.type&&(t.dispatch((0,p.authorActionSuggestionAccepted)({suggestedAction:e})),l=function(){(0,o.batch)((function(){var a,n,i,r;t.dispatch(E({suggestionId:e.suggestionId||""})),t.dispatch((0,f.setReadyToBroadcast)(!0));var o=null!==(r=null===(i=null===(n=null===(a=null==e?void 0:e.action[0])||void 0===a?void 0:a.alterAppTemplate)||void 0===n?void 0:n.patches[0])||void 0===i?void 0:i.path)&&void 0!==r?r:"";o.endsWith("NeedsSchemaRegen")||t.dispatch((0,f.setPathToBroadcast)((0,v.convertEntityPathToName)(o)||null))}))},e.requiresSave?(0,o.batch)((function(){t.dispatch((0,f.setReadyToBroadcast)(!1)),t.dispatch((0,d.saveChanges)(!1,(function(e){e?l():t.dispatch((0,f.setReadyToBroadcast)(!0))})))})):l());case 1:case"end":return a.stop()}}),a)})))})),a.abrupt("return",N);case 18:throw a.prev=18,a.t0=a.catch(7),"Error calling detectIntent",c.default.ReportErrorOnce({errorMessage:"Error calling detectIntent"}),a.t0;case 23:case"end":return a.stop()}}),a,null,[[7,18]])})))}));t.callDetectIntent=A},874898:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.extractAutoApplyResponses=void 0;var i=n(a(496486));t.extractAutoApplyResponses=function(e){var t=i.default.cloneDeep(e),a=[];return e.messages.forEach((function(e,n){var i,r,o;if("suggestionResponse"===e.response&&e.suggestionResponse){var s=[];null===(i=e.suggestionResponse.suggestedActions)||void 0===i||i.forEach((function(e){e.skipUserConfirmation?a.push(Object.assign({type:"suggestion"},e)):s.push(e)})),t.messages[n].suggestionResponse.suggestedActions=s}else if("promptResponse"===e.response&&e.promptResponse){var l=[];null===(o=null===(r=e.promptResponse)||void 0===r?void 0:r.availablePrompts)||void 0===o||o.forEach((function(e){e.autoApply?a.push(Object.assign({type:"navigation"},e)):l.push(e)})),t.messages[n].promptResponse.availablePrompts=l}})),{updatedResponse:t,itemsToAutoApply:a}}},979193:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.editorSettingsImportValidators=t.editorSettings=void 0;var i=n(a(238416)),r=n(a(600861)),o=n(a(627424)),s=n(a(434187)),l=n(a(496486)),u=a(698753),c=a(44617),p=a(501432),d=a(32561),f=a(544891),m=a(285697),v=a(892148),h={byAppConfig:l.default.isObject,compactEntities:l.default.isBoolean,dismissedAutomationSettingsCallout:l.default.isBoolean,dismissedHomeSuggestions:l.default.isObject,entityFilters:l.default.isObject,expandAll:l.default.isBoolean,experiments:l.default.isObject,expressionTabIndex:l.default.isInteger,expressionTabIsOpen:l.default.isBoolean,historyLimit:function(e){return l.default.isNumber(e)&&l.default.isInteger(e)&&e>0},inNewEditorLayout:l.default.isBoolean,inNewExpressionAssistant:l.default.isBoolean,location:l.default.isArray,locationByApp:l.default.isObject,openAdvancedSettings:l.default.isBoolean,rightPanel:l.default.isObject,showSystemActions:l.default.isBoolean,showSystemRefViews:l.default.isBoolean,showSystemTasks:l.default.isBoolean,showLinkedEvents:l.default.isBoolean,showLinkedProcesses:l.default.isBoolean,useLLM:l.default.isBoolean,welcomeModals:l.default.isObject,whitelabelRequestStatus:function(){return!0}};t.editorSettingsImportValidators=h;t.editorSettings=function(e,t){var a,n=l.default.merge({},e);if(!e){n=l.default.cloneDeep(f.EDITOR_SETTINGS_INITIAL_STATE);var g=(0,u.getJSONFromLocalStorage)("editorSettings")||{};if(l.default.isPlainObject(g)){for(var y=0,S=Object.entries(h);y<S.length;y++){var E=(0,o.default)(S[y],2),A=E[0];(0,E[1])(g[A])&&(n[A]=g[A])}var T=v.WindowWrapper.location.hash?s.default.getLocationFromHash():n.locationByApp[window.APP_NAME]||n.location;n.location=s.default.setLocation(T,c.dynamicRollouts.includeByUserId("VFELayout")&&n.inNewEditorLayout,c.dynamicRollouts.includeByUserId("VFESecondaryNav")),n.locationByApp[window.APP_NAME]=n.location,(null===(a=n.welcomeModals)||void 0===a?void 0:a.appIds)||(n.welcomeModals.appIds={}),n.rightPanel.tabSettings.PREVIEW||(n.rightPanel.tabSettings.PREVIEW={formFactor:"mobile"}),n.rightPanel.tabSettings.AUTOMATION_SETTINGS||(n.rightPanel.tabSettings.AUTOMATION_SETTINGS={type:"step",nodePath:"",width:0})}m.EditorGlobals.readOnlyExperimentsCache=l.default.cloneDeep(n.experiments)}if(n.workingVersion=(0,d.workingVersion)(n.workingVersion,t),"SET_LOCATION"===t.type){if(!l.default.isEqual(null==e?void 0:e.location,t.value)){var N=s.default.setLocation(t.value,c.dynamicRollouts.includeByUserId("VFELayout")&&n.inNewEditorLayout,c.dynamicRollouts.includeByUserId("VFESecondaryNav"),t.replace);if(n.locationByApp[window.APP_NAME]=N,n.location=N,t.clear){var _=s.default.tabToSchemaPath(N);_&&_ in n.entityFilters&&(n.entityFilters[_]="")}}}else if("OPEN_EDITOR_SETTINGS"===t.type)n._open=t.value;else if("SET_OPEN_ADVANCED_SETTINGS"===t.type)n.openAdvancedSettings=t.value;else if("SET_EXPAND_ALL"===t.type)n.expandAll=t.value;else if("SET_COMPACT_ENTITIES"===t.type)n.compactEntities=t.value;else if("SET_ENTITY_FILTER"===t.type)n.entityFilters[t.path]=t.value,s.default.setLocationEntity(null,n.location);else if("CLEAR_ENTITY_FILTER"===t.type)n.entityFilters[t.path]="",s.default.setLocationEntity(null,n.location);else if("SET_SHOW_SYSTEM_ACTIONS"===t.type)n.showSystemActions=t.value;else if("SET_SHOW_SYSTEM_REFVIEWS"===t.type)n.showSystemRefViews=t.value;else if("SET_SHOW_LINKED_EVENTS"===t.type)n.showLinkedEvents=t.value;else if("SET_SHOW_LINKED_PROCESSES"===t.type)n.showLinkedProcesses=t.value;else if("SET_SHOW_SYSTEM_TASKS"===t.type)n.showSystemTasks=t.value;else if("SET_HISTORY_LIMIT"===t.type)n.historyLimit=t.value;else if("SET_WAITING_ON_SERVER"===t.type)n.waitingOnServer=t.value;else if("SET_WAITING_ON_EMULATOR"===t.type)n.waitingOnEmulator=t.value;else if("SHOW_SAVE_BUTTON"===t.type)window.okToShowSaveButton&&(t.value&&(window.WARN_BEFORE_LEAVING=!0),n.showSaveButton=t.value);else if("REDO"===t.type||"UNDO"===t.type||"DELETE"===t.type)n.showSaveButton=!0;else if("SET_SIGNIFICANT_CHANGE"===t.type)n.significantChange=t.value;else if("SET_KEEP_FORMSECTION_OPEN"===t.type)n.keepFormSectionOpen=t.value;else if("SET_POPUP"===t.type)n.popupMessage.message=t.value,n.popupMessage.type=t.popupType,n.popupMessage.duration=t.duration,n.popupMessage.show=!0,n.popupMessage.path=t.path||null,n.popupMessage.goBackPath=t.goBackPath||[],n.popupMessage.showSave=t.showSave||!1;else if("CLOSE_POPUP"===t.type)n.popupMessage.show=!1;else if("LOADING_SUGGESTIONS"===t.type)n.loadingSuggestions=!0;else if("DONE_LOADING_SUGGESTIONS"===t.type)n.loadingSuggestions=!1;else if("MERGE_RIGHT_PANEL_SETTINGS"===t.type)n.rightPanel=l.default.merge({},n.rightPanel,t.value);else if("SET_WHITELABEL_REQUEST_STATUS"===t.type)n.whitelabelRequestStatus=t.value;else if("DISMISS_AUTOMATION_SETTINGS_CALLOUT"===t.type)n.dismissedAutomationSettingsCallout=!!t.value;else if(t.type===p.editorSettingsActionTypes.SET_WELCOME_MODAL)n.welcomeModals.appIds[t.value]=!0;else if(t.type===p.editorSettingsActionTypes.SET_ALWAYS_HIDE_WELCOME_MODAL)n.welcomeModals.alwaysHide=t.value;else if(t.type===p.editorSettingsActionTypes.ADD_DISMISSED_SUGGESTED_NEXT_STEP)n.dismissedHomeSuggestions[t.appId]=[].concat((0,r.default)(n.dismissedHomeSuggestions[t.appId]||[]),[t.suggestionId]);else if(t.type===p.editorSettingsActionTypes.ADD_DISMISSED_APP_REFERENCE)n.dismissedAppSuggestions[t.appId]=[].concat((0,r.default)(n.dismissedAppSuggestions[t.appId]||[]),[t.suggestionId]);else if(t.type===p.editorSettingsActionTypes.SET_EXPERIMENT_INFO)n.experiments=Object.assign(Object.assign({},n.experiments),(0,i.default)({},t.experimentId,{variantId:t.variantId,hasBeenActivated:t.hasBeenActivated})),m.EditorGlobals.readOnlyExperimentsCache=l.default.cloneDeep(n.experiments);else if(t.type===p.editorSettingsActionTypes.SET_EXPRESSION_TAB_INDEX)n.expressionTabIndex=t.expressionTabIndex,n.expressionTabIsOpen=t.expressionTabIsOpen;else if(t.type===p.editorSettingsActionTypes.SET_IN_NEW_EDITOR_LAYOUT)n.inNewEditorLayout=t.value;else if(t.type===p.editorSettingsActionTypes.SET_IN_NEW_EXPRESSION_ASSISTANT)n.inNewExpressionAssistant=t.value;else if(t.type!==p.editorSettingsActionTypes.SET_IS_APP_OUT_OF_DATE||n.isAppOutOfDate===t.value||t.value&&n.waitingOnServer)if(t.type===p.editorSettingsActionTypes.ON_HASH_CHANGE){var b=t.value;b.startsWith("#")&&(b=b.slice(1));var w=b.split(".").map((function(e){return decodeURIComponent(e.replace(/\~\~/g,"."))})),O=s.default.getValidLocation(w,c.dynamicRollouts.includeByUserId("VFELayout")&&n.inNewEditorLayout,c.dynamicRollouts.includeByUserId("VFESecondaryNav"));l.default.isEqual(n.location,O)||(n.location=O,v.WindowWrapper.location.hash=O.join("."))}else if(t.type===p.editorSettingsActionTypes.SET_CHAT_APP_STEP)n.byAppConfig[t.appId]=Object.assign(Object.assign({},n.byAppConfig[t.appId]),{chatAppStep:t.value});else if(t.type===p.editorSettingsActionTypes.SET_APP_GCP_PROJECT_RESPONSE){var D=t.response,C=D.ProjectId,P=D.ServiceAccountEmail,I=D.HasCloudPlatformAuth;n.byAppConfig[t.appId]=Object.assign(Object.assign({},n.byAppConfig[t.appId]),{projectId:C,hasCloudPlatformAuth:I,serviceAccountEmail:P,projectLinked:!!C})}else t.type===p.editorSettingsActionTypes.SET_APP_GCP_PROJECT?n.byAppConfig[t.appId]=Object.assign(Object.assign({},n.byAppConfig[t.appId]),{projectId:t.projectId}):t.type===p.editorSettingsActionTypes.SET_APP_SERVICE_ACCOUNT_EMAIL?n.byAppConfig[t.appId]=Object.assign(Object.assign({},n.byAppConfig[t.appId]),{serviceAccountEmail:t.serviceAccountEmail}):t.type===p.editorSettingsActionTypes.SET_APP_GCP_PROJECT_TYPE?n.byAppConfig[t.appId]=Object.assign(Object.assign({},n.byAppConfig[t.appId]),{isAutoProject:t.isAutoProject}):t.type===p.editorSettingsActionTypes.SET_APP_GCP_PROJECT_LINKED?n.byAppConfig[t.appId]=Object.assign(Object.assign({},n.byAppConfig[t.appId]),{projectLinked:t.projectLinked}):t.type===p.editorSettingsActionTypes.SET_USE_LLM&&(n.useLLM=t.value);else n.isAppOutOfDate=t.value;return(0,u.setJSONLocalStorage)("editorSettings",n),n}},990028:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.editorViewStateReducer=void 0;var n=a(829829),i=a(501432),r=(0,n.createReducer)({},(function(e){e.addCase(i.toggleCollapsed,(function(e,t){var a=t.payload.entityPath;e[a]||(e[a]={}),e[a].isCollapsed=t.payload.isCollapsed})).addCase(i.setEntityOpen,(function(e,t){var a=t.payload.entityPath;e[a]||(e[a]={}),e[a].isOpen=t.payload.isOpen})).addCase(i.setShowSuggestions,(function(e,t){var a=t.payload.entityPath;e[a]||(e[a]={}),e[a].showSuggestions=t.payload.showSuggestions}))}));t.editorViewStateReducer=r},289789:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.globalReducer=void 0;var i=n(a(238416)),r=n(a(600861)),o=n(a(496486)),s=a(354547),l=n(a(66665)),u=n(a(113861)),c=a(501432),p=a(351928),d=a(835625);var f=function(e,t){var a=e.editorSettings,n=e.suggestions,f=e.appTemplate;if(!l.default.hasUndo(f)&&t.type===c.globalActionTypes.UNDO||!l.default.hasRedo(f)&&t.type===c.globalActionTypes.REDO)return e;var m,v=t.type===c.globalActionTypes.UNDO?0:-1,h=(m=t.type,[c.globalActionTypes.UNDO,c.globalActionTypes.REDO].includes(m)?l.default.currentAction(f,v):null);window.okToShowSaveButton=!0,t.type===c.globalActionTypes.UNDO?f=l.default.undo(f):t.type===c.globalActionTypes.REDO?f=l.default.redo(f):t.type===c.globalActionTypes.RESET&&(f=l.default.reset(f));var g=function(e,t,a){if(t&&"APPLY_SUGGESTION"===t.type&&o.default.isObject(t.suggestion)){var n=t.suggestion,s=n.Id,l=n.Category,u=e[l]||[],c=u.findIndex((function(e){return e.Id===s}));if(c>=0){var p=u[c];return Object.assign(Object.assign({},e),(0,i.default)({},l,[].concat((0,r.default)(u.slice(0,c)),[Object.assign(Object.assign({},p),{applied:a})],(0,r.default)(u.slice(c+1)))))}}return e}(n,h,t.type===c.globalActionTypes.REDO),y=a;if(t.notify){var S={show:!0,message:(0,p.getActionDescription)(h),type:t.type.toLowerCase(),path:(0,p.getActionPath)(h),duration:4e3,goBackPath:[],showSave:!1};y=Object.assign(Object.assign({},a),{popupMessage:S})}var E=l.default.currentTemplate(f);if(E){var A=l.default.currentAction(f),T=null==A?void 0:A.name,N=null==A?void 0:A.suggestion,_=new u.default(E);_.appTemplate=(0,d.updateDeepLink)(_.appTemplate,T,N?N.DeepLink:null);var b=_.appTemplate._deepLink;(0,s.reflectChangeInEmulator)(_.appTemplate,b)}return Object.assign(Object.assign({},e),{appTemplate:f,suggestions:g,editorSettings:y})};t.globalReducer=function(e,t){switch(t.type){case c.globalActionTypes.UNDO:case c.globalActionTypes.REDO:case c.globalActionTypes.RESET:return f(e,t)}return e}},548577:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(664202),i=a(289789),r=a(998466),o=a(861364),s=a(467624),l=a(138116),u=a(219078),c=a(979193),p=a(360735),d=a(990028),f=a(125253),m=a(331451),v=a(868522),h=a(226792),g=a(839742),y=a(259230),S=a(321057),E=a(801503),A=a(826866),T=a(184248),N=a(177060),_=a(214453),b=a(240721),w=a(663527),O=a(462019),D=a(381053),C=a(167408),P=a(704770),I=a(150464),R=a(545180),k=a(160647),M=a(334692),V={apiKeys:_.apiKeys,appTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.APP_TEMPLATE_INITIAL_STATE;return e},authDomains:h.authDomains,authDomainSources:y.authDomainSources,authGroups:g.authGroups,automationDebugger:S.automationDebugger,automationUI:E.automationUI,bannerAlert:p.bannerAlert,chatUI:A.chatUI,editingEmulator:k.editingEmulatorReducer,editorSettings:c.editorSettings,editorViewState:d.editorViewStateReducer,integrationChannels:T.integrationChannels,manage:f.manage,messengerState:M.messengerReducer,modalSettings:O.modalSettings,notifications:l.notifications,productTours:P.productToursReducer,readOnly:u.readOnly,signInAuthProviders:C.signInAuthProvidersReducer,sketch:N.sketch,sources:v.sources,subNavigation:I.subNavigation,suggestionApi:D.suggestionApiReducer,suggestions:o.suggestions,suggestionsBackup:s.suggestionsBackup,users:m.usersSlice.reducer,webhookAppInfo:b.webhookAppInfo,webhookPresets:w.webhookPresets,wasm:R.wasmReducer},F=(0,n.combineReducers)(V),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=F(e,t);return a.appTemplate=(0,r.appTemplate)(a.appTemplate,t,a),(0,i.globalReducer)(a,t)};t.default=L},184248:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.integrationChannels=void 0;var i=n(a(496486));t.integrationChannels=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"UPDATE_INTEGRATION_CHANNELS"===t.type?i.default.concat(e,t.channels):e||[]}},125253:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.manage=void 0;var i=n(a(627424)),r=n(a(496486)),o=a(501432);t.manage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=r.default.merge({},e);if(t.type===o.ManageActionType.SET_MANAGE_OPTION)r.default.set(a,t.name,t.value);else if(t.type===o.ManageActionType.SET_MANAGE_OPTIONS)for(var n=0,s=Object.entries(t.nameValueDict);n<s.length;n++){var l=(0,i.default)(s[n],2),u=l[0],c=l[1];r.default.set(a,u,c)}else t.type===o.ManageActionType.SET_VERSION_DIFF_DISPLAY&&(t.entry._showDiff=t.display);return a}},219078:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.readOnly=void 0;t.readOnly=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SET_READ_ONLY"===t.type?t.readOnly:Boolean(e)}},177060:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sketch=void 0;t.sketch=function(e,t){return"UPDATE_SKETCH"===t.type?t.sketch:e||null}},868522:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.sources=void 0;var i=n(a(496486));t.sources=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if("UPDATE_SOURCES"===t.type){var a=i.default.concat(e,t.sources);return a.forEach((function(e,t){e._sourceId=i.default.toString(t)})),a}return e||[]}},240721:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.webhookAppInfo=void 0;t.webhookAppInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SET_WEBHOOK_APPINFO"===t.type?t.appInfo:e||{}}},663527:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.webhookPresets=void 0;var n=a(772056).WebhookInfoManager.getPresetOptions();t.webhookPresets=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;return e}},32561:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.workingVersion=void 0;var n=a(49835),i=a(486097);t.workingVersion=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{version:null,pendingSync:!1,needsSync:!1,requestId:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.workingVersionActionTypes.WORKING_VERSION_CANCEL:return Object.assign(Object.assign({},e),{pendingSync:!1,needsSync:!1,requestId:null});case n.workingVersionActionTypes.SET_WORKING_VERSION:return Object.assign(Object.assign({},e),{version:t.value});case n.workingVersionActionTypes.WORKING_VERSION_SYNC_PENDING:return Object.assign(Object.assign({},e),{pendingSync:t.value});case n.workingVersionActionTypes.WORKING_VERSION_REQUEST_ID:return Object.assign(Object.assign({},e),{requestId:t.value});case n.workingVersionActionTypes.WORKING_VERSION_SYNC_NEEDED:return Object.assign(Object.assign({},e),{needsSync:t.value});case i.appTemplateActionTypes.LOADED_RESET:return Object.assign({},{version:null,pendingSync:!1,needsSync:!1,requestId:null});default:return e}}},861364:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.suggestions=void 0;var i=n(a(310568));t.suggestions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"LOAD_SUGGESTIONS"===t.type?i.default.parse(t.suggestions):"REMOVE_SUGGESTION"===t.type?i.default.remove(e,t.suggestion.Id):"SET_EDITOR_OPTION"===t.type&&t.recordHistory?i.default.removeRelated(e,t.name):e}},467624:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.suggestionsBackup=void 0;t.suggestionsBackup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"BACKUP_SUGGESTIONS"===t.type?t.suggestions:e}},396122:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SUPPORTED_VIEW_TYPES=void 0,t.getDefaultView=function(e,t){var a=function(e,t){return e.views.filter((function(e){return e.TableOrFolderName===t}))}(e,t).filter((function(e){return"detail"===e.Action||"deck"===e.Action}));if(0===a.length)return"";var n=a.find((function(e){return i.includes(e.Action)&&"detail"===e.Action&&"System"===e.CreatedBy}));return n?n.Name:a[0].Name},t.getViewNamesToExclude=function(e,t){var a=e.isSlice(t);return e.views.filter((function(n){var r=n.TableOrFolderName,o=e.sourceTableName(r);return!(!a||t===r)||(!a&&o!==t||!i.includes(n.Action))})).map((function(e){return e.Name}))},t.isChatAppEnabled=function(e){var t=(0,n.canAccessChatApps)(),a=e.get("Behavior.ChatbotSettings.EnableChatbot")||!1;return t&&a};var n=a(219066),i=["detail","deck"];t.SUPPORTED_VIEW_TYPES=i},547058:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.chatAppActionIcons=t.chatAppActionDropdownOptions=t.ChatActionType=t.ChatActionCategoryType=void 0;var i,r,o,s=n(a(238416)),l=n(a(667294)),u=n(a(897246)),c=n(a(522141)),p=n(a(843449)),d=n(a(371594)),f=n(a(88781));t.ChatActionType=r,function(e){e.CUSTOM="Build my own...",e.MESSAGE_ADDED_TO_SPACE="Message when added to space",e.MESSAGE_DATA_CHANGE="Message when data changes",e.MESSAGE_REMOVED_FROM_SPACE="Message when removed from space",e.MESSAGE_SCHEDULE="Message on a schedule",e.SLASH_COMMAND_OPEN_A_VIEW="Slash command: Open app view",e.SLASH_COMMAND_TRIGGER_WORKFLOW="Slash command: Run an automation"}(r||(t.ChatActionType=r={})),t.ChatActionCategoryType=o,function(e){e.AUTOMATED_MESSAGES="Automated messages",e.OTHER="",e.SLASH_COMMANDS="Slash commands"}(o||(t.ChatActionCategoryType=o={}));var m=(i={},(0,s.default)(i,r.SLASH_COMMAND_OPEN_A_VIEW,l.default.createElement(u.default,null)),(0,s.default)(i,r.SLASH_COMMAND_TRIGGER_WORKFLOW,l.default.createElement(c.default,null)),(0,s.default)(i,r.MESSAGE_DATA_CHANGE,l.default.createElement("span",{style:{fontSize:"2.4rem"},"aria-hidden":!0},l.default.createElement("i",{className:"material"},"database"))),(0,s.default)(i,r.MESSAGE_SCHEDULE,l.default.createElement(p.default,null)),(0,s.default)(i,r.MESSAGE_ADDED_TO_SPACE,l.default.createElement(d.default,null)),(0,s.default)(i,r.MESSAGE_REMOVED_FROM_SPACE,l.default.createElement(f.default,null)),(0,s.default)(i,r.CUSTOM,l.default.createElement("span",{style:{fontSize:"2.4rem"},"aria-hidden":!0},l.default.createElement("i",{className:"material"},"smart_toy"))),i);t.chatAppActionIcons=m;var v=[{actionType:r.SLASH_COMMAND_OPEN_A_VIEW,startIcon:m[r.SLASH_COMMAND_OPEN_A_VIEW],category:o.SLASH_COMMANDS},{actionType:r.SLASH_COMMAND_TRIGGER_WORKFLOW,startIcon:m[r.SLASH_COMMAND_TRIGGER_WORKFLOW],redirects:!0,category:o.SLASH_COMMANDS},{actionType:r.MESSAGE_DATA_CHANGE,startIcon:m[r.MESSAGE_DATA_CHANGE],redirects:!0,category:o.AUTOMATED_MESSAGES},{actionType:r.MESSAGE_SCHEDULE,startIcon:m[r.MESSAGE_SCHEDULE],redirects:!0,category:o.AUTOMATED_MESSAGES},{actionType:r.MESSAGE_ADDED_TO_SPACE,startIcon:m[r.MESSAGE_ADDED_TO_SPACE],redirects:!0,category:o.AUTOMATED_MESSAGES},{actionType:r.MESSAGE_REMOVED_FROM_SPACE,startIcon:m[r.MESSAGE_REMOVED_FROM_SPACE],redirects:!0,category:o.AUTOMATED_MESSAGES},{actionType:r.CUSTOM,startIcon:m[r.CUSTOM],redirects:!0,category:o.OTHER}];t.chatAppActionDropdownOptions=v},219066:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.switchToStep=t.stepToPath=t.parseLinkFromErrorMessage=t.isViewSupportedInChat=t.getIsFullyAutoProject=t.getIsAutoProject=t.getChatAutomations=t.getChatAppName=t.getAuthErrorFromUrl=t.canAccessChatApps=t.SUPPORTED_VIEW_TYPES=void 0;var i=a(197170),r=a(501432),o=n(a(496486)),s=a(729633),l=a(547058),u=n(a(540554)),c=a(892148),p=n(a(805655)),d=a(285697),f=["detail","deck","form"];t.SUPPORTED_VIEW_TYPES=f;var m=function(e){return["Chat","Setup",e.toString()]};t.stepToPath=m;t.switchToStep=function(e,t,a){(0,i.batch)((function(){e((0,r.setLocation)(m(a))),e((0,r.setChatAppStep)(t,a))}))};var v=function(e,t){var a;return t.projectLinked?e.get("Behavior.ChatbotSettings.IsAutoProject")||!1:null===(a=t.isAutoProject)||void 0===a||a};t.getIsAutoProject=v;t.getIsFullyAutoProject=function(e,t){return v(e,t)&&(!t.projectLinked||"FullyAutomatic"===e.get("Behavior.ChatbotSettings.ProjectConfigurationType"))};t.getChatAutomations=function(e,t){return e.getEntities(s.TemplatePath.Bots,{includeInvalid:!0}).flatMap((function(a){var n,i,r,c=e.entityByName(s.TemplatePath.Events,null==a?void 0:a.EventName);if(!c||null==(null==a?void 0:a.ProcessName))return[];var d=!1,f="Chat"===c.EventType,m=e.entityByName(s.TemplatePath.Processes,null==a?void 0:a.ProcessName);if(m&&(d=(null===(n=m.Nodes)||void 0===n?void 0:n.some((function(e){return"RUN_TASK"===e.NodeType&&"Chat"===e.ActionType})))||!1),!f&&!d)return[];var v=l.ChatActionType.CUSTOM,h="";if(f){var g=c.AppEventDefinition,y=g.EventType;"SLASH_COMMAND"===y&&(v=l.ChatActionType.SLASH_COMMAND_TRIGGER_WORKFLOW,(null===(i=g.SlashCommand)||void 0===i?void 0:i.Name)&&(h=g.SlashCommand.Name)),d&&("ADDED_TO_SPACE"===y?v=l.ChatActionType.MESSAGE_ADDED_TO_SPACE:"REMOVED_FROM_SPACE"===y&&(v=l.ChatActionType.MESSAGE_REMOVED_FROM_SPACE))}else if("Scheduled"===c.EventType){v=l.ChatActionType.MESSAGE_SCHEDULE;var S=new u.default(c.AppEventDefinition.Schedule);h=(null===(r=u.default.frequencyOptions().find((function(e){return e.value===S.frequency})))||void 0===r?void 0:r.label)||""}else if("Change"===c.EventType){v=l.ChatActionType.MESSAGE_DATA_CHANGE;var E=c.AppEventDefinition,A=e.eventTableName(c),T=o.default.capitalize(o.default.toString(E.ChangeEvent).replace(/_+/g," "));h="".concat(T,' in "').concat(A,'"')}var N=!a.IsValid||p.default.forWithin(t.notifications.errors,a._path).length>0||m&&p.default.forWithin(t.notifications.errors,m._path).length>0||p.default.forWithin(t.notifications.errors,c._path).length>0;return[{botName:a.Name,subHeader:h,automationType:v,hasErrors:N}]}))};t.getAuthErrorFromUrl=function(){return new URLSearchParams(c.WindowWrapper.location.search).get("auth_error")};t.canAccessChatApps=function(){return d.EditorGlobals.isUserWorkspaceUser()};var h=/https\:\/\/console\.developers\.google\.com\/terms\/(\w+)/,g=function(e){var t=h.exec(e);if(!t)return null;var a=t[1]||"universal",n="";switch(a){case"appsmarket_component":n="Google Workspace Marketplace";break;case"universal":n="Google Cloud Platform";break;default:n="one of the required APIs"}var i=encodeURIComponent(d.EditorGlobals.getUserEmail());return{errorMessage:"Terms of service for ".concat(n," need to be accepted before continuing"),link:"https://console.developers.google.com/terms/".concat(a,"?authuser=").concat(i)}},y=function(e){return e.includes("allotted project quota")?{errorMessage:e,link:"https://support.google.com/cloud/answer/7283050"}:null},S=function(e){return e.includes("contact AppSheet support")||e.includes("contact support")?{errorMessage:e,link:"https://support.google.com/appsheet?p=troubleshoot-chat-apps"}:null},E=function(e){return e.startsWith("Permission denied")?{errorMessage:e,link:"https://support.google.com/appsheet/answer/12849362?hl=en#prerequisites"}:null};t.parseLinkFromErrorMessage=function(e){var t;return[g,y,S,E].some((function(a){return t=a(e)})),t||null};t.isViewSupportedInChat=function(e,t){return e.views.some((function(e){return e.Name===t&&f.includes((null==e?void 0:e.Action)||"")}))};t.getChatAppName=function(e){return e.substring(0,25)}},229588:(e,t,a)=>{var n=a(564836),i=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(600861)),o=n(a(238416)),s=n(a(918698)),l=n(a(856690)),u=n(a(689728)),c=n(a(627424)),p=n(a(496486)),d=n(a(233330)),f=n(a(365914)),m=n(a(19849)),v=n(a(593186)),h=a(354547),g=a(44617),y=a(229183),S=a(381053),E=a(729633),A=n(a(113861)),T=n(a(796586)),N=n(a(692090)),_=a(772414),b=a(604246),w=a(628872),O=a(959532),D=a(894002),C=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=P(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(396122));function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(P=function(e){return e?a:t})(e)}function I(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw r}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var k=function(e){return p.default.toPath(e).find((function(e){return p.default.isInteger(p.default.toNumber(e))}))},M={RUN_ACTION:"RunActionNodeDefaults",RUN_TASK:"TaskNodeDefaults",IF_ELSE:"IfElseNodeDefaults",CALL_PROCESS:"CallProcessNodeDefaults",WAIT:"WaitNodeDefaults",CALL_PROCESS_FOR_EACH_ROW:"CallProcessForEachRowNodeDefaults",RETURN:"ReturnNodeDefaults",LEGACY_WORKFLOW_ACTION:void 0,INPUT_UPDATE:void 0,NEW_NODE:void 0,TEST:"Test"};var V=function(){function e(){(0,l.default)(this,e)}return(0,u.default)(e,null,[{key:"check",value:function(e,t,a){if(t.startsWith("Presentation.FormatRules"))this.updateFormatRule(e,t);else if(t.startsWith("Behavior.AppWorkflowRules"))this.updateWorkflowRule(e,t);else if(t.startsWith("Presentation.Controls"))this.updateView(e,t,a);else if(t.startsWith("AppData.DataActions"))this.updateAction(e,t,a);else if(t.startsWith("AppData.DataSets"))this.updateTable(e,t,a);else if(t.startsWith("AppData.TableSlices"))this.updateSlice(e,t,a);else if(t.startsWith("Behavior.AppPredictiveModels"))this.updatePredictiveModel(e,t,a);else if(t.startsWith("Behavior.AppOcrModels"))this.updateOcrModel(e,t,a);else if(t.startsWith("Behavior.AppProcesses")){var n=(0,h.extractProcessNodePath)(t);n?this.updateAppProcessNode(e,t,n,a):this.updateAppProcess(e,t,a)}else t.startsWith("Behavior.AppBots")?this.updateAppBot(e,t,a):t.startsWith("Behavior.AppEvents")?this.updateAppEvent(e,t,a):t.startsWith("Behavior.Tasks")?this.updateTasks(e,t,a):t.startsWith("Behavior")?this.updateBehavior(e,t):t.startsWith("AppData.DataSchemas")&&this.updateSchema(e,t,a)}},{key:"setDefaults",value:function(e,t,a,n,i){var r=e.get(a);if(r){var o=e.get(n),s=t[r]||t[r.toLowerCase()];s&&o&&(s=this.transferSimilarSettings(o,s,i)),s&&(0,b.appSet)(e,n,s,!0)}}},{key:"copySettings",value:function(e){if(null==e)return null;for(var t=JSON.parse(JSON.stringify(e)),a=0,n=Object.keys(t);a<n.length;a++){var i=n[a];i.startsWith("_")&&delete t[i]}return t}},{key:"setDefaultsWithSmartsForViews",value:function(e,t,a,n,i,r){var o,s=e.get(a);if(s){var l=n.split(".").slice(0,-1).join("."),u=e.get(n),c=e.get(l),p=this.copySettings(t[s]||t[s.toLowerCase()]),d={ViewDefinition:p||{}};if(p&&u){if(r&&(o=this.findSmartDefaultablePropertiesForViews(c,d),d._ExplicitlyChanged=c._ExplicitlyChanged),d.ViewDefinition=this.transferSimilarSettings(c.ViewDefinition,d.ViewDefinition),c.hasOwnProperty("_ExplicitlyChanged")&&c._ExplicitlyChanged.hasOwnProperty("_ViewDefinition"))for(var f=0,m=Object.keys(c._ExplicitlyChanged._ViewDefinition);f<m.length;f++){var v=m[f];d.ViewDefinition[v]=c._ExplicitlyChanged._ViewDefinition[v]}if(r){var h=e.get(l),g=h?h.TableOrFolderName:null;this.setEntitySmartDefaultsForViews(e,i,s,g,o,d)}}else p&&(o=this.findSmartDefaultablePropertiesForViews(d),this.setEntitySmartDefaultsForViews(e,i,s,null,o,d));d.ViewDefinition&&(this.updateAlreadySetDefaultsForViews(e,l,d),(0,b.appSet)(e,n,d.ViewDefinition))}}},{key:"updateAlreadySetDefaultsForViews",value:function(e,t,a){(0,b.appSet)(e,t+"._SetDefaults",{_ViewDefinition:{}},!0);var n=this.copySettings(a.ViewDefinition)||{};n.hasOwnProperty("_SmartDefaultOriginals")&&delete n._SmartDefaultOriginals,(0,b.appSet)(e,t+"._SetDefaults._ViewDefinition",n,!0)}},{key:"updateExplicitlyChangedForViews",value:function(e){e.hasOwnProperty("_ExplicitlyChanged")||(e._ExplicitlyChanged={_ViewDefinition:{}}),e.hasOwnProperty("_SetDefaults")&&e._SetDefaults.hasOwnProperty("_ViewDefinition")&&this._updateExplicitlyChanged(e.ViewDefinition,e._ExplicitlyChanged._ViewDefinition,e._SetDefaults._ViewDefinition)}},{key:"clearAlreadySetDefaultsForViews",value:function(e){if(e.hasOwnProperty("_SetDefaults")){for(var t=0,a=Object.keys(e._SetDefaults._ViewDefinition);t<a.length;t++){var n=a[t];e._ExplicitlyChanged._ViewDefinition.hasOwnProperty(n)||delete e.ViewDefinition[n]}delete e._SetDefaults}e.hasOwnProperty("_SmartDefaultOriginals")&&delete e._SmartDefaultOriginals}},{key:"findSmartDefaultablePropertiesForViews",value:function(e,t){this.updateExplicitlyChangedForViews(e),this.clearAlreadySetDefaultsForViews(e);for(var a=t||e,n={_ViewDefinition:{}},i=0,r=Object.keys(a.ViewDefinition);i<r.length;i++){var o=r[i];o.indexOf("$")>-1||(e._ExplicitlyChanged._ViewDefinition.hasOwnProperty(o)||(n._ViewDefinition[o]=!0))}return n}},{key:"checkSuggestionProperty",value:function(e,t,a){return!a.startsWith("!")&&!a.startsWith("$")&&(!!t.hasOwnProperty(a)&&(e[a]!==t[a]&&(null!==t[a]&&"NONE"!==t[a]&&"**auto**"!==t[a]&&"**none**"!==t[a]&&!this._isEmptyDefinitionObject(t[a]))))}},{key:"setEntitySmartDefaultsForViews",value:function(e,t,a,n,i,r){r._SmartDefaultOriginals={_ViewDefinition:{}};var o=this.chooseTopSuggestionForTable(e,t,a,n,"Action","TableOrFolderName");if(null!==o.command)for(var s=o.command,l=s.parsedSuggestionSettings||JSON.parse(s.Value.Settings),u=0,c=Object.keys(i._ViewDefinition);u<c.length;u++){var p=c[u];this.setSuggestionPropertyForSmartDefaults(p,r.ViewDefinition,r._SmartDefaultOriginals._ViewDefinition,l)}}},{key:"smartDefaultSetTable",value:function(e,t,a,n,i,r){var o,s=0,l=t[i],u=[],c=I(e.tables);try{for(c.s();!(o=c.n()).done;){var p=o.value,d=this.chooseTopSuggestionForTable(e,n,l,p.Name,i,r);if(null!==d.command){var f=d.score;p.Name===t[r]&&(s=f),u.push({name:p.Name,score:f})}}}catch(e){c.e(e)}finally{c.f()}u.sort((function(e,t){return t.score>e.score?1:-1})),u.length>0&&u[0].score>2*s&&(0,b.appSet)(e,a+"."+r,u[0].name,!0)}},{key:"chooseTopSuggestionForTable",value:function(e,t,a,n,i,r){if(!t)return{command:null,score:0};var o,s=[],l=I(t);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(u.Commands){var c,d=I(u.Commands);try{for(d.s();!(c=d.n()).done;){var f=c.value,h=u.Relevance;f.Value[i]===a&&(n&&n!==f.Value[r]||s.push({score:h,command:f,evaluatorToUseInEditor:u.EvaluatorToUseInEditor}))}}catch(e){d.e(e)}finally{d.f()}}}}catch(e){l.e(e)}finally{l.f()}if(s.sort((function(e,t){return t.score>e.score?1:-1})),0===s.length)return{command:null,score:0};var g=s[0].command,y={"card list layout":function(e,t){var a=p.default.cloneDeep(t),n=m.default.getSmartDefaultsFromType(e,t.Value.TableOrFolderName,"list",{includeGoToDetailsAction:!0}),i=JSON.parse(t.Value.Settings);return i.Layout=JSON.stringify(n),a.parsedSuggestionSettings=i,a}},S=s[0].evaluatorToUseInEditor;if(S&&y.hasOwnProperty(S))try{g=y[S](e,g)}catch(e){return v.default.ReportErrorOnce({errorMessage:"Error in chooseTopSuggestionForTable",error:p.default.isError(e)?e:new Error("".concat(e))}),{result:null,score:0}}return{command:g,score:s[0].score}}},{key:"setDefaultsWithSmartsForActions",value:function(e,t,a,n,i,r){var o,s=e.get(a);if(s){var l=n.split(".").slice(0,-1).join("."),u=e.get(n),c=e.get(l),p=this.copySettings(t[s]||t[s.toLowerCase()]),d={ActionDefinition:p||{}};if(p&&u){if(r&&(o=this.findSmartDefaultablePropertiesForActions(c,d),d._ExplicitlyChanged=c._ExplicitlyChanged),this.transferSimilarProperty("Icon",c,d),this.transferSimilarProperty("IconRunnerUps",c,d),d.ActionDefinition=this.transferSimilarSettings(c.ActionDefinition,d.ActionDefinition),c.hasOwnProperty("_ExplicitlyChanged")&&(c._ExplicitlyChanged.hasOwnProperty("Icon")&&(d.Icon=c._ExplicitlyChanged.Icon,d.IconRunnerUps=c._ExplicitlyChanged.IconRunnerUps),c._ExplicitlyChanged.hasOwnProperty("_ActionDefinition")))for(var f=0,m=Object.keys(c._ExplicitlyChanged._ActionDefinition);f<m.length;f++){var v=m[f];d.ActionDefinition[v]=c._ExplicitlyChanged._ActionDefinition[v]}if(r){var h=e.get(l),g=h?h.Table:null;this.setEntitySmartDefaultsForActions(e,i,s,g,o,d)}}else p&&(o=this.findSmartDefaultablePropertiesForActions(d),this.setEntitySmartDefaultsForActions(e,i,s,null,o,d));d.ActionDefinition&&(this.updateAlreadySetDefaultsForActions(e,l,d),d.hasOwnProperty("Icon")&&((0,b.appSet)(e,l+".Icon",d.Icon,!0),(0,b.appSet)(e,l+".IconRunnerUps",d.IconRunnerUps,!0)),(0,b.appSet)(e,n,d.ActionDefinition))}}},{key:"updateAlreadySetDefaultsForActions",value:function(e,t,a){(0,b.appSet)(e,t+"._SetDefaults",{_ActionDefinition:{}},!0);var n=this.copySettings(a.ActionDefinition)||{};n.hasOwnProperty("_SmartDefaultOriginals")&&delete n._SmartDefaultOriginals,(0,b.appSet)(e,t+"._SetDefaults.Icon",a.Icon,!0),(0,b.appSet)(e,t+"._SetDefaults.IconRunnerUps",a.IconRunnerUps,!0),(0,b.appSet)(e,t+"._SetDefaults._ActionDefinition",n,!0)}},{key:"updateExplicitlyChangedForActions",value:function(e){(e.hasOwnProperty("_ExplicitlyChanged")||(e._ExplicitlyChanged={_ActionDefinition:{}}),e.hasOwnProperty("_SetDefaults")&&e._SetDefaults.hasOwnProperty("_ActionDefinition"))&&(this._updateExplicitlyChangedForProperty("Icon",e,e._ExplicitlyChanged,e._SetDefaults)&&(e._ExplicitlyChanged.IconRunnerUps=e.IconRunnerUps),this._updateExplicitlyChanged(e.ActionDefinition,e._ExplicitlyChanged._ActionDefinition,e._SetDefaults._ActionDefinition))}},{key:"_updateExplicitlyChanged",value:function(e,t,a){if(void 0!==a)for(var n=0,i=Object.keys(a);n<i.length;n++){var r=i[n];this._updateExplicitlyChangedForProperty(r,e,t,a)}}},{key:"_updateExplicitlyChangedForProperty",value:function(e,t,a,n){if(e.indexOf("$")>-1)return!1;if(e.startsWith("_"))return!1;if(a.hasOwnProperty(e))return!1;if(!t.hasOwnProperty(e))return!1;if(null===t[e])return!1;if(null===n[e]){if(Array.isArray(t[e])&&0===t[e].length)return!1;if("object"===(0,s.default)(t[e])&&0===Object.keys(t[e]).length)return!1;if("**none**"===t[e]||"**auto**"===t[e])return!1}return!p.default.isEqual(n[e],t[e])&&(a[e]=t[e],!0)}},{key:"clearAlreadySetDefaultsForActions",value:function(e){if(e.hasOwnProperty("_SetDefaults")){e._ExplicitlyChanged.hasOwnProperty("Icon")||(delete e.Icon,delete e.IconRunnerUps);for(var t=0,a=Object.keys(e._SetDefaults._ActionDefinition);t<a.length;t++){var n=a[t];e._ExplicitlyChanged._ActionDefinition.hasOwnProperty(n)||delete e.ActionDefinition[n]}delete e._SetDefaults}e.hasOwnProperty("_SmartDefaultOriginals")&&delete e._SmartDefaultOriginals}},{key:"findSmartDefaultablePropertiesForActions",value:function(e,t){this.updateExplicitlyChangedForActions(e),this.clearAlreadySetDefaultsForActions(e);var a=t||e,n={_ActionDefinition:{}};e._ExplicitlyChanged.hasOwnProperty("Icon")||(n.Icon=!0,n.IconRunnerUps=!0);for(var i=0,r=Object.keys(a.ActionDefinition);i<r.length;i++){var o=r[i];o.indexOf("$")>-1||(e._ExplicitlyChanged._ActionDefinition.hasOwnProperty(o)||(n._ActionDefinition[o]=!0))}return n}},{key:"setEntitySmartDefaultsForActions",value:function(e,t,a,n,i,r){if(r._SmartDefaultOriginals={_ActionDefinition:{}},t){var o=this.chooseTopSuggestionForTable(e,t,a,n,"ActionType","Table");if(null!==o.command){var s=o.command,l=s.parsedSuggestionSettings||JSON.parse(s.Value.ActionSettings);if(i.hasOwnProperty("Icon"))this.setSuggestionPropertyForSmartDefaults("Icon",r,r._SmartDefaultOriginals,s.Value)&&(r._SmartDefaultOriginals.IconRunnerUps={smart:s.Value.IconRunnerUps,original:r.IconRunnerUps},r.IconRunnerUps=s.Value.IconRunnerUps),this.setSuggestionPropertyForSmartDefaults("IconRunnerUps",r,r._SmartDefaultOriginals,s.Value);for(var u=0,c=Object.keys(i._ActionDefinition);u<c.length;u++){var p=c[u];this.setSuggestionPropertyForSmartDefaults(p,r.ActionDefinition,r._SmartDefaultOriginals._ActionDefinition,l)}}}}},{key:"setSuggestionPropertyForSmartDefaults",value:function(e,t,a,n){return!!this.checkSuggestionProperty(t,n,e)&&(a[e]={smart:n[e],original:t[e]},t[e]=n[e],!0)}},{key:"_isEmptyDefinitionObject",value:function(e){return!(!Array.isArray(e)||0!==e.filter((function(e){return null!==e&&"none"!==e&&"**none**"!==e})).length)||"object"===(0,s.default)(e)&&0===Object.entries(e).filter((function(e){return"$type"!==e[0]&&null!==e[1]&&"none"!==e[1]&&"**none**"!==e[1]})).length}},{key:"transferSimilarProperty",value:function(e,t,a){t.hasOwnProperty(e)&&(a[e]=t[e])}},{key:"transferSimilarSettings",value:function(e,t,a){try{var n=p.default.isString(e)?JSON.parse(e):e,i=p.default.isString(t)?JSON.parse(t):t,r=p.default.mapValues(i,(function(e,t){var a;return"$type"===t?e:null!==(a=n[t])&&void 0!==a?a:e}));if(a)for(var o=0,s=Object.keys(n);o<s.length;o++){var l=s[o];l.startsWith("_")&&(r[l]=n[l])}t=p.default.isString(t)?JSON.stringify(r):r}catch(e){}return t}},{key:"transferColumnPickLast",value:function(e,t,a,n,i){var r=e.get(a+"."+n)||"",o=e.columnNames(i,t.property(n)),s="";return o.includes(r)?s=r:o.length>0&&(s=p.default.last(o)),s}},{key:"transferColumn",value:function(e,t,a,n,i){var r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=e.get(a+"."+n)||"",l=e.columnNames(i,t.property(n),{},r),u="";return l.includes(s)?u=s:(l.length>o||l.length>0)&&(u=l[o]),u}},{key:"transferColumnList",value:function(e,t,a,n,i,r){var o=e.get(a+"."+n)||[],s=e.columnNames(i,t.property(n),r);return o.filter((function(e){return s.includes(e)}))}},{key:"transferActionAndColumnList",value:function(e,t,a,n,i){var r=e.get(a+"."+n)||[],o=e.actionAndColumnNames(i,t.property(n));return r.filter((function(e){return o.includes(e)}))}},{key:"transferColumnSubList",value:function(e,t,a,n,i,r){var o=e.get(a+"."+n)||[],s=e.columnNames(r,t.property(i));return o.map((function(e){var t=e[i];return s.includes(t)?e:null})).filter((function(e){return!!e}))}},{key:"transferActionSubList",value:function(e,t,a,n,i,r){var o=e.get(a+"."+n)||[],s=e.actionNames(r||"",t.property(i));return o.map((function(e){var t=e[i];return s.includes(t)?e:null})).filter((function(e){return!!e}))}},{key:"transferView",value:function(e,t,a,n,i){var r=e.get(a+"."+n)||"",o=e.viewNames(i,t.property(n)),s="";return o.includes(r)?s=r:o.length>0&&(s=o[0],o.includes("**Automatic**")&&(s="**Automatic**")),s}},{key:"transferViewSubList",value:function(e,t,a,n,i,r){var o=e.get(a+"."+n)||[],s=e.viewNames(r,t.property(i));return o.map((function(e){var t=e[i];return s.includes(t)?e:null})).filter((function(e){return!!e}))}},{key:"transferViewEvents",value:function(e,t,a,n){var i,r=e.get(n)||[],o=e.get(a),s=o&&(null===(i=t[o])||void 0===i?void 0:i.Events)||[],l=s.map((function(e){return e.EventType})),u=r.filter((function(e){return p.default.includes(l,e.EventType)})).concat(s),c=p.default.uniqBy(u,(function(e){return e.EventType}));(0,b.appSet)(e,n,c,!0)}},{key:"updateIfNew",value:function(e,t,a){var n=e.get(t);return window.SmartDefaultsRollout&&null!=n&&"**auto**"!==n&&"**none**"!==n&&"NONE"!==n||p.default.isEqual(n,a)?e:(0,b.appSet)(e,t,a,!0)}},{key:"updateEntity",value:function(e,t,a,n,i){var r=k(a);if(r){var o=e+"["+r+"]",s=a===o,l=p.default.toInteger(t.get(o+"._version"));if((0,b.appSet)(t,o+"._version",l+1,!0),p.default.isArray(i)){var u=parseInt(r);i.forEach((function(e){var t=o+"."+e.property;if((e.startsWith?a.startsWith(t):a===t)||s&&e.includeNewEntities||"*"===e.property){var i=n;if(t.startsWith(a)&&t.length>a.length){var r=p.default.toPath(a),l=p.default.toPath(t).slice(r.length);i=p.default.get(n,l)}e.updateFunction(o,u,s,i)}}))}}}},{key:"getActionDefaultSettings",value:function(){var e={},t=T.default.schemaFor("DataActionDefaults"),a=t.properties;for(var n in a)p.default.has(a,n)&&(e[n]=t.defaults(n,!0));return e}},{key:"chooseActionName",value:function(e,t,a){var n,i,r,o,s,l,u,c,d,f,m,v,h,g=e.get(a);switch(t){case"ADD_RECORD":return"Add a Row";case"ADD_RECORD_TO":return(null===(n=null==g?void 0:g.ActionDefinition)||void 0===n?void 0:n.ReferencedTable)?'Add a Row to "'+g.ActionDefinition.ReferencedTable+'"':"Add a Row";case"NAVIGATE_APP":return(null===(i=null==g?void 0:g.ActionDefinition)||void 0===i?void 0:i.NavigateTarget)&&(h=g.ActionDefinition.NavigateTarget.match(/LINKTOVIEW\(["\[](.+)["\]]\)/i))&&2===h.length&&h[1].length>0&&h[1].length<=25?'Navigate to "'+h[1]+'"':"Navigate to View";case"NAVIGATE_DIFFERENT_APP":if(null===(r=null==g?void 0:g.ActionDefinition)||void 0===r?void 0:r.NavigateTarget){if((h=g.ActionDefinition.NavigateTarget.match(/LINKTOAPP\("(\w+)-\d+"\)/i))&&2===h.length&&h[1].length>0)return'Navigate to "'+h[1]+'"';if((h=g.ActionDefinition.NavigateTarget.match(/LINKTOAPP\(\[(.+)\]\)/i))&&2===h.length&&h[1].length>0)return'Navigate to "'+h[1]+'"'}return"Navigate to Different App";case"NAVIGATE_URL":return"Navigate to Website";case"SET_COLUMN_VALUE":if((null===(s=null===(o=null==g?void 0:g.ActionDefinition)||void 0===o?void 0:o.Assignments)||void 0===s?void 0:s.length)>0){var y=g.ActionDefinition.Assignments[0];if(y.ColumnToEdit){var S='Set "'+y.ColumnToEdit+'"';return y.NewColumnValue&&(S+=" to "+y.NewColumnValue),S}}return"Set Column To Value";case"CALL":return(null===(l=null==g?void 0:g.ActionDefinition)||void 0===l?void 0:l.Number)?'Make a Phone Call to "'+g.ActionDefinition.Number+'"':"Make a Phone Call";case"SMS":return(null===(u=null==g?void 0:g.ActionDefinition)||void 0===u?void 0:u.Number)?'Send SMS Message to "'+g.ActionDefinition.Number+'"':"Send an SMS Message";case"EMAIL":return(null===(c=null==g?void 0:g.ActionDefinition)||void 0===c?void 0:c.EmailTo)?'Send Email to "'+g.ActionDefinition.EmailTo+'"':"Send an Email";case"REF_ACTION":return(null===(d=null==g?void 0:g.ActionDefinition)||void 0===d?void 0:d.ReferencedTable)&&(null===(f=null==g?void 0:g.ActionDefinition)||void 0===f?void 0:f.ReferencedAction)?'Run  "'+g.ActionDefinition.ReferencedAction+'" on "'+(null===(m=null==g?void 0:g.ActionDefinition)||void 0===m?void 0:m.ReferencedTable)+'"':"Run Action on Set of Rows";case"COMPOSITE":return"Run Sequence of Actions";case"EXPORT_VIEW":return"Download CSV";case"IMPORT_FILE":return"Import CSV";case"OPEN_FILE":return(null===(v=null==g?void 0:g.ActionDefinition)||void 0===v?void 0:v.FileTarget)?'Open "'+g.ActionDefinition.FileTarget+'"':"Open a File";case"DELETE_RECORD":return"Delete Row";case"EDIT_RECORD":return"Edit Row";case"COPY_EDIT_ROW":return"Copy Row"}return p.default.startCase(t.toLowerCase())}},{key:"updateSmartActionName",value:function(e,t,a,n,i,r){if(n&&t._isNew&&!t._ActionNameChanged){var o=e.get(r);if(o){var s=e.get(i+".Name"),l=e.uniqueName(this.chooseActionName(e,o,i),a,e.getEntities(E.TemplatePath.DataActions,{includeHidden:!0}));s!==l&&((0,b.appSet)(e,i+".Name",l,!0),this.renameAction(e,s,l))}}}},{key:"updateAction",value:function(e,t,a){var n=this;this.updateEntity(E.TemplatePath.DataActions,e,t,a,[{property:"IsValid",includeNewEntities:!1,updateFunction:function(t){n.updateReferencesToActions(e,t)}},{property:"Name",includeNewEntities:!1,updateFunction:function(t,i,r,o){var s=e.get(t),l=s.Name,u=e.uniqueName(l,i,e.getEntities(E.TemplatePath.DataActions,{includeHidden:!0}));l!==u&&(0,b.appSet)(e,t+".Name",u,!0),n.renameAction(e,o,u),e.get(t+".Name")!==a&&window.SmartDefaultsRollout&&!s._isCopy&&(0,b.appSet)(e,t+"._ActionNameChanged",!0,!0)}},{property:"ActionType",includeNewEntities:!0,updateFunction:function(t,a,i,r){var o=e.get(t),s=t+".ActionType",l=t+".ActionDefinition",u=n.getActionDefaultSettings();if(window.SmartDefaultsRollout&&!o._isCopy){var c=e.get(l),p=e.reduxRootStateDuringDispatch().suggestions.DATA_ACTION;n.setDefaultsWithSmartsForActions(e,u,s,l,p,o._isNew),r&&r!==e.get(s)&&(0,b.appSet)(e,t+"._ActionTypeChanged",!0,!0),n.updateSmartActionName(e,o,a,c,t,s)}else n.setDefaults(e,u,s,l);n.updateActionDef(e,t),n.updateReferencesToActions(e,t)}},{property:"Table",includeNewEntities:!0,updateFunction:function(t,a,i,r){var o=e.get(t);if(window.SmartDefaultsRollout&&!o._isCopy&&o._isNew){var s=t+".ActionType",l=t+".ActionDefinition",u=t+".TableOrFolderName",c=n.getActionDefaultSettings(),p=e.get(l),d=e.reduxRootStateDuringDispatch().suggestions.DATA_ACTION;n.setDefaultsWithSmartsForActions(e,c,s,l,d,o._isNew),r&&!(0,h.namesEqual)(r,e.get(u))&&(0,b.appSet)(e,t+"._TableNameChanged",!0,!0),n.updateSmartActionName(e,o,a,p,t,s)}n.updateActionDef(e,t),n.updateReferencesToActions(e,t)}},{property:"ActionDefinition.Assignments",startsWith:!0,updateFunction:function(t){var a;(e.get(t+".ActionDefinition.Assignments")||[]).forEach((function(n,i){n.NewColumnValue||delete(a=a||p.default.clone(e.get(t+".ExprLookup")))["Assignments[".concat(i,"]")]})),a&&(0,b.appSet)(e,t+".ExprLookup",a);(0,b.appSet)(e,t+".ColumnToEdit",void 0,true),(0,b.appSet)(e,t+".ValueEvaluatable",void 0,true)}},{property:"ActionDefinition",includeNewEntities:!0,startsWith:!0,updateFunction:function(t){var a=e.get(t+".ActionDefinition"),n=JSON.stringify(a,(function(e,t){return"$type"!==e?t:void 0}));(0,b.appSet)(e,t+".ActionSettings",n,!0)}},{property:"ActionDefinition.ReferencedTable",includeNewEntities:!0,startsWith:!0,updateFunction:function(t){n.updateActionDef(e,t)}},{property:"_TriggerDynamicUpdate",includeNewEntities:!1,updateFunction:function(t){var a=e.get(t);if(a._TriggerDynamicUpdate){if((0,b.appSet)(e,t+"._TriggerDynamicUpdate",!1,!0),window.SmartDefaultsRollout&&!a._isCopy){var i=t+".ActionType",r=t+".ActionDefinition",o=n.getActionDefaultSettings(),s=e.reduxRootStateDuringDispatch().suggestions.DATA_ACTION;n.setDefaultsWithSmartsForActions(e,o,i,r,s,a._isNew)}n.updateActionDef(e,t),n.updateReferencesToActions(e,t)}}}])}},{key:"updateActionDef",value:function(e,t){var a=e.get(t+".ActionType"),n=e.get(t+".Table");"SET_COLUMN_VALUE"===a?this.updateSetColValAction(e,t,n):"ADD_RECORD_TO"===a?this.updateAddRowToAction(e,t,e.get(t+".ActionDefinition.ReferencedTable")):"COMPOSITE"===a&&this.updateCompositeAction(e,t,n)}},{key:"updateSetColValAction",value:function(e,t,a){a||(a=e.get(t+".Table"));var n=T.default.schemaFor("ColumnValueAssignment"),i=this.transferColumn(e,n,t+".ActionDefinition.Assignments[0]","ColumnToEdit",a);return this.updateIfNew(e,t+".ActionDefinition.Assignments[0].ColumnToEdit",i)&&this.updateIfNew(e,t+".ActionDefinition.ColumnToEdit",i)}},{key:"updateAddRowToAction",value:function(e,t,a){a||(a=e.get(t+".Table"));var n=T.default.schemaFor("ColumnValueAssignment"),i=this.transferColumn(e,n,t+".ActionDefinition.Assignments[0]","ColumnToEdit",a);return this.updateIfNew(e,t+".ActionDefinition.Assignments[0].ColumnToEdit",i)&&this.updateIfNew(e,t+".ActionDefinition.ColumnToEdit",i)}},{key:"updateCompositeAction",value:function(e,t,a){a||(a=e.get(t+".Table"));var n=this.transferActionSubList(e,T.default.schemaFor("ActionInfo"),t+".ActionDefinition","Actions","ActionName",a);this.updateIfNew(e,t+".ActionDefinition.Actions",n),this.updateAction(e,t+".ActionDefinition")}},{key:"updateReferencesToActions",value:function(e,t){var a=this,n=e.get(t+".Name");e.actions.forEach((function(t){if("COMPOSITE"===t.ActionType){var n="AppData.DataActions["+t._index+"]";a.updateCompositeAction(e,n,null)}})),e.formatRules.forEach((function(t){var i="Presentation.FormatRules["+t._index+"]";(t.ColumnsToFormat||[]).find((function(e){return e==="__action__"+n}))&&a.updateFormatRule(e,i)}))}},{key:"renameAction",value:function(e,t,a){var n=this;e.getEntities(E.TemplatePath.DataActions,{includeHidden:!0}).forEach((function(i){if("COMPOSITE"===i.ActionType){var r="AppData.DataActions["+i._index+"]";(e.get(r+".ActionDefinition.Actions")||[]).forEach((function(i,o){i.ActionName===t&&((0,b.appSet)(e,r+".ActionDefinition.Actions["+o+"].ActionName",a,!0),n.updateAction(e,r+".ActionDefinition"))}))}})),e.formatRules.forEach((function(i){var r="Presentation.FormatRules["+i._index+"]",o=(i.ColumnsToFormat||[]).map((function(e){return e==="__action__"+t?"__action__"+a:e}));n.updateIfNew(e,r+".ColumnsToFormat",o)})),t!==a&&(e.iterateNodes((function(n,i){(0,_.isRunActionNode)(n)&&n.Action===t&&(0,b.appSet)(e,"".concat(i,".Action"),a,!0)})),(e.get("Behavior.Tasks")||[]).forEach((function(n){(0,_.isTakeActionTask)(n)&&n.ActionName===t&&(0,b.appSet)(e,n._path+".ActionName",a,!0)})))}},{key:"updateFormatRule",value:function(e,t,a){var n=this;this.updateEntity(E.TemplatePath.FormatRules,e,t,a,[{property:"Name",includeNewEntities:!1,updateFunction:function(t,a){var n=e.get(t+".Name"),i=e.uniqueName(n,a,e.getEntities(E.TemplatePath.FormatRules,{includeHidden:!0}));n!==i&&(0,b.appSet)(e,t+".Name",i,!0)}},{property:"TableOrSlice",includeNewEntities:!0,updateFunction:function(t){var a=e.get(t+".TableOrSlice"),i=T.default.schemaFor("FormatRule"),r=n.transferActionAndColumnList(e,i,t,"ColumnsToFormat",null!=a?a:void 0);n.updateIfNew(e,t+".ColumnsToFormat",r)}}])}},{key:"enforceTakeActionConstraint",value:function(e,t){var a=e.get(t);if("Scheduled"===a.EventType&&"ForEachRowInTable"!==a.ForTableOption&&"TakeAction"===a.ActionType){var n=T.default.schemaFor("AppWorkflowActionType").enumOptions().map((function(e){return e.value})).filter((function(e){return"TakeAction"!==e})),i=p.default.first(n);(0,b.appSet)(e,t+".ActionType",i)}}},{key:"enforceWorkflowValidActionConstraint",value:function(e,t){var a=e.get(t);if("TakeAction"===a.ActionType){var n=e.getWorkflowTableName(t),i=e.sourceTableName(n),r=(a.AppWorkflowAction||{}).ActionName,o=e.findDataAction(r,i),s=!r,l=!o||o.Table!==i;if(s||l){var u=T.default.schemaFor("AppWorkflowActionTakeAction").property("ActionName"),c=e.actionNames(n||"",u),d=p.default.first(c);(0,b.appSet)(e,t+".AppWorkflowAction.ActionName",d)}}}},{key:"updateWorkflowRule",value:function(e,t,a){var n=this;this.updateEntity(E.TemplatePath.WorkflowRules,e,t,a,[{property:"Name",includeNewEntities:!1,updateFunction:function(t,a){var n=e.get(t+".Name"),i=e.uniqueName(n,a,e.getEntities(E.TemplatePath.WorkflowRules,{includeHidden:!0}));n!==i&&(0,b.appSet)(e,t+".Name",i,!0)}},{property:"EventType",includeNewEntities:!0,updateFunction:function(t){var a=T.default.schemaFor("AppWorkflowRuleDefaults"),i={Change:a.defaults("EVENT_CHANGE",!0),Scheduled:a.defaults("EVENT_SCHEDULED",!0),Chat:a.defaults("EVENT_CHAT",!0)},r=e.get(t+".EventType");if("Change"===r&&(0,b.appSet)(e,t+".ForTableName",null),"Scheduled"===r){var o=e.get(t+".ForTableName");(0,b.appSet)(e,t+".ForTableName",o||e.firstName(e.updatable(e.tables))),"NotSpecified"===e.get(t+".ForTableOption")&&(0,b.appSet)(e,t+".ForTableOption","ForEntireTable")}var s=e.get(t+".AppWorkflowEvent.Table");i.Change.Table=s||e.firstName(e.updatable(e.tables)),n.enforceTakeActionConstraint(e,t),n.enforceWorkflowValidActionConstraint(e,t),n.setDefaults(e,i,t+".EventType",t+".AppWorkflowEvent")}},{property:"Actions",startsWith:!0,includeNewEntities:!0,updateFunction:function(a){if(t.endsWith("ActionType")){var i=T.default.schemaFor("AppWorkflowRuleDefaults"),r={},o=i.properties;for(var s in o)p.default.has(o,s)&&(r[s.replace("ACTION_","").toLowerCase()]=i.defaults(s,!0));var l=p.default.toPath(t),u=p.default.toNumber(l[l.length-2]);n.setDefaults(e,r,t,a+"Actions["+u+"].AppWorkflowAction"),n.enforceWorkflowValidActionConstraint(e,a)}}},{property:"ForTableName",includeNewEntities:!0,updateFunction:function(t){n.enforceTakeActionConstraint(e,t),n.enforceWorkflowValidActionConstraint(e,t)}},{property:"AppWorkflowEvent.Table",includeNewEntities:!0,updateFunction:function(t){n.enforceWorkflowValidActionConstraint(e,t)}}])}},{key:"updateSmartViewName",value:function(e,t,a,n,i,r){if(n&&t._isNew&&!t._ViewNameChanged){var o=e.get(r);if(o){var s=e.get(i+".Name"),l=e.uniqueName(p.default.startCase(o.toLowerCase()),a,e.getEntities(E.TemplatePath.Views,{includeHidden:!0}));s!==l&&((0,b.appSet)(e,i+".Name",l,!0),this.renameView(e,s,l))}}}},{key:"getViewDefaultSettings",value:function(){var e={},t=T.default.schemaFor("AppControlDefaults"),a=t.properties;for(var n in a)p.default.has(a,n)&&(e[n.replace("ACTION_","").toLowerCase()]=t.defaults(n,!0));return e}},{key:"updateView",value:function(e,t,a){var n=this;this.updateEntity(E.TemplatePath.Views,e,t,a,[{property:"IsValid",includeNewEntities:!1,updateFunction:function(){n.updateDefaultStartView(e),n.updateReferencesToViews(e)}},{property:"Name",includeNewEntities:!1,updateFunction:function(t,i){var r=e.get(t),o=r.Name,s=e.uniqueName(o,i,e.getEntities(E.TemplatePath.Views,{includeHidden:!0}));o!==s&&(0,b.appSet)(e,t+".Name",s,!0),n.renameView(e,a,s),e.get(t+".Name")!==a&&window.SmartDefaultsRollout&&!r._isCopy&&(0,b.appSet)(e,t+"._ViewNameChanged",!0,!0)}},{property:"TableOrFolderName",includeNewEntities:!0,updateFunction:function(t,a,i,r){var o=e.get(t),s=t+".Action",l=t+".TableOrFolderName",u=t+".ViewDefinition",c=e.get(l),p=e.entityByName(E.TemplatePath.Tables,r),d=e.entityByName(E.TemplatePath.Tables,c),f=e.entityByName(E.TemplatePath.Slices,r),m=e.entityByName(E.TemplatePath.Slices,c),v=p&&m&&p.Name===m.SourceTable,y=f&&d&&f.SourceTable===d.Name,A=o._isCopy&&(v||y),T=g.dynamicRollouts.includeByOwnerId("UseSmartDefaultsDynamicRollout")&&!i;if(T&&!A&&c){var N=e.get(s),_=S.SuggestionSelectors.smartDefaultUxViewSelector(e.reduxRootStateDuringDispatch())(c,N);(0,b.appSet)(e,u,_.ViewDefinition,!0)}else if(window.SmartDefaultsRollout&&!o._isCopy&&o._isNew){var w=t+".Action",O=t+".TableOrFolderName",D=e.reduxRootStateDuringDispatch().suggestions.UX_VIEW,C=n.getViewDefaultSettings(),P=t+".ViewDefinition";n.setDefaultsWithSmartsForViews(e,C,w,P,D,o._isNew),r&&!(0,h.namesEqual)(r,e.get(O))&&(0,b.appSet)(e,t+"._TableNameChanged",!0,!0)}T||n.updateViewSettings(e,t),n.updateReferencesToViews(e)}},{property:"Action",includeNewEntities:!0,updateFunction:function(t,a,i,r){var o=e.get(t),s=t+".Action",l=t+".TableOrFolderName",u=t+".ViewDefinition",c=u+".Events",p=n.getViewDefaultSettings();if(g.dynamicRollouts.includeByOwnerId("UseSmartDefaultsDynamicRollout")&&!i){var d=e.get(s),f=e.get(l),m=S.SuggestionSelectors.smartDefaultUxViewSelector(e.reduxRootStateDuringDispatch())(f,d),v={};v[d]=m.ViewDefinition,n.setDefaults(e,v,s,u)}else if(window.SmartDefaultsRollout&&!o._isCopy){var h=e.get(u),y=e.reduxRootStateDuringDispatch().suggestions.UX_VIEW;h&&o._isNew&&(o._TableNameChanged||n.smartDefaultSetTable(e,o,t,y,"Action","TableOrFolderName"),n.updateSmartViewName(e,o,a,h,t,s)),n.setDefaultsWithSmartsForViews(e,p,s,u,y,o._isNew),r&&r!==e.get(s)&&(0,b.appSet)(e,t+"._ViewTypeChanged",!0,!0)}else n.setDefaults(e,p,s,u);n.transferViewEvents(e,p,s,c),n.updateViewSettings(e,t),n.updateReferencesToViews(e)}},{property:"ViewDefinition.SecondaryTable",includeNewEntities:!0,updateFunction:function(t){n.updateViewSettings(e,t)}},{property:"ViewDefinition.ChartType",includeNewEntities:!0,updateFunction:function(t){n.updateViewSettings(e,t)}},{property:"ViewDefinition.Layout",includeNewEntities:!1,updateFunction:function(t){n.updateViewSettings(e,t)}},{property:"ViewDefinition",startsWith:!0,includeNewEntities:!1,updateFunction:function(t){var a=e.get(t+".ViewDefinition"),n=JSON.stringify(a);(0,b.appSet)(e,t+".Settings",n,!0)}},{property:"Action",startsWith:!0,includeNewEntities:!1,updateFunction:function(t){var a=e.get(t+".ViewDefinition"),n=JSON.stringify(a);(0,b.appSet)(e,t+".Settings",n,!0)}},{property:"_TriggerDynamicUpdate",includeNewEntities:!1,updateFunction:function(t){var a=e.get(t);if(a._TriggerDynamicUpdate){(0,b.appSet)(e,t+"._TriggerDynamicUpdate",!1,!0);var i=t+".Action",r=t+".ViewDefinition",o=n.getViewDefaultSettings(),s=e.reduxRootStateDuringDispatch().suggestions.UX_VIEW;n.setDefaultsWithSmartsForViews(e,o,i,r,s,a._isNew),n.updateViewSettings(e,t),n.updateReferencesToViews(e)}}}])}},{key:"renameView",value:function(e,t,a){var n=this;e.viewsOfType(["dashboard","form","onboarding"]).forEach((function(i){var r="Presentation.Controls["+i._index+"]"+".ViewDefinition";if("dashboard"===i.Action){var o=e.get(r+".ViewEntries"),s=!1;o&&o.forEach((function(n,i){n.ViewName===t&&((0,b.appSet)(e,r+".ViewEntries["+i+"].ViewName",a,!0),s=!0)})),s&&n.updateView(e,r)}else if("form"===i.Action||"onboarding"===i.Action){e.get(r+".FinishView")===t&&(0,b.appSet)(e,r+".FinishView",a,!0)}})),e.get("Presentation.DefaultStartView")===t&&(0,b.appSet)(e,"Presentation.DefaultStartView",a),this.updateViewNameFields(e,t,a)}},{key:"updateViewNameFields",value:function(e,t,a){e.getEntities(E.TemplatePath.Tasks,{includeHidden:!0}).filter((function(e){return((0,_.isSendEmailTask)(e)||(0,_.isChatTask)(e))&&(0,h.namesEqual)(e.ViewName,t)})).map((function(t){return(0,b.appSet)(e,t._path+".ViewName",a,!0)}));var n="Behavior.ChatbotSettings.SlashCommands";(e.get(n)||[]).filter((function(e){return(null==e?void 0:e.SlashCommand)&&(0,h.namesEqual)(e.ViewName,t)})).map((function(t,i){return(0,b.appSet)(e,n+"["+i+"].ViewName",a,!0)}))}},{key:"updateReferencesToViews",value:function(e){var t=this;e.viewsOfType(["dashboard","form"]).forEach((function(a){var n="Presentation.Controls["+a._index+"]",i=n+".ViewDefinition",r=e.get(n+".TableOrFolderName");"dashboard"===a.Action?t.updateDashboardView(e,i,r,n):"form"===a.Action&&t.updateFormView(e,i)}))}},{key:"updateViewSettings",value:function(e,t){var a=e.get(t+".Action"),n=t+".ViewDefinition",i=e.get(t+".TableOrFolderName");"deck"===a?this.updateDeckView(e,n,i):"card"===a?this.updateDrilldownView(e,n,i):"table"===a?this.updateTableView(e,n,i):"gallery"===a?this.updateGalleryView(e,n,i):"detail"===a||"slideshow"===a?this.updateSlideshowView(e,n,i):"map"===a?this.updateMapView(e,n,i):"chart"===a?this.updateChartView(e,n,i):"dashboard"===a?this.updateDashboardView(e,n,i,t):"search"===a?this.updateSearchView():"form"===a?this.updateFormView(e,n):"calendar"===a?this.updateCalendarView(e,n,i):"list"===a?this.updateListView(e,n,i):"onboarding"===a&&this.updateOnboardingView(e,n,i)}},{key:"updateListView",value:function(e,t,a){var n=T.default.schemaFor("CardViewSettings"),i=this.transferColumnSubList(e,T.default.schemaFor("SortInfo"),t,"SortBy","Column",a);this.updateIfNew(e,t+".SortBy",i);var r=this.transferColumn(e,n,t,"MainDeckImageColumn",a);this.updateIfNew(e,t+".MainDeckImageColumn",r);var o=this.transferColumn(e,n,t,"PrimaryDeckHeaderColumn",a);this.updateIfNew(e,t+".PrimaryDeckHeaderColumn",o);var s=this.transferColumn(e,n,t,"SecondaryDeckHeaderColumn",a);this.updateIfNew(e,t+".SecondaryDeckHeaderColumn",s);var l=this.transferColumn(e,n,t,"DeckSummaryColumn",a);this.updateIfNew(e,t+".DeckSummaryColumn",l);var u=this.transferColumnList(e,n,t,"ActionColumns",a);this.updateIfNew(e,t+".ActionColumns",u)}},{key:"updateDrilldownView",value:function(e,t,a){var n=T.default.schemaFor("CardViewSettings"),i=this.transferColumnSubList(e,T.default.schemaFor("SortInfo"),t,"SortBy","Column",a);this.updateIfNew(e,t+".SortBy",i);var r=this.transferColumn(e,n,t,"MainDeckImageColumn",a);this.updateIfNew(e,t+".MainDeckImageColumn",r);var o=this.transferColumn(e,n,t,"PrimaryDeckHeaderColumn",a);this.updateIfNew(e,t+".PrimaryDeckHeaderColumn",o);var s=this.transferColumn(e,n,t,"SecondaryDeckHeaderColumn",a);this.updateIfNew(e,t+".SecondaryDeckHeaderColumn",s);var l=this.transferColumn(e,n,t,"DeckSummaryColumn",a);this.updateIfNew(e,t+".DeckSummaryColumn",l);var u=this.transferColumnList(e,n,t,"ActionColumns",a);this.updateIfNew(e,t+".ActionColumns",u)}},{key:"updateDeckView",value:function(e,t,a){var n=T.default.schemaFor("DeckViewSettings"),i=this.transferColumnSubList(e,T.default.schemaFor("SortInfo"),t,"SortBy","Column",a);this.updateIfNew(e,t+".SortBy",i);var r=this.transferColumn(e,n,t,"MainDeckImageColumn",a);this.updateIfNew(e,t+".MainDeckImageColumn",r);var o=this.transferColumn(e,n,t,"PrimaryDeckHeaderColumn",a);this.updateIfNew(e,t+".PrimaryDeckHeaderColumn",o);var s=this.transferColumn(e,n,t,"SecondaryDeckHeaderColumn",a);this.updateIfNew(e,t+".SecondaryDeckHeaderColumn",s);var l=this.transferColumn(e,n,t,"DeckSummaryColumn",a);this.updateIfNew(e,t+".DeckSummaryColumn",l);var u=this.transferColumnList(e,n,t,"ActionColumns",a);this.updateIfNew(e,t+".ActionColumns",u)}},{key:"updateCalendarView",value:function(e,t,a){var n=T.default.schemaFor("CalendarViewSettings"),i=this.transferColumn(e,n,t,"StartDateColumn",a);this.updateIfNew(e,t+".StartDateColumn",i);var r=this.transferColumn(e,n,t,"EndDateColumn",a);this.updateIfNew(e,t+".EndDateColumn",r);var o=this.transferColumn(e,n,t,"StartTimeColumn",a);this.updateIfNew(e,t+".StartTimeColumn",o);var s=this.transferColumn(e,n,t,"EndTimeColumn",a);this.updateIfNew(e,t+".EndTimeColumn",s);var l=this.transferColumn(e,n,t,"LabelColumn",a);this.updateIfNew(e,t+".LabelColumn",l);var u=this.transferColumn(e,n,t,"CategoryColumn",a);this.updateIfNew(e,t+".CategoryColumn",u)}},{key:"updateOnboardingView",value:function(e,t,a){var n=T.default.schemaFor("OnboardingViewSettings"),i=this.transferColumn(e,n,t,"Image",a,!0,0);this.updateIfNew(e,t+".Image",i);var r=this.transferColumn(e,n,t,"Title",a,!0,0);this.updateIfNew(e,t+".Title",r);var o=this.transferColumn(e,n,t,"FirstBlurb",a,!0,1);this.updateIfNew(e,t+".FirstBlurb",o);var s=this.transferColumn(e,n,t,"SecondBlurb",a,!0,2);this.updateIfNew(e,t+".SecondBlurb",s)}},{key:"updateTableView",value:function(e,t,a){var n=T.default.schemaFor("TableViewSettings"),i=this.transferColumnSubList(e,T.default.schemaFor("SortInfo"),t,"SortBy","Column",a);this.updateIfNew(e,t+".SortBy",i);var r=this.transferColumnSubList(e,T.default.schemaFor("GroupInfo"),t,"GroupBy","Column",a);this.updateIfNew(e,t+".GroupBy",r);var o=this.transferColumn(e,n,t,"GroupAggregate",a);this.updateIfNew(e,t+".GroupAggregate",o);var s=this.transferColumnList(e,n,t,"ColumnOrder",a);this.updateIfNew(e,t+".ColumnOrder",s)}},{key:"updateGalleryView",value:function(e,t,a){var n=this.transferColumnSubList(e,T.default.schemaFor("SortInfo"),t,"SortBy","Column",a);this.updateIfNew(e,t+".SortBy",n)}},{key:"updateSlideshowView",value:function(e,t,a){var n=T.default.schemaFor("SlideshowViewSettings"),i=this.transferColumnSubList(e,T.default.schemaFor("SortInfo"),t,"SortBy","Column",a);this.updateIfNew(e,t+".SortBy",i);var r=this.transferColumn(e,n,t,"MainSlideshowImageColumn",a);this.updateIfNew(e,t+".MainSlideshowImageColumn",r);var o=this.transferColumnList(e,n,t,"HeaderColumns",a);this.updateIfNew(e,t+".HeaderColumns",o);var s=this.transferColumnList(e,n,t,"QuickEditColumns",a);this.updateIfNew(e,t+".QuickEditColumns",s);var l=this.transferColumnList(e,n,t,"ColumnOrder",a);this.updateIfNew(e,t+".ColumnOrder",l)}},{key:"updateMapView",value:function(e,t,a){var n=T.default.schemaFor("MapViewSettings"),i=this.transferColumn(e,n,t,"MapColumn",a);this.updateIfNew(e,t+".MapColumn",i);var r=e.get(t+".SecondaryTable"),o=this.transferColumn(e,n,t,"SecondaryColumn",r);this.updateIfNew(e,t+".SecondaryColumn",o)}},{key:"updateChartView",value:function(e,t,a){var n=T.default.schemaFor("ChartViewSettings"),i=this.transferColumn(e,n,t,"GroupAggregate",a);this.updateIfNew(e,t+".GroupAggregate",i);var r=e.get(t+".ChartType"),o=(0,y.getAllowedChartColumnTypes)(r||""),s=this.transferColumnList(e,n,t,"ChartColumns",a,{allowedTypes:o});this.updateIfNew(e,t+".ChartColumns",s)}},{key:"updateDashboardView",value:function(e,t,a,n){if(a&&!e.tableByName(a)){var i=(e.tables||[]).find((function(e){return e.IsValid})),r=(null==i?void 0:i.Name)||null;(0,b.appSet)(e,n+".TableOrFolderName",r)}var o=this.transferViewSubList(e,T.default.schemaFor("ViewEntry"),t,"ViewEntries","ViewName"),s=t+".ViewEntries",l=e.get(s);!p.default.isEqual(l,o)&&(this.updateIfNew(e,s,o),this.updateView(e,t))}},{key:"updateSearchView",value:function(){}},{key:"updateFormView",value:function(e,t){var a=T.default.schemaFor("FormViewSettings"),n=this.transferView(e,a,t,"FinishView");this.updateIfNew(e,t+".FinishView",n)}},{key:"updateDefaultStartView",value:function(e){var t=e.get("Presentation.DefaultStartView"),a=e.viewNames().sort(),n=e.settingsView();if(n&&a.push(n.Name),!t||!a.includes(t)&&!t.startsWith("=")){var i=a.length>0?a[0]:"";(0,b.appSet)(e,"Presentation.DefaultStartView",i)}}},{key:"updateSchema",value:function(e,t,a){var n=k(t),i=n?"AppData.DataSchemas["+n+"]":void 0;i&&t.startsWith(i+".Attributes")&&this.updateColumn(e,t,a,i)}},{key:"updateColumn",value:function(e,t,a,n){var i,r=k(t.replace(n+".","")),s=r?n+".Attributes["+r+"]":void 0;if(t.startsWith(s+".MetaData")){var l=e.get(s+".MetaData");if(l){if(t===s+".MetaData.BaseType"||t===s+".MetaData.ElementType"){var u=s+".MetaData."+(t.startsWith(s+".MetaData.BaseType")?"Base":"Element")+"Type",c=u+"Qualifier",p=e.get(u)||"",d=T.default.columnTypeMetaData()[p].defaultsName,f=T.default.schemaFor("AppTypeMetaDataDefaults").defaults(d,!0),m=(0,o.default)({},p,JSON.stringify(f,(function(e,t){if("$type"!==e)return t}),"  "));this.setDefaults(e,m,u,c),l=e.get(s+".MetaData")}(0,b.appSet)(e,s+".TypeAuxData",JSON.stringify(l,(function(e,t){if("$type"!==e)return t}),"  "))}}if(t.startsWith(s+".Name")){var v=null===(i=e.get(n))||void 0===i?void 0:i.AutoSchemaFrom,h=e.get(s+".Name");e.slices.forEach((function(t){if(t.SourceTable===v&&t.Columns&&t.Columns.includes(a)){var n=t.Columns.map((function(e){return e===a?h:e}));(0,b.appSet)(e,t._path+".Columns",n)}}))}if(t.startsWith(s+".Searchable")){var g=e.get(s+".Searchable"),y=e.get(s+".IsVirtual");!g&&y&&(0,b.appSet)(e,s+".IsScannable",!1)}}},{key:"updateTable",value:function(e,t,a){var n=this,i=function(t,a){var n=e.get(t+".Source")||"",i=e.get(t+".ProviderName")||"",r=e.get(t+".DataSourceName")||"",o=N.default.getSource(n,i,r,e.reduxRootStateDuringDispatch().sources);if(o&&p.default.isArray(o.Options)&&o.Options.length>0?(0,b.appSet)(e,t+".SourceQualifier",p.default.first(o.Options).Name,!0):(0,b.appSet)(e,t+".SourceQualifier",null,!0),(e.get(t+".Name")||"").startsWith("New Table")&&o&&p.default.isString(o.SourcePath)&&""!==o.SourcePath&&p.default.isArray(o.Options)&&o.Options.length<2){var s=e.uniqueName(o.SourcePath,a,e.getEntities(E.TemplatePath.Tables,{includeHidden:!0}));(0,b.appSet)(e,t+".Name",s)}};this.updateEntity(E.TemplatePath.Tables,e,t,a,[{property:"Name",includeNewEntities:!1,updateFunction:function(t,i){var r=e.get(t+".Name")||"",o=e.uniqueName(r,i,e.getEntities(E.TemplatePath.Tables,{includeHidden:!0}));r!==o&&(0,b.appSet)(e,t+".Name",o,!0),n.renameTable(e,a,o)}},{property:"Source",includeNewEntities:!1,updateFunction:i},{property:"SourcePath",includeNewEntities:!1,updateFunction:i},{property:"ProviderName",includeNewEntities:!1,updateFunction:i},{property:"DataSourceName",includeNewEntities:!1,updateFunction:i},{property:"SourceQualifier",includeNewEntities:!1,updateFunction:function(t,a){var n=e.get(t+".SourceQualifier")||"";if((e.get(t+".Name")||"").startsWith("New Table")){var i=e.uniqueName(n,a,e.getEntities(E.TemplatePath.Tables,{includeHidden:!0}));(0,b.appSet)(e,t+".Name",i)}}},{property:"UpdateMode",includeNewEntities:!1,updateFunction:function(t){(0,b.appSet)(e,t+".UpdateModeExpression",null,!0)}},{property:"UpdateModeExpression",includeNewEntities:!1,updateFunction:function(t){"="===e.get(t+".UpdateModeExpression")&&(0,b.appSet)(e,t+".UpdateModeExpression",'SWITCH(USEREMAIL(), \n  "user1@mydomain.com", "UPDATES_ONLY", \n  "user2@mydomain.com", "ALL_CHANGES", \n  "READ_ONLY")',!0),(0,b.appSet)(e,t+".UpdateMode",7,!0)}},{property:"EnablePartitioning",includeNewEntities:!1,updateFunction:function(t){e.get(t+".EnablePartitioning")?(0,b.appSet)(e,t+".SourcePartitionDefinition.DefaultValue",e.get(t+".Source"),!0):(0,b.appSet)(e,t+".Source",e.get(t+".SourcePartitionDefinition.DefaultValue"),!0)}},{property:"SourcePartitionDefinition.DefaultValue",includeNewEntities:!1,updateFunction:function(t){(0,b.appSet)(e,t+".Source",e.get(t+".SourcePartitionDefinition.DefaultValue"),!0)}},{property:"EnableWorksheetPartitioning",includeNewEntities:!1,updateFunction:function(t){e.get(t+".EnableWorksheetPartitioning")?(0,b.appSet)(e,t+".WorksheetPartitionDefinition.DefaultValue",e.get(t+".SourceQualifier"),!0):(0,b.appSet)(e,t+".SourceQualifier",e.get(t+".WorksheetPartitionDefinition.DefaultValue"),!0)}},{property:"WorksheetPartitionDefinition.DefaultValue",includeNewEntities:!1,updateFunction:function(t){(0,b.appSet)(e,t+".SourceQualifier",e.get(t+".WorksheetPartitionDefinition.DefaultValue"),!0)}},{property:"IsValid",includeNewEntities:!1,updateFunction:function(t){return n.deleteTable(e,t)}}])}},{key:"deleteTable",value:function(e,t){var a=this,n=e.get(t);n&&!n.IsValid&&e.views.filter((function(e){return e._isSystemGenerated&&e.TableOrFolderName===n.Name})).forEach((function(t){var n=t._path+".IsValid";(0,b.appSet)(e,n,!1),a.updateView(e,n)}))}},{key:"changePropertyForEntitiesAtPath",value:function(e,t,a,n,i,r){var o=p.default.get(e.appTemplate,t);p.default.isArray(o)&&o.forEach((function(o,s){(null==o?void 0:o[a])===n&&(0,b.appSet)(e,t+"["+s+"]."+a,i,r)}))}},{key:"changeTableInExpression",value:function(e,t,a,n,i){var r=p.default.get(e.appTemplate,t);if(!p.default.isArray(r)&&!p.default.isObject(r))return!1;var o=f.default.regexEscape(n)+"\\s*\\[",s=new RegExp(o,"gi"),l=i+"[",u=function(t){var n=!1;return a.forEach((function(a){var i=t+"."+a,r=e.get(i)||"";r&&s.test(r)&&((0,b.appSet)(e,i,r.replace(s,l)),n=!0)})),n},c=!1;return p.default.isArray(r)?r.forEach((function(e,a){u(t+"["+a+"]")&&(c=!0)})):c=u(t),c}},{key:"changeTableInTypeAux",value:function(e,t,a,n,i){var r=p.default.get(e.appTemplate,t);if(p.default.isArray(r)){var o='"ReferencedTableName": "'+n+'"',s=new RegExp(f.default.regexEscape(o),"gi"),l='"ReferencedTableName": "'+i+'"';r.forEach((function(n,i){var r=null==n?void 0:n[a];r&&r.indexOf(o)>=0&&(0,b.appSet)(e,t+"["+i+"]."+a,r.replace(s,l))}))}}},{key:"renameTable",value:function(e,t,a){if(t!==a){this.changePropertyForEntitiesAtPath(e,"AppData.DataSchemas","AutoSchemaFrom",t,a);var n=t+"_Schema",i=a+"_Schema";this.changePropertyForEntitiesAtPath(e,"AppData.DataSchemas","Name",n,i),this.changePropertyForEntitiesAtPath(e,"AppData.DataSets","SchemaName",n,i),this.changePropertyForEntitiesAtPath(e,"AppData.DataSets","PriorSchemaName",n,i),this.changePropertyForEntitiesAtPath(e,"Behavior.AppProcesses","InputSchemaName",n,i);for(var o=0;o<e.appTemplate.AppData.DataSchemas.length;o++)this.changeTableInExpression(e,"AppData.DataSchemas["+o+"].Attributes",["AppFormula","Default","DisplayName","Description","TypeAuxData"],t,a),this.changeTableInTypeAux(e,"AppData.DataSchemas[".concat(o,"].Attributes"),"TypeAuxData",t,a);this.changePropertyForEntitiesAtPath(e,"AppData.DataActions","Table",t,a),this.changePropertyForEntitiesAtPath(e,"AppData.DataActions","ActionDefinition.ReferencedTable",t,a);var s=[];s.push.apply(s,(0,r.default)(["ReferencedRows","NavigateTarget","EmailTo","Body","Subject","Message","Number","FileTarget","NewColumnValue"].map((function(e){return"ActionDefinition."+e})))),s.push("Condition");for(var l=e.get("AppData.DataActions")||[],u=0;u<l.length;u++){var c="AppData.DataActions["+u+"]",p=this.changeTableInExpression(e,c,s,t,a);(p=p||this.changeTableInExpression(e,c+".ActionDefinition.Assignments",["NewColumnValue"],t,a))&&this.updateAction(e,c)}this.changePropertyForEntitiesAtPath(e,"AppData.TableSlices","SourceTable",t,a,!0),this.changePropertyForEntitiesAtPath(e,"Presentation.FormatRules","TableOrSlice",t,a),this.changePropertyForEntitiesAtPath(e,"Presentation.Controls","TableOrFolderName",t,a),this.changePropertyForEntitiesAtPath(e,"Behavior.AppWorkflowRules","AppWorkflowEvent.Table",t,a),this.changePropertyForEntitiesAtPath(e,"Behavior.AppWorkflowRules","ForTableName",t,a),this.changeTableInSystemActions(e,t,a),"function"==typeof window.changeTableName&&window.changeTableName(t,a)}}},{key:"changeTableInSystemActions",value:function(e,t,a){var n=encodeURIComponent(t),i=encodeURIComponent(a),r=f.default.regexEscape(n);(p.default.get(e.appTemplate,E.TemplatePath.DataActions)||[]).forEach((function(t,a){if(p.default.isObject(t)&&t._isMinor&&"NAVIGATE_APP"===t.ActionType&&t.ActionDefinition){var n=t.ActionDefinition.NavigateTarget,o=new RegExp('^(=?CONCATENATE\\("#page=\\w+&table=)('.concat(r,")(&.*)")),s=n.replace(o,"$1".concat(i,"$3")),l="".concat(E.TemplatePath.DataActions,"[").concat(a,"].ActionDefinition.NavigateTarget");s!==n&&(0,b.appSet)(e,l,s)}}))}},{key:"updateSlice",value:function(e,t,a){var n=this;this.updateEntity(E.TemplatePath.Slices,e,t,a,[{property:"Name",includeNewEntities:!1,updateFunction:function(t,i){var r=e.get(t+".Name");if(r){var o=p.default.concat(e.getEntities(E.TemplatePath.Slices,{includeHidden:!0}),e.getEntities(E.TemplatePath.Tables,{includeHidden:!0})),s=(0,h.removeExpressionCharacters)(r);r!==(s=e.uniqueName(s,i,o))&&(0,b.appSet)(e,t+".Name",s,!0),n.renameSlice(e,a,s)}}},{property:"SourceTable",includeNewEntities:!1,updateFunction:function(t){var a=e.get(t+".SourceTable");if(a){var n=e.tableByName(a);if(n){var i=e.columnsFor(a),r=p.default.map(i,"Name");(0,b.appSet)(e,t+".Columns",r);var o=n.UpdateMode;(0,b.appSet)(e,t+".UpdateMode",o)}}}}])}},{key:"updateOcrModel",value:function(e,t,a){var n=this;this.updateEntity(E.TemplatePath.OcrModels,e,t,a,[{property:"Name",includeNewEntities:!1,updateFunction:function(t,a){var i=e.get(t+".Name")||"",r=e.uniqueName(i,a,e.getEntities(E.TemplatePath.OcrModels,{includeHidden:!0}));i!==r&&(0,b.appSet)(e,t+".Name",r,!0),n.renameOcrModel()}},{property:"IsValid",includeNewEntities:!1,updateFunction:function(t){if(!e.get(t+".IsValid")){var a=e.get(t+".Name"),n=e.get(t+".Table")||"",i=e.schemaByTableOrSliceName(n),r=e.appTemplate.AppData.DataSchemas.findIndex((function(e){return e.Name===i.Name}));if(!(r<0)){var o='OCR("'.concat(a,'"');(i.Attributes||[]).forEach((function(t,a){var n="AppData.DataSchemas[".concat(r,"].Attributes[").concat(a,"].Default"),i=t.Default;i&&0===i.indexOf(o)&&(0,b.appSet)(e,n,"")}))}}}},{property:"Table",includeNewEntities:!0,updateFunction:function(t){var a=e.get(t);if(a){var i=e.get(t+".Table"),r=T.default.schemaFor("AppOcrModel"),o=n.transferColumnPickLast(e,r,a,"ImageColumnName",i);n.updateIfNew(e,t+".ImageColumnName",o);var s=r.property("OutputColumnNames"),l=e.columnNames(i,s);(0,b.appSet)(e,t+".OutputColumnNames",l,!0)}}}])}},{key:"updatePredictiveModel",value:function(e,t,a){var n=this;this.updateEntity(E.TemplatePath.PredictiveModels,e,t,a,[{property:"Name",includeNewEntities:!1,updateFunction:function(t,a){var i=e.get(t+".Name")||"",r=e.uniqueName(i,a,e.getEntities(E.TemplatePath.PredictiveModels,{includeHidden:!0}));i!==r&&(0,b.appSet)(e,t+".Name",r,!0),n.renamePredictiveModel()}},{property:"Table",includeNewEntities:!0,updateFunction:function(t){var a=e.get(t);if(a){var i=e.get(t+".Table"),r=t+".Settings",o=a.Settings;if(o&&"SUPERVISED"===a.ModelType){var s=T.default.schemaFor("SupervisedModelSettings"),l=n.transferColumnPickLast(e,s,o,"OutputColumnName",i);n.updateIfNew(e,r+".OutputColumnName",l);var u=s.property("InputColumnNames"),c=e.columnNames(i,u).filter((function(e){return e!==l}));n.updateIfNew(e,r+".InputColumnNames",c)}}}},{property:"InputColumnNames",includeNewEntities:!1,updateFunction:function(){}},{property:"OutputColumnName",includeNewEntities:!1,updateFunction:function(){}}])}},{key:"updateAppProcess",value:function(e,t,a){var n=this;this.updateEntity(E.TemplatePath.Processes,e,t,a,[{property:"Name",includeNewEntities:!1,updateFunction:function(t,a,n,i){var r=e.get(t).Name,o=e.uniqueName(p.default.trim((0,h.removeSlashes)(r)),a,e.getEntities(E.TemplatePath.Processes,{includeHidden:!0}));if((0,h.namesEqual)(r,o)||((0,b.appSet)(e,t+".Name",o,!0),r=o),r&&!(0,h.namesEqual)(r,i)){var s,l=I(e.getEntities(E.TemplatePath.Bots,{includeHidden:!0}));try{for(l.s();!(s=l.n()).done;){var u=s.value;(0,h.namesEqual)(u.ProcessName,i)&&(0,b.appSet)(e,u._path+".ProcessName",r,!0)}}catch(e){l.e(e)}finally{l.f()}e.iterateNodes((function(t,a){(0,_.isCallProcessNode)(t)&&(0,h.namesEqual)(t.ProcessName,i)&&(0,b.appSet)(e,a+".ProcessName",r,!0)}))}(0,b.appSet)(e,t+".ProcessStateTableName",r+" Process Table",!1)}},{property:"IsValid",includeNewEntities:!1,updateFunction:function(t){var a=e.get(t);if(!a.IsValid){var i,r=I(e.getEntities(E.TemplatePath.Bots,{includeHidden:!0}));try{for(r.s();!(i=r.n()).done;){var o=i.value;(0,h.namesEqual)(o.ProcessName,a.Name)&&(0,b.appSet)(e,o._path+".ProcessName",null,!0)}}catch(e){r.e(e)}finally{r.f()}if(a.Nodes)for(var s=0;s<a.Nodes.length;s++){var l=t+".Nodes[".concat(s,"]");n.deleteEmbeddedAppComponentsRecursively(e,l)}}}}])}},{key:"updateAppProcessNode",value:function(e,t,a,n){var i=t.slice(a.length);if(".NodeType"===i){var r=e.get(t),o=e.get(a);if(r&&r!==n){this.deleteEmbeddedAppComponentsRecursively(e,a,n);var s=M[r];if(s){var l=T.default.schemaFor(s).defaults("BASE",!0);l.NodeType=r,l.StepName=o.StepName,l._ui=o._ui,(0,b.appSet)(e,a,l,!0),"CALL_PROCESS_FOR_EACH_ROW"===r&&(0,b.appSet)(e,a+".CallProcessNode",T.default.schemaFor("CallProcessNodeDefaults").defaults("BASE",!0),!0),"CALL_PROCESS_FOR_EACH_ROW"!==r&&"CALL_PROCESS"!==r||(0,b.appSet)(e,a+".Arguments",[],!0),"RUN_ACTION"===r?(0,w.createActionForNode)(e,a):"RUN_TASK"===r&&(0,O.createTaskForNode)(e,a)}}}".ProcessName"===i&&(e.get(t)!==n&&(0,b.appSet)(e,a+".Arguments",[],!0));if(".ExecuteInParallel"===i&&!1===n&&(0,b.appSet)(e,a+".StopOnError",!1,!0),".ExecuteInParallel"===i&&!1===n&&(0,b.appSet)(e,a+".RunAsBackgroundTask",!1,!0),".RunAsBackgroundTask"===i&&!1===n&&(0,b.appSet)(e,a+".ExecuteInParallel",!1,!0),".StepName"===i){var u=e.get(a),c=e.getProcessForNode(a),d=[];A.default.iterateProcessNodes(c,(function(e,t){t!==a&&e.StepName&&d.push(e.StepName)}));var f=u.StepName;f=p.default.trim((0,h.removeSlashes)((null==u?void 0:u.StepName)||""));var m=(0,h.uniqueValue)(f,d);if(m&&!(0,h.namesEqual)(m,u.StepName)&&(0,b.appSet)(e,a+".StepName",m,!0),!(0,h.namesEqual)(m,n))if((0,_.isRunTaskNode)(u)&&u.Task){var v=e.entityByName(E.TemplatePath.Tasks,u.Task);if(v&&(0,D.isEntityEmbedded)(null==v?void 0:v.Scope)){var g=e.uniqueName("Task for ".concat(m),v._index,e.getEntities(E.TemplatePath.Tasks,{includeHidden:!0}));(0,b.appSet)(e,v._path+".Name",g,!0),(0,b.appSet)(e,a+".Task",g,!0)}}else if((0,_.isRunActionNode)(u)&&u.Action){var y=e.tableForSchema(c.InputSchemaName||""),S=e.findDataAction(u.Action,null==y?void 0:y.Name);if(S&&(0,D.isEntityEmbedded)(null==S?void 0:S.Scope)){var N=e.uniqueName("Action for ".concat(m),S._index,e.getEntities(E.TemplatePath.DataActions,{includeHidden:!0}));(0,b.appSet)(e,S._path+".Name",N,!0),(0,b.appSet)(e,a+".Action",N,!0)}}}if(".WaitNodeType"===i){var C=e.get(t);C!==n&&"WaitForPeriod"===C&&((0,b.appSet)(e,a+".CustomizedTimeOut",!1,!0),(0,b.appSet)(e,a+".TimedOutNodes",[],!0))}if(".Action"===i){var P=e.get(t);n&&P!==n&&this.deleteNodeActionIfEmbedded(e,a,n)}if(".Task"===i){var I=e.get(t);n&&I!==n&&this.deleteNodeTaskIfEmbedded(e,a,n)}}},{key:"deleteNodeActionIfEmbedded",value:function(e,t,a){var n,i=e.get(t),r=e.getProcessForNode(t),o=e.tableForSchema(null!==(n=null==r?void 0:r.InputSchemaName)&&void 0!==n?n:void 0),s=e.findDataAction(a||(null==i?void 0:i.Action),null==o?void 0:o.Name);s&&(0,D.isEntityEmbedded)(null==s?void 0:s.Scope)&&(0,b.appSet)(e,s._path+".IsValid",!1)}},{key:"deleteNodeTaskIfEmbedded",value:function(e,t,a){var n=e.get(t),i=e.entityByName(E.TemplatePath.Tasks,a||(null==n?void 0:n.Task));i&&(0,D.isEntityEmbedded)(null==i?void 0:i.Scope)&&(0,b.appSet)(e,i._path+".IsValid",!1)}},{key:"deleteBotProcessIfEmbedded",value:function(e,t,a){var n=e.get(t),i=e.entityByName(E.TemplatePath.Processes,a||(null==n?void 0:n.ProcessName));i&&(0,D.isEntityEmbedded)(null==i?void 0:i.Scope)&&(0,b.appSet)(e,i._path+".IsValid",!1)}},{key:"deleteBotEventIfEmbedded",value:function(e,t,a){var n=e.get(t),i=e.entityByName(E.TemplatePath.Events,a||(null==n?void 0:n.EventName));i&&(0,D.isEntityEmbedded)(null==i?void 0:i.Scope)&&(0,b.appSet)(e,i._path+".IsValid",!1)}},{key:"deleteEmbeddedAppComponentsRecursively",value:function(e,t,a){var n=this,i=e.get(t);switch(a||(null==i?void 0:i.NodeType)){case"RUN_ACTION":this.deleteNodeActionIfEmbedded(e,t);break;case"RUN_TASK":this.deleteNodeTaskIfEmbedded(e,t);break;case"IF_ELSE":(i.IfNodes||[]).forEach((function(a,i){var r=t+".IfNodes[".concat(i,"]");n.deleteEmbeddedAppComponentsRecursively(e,r)})),(i.ElseNodes||[]).forEach((function(a,i){var r=t+".ElseNodes[".concat(i,"]");n.deleteEmbeddedAppComponentsRecursively(e,r)}));break;case"WAIT":(i.TimedOutNodes||[]).forEach((function(a,i){var r=t+".TimedOutNodes[".concat(i,"]");n.deleteEmbeddedAppComponentsRecursively(e,r)}))}}},{key:"updateAppEvent",value:function(e,t,a){var n=this;this.updateEntity(E.TemplatePath.Events,e,t,a,[{property:"Name",includeNewEntities:!1,updateFunction:function(t,n){var i=e.get(t+".Name")||"",r=e.uniqueName(i,n,e.getEntities(E.TemplatePath.Events,{includeHidden:!0}));i!==r&&((0,b.appSet)(e,t+".Name",r,!0),i=r),i&&i!==a&&(e.get("Behavior.AppBots")||[]).forEach((function(t,n){t.EventName===a&&(0,b.appSet)(e,"Behavior.AppBots[".concat(n,"].EventName"),i,!0)}))}},{property:"EventType",includeNewEntities:!0,updateFunction:function(t){var a={Change:T.default.schemaFor("AppChangeEventDefinitionDefaults").defaults("BASE",!0),Scheduled:T.default.schemaFor("AppScheduledEventDefinitionDefaults").defaults("BASE",!0),Chat:T.default.schemaFor("AppChatEventDefinitionDefaults").defaults("BASE",!0)};n.setDefaults(e,a,t+".EventType",t+".AppEventDefinition");var i=e.get(t+".EventType"),r=e.get(t+".AppEventDefinition.SchemaName");"Change"===i?((0,b.appSet)(e,t+".AppEventDefinition.FilterCondition",null,!0),r||(0,b.appSet)(e,t+".AppEventDefinition.SchemaName",e.firstName(e.updatable(e.schemas.filter((function(e){return"_Per User Settings_Schema"!==e.Name})))))):"Scheduled"===i?(0,b.appSet)(e,t+".FilterCondition",null,!0):"Chat"===i&&(0,b.appSet)(e,t+"AppEventDefinition.SlashCommand",e.nextSlashCommand(),!0)}},{property:"AppEventDefinition",includeNewEntities:!0,startsWith:!0,updateFunction:function(a){t===a+".AppEventDefinition.ForEachRowInTable"&&(e.get(t)?((0,b.appSet)(e,a+".AppEventDefinition.Table",e.firstName(e.updatable(e.tables)),!0),(0,b.appSet)(e,a+".AppEventDefinition.FilterCondition","true",!0),(0,b.appSet)(e,a+".FilterCondition",null,!0)):((0,b.appSet)(e,a+".AppEventDefinition.Table",null,!0),(0,b.appSet)(e,a+".AppEventDefinition.FilterCondition",null,!0)))}}])}},{key:"updateTasks",value:function(e,t,a){var n=this;this.updateEntity(E.TemplatePath.Tasks,e,t,a,[{property:"Name",includeNewEntities:!1,updateFunction:function(t,n){var i=e.get(t+".Name")||"",r=e.uniqueName(i,n,e.getEntities(E.TemplatePath.Tasks,{includeHidden:!0}));i!==r&&((0,b.appSet)(e,t+".Name",r,!0),i=r),i!==a&&e.iterateNodes((function(t,n){(0,_.isRunTaskNode)(t)&&t.Task===a&&(0,b.appSet)(e,"".concat(n,".Task"),i,!0)}))}},{property:"Inputs",includeNewEntities:!1,startsWith:!0,updateFunction:function(t){var a=e.get(t);a.Inputs&&a.Inputs.length>0&&e.iterateNodes((function(t,n){if((0,_.isRunTaskNode)(t)&&t.Task===a.Name){var i=p.default.cloneDeep(t.InputAssignments),o=p.default.differenceWith(p.default.filter(a.Inputs,"IsRequired"),i,(function(e,t){return e&&e.Name===(null==t?void 0:t.InputName)}));i=[].concat((0,r.default)(i),(0,r.default)(o.map((function(e){return{InputName:e?e.Name:"",InputValue:""}})))),i=p.default.intersectionWith(i,a.Inputs,(function(e,t){return!t||(null==e?void 0:e.InputName)===t.Name})),(0,b.appSet)(e,"".concat(n,".InputAssignments"),i,!0)}}))}},{property:"TableName",includeNewEntities:!0,updateFunction:function(t,a,i,r){var o=e.get(t),s=o;if(o.TableName){var l=o.TableName;if(r&&l&&!(0,h.namesEqual)(r,l)){if(n.isAmpEmailTask(o)){var u=d.default.getDefaultView(e,o.TableName);(0,b.appSet)(e,t+".ViewName",u,!0)}else if((0,_.isChatTask)(o)){var c=C.getDefaultView(e,o.TableName);(0,b.appSet)(e,t+".ViewName",c,!0)}if(s._isNew&&(0,_.isSendEmailTask)(o)){var p=(0,h.getDefaultEmailBody)(e,r,o);o.Body===p&&(0,b.appSet)(e,t+".Body",(0,h.getDefaultEmailBody)(e,l,o),!0)}}else if(l&&(0,_.isChatTask)(o)){var f=C.getDefaultView(e,o.TableName);(0,b.appSet)(e,t+".ViewName",f,!0)}}else(0,_.isChatTask)(o)&&(0,b.appSet)(e,t+".ViewName","None",!0)}},{property:"EmailType",includeNewEntities:!0,updateFunction:function(t){var a=e.get(t),i=a;if(a.TableName){var r=a.TableName;if(n.isAmpEmailTask(a)){var o=d.default.getDefaultView(e,r);(0,b.appSet)(e,t+".ViewName",o,!0)}i._isNew&&!i._isCopy&&(0,_.isSendEmailTask)(a)&&(0,b.appSet)(e,t+".Body",(0,h.getDefaultEmailBody)(e,r,a),!0)}}},{property:"Type",includeNewEntities:!0,updateFunction:function(t,a,i,r){var o,s,l,u=function(e){return Object.entries({Semantic:"AppWorkflowActionSemanticDefaults",Email:"AppWorkflowActionEmailDefaults",Notification:"AppWorkflowActionNotificationDefaults",SMS:"AppWorkflowActionSMSDefaults",TakeAction:"AppWorkflowActionTakeActionDefaults",Webhook:"AppWorkflowActionWebhookDefaults",MakeDoc:"AppWorkflowActionMakeDocDefaults",AppsScript:"AppWorkflowActionAppsScriptDefaults",Chat:"AppWorkflowActionChatDefaults"}).reduce((function(t,a){var n=(0,c.default)(a,2),i=n[0],r=n[1];return t[i]=T.default.schemaFor(r).defaults("BASE",!0),e&&(t[i].CreatedBy=e),t}),{})}((null===(o=e.get(t))||void 0===o?void 0:o.CreatedBy)||""),p=e.get(t),d=(null==p?void 0:p.Type)||"";((0,_.isAppsScriptTask)(p)||(0,_.isWebhookTask)(p))&&(0,b.appSet)(e,t+".OutputSchema",u[d].OutputSchema,!0),((0,_.isSendEmailTask)(p)||(0,_.isChatTask)(p))&&(0,b.appSet)(e,t+".ViewName","None",!0),n.setDefaults(e,u,t+".Type",t,!0);var f=p;if(p&&p.TableName&&f._isNew&&!f._isCopy){var m=p.TableName,v=(0,h.getDefaultEmailBody)(e,m,p);if((0,_.isSendEmailTask)(p))p.Subject||(0,b.appSet)(e,t+".Subject","<<_APPNAME>> Notification",!0),p.Body||(0,b.appSet)(e,t+".Body",v,!0);else if("Email"===r){var g=e.get(t+".Body");(0,b.appSet)(e,t+".Body",g===v?null===(s=u[d])||void 0===s?void 0:s.Body:g,!0)}}if(d&&d!==r){var y=(null==p?void 0:p.Name)||"";e.iterateNodes((function(t,a){(0,_.isRunTaskNode)(t)&&t.Task===y&&(0,b.appSet)(e,"".concat(a,".ActionType"),d,!0)}))}(0,b.appSet)(e,t+".MessageChannelName",null===(l=u[d])||void 0===l?void 0:l.MessageChannelName,!0)}},{property:"OutputSchema.Attributes",includeNewEntities:!0,startsWith:!0,updateFunction:function(i){var r="".concat(i,".OutputSchema");n.updateColumn(e,t,a,r)}}])}},{key:"isAmpEmailTask",value:function(e){return(0,_.isSendEmailTask)(e)&&("EmbeddedAppView"===e.EmailType||"NotSpecified"===e.EmailType&&"None"!==e.ViewName)}},{key:"updateAppBot",value:function(e,t,a){var n=this;this.updateEntity(E.TemplatePath.Bots,e,t,a,[{property:"Name",includeNewEntities:!1,updateFunction:function(t,a,n,i){var r=e.get(t),o=e.uniqueName(r.Name,a,e.getEntities(E.TemplatePath.Bots,{includeHidden:!0}));if((0,h.namesEqual)(o,r.Name)||(0,b.appSet)(e,t+".Name",o,!0),!(0,h.namesEqual)(o,i)&&r.ProcessName){var s=e.entityByName(E.TemplatePath.Processes,r.ProcessName);if(s&&(0,D.isEntityEmbedded)(null==s?void 0:s.Scope)){var l=e.uniqueName("Process for ".concat(o),s._index,e.getEntities(E.TemplatePath.Processes,{includeHidden:!0}));(0,b.appSet)(e,t+".ProcessName",l,!0),(0,b.appSet)(e,s._path+".Name",l,!0)}}}},{property:"EventName",includeNewEntities:!0,updateFunction:function(t,a,i,r){var o,s=e.get(t);if(s&&(r&&!(0,h.namesEqual)(s.EventName,r)&&n.deleteBotEventIfEmbedded(e,t,r),s.EventName)){var l=e.eventTableName(e.entityByName(E.TemplatePath.Events,s.EventName)),u=e.entityByName(E.TemplatePath.Processes,s.ProcessName),c=(null==u?void 0:u.InputSchemaName)?null===(o=e.tableForSchema(u.InputSchemaName))||void 0===o?void 0:o.Name:"";(0,h.namesEqual)(l,c)||(0,b.appSet)(e,t+".ProcessName",null)}}},{property:"TriggerDataChangeEvent",includeNewEntities:!0,updateFunction:function(t){var a=e.get(t);(null==a?void 0:a.TriggerDataChangeEvent)&&(0,b.appSet)(e,t+".TriggerDataChangeEventSync",!0,!0)}},{property:"ProcessName",includeNewEntities:!1,updateFunction:function(t){var i=e.get(t);a&&!(0,h.namesEqual)(null==i?void 0:i.ProcessName,a)&&n.deleteBotProcessIfEmbedded(e,t,a)}},{property:"IsValid",includeNewEntities:!1,updateFunction:function(t){var a=e.get(t);(null==a?void 0:a.IsValid)||(n.deleteBotProcessIfEmbedded(e,t),n.deleteBotEventIfEmbedded(e,t))}}])}},{key:"renameSlice",value:function(e,t,a){this.changePropertyForEntitiesAtPath(e,"Presentation.Controls","TableOrFolderName",t,a),this.changePropertyForEntitiesAtPath(e,"Behavior.AppWorkflowRules","AppWorkflowEvent.Table",t,a)}},{key:"renamePredictiveModel",value:function(){}},{key:"renameOcrModel",value:function(){}},{key:"updateBehavior",value:function(e,t){"Behavior.DomainAuthRequired"===t&&((0,b.appSet)(e,"Behavior.AuthRequired",!0,!0),(0,b.appSet)(e,"Behavior.AuthProvider","google",!0),(0,b.appSet)(e,"Behavior.AllowAllSignedInUsers",!1,!0))}}]),e}();t.default=V},723439:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addAction=function(e,t,a,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,n._addEntity)(e,{path:t,defaultSchema:"DataActionDefaults",entityToCopy:a,beforeCopying:function(t){return a&&(t._isCopy=!0),t.Table=e.firstName(e.tables),t},afterCopying:function(e){return e.CreatedBy="App owner",e},location:function(e){var t=i?"Automation":"Behavior";return e.Table?[t,"Actions",e.Table,e.Name]:[t,"Actions",e.Name]},skipNavigation:r})};var n=a(604246)},812711:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addAppBot=function(e,t,a){var s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(0,o._addEntity)(e,{path:t,defaultSchema:"AppBotDefaults",entityToCopy:a,afterCopying:function(t){if(t.ExecutionId=null,t.Id=null,a){if(t.ProcessName&&s){var o=e.entityByName(n.TemplatePath.Processes,t.ProcessName);if(o){var l=(0,r.addAppProcess)(e,"Behavior.AppProcesses",o);t.ProcessName=l.Name}else t.ProcessName=null}if(t.EventName&&s){var u=e.entityByName(n.TemplatePath.Events,t.EventName);if(u){var c=(0,i.addAppEvent)(e,n.TemplatePath.Events,u);t.EventName=c.Name}else t.EventName=null}}else t._uninitialized=!0;return t}})};var n=a(729633),i=a(195434),r=a(542177),o=a(604246)},195434:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addAppEvent=function(e,t,a){return(0,n._addEntity)(e,{path:t,defaultSchema:"AppEventDefaults",entityToCopy:a,beforeCopying:function(t){if("Change"===t.EventType&&!t.AppEventDefinition.SchemaName){var a=e.firstName(e.tables||[]),n=e.schemaByTableOrSliceName(a);t.AppEventDefinition.SchemaName=null==n?void 0:n.Name}return t},afterCopying:function(e){return e.ExecutionId=null,e.Id=null,e}})};var n=a(604246)},542177:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.addAppProcess=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],p=(0,c._addEntity)(e,{path:t,defaultSchema:"AppProcessDefaults",entityToCopy:a,afterCopying:function(e){return e.ExecutionId=null,e.Id=null,e.ProcessStateTableName=e.Name+" Process Table",e},skipNavigation:n});a&&r.default.iterateProcessNodes(p,(function(t,a){if((0,o.isRunTaskNode)(t)&&t.Task){var n=e.entityByName(s.TemplatePath.Tasks,t.Task);if(n&&(0,i.isEntityEmbedded)(null==n?void 0:n.Scope)){var r=(0,u.addTask)(e,s.TemplatePath.Tasks,n,!0);(0,c.appSet)(e,a+".Task",r.Name,!0)}}else if((0,o.isRunActionNode)(t)&&t.Action){var d=e.tableForSchema(p.InputSchemaName||""),f=e.findDataAction(t.Action,null==d?void 0:d.Name);if(f&&(0,i.isEntityEmbedded)(null==f?void 0:f.Scope)){var m=(0,l.addAction)(e,s.TemplatePath.DataActions,f,!0,!0);(0,c.appSet)(e,a+".Action",m.Name,!0)}}}));return p};var i=a(894002),r=n(a(113861)),o=a(772414),s=a(729633),l=a(723439),u=a(115634),c=a(604246)},608059:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addColumnToSlices=function(e,t,a){e.slices.filter((function(e){var a,n;return e.SourceTable===t.AutoSchemaFrom&&(null===(a=e.Columns)||void 0===a?void 0:a.length)===(null===(n=t.Attributes)||void 0===n?void 0:n.length)})).forEach((function(t){(0,n.appAppend)(e,t._path+".Columns",a)}))};var n=a(604246)},804172:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addFormatRule=function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,n._addEntity)(e,{path:t,defaultSchema:"FormatRuleDefaults",entityToCopy:a,beforeCopying:function(t){return t.TableOrSlice=e.firstName(e.tables),t},skipNavigation:i})};var n=a(604246)},445333:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addNewColumn=function(e,t,a,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,i._addEntity)(e,{path:t+".Attributes",defaultSchema:"SchemaFieldDefaults",entityToCopy:r,beforeCopying:function(e){return e},afterCopying:function(t){var i=t;if(a&&!t.Name){var r="New Column",o=(a.Attributes||[]).reduce((function(e,t){return e+(t.Name.startsWith(r)?1:0)}),0);i.Name="".concat(r).concat(o>0?" ".concat(o):"")}return i.IsVirtual=!1,a&&(0,n.addColumnToSlices)(e,a,i.Name),i},location:function(){return["Tables"]},skipNavigation:o})};var n=a(608059),i=a(604246)},993625:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addOcrModel=function(e,t,a){(0,n._addEntity)(e,{path:t,defaultSchema:"AppOcrModelDefaults",entityToCopy:a,location:function(e){return["Intelligence","OcrModels",e.Name]},beforeCopying:function(t){return t.Table=e.firstName(e.tables),t},afterCopying:function(e,t){return t&&(e.ImageColumnName=t.ImageColumnName,e.OutputColumnNames=t.OutputColumnNames),e.NeedsTraining=!0,e}})};var n=a(604246)},357794:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addPredictiveModel=function(e,t,a){(0,n._addEntity)(e,{path:t,defaultSchema:"AppPredictiveModelDefaults",entityToCopy:a,location:function(e){return["Intelligence","PredictiveModels",e.Name]},beforeCopying:function(t){return t.Table=e.firstName(e.tables),t},afterCopying:function(e,t){return t&&(e.InputColumnNames=t.InputColumnNames),e.JobId=null,e.Id=null,e.NeedsTraining=!0,e.ModelTemplateName=null,e.TrainOperationName=null,e}})};var n=a(604246)},537057:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addSlice=function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,n._addEntity)(e,{path:t,defaultSchema:"AppTableSliceDefaults",entityToCopy:a,location:function(e){return["Data","Slices",e.Name]},beforeCopying:function(t){var a;return t.SourceTable=e.firstName(e.tables),t.Columns=e.columnsFor(t.SourceTable).map((function(e){return e.Name})),t.Actions=["**auto**"],t.UpdateMode=(null===(a=e.tableByName(t.SourceTable))||void 0===a?void 0:a.UpdateMode)||0,t},afterCopying:function(e,t){return t&&(e.Columns=t.Columns,e.Actions=t.Actions),e},skipNavigation:i})};var n=a(604246)},930908:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(0,o._addEntity)(e,{path:t,defaultSchema:"AppTableDefaults",entityToCopy:a,beforeCopying:function(e){return e.UpdateMode=null==a?void 0:a.UpdateMode,e.DataAccessMode="as app creator",e.NeedsSchemaRegen=!0,e},afterCopying:function(e){var t=e;return(i.default.isNaN(t.UpdateMode)||t.UpdateMode===r.UpdateModeEnum.UNASSIGNED)&&(t.UpdateMode=r.UpdateModeEnum.ALL_CHANGES),e.Name||(t.Name=t.SourceQualifier||t.SourcePath||"New Table"),i.default.isObject(a)&&i.default.isFunction(window.saveChanges)&&s&&setTimeout(window.saveChanges,1e3),t},skipNavigation:n})};var i=n(a(496486)),r=a(417751),o=a(604246)},115634:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addTask=function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,n._addEntity)(e,{path:t,defaultSchema:"TaskDefaults",entityToCopy:a,beforeCopying:function(t){return t.TableName=e.firstName(e.tables),a&&(t._isCopy=!0),t},afterCopying:function(e){return e.CreatedBy="App owner",e},location:function(e){return["Automation","Tasks",e.Name]},skipNavigation:i})};var n=a(604246)},476218:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addView=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,i._addEntity)(e,{path:t,defaultSchema:"AppControlDefaults",entityToCopy:a,beforeCopying:function(t){return a&&(t._isCopy=!0),t.TableOrFolderName=e.firstName(e.tables),t},afterCopying:function(t){return n.dynamicRollouts.includeByOwnerId("UseSmartDefaultsDynamicRollout")?t.Position||(t.Position=e._nextOpenViewPosition()):"menu"!==t.Position&&"ref"!==t.Position&&(t.Position=e._nextOpenViewPosition()),t.CreatedBy="App owner",t},skipNavigation:r})};var n=a(44617),i=a(604246)},844165:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addVirtualColumn=function(e,t,a,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,i._addEntity)(e,{path:t+".Attributes",defaultSchema:"SchemaFieldDefaults",entityToCopy:r,beforeCopying:function(e){return e},afterCopying:function(t){var i=t;if(!t.Name){var r="New Virtual Column",o=(a.Attributes||[]).reduce((function(e,t){return e+(t.Name.startsWith(r)?1:0)}),0);i.Name=r+(o>0?" "+o:"")}return i.IsVirtual=!0,i.IsReadOnly=!0,(0,n.addColumnToSlices)(e,a,i.Name),i},location:function(e){return["Data","Columns",a.Name,e.Name]},skipNavigation:o})};var n=a(608059),i=a(604246)},761935:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addWorkflowRule=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,i._addEntity)(e,{path:t,defaultSchema:"AppWorkflowRuleDefaults",entityToCopy:a,skipNavigation:r,afterCopying:function(t){return(null==a?void 0:a.Actions)&&(t.Actions=(0,n.copyWorkflowActions)(e,a.Actions)),t}})};var n=a(321021),i=a(604246)},539969:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.applySuggestion=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.skipNavigation,v=a.inAutomationSection;t.Commands.forEach((function(t){var a,h=t.Type,g=t.Path,y=t.Value,S=t.Index;if(!i.default.isNil(g)&&!i.default.isNil(y)&&i.default.isString(g))if("ADD"===h)if("Presentation.Controls"===g)(0,p.addView)(e,g,y,n);else if("Presentation.FormatRules"===g)(0,s.addFormatRule)(e,g,y,n);else if("Behavior.AppWorkflowRules"===g)(0,f.addWorkflowRule)(e,g,y,n);else if("AppData.DataActions"===g)(0,r.addAction)(e,g,y,v,n);else if("Behavior.Tasks"===g)(0,c.addTask)(e,g,y,n);else if("AppData.DataSets"===g)(0,u.addTable)(e,g,y,n);else if("AppData.TableSlices"===g)(0,l.addSlice)(e,g,y,n);else if("Behavior.AppProcesses"===g)(0,o.addAppProcess)(e,g,y);else if(g.match(/AppData\.DataSchemas\[[0-9]*\]\.Attributes/)){var E=parseInt(g.replace("AppData.DataSchemas[","").replace("].Attributes",""));(0,d.addVirtualColumn)(e,"AppData.DataSchemas["+E+"]",e.schemas[E],y)}else(0,m.appAppend)(e,g,y);else if("INSERT"===h)(0,m.appInsert)(e,g,y,S);else if("CHANGE"===h){y.$values&&(y=y.$values);var A=e.get(g);i.default.isObject(A)&&i.default.isNumber(null===(a=A)||void 0===a?void 0:a._version)&&i.default.isObject(y)&&(y._version=A._version),i.default.isObject(A)&&i.default.isString(null==A?void 0:A._ui)&&i.default.isObject(y)&&(y._ui=A._ui),(0,m.appSet)(e,g,y)}}))};var i=n(a(496486)),r=a(723439),o=a(542177),s=a(804172),l=a(537057),u=a(930908),c=a(115634),p=a(476218),d=a(844165),f=a(761935),m=a(604246)},257248:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.commitNewNode=function(e,t,a){var n,u=i.default.schemaFor("TaskNodeDefaults").defaults("BASE",!0);u.StepName=(0,r.removeSlashes)(a).trim(),u._ui=null===(n=e.get(t))||void 0===n?void 0:n._ui,u._ui||(0,l.setGraphUiData)(u);(0,o.appSet)(e,t,u,!1),(0,s.createTaskForNode)(e,t)};var i=n(a(796586)),r=a(354547),o=a(604246),s=a(959532),l=a(20935)},321021:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.copyWorkflowActions=function(e,t){return(t||[]).map((function(t){t=Object.assign({},t);var a=e.entityByName(n.TemplatePath.Tasks,t.TaskName);if(a){var r=(0,i.addTask)(e,n.TemplatePath.Tasks,a,!0);t.TaskName=r.Name}return t}))};var n=a(729633),i=a(115634)},604246:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t._addEntity=function(e,t){var a,n=t.path,i=t.defaultSchema,r=t.entityToCopy,u=t.beforeCopying,c=t.afterCopying,p=t.location,d=t.skipNavigation,f=s.default.schemaFor(i).defaults("BASE",!0);o.default.isFunction(u)&&(f=u(f));o.default.isObject(r)&&(f=o.default.merge(f,r));o.default.isFunction(c)&&(f=c(f,r));f.IsValid=!0,f._isNew=!0,f._version=0,f.Name=e.uniqueName(f.Name,-1,e.getEntities(n,{includeHidden:!0}));var m=g(e,n,f);m>=0&&(f._index=m,f._path=n+"[".concat(m,"]"));if(p&&!d)l.default.setLocation(p(f));else if(!d){var v=(null===(a=e.reduxRootStateDuringDispatch().editorSettings)||void 0===a?void 0:a.location)||[];l.default.setLocationEntity(f.Name,v)}return f},t._clearCache=m,t._setJsonSetting=v,t.appAppend=g,t.appInsert=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e.appTemplate||o.default.isNil(a))return;var r=e.get(t);o.default.isNil(r)&&(r=[]);if(!o.default.isArray(r))return;var s=r.slice();s.splice(n,0,a),h(e,t,s,!0),i||u.default.check(e,t+"["+n+"]")},t.appRemove=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.appTemplate)return;var i=e.get(t);o.default.isNil(i)&&(i=[]);if(!o.default.isArray(i))return;if(i.length<=a)return;var s=(0,r.default)(i);s.splice(a,1),h(e,t,s,!0);var l=s.length-1;n||u.default.check(e,t+"["+l+"]")},t.appSet=h,t.updateObjectPathIdentity=d;var i,r=n(a(600861)),o=n(a(496486)),s=n(a(796586)),l=n(a(434187)),u=n(a(229588));function c(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw r}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function d(e,t){var a,n=e=Object.assign({},e),i=c(t);try{for(i.s();!(a=i.n()).done;){var s=a.value,l=n[s];if(o.default.isPlainObject(l))n[s]=Object.assign({},l);else{if(!o.default.isArray(l))break;n[s]=(0,r.default)(l)}n=n[s]}}catch(e){i.e(e)}finally{i.f()}return e}var f=function(){clearTimeout(i),i=window.setTimeout((function(){o.default.isFunction(window.showSaveButton)&&window.showSaveButton()}),1)};function m(e){e.cachedTables=null,e.cachedSchemas=null,e.cachedSlices=null,e.cachedActions=null,e.cachedViews=null,e.cachedFormatRules=null,e.cachedWorkflowRules=null,e.cachedColumns=null,e.cachedRoles=null,e.cachedProcesses=null,e.cachedBots=null,e.cachedEvents=null,e.cachedTasks=null}function v(e,t,a){e._findJsonSetting(t,(function(t,n,i){try{var r=JSON.parse(t),s=o.default.set(r,i,a),l=JSON.stringify(s);o.default.set(e.appTemplate,n,l)}catch(e){return}}))}function h(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.appTemplate){var i=e.get(t),r=o.default.toPath(t);e.appTemplate=d(e.appTemplate,r),v(e,r,a),e.get(t)!==a&&o.default.set(e.appTemplate,r,a),n||u.default.check(e,t,i),m(e),f()}}function g(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.appTemplate||o.default.isNil(a))return-1;var i=e.get(t);if(o.default.isNil(i)&&(i=[]),!o.default.isArray(i))return-1;var r=o.default.concat(i,[a]);h(e,t,r,!0);var s=r.length-1;return n||u.default.check(e,t+"["+s+"]"),s}},408602:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.CHAT_TASK_NAME=void 0,t.createActionForChat=function(e,t){var a=null,n=null,i=null;switch(t){case p.ChatActionType.SLASH_COMMAND_TRIGGER_WORKFLOW:a=Object.assign(Object.assign({},d),{Name:"Slash command",EventType:"Chat",AppEventDefinition:{EventType:"SLASH_COMMAND"}}),n=Object.assign(Object.assign({},d),{Name:"Handle slash command"});break;case p.ChatActionType.MESSAGE_DATA_CHANGE:a=Object.assign(Object.assign({},d),{Name:"Data change",EventType:"Change"}),i=g,n=h;break;case p.ChatActionType.MESSAGE_SCHEDULE:a=Object.assign(Object.assign({},d),{Name:"Schedule",EventType:"Scheduled"}),i=g,n=Object.assign(Object.assign({},h),{InputSchemaName:null});break;case p.ChatActionType.MESSAGE_ADDED_TO_SPACE:a=Object.assign(Object.assign({},d),{Name:"Added to space",EventType:"Chat",AppEventDefinition:{EventType:"ADDED_TO_SPACE"}}),i=g,n=Object.assign(Object.assign({},h),{InputSchemaName:null});break;case p.ChatActionType.MESSAGE_REMOVED_FROM_SPACE:a=Object.assign(Object.assign({},d),{Name:"Removed from space",EventType:"Chat",AppEventDefinition:{EventType:"REMOVED_FROM_SPACE"}}),i=g,n=Object.assign(Object.assign({},h),{InputSchemaName:null});break;case p.ChatActionType.CUSTOM:break;default:return}a&&(a=(0,l.addAppEvent)(e,o.TemplatePath.Events,a));n&&(t===p.ChatActionType.MESSAGE_DATA_CHANGE&&(n.InputSchemaName=a.AppEventDefinition.SchemaName),n=(0,u.addAppProcess)(e,o.TemplatePath.Processes,n),i&&(0,c.createTaskForNode)(e,n._path+".Nodes[0]",i));var f=(0,s.addAppBot)(e,o.TemplatePath.Bots,{IsValid:!0,_isNew:!0,Name:t===p.ChatActionType.CUSTOM?"New Bot":t,EventName:null==a?void 0:a.Name,ProcessName:null==n?void 0:n.Name},!1);r.default.setLocationEntity(f.Name,["Automation","Bots"])};var i=n(a(796586)),r=n(a(434187)),o=a(729633),s=a(812711),l=a(195434),u=a(542177),c=a(959532),p=a(547058),d={Scope:"LOCAL"},f="Send a chat message";t.CHAT_TASK_NAME=f;var m=i.default.schemaFor("TaskNodeDefaults"),v=Object.assign(Object.assign({},m.defaults("BASE",!0)),{NodeType:"RUN_TASK",Task:f,ActionType:"Chat",StepName:f}),h=Object.assign(Object.assign({},d),{Name:"New Process",Nodes:[v]}),g=Object.assign(Object.assign({},d),{Name:f,Type:"Chat"})},628872:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.createActionForNode=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=r.default.schemaFor("DataActionDefaults").defaults("BASE",!0),u=e.getProcessForNode(t),c=null===(a=e.tableForSchema((null==u?void 0:u.InputSchemaName)||void 0))||void 0===a?void 0:a.Name;l.Table=c,l.IsValid=!0,l._isNew=!0,l._version=0;for(var p=0,d=Object.entries(n);p<d.length;p++){var f=(0,i.default)(d[p],2),m=f[0],v=f[1];l[m]=v}l.Scope="PROCESS";var h=e.get(t);return l.Name=((null==h?void 0:h.StepName)||"Embedded")+" Action - 1",l.Name=e.uniqueName(l.Name||"New action",-1,e.getEntities(o.TemplatePath.DataActions,{includeHidden:!0})),(0,s.appAppend)(e,o.TemplatePath.DataActions,l),(0,s.appSet)(e,t+".Action",l.Name),l};var i=n(a(627424)),r=n(a(796586)),o=a(729633),s=a(604246)},400782:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.createActionForTask=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.default.schemaFor("DataActionDefaults").defaults("BASE",!0),l=e.get(t);if(!l)return null;n.Table=l.TableName,n.IsValid=!0,n._isNew=!0,n._version=0;for(var u=0,c=Object.entries(a);u<c.length;u++){var p=(0,i.default)(c[u],2),d=p[0],f=p[1];n[d]=f}return n.Name=e.uniqueName(n.Name||"New action",-1,e.getEntities(o.TemplatePath.DataActions,{includeHidden:!0})),(0,s.appAppend)(e,o.TemplatePath.DataActions,n),(0,s.appSet)(e,t+".ActionName",n.Name),n};var i=n(a(627424)),r=n(a(796586)),o=a(729633),s=a(604246)},684690:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.createEventForBot=function(e,t,a){var n=a.Name,s=a.SchemaName,l=i.default.schemaFor("AppEventDefaults").defaults("BASE",!0);l.IsValid=!0,l._isNew=!0,l._version=0,l.Scope="LOCAL",l.Name=e.uniqueName(n||"New event",-1,e.getEntities(r.TemplatePath.Events,{includeHidden:!0})),l.AppEventDefinition.SchemaName=s||null,(0,o.appAppend)(e,r.TemplatePath.Events,l),(0,o.appSet)(e,t+".EventName",l.Name,!0)};var i=n(a(796586)),r=a(729633),o=a(604246)},838484:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.createProcessForBot=function(e,t){var a,n,l,u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=e.get(t),p=i.default.schemaFor("AppProcessDefaults").defaults("BASE",!0);p.IsValid=!0,p._isNew=!0,p._version=0,p.Scope="LOCAL",p.Name="Process for ".concat((null==c?void 0:c.Name)||"bot"," - 1"),p.Name=e.uniqueName(p.Name,-1,e.getEntities(r.TemplatePath.Processes,{includeHidden:!0}));var d=e.entityByName(r.TemplatePath.Events,null==c?void 0:c.EventName);switch(null==d?void 0:d.EventType){case"Scheduled":(null===(a=d.AppEventDefinition)||void 0===a?void 0:a.ForEachRowInTable)&&(p.InputSchemaName=null===(n=e.schemaByTableOrSliceName(d.AppEventDefinition.Table))||void 0===n?void 0:n.Name);break;case"Change":p.InputSchemaName=null===(l=d.AppEventDefinition)||void 0===l?void 0:l.SchemaName}(0,o.addAppProcess)(e,r.TemplatePath.Processes,p,u),(0,s.appSet)(e,t+".ProcessName",p.Name,!1)};var i=n(a(796586)),r=a(729633),o=a(542177),s=a(604246)},959532:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.createTaskForNode=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=r.default.schemaFor("TaskDefaults").defaults("BASE",!0),u=e.getProcessForNode(t),c=null===(a=e.tableForSchema((null==u?void 0:u.InputSchemaName)||void 0))||void 0===a?void 0:a.Name;l.TableName=c,l.IsValid=!0,l._isNew=!0,l._version=0;for(var p=0,d=Object.entries(n);p<d.length;p++){var f=(0,i.default)(d[p],2),m=f[0],v=f[1];l[m]=v}l.Scope="PROCESS";var h=e.get(t);l.Name=((null==h?void 0:h.StepName)||"Embedded")+" Task - 1",l.Name=e.uniqueName(l.Name||"New task",-1,e.getEntities(o.TemplatePath.Tasks,{includeHidden:!0})),(0,s.appAppend)(e,o.TemplatePath.Tasks,l),(0,s.appSet)(e,t+".Task",l.Name)};var i=n(a(627424)),r=n(a(796586)),o=a(729633),s=a(604246)},855002:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.deleteNode=function(e,t){var a=r.default.toPath(t),n=+a[a.length-1],u=(0,o.fromPath)(a.slice(0,-1)),c=e.get(u)||[];s.default.deleteEmbeddedAppComponentsRecursively(e,t),(0,l.appSet)(e,u,[].concat((0,i.default)(c.slice(0,n)),(0,i.default)(c.slice(n+1))),!1)};var i=n(a(600861)),r=n(a(496486)),o=a(354547),s=n(a(229588)),l=a(604246)},568839:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.insertNewNode=function(e,t,a){var n=a.currentEditPath,p=a.createProcessForBotPath,d=a.uiId;if(p){(0,c.createProcessForBot)(e,p,!0);var f=e.get(p+".ProcessName"),m=e.entityByName(l.TemplatePath.Processes,f);t="Behavior.AppProcesses[".concat(m._index,"]").concat(t)}if(n){var v=e.get(n);if(null==v?void 0:v.StepName){var h=o.default.schemaFor("RunActionNodeDefaults").defaults("BASE",!0);h.StepName=v.StepName,h._ui=v._ui,(0,u.appSet)(e,n,h,!1)}else{var g=r.default.toPath(n),y=(0,s.fromPath)(g.slice(0,-1)),S=e.get(y)||[],E=+g[g.length-1];(0,u.appSet)(e,y,[].concat((0,i.default)(S.slice(0,E)),(0,i.default)(S.slice(E+1))),!1);for(var A=r.default.toPath(t),T=0;T<g.length&&!(T>=A.length);T++)if(T===g.length-1){var N=g[T];if(isNaN(Number(N)))break;var _=+N,b=+A[T];if(_<=b){A[T]="".concat(b-1),t=(0,s.fromPath)(A);break}}else if(A[T]!==g[T])break}}var w=o.default.schemaFor("EditorNewNodeDefaults").defaults("BASE",!0);w._ui=d;var O=r.default.toPath(t),D=+O[O.length-1];(0,u.appInsert)(e,(0,s.fromPath)(O.slice(0,-1)),w,D)};var i=n(a(600861)),r=n(a(496486)),o=n(a(796586)),s=a(354547),l=a(729633),u=a(604246),c=a(838484)},895706:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.patchNode=function(e,t,a){var n=e.get(t),o=i.default.merge(n,a);(0,r.appSet)(e,t,o,t.endsWith("._ui"))};var i=n(a(496486)),r=a(604246)},835625:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.updateDeepLink=function(e,t,a){var n,r;if(!e)return e;if(a)return Object.assign(Object.assign({},e),{_deepLink:a});if(!t||!t.startsWith("Presentation.Controls["))return Object.assign(Object.assign({},e),{_deepLink:void 0});var o=i.default.toPath(t),s=parseInt(o[2]),l=null===(r=null===(n=e.Presentation)||void 0===n?void 0:n.Controls)||void 0===r?void 0:r[s];if(!l)return e;var u="control="+encodeURI(l.Name);return Object.assign(Object.assign({},e),{_deepLink:u})};var i=n(a(496486))},149852:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.transportProvider=t.makeConversationClient=void 0;var i=a(457470),r=a(579911),o=a(635672),s=n(a(593186)),l={StartSession:"/api/conversation/startsession",UpdateSession:"/api/conversation/updatesession",DetectIntent:"/api/conversation/detectintent"},u=function(e,t){return function(a,n,i){if(a.name in e){var l=e[a.name],u=r.base64.stringify(n);(0,o.ajaxPost)(l,u,{headers:{Accept:"text/proto-base64","Content-Type":"text/proto-base64"},timeout:(null==t?void 0:t.timeout)||0}).then((function(e){var t=r.base64.parse(e);i(null,t)})).catch((function(e){i(e,null)}))}else s.default.ReportErrorOnce({errorMessage:"ConversationApi Base 64: Unknown method",methodName:null==a?void 0:a.name})}};t.transportProvider=u;t.makeConversationClient=function(){return i.AppSheetConversationProto.AppSheetConversationService.create(u(l),!1,!1)}},478969:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.appEditMiddleware=void 0;var n=a(44617),i=a(308721),r=a(472419);t.appEditMiddleware=function(e){return function(t){return function(a){var o=t(a);if(!(n.dynamicRollouts.includeByUserId("SuggestFilteredViewsRollout")||n.dynamicRollouts.includeByUserId("VFESecondaryNav")))return o;var s=e.dispatch;return r.actionTypesToConsiderForInvalidation.includes(a.type)&&s((0,i.invalidateSuggestedActions)({actionType:a.type,name:a.name})),o}}}},295523:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RETRY_COUNT=t.ERROR_MESSAGES=void 0;var n=a(457470),i=a(883943);t.RETRY_COUNT=3;var r=[{type:"agent",id:"error-1",content:(0,i.makeTextResponse)("I was unable to initiate this conversation. Reporting a bug will send AppSheet a copy of this conversation so our team can investigate the issue."),index:0},{type:"agent",id:"error-2",content:n.AppSheetConversationProto.ResponseMessage.create({messageId:"error-2",promptResponse:n.AppSheetConversationProto.PromptResponse.create({availablePrompts:[{external:n.AppSheetConversationProto.NavigateExternalAction.create({display:"Report a bug",target:"https://taskflow.corp.google.com/workspaces/2843840"})}]})}),index:1}];t.ERROR_MESSAGES=r},883943:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeTextResponse=t.makeErrorResponse=t.getColumnsListString=t.getColumnNameTextAndClass=t.MAX_NAMES_TO_SHOW=void 0;var n=a(457470);t.makeTextResponse=function(e,t){return n.AppSheetConversationProto.ResponseMessage.create({textResponse:n.AppSheetConversationProto.TextResponse.create({value:e}),messageId:t})};t.makeErrorResponse=function(e){return""===e?n.AppSheetConversationProto.ResponseMessage.create({errorResponse:n.AppSheetConversationProto.ErrorResponse.create({})}):n.AppSheetConversationProto.ResponseMessage.create({errorResponse:n.AppSheetConversationProto.ErrorResponse.create({chatResponse:e})})};t.MAX_NAMES_TO_SHOW=3;t.getColumnsListString=function(e){var t=e.length;return t>3?e.slice(0,3).join(", ")+" ...".concat(t-3," more"):e.join(", ")};t.getColumnNameTextAndClass=function(e,t){switch(e.editStatus){case n.AppSheetConversationProto.EditStatus.EDIT_STATUS_PENDING_ADD:return{columnText:"+ ".concat(e.column),columnClassName:t.columnNameAdd};case n.AppSheetConversationProto.EditStatus.EDIT_STATUS_PENDING_DELETE:return{columnText:"- ".concat(e.column),columnClassName:t.columnNameDelete};case n.AppSheetConversationProto.EditStatus.EDIT_STATUS_PENDING_CHANGE:return{columnText:e.column,columnClassName:t.columnNameEdit}}return{columnText:e.column,columnClassName:t.columnNameNoChange}}}}]);
//# sourceMappingURL=/cloud-sources/prod/3a2ef85ddff6a875365e573123c6c91111f3b22513ab05fd10f8ceab1acef7ef.map/