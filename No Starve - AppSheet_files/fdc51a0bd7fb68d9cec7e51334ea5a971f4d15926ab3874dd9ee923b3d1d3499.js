(self.webpackChunkappsheet_app=self.webpackChunkappsheet_app||[]).push([["components_app_types_displays_index_ts-scripts__shared_polyfills_ts-src_editor_top_nav_bar_ic-93b4a3"],{112963:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.scrollCooldown=t.default=void 0;var r=n(a(525965));t.scrollCooldown=100;var i=r.default;t.default=i},700386:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.ASTooltip=void 0;var r=n(a(238416)),i=a(697211),o=n(a(617134)),l=n(a(294184)),s=n(a(667294)),u=n(a(571524)),d=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},c=(0,i.makeStyles)((function(e){return{tooltip:{textAlign:"left",fontSize:".667rem",padding:"".concat(e.spacing(.75),"px ").concat(e.spacing(1),"px"),lineHeight:"1.8em"},hidden:{visibility:"hidden"}}})),p=s.default.forwardRef((function(e,t){var a=e.title,n=d(e,["title"]),p=c(),f=u.default.IsMobileBrowser()||u.default.InMobileWebView()?"":a;"string"==typeof f&&(f=f.trim());var h=!f||Array.isArray(f)&&0===f.length;return s.default.createElement(i.Tooltip,Object.assign({ref:t,title:f,TransitionComponent:o.default,classes:{tooltip:(0,l.default)(p.tooltip,(0,r.default)({},p.hidden,h))}},n))}));t.ASTooltip=p},944762:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ButtonSelectTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(366115)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(496486)),p=n(a(667294)),f=n(a(294184)),h=n(a(112963)),m=a(803583),v=n(a(365914)),y=n(a(593186));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.ButtonSelectTestIds=r,function(e){e.Button="button-select-button"}(r||(t.ButtonSelectTestIds=r={}));var w=function(e){(0,s.default)(a,e);var t=g(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).resizeButtons=n.resizeButtons.bind((0,l.default)(n)),n}return(0,o.default)(a,[{key:"resizeButtons",value:function(){if(this.wrapper&&!this.wrapper.className.includes("ButtonSelect--colorMode")){var e=this.wrapper.offsetWidth,t=[].slice.call(this.wrapper.children),a=t.map((function(e){if(e.className.includes("--blockMode"))return 80;var t=e.getAttribute("data-initialwidth");return t||(t=e.offsetWidth,e.setAttribute("data-initialwidth",t)),t}));a.push(60);var n=1.2*Math.max.apply(Math.max,a),r=100/Math.min(t.length,Math.floor(e/n))+"%";t.forEach((function(e){e.style.width=r}))}}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"onItemSelected",value:function(e,t){var a=this;if(this.props.appModel&&this.props.appModel.inRollout("orderedEnumListSelection")){if(this.props.readOnly)return;var n=this.props.selected||[];c.default.isArray(n)||(n=[n]);var r=this.props.options.map(String),i=new Array(r.length),o=!1;if(n.forEach((function(t){if(a.props.multiselect){var n=r.indexOf(t);n>=0?i[n]=t:i.push(t)}t===e&&(o=!0)})),this.props.listAttribute&&this.props.listAttribute.isRequired()&&!this.props.multiselect&&o)return;return i[t]=o?void 0:e,void(this.props.onChange&&this.props.onChange(i.filter((function(e){return null!=e}))))}if(!this.props.readOnly){var l=this.props.selected||[];c.default.isArray(l)||(l=[l]);var s=c.default.includes(l,e);if(!this.props.listAttribute||!this.props.listAttribute.isRequired()||this.props.multiselect||!s){var u=v.default.arrayToggle(l,e,this.props.multiselect);this.props.onChange&&this.props.onChange(u)}}}},{key:"enumOptionStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];try{var t=e.map((function(e){return e.length})),a=e.length,n=c.default.mean(t),r=a>1?c.default.sum(t.map((function(e){return Math.pow(n-e,2)})))/(a-1):0;return{AverageLength:n,DistinctCount:c.default.uniq(e).length,EmptyRecordPercent:0,LongestValue:c.default.maxBy(e,(function(e){return e.length})),MaxLength:c.default.max(t),MinLength:c.default.min(t),MostFrequentValues:e,RecordCount:a,StdDevLength:Math.sqrt(r)}}catch(e){return y.default.ReportErrorOnce({errorMessage:"Error in enumOptionStats",error:e}),null}}},{key:"render",value:function(){var e,t=this,a=this.props.selected;this.props.ignoreCase&&(a=a.map((function(e){return null==e?e:e.toString().toLowerCase()}))),e=this.props.colorMode?m.TypeDisplaysApi.Color:this.props.elementAttribute?m.TypeDisplaysApi.lookup(this.props.elementAttribute):m.TypeDisplaysApi.Text;var n=(0,f.default)("ButtonSelect",{"ButtonSelect--read-only":this.props.readOnly,"ButtonSelect--large-text":this.props.largeText,"ButtonSelect--colorMode":this.props.colorMode,"ButtonSelect--color-mode-scale":this.props.colorModeScaleToFit,"ButtonSelect--stack":this.props.stack}),r=this.props.options.map(String).filter((function(e){"string"!=typeof e&&"number"!=typeof e&&y.default.warnToDevConsole("ButtonSelect was given a invalid option",e),t.props.ignoreCase&&e&&(e=e.toString().toLowerCase());var n=a&&a.indexOf(e)>=0;return!t.props.readOnly||n}));return p.default.createElement("div",{className:n,ref:function(e){t.wrapper=e}},r.map((function(n,r){t.props.ignoreCase&&n&&(n=n.toString().toLowerCase());var i=a&&a.indexOf(n)>=0;return p.default.createElement(b,{option:n,id:n,key:n,index:r,isSelected:i,onSelect:t.onItemSelected.bind(t),colorMode:t.props.colorMode,attribute:t.props.elementAttribute,table:t.props.table,dataContext:t.props.dataContext,appModel:t.props.appModel,TypeDisplay:e})})))}}]),a}(p.default.Component);w.defaultProps={selected:[]};var b=function(e){(0,s.default)(a,e);var t=g(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"onTap",value:function(){this.props.onSelect&&this.props.onSelect(this.props.id,this.props.index)}},{key:"render",value:function(){var e=null;if(this.props.dataContext){var t={};t[this.props.attribute.name()]=this.props.option,e=this.props.dataContext.augmentWithRowData(t)}var a=this.props.colorMode,n=this.props.TypeDisplay&&this.props.TypeDisplay.isBlock(),i=(0,f.default)("ButtonSelectButton",{"ButtonSelectButton--selected":this.props.isSelected,"ButtonSelectButton--read-only":this.props.readOnly,"ButtonSelectButton--color-mode":a,"ButtonSelectButton--text-mode":!a,"ButtonSelectButton--block-mode":n}),o=null;a&&c.default.isString(this.props.option)?(o=p.default.createElement("span",{className:"ButtonSelectButton__text"}),i+=" ButtonSelectButton--color-mode--"+this.props.option.toLowerCase()):o=p.default.createElement(this.props.TypeDisplay,{attribute:this.props.attribute,value:this.props.option,appModel:this.props.appModel,allowTaps:!1,ignoreFormatRuleColors:!0,imageDisplayType:"full",table:this.props.table,dataContext:e||this.props.dataContext,displayMode:"inline",isBasic:!0});var l=null;this.props.isSelected&&(n||a)&&(l=p.default.createElement("aside",{className:(0,f.default)({"ButtonSelectButton__selection-indicator":n,"ButtonSelectButton__color-selection-indicator":a,"ButtonSelectButton__color-selection-indicator--dark":a&&"black"!==this.props.option})},p.default.createElement("span",null,p.default.createElement("i",{className:"fa fa-check"}))));var s=a?this.props.option:void 0;return a&&this.props.isSelected&&(s+=" - selected"),p.default.createElement("div",{className:(0,f.default)("ButtonSelectButton__wrapper",{"ButtonSelectButton__wrapper--colorMode":a,"ButtonSelectButton__wrapper--blockMode":n})},p.default.createElement(h.default,{enabled:!this.props.readOnly,className:i,onTap:this.onTap.bind(this),title:s,"data-testid":r.Button},o,l))}}]),a}(p.default.Component),S=w;t.default=S},388884:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,n,r,d=e.table,p=e.attribute,y=e.dataContext,g=e.appModel,R=e.transaction,k=e.savedSelection,I=e.isTableQuickEdit,x=e.multiselect,N=e.onChange,U=(0,C.useRef)(),Q=(0,C.useRef)(null),X=C.default.useState(!1),Z=(0,o.default)(X,2),J=Z[0],ee=Z[1],te=C.default.useState(null),ae=(0,o.default)(te,2),ne=ae[0],re=ae[1],ie=C.default.useState([]),oe=(0,o.default)(ie,2),le=oe[0],se=oe[1],ue=C.default.useState(null),de=(0,o.default)(ue,2),ce=de[0],pe=de[1],fe=C.default.useState(!1),he=(0,o.default)(fe,2),me=he[0],ve=he[1],ye=C.default.useState(),ge=(0,o.default)(ye,2),we=ge[0],be=ge[1],Se=C.default.useState(),Te=(0,o.default)(Se,2),Ce=Te[0],Re=Te[1],Ee=(0,E.usePrevious)(me),ke=function(e,t){return p.localizeWireValue(e,{transaction:R,noRefKeyFallback:t})},Ie=!!p.referencedTableName,Ae=!(null===(a=e.tableSchema)||void 0===a?void 0:a.labelBasicAttribute())&&!!(null===(n=e.tableSchema)||void 0===n?void 0:n.labelImageAttribute()),De=null!==(r=null!=ne?ne:k)&&void 0!==r?r:"",Me=null!=ce?ce:!x&&ke(k,Ae)||"";(0,C.useEffect)((function(){var e,t=null!=ne&&!(0,S.default)(ne,k);if(!J){if("escape"===we)re(null);else if(t)return void N(De||(x?[]:""));null!=ne&&re(null),null!=ce&&pe(null)}("clear"===Ce||null!=we&&document.activeElement===document.body)&&(null===(e=U.current)||void 0===e||e.focus()),we&&be(void 0),Ce&&Re(void 0)}),[we,Ce,me,J,x,N,Ee,k,De,ce,ne]);var xe=e.allowAdds&&!!Me,Ne=xe&&!le.includes(Me),Oe=e.allowAddsThroughRef,_e=Oe,Be=x&&!!H(le),Pe=Be&&!Me;(0,C.useEffect)((function(){var t=[].concat((0,i.default)(xe?[_]:[]),(0,i.default)(Oe?[B]:[]),(0,i.default)(Be?[P]:[])),a=e.options.map(String),n=F(k),r=F(ne);se((0,T.default)(t,a,n,r))}),[e.options,k,xe,Oe,Be,ne]);var Le=le.length-H(le),Ve=W(),Fe=J?(0,A.mapActionName)("Close"):(0,A.mapActionName)("Open"),He=x?f.default:h.default,We=C.default.createElement(D.ASTooltip,{title:Fe,arrow:!0,placement:"bottom",enterDelay:1e3,enterNextDelay:1e3,leaveDelay:250},C.default.createElement(He,{fontSize:"medium",titleAccess:Fe})),Ue=function(e){if(V(e),Me&&!le.includes(Me)){var t=x?[].concat((0,i.default)(De),[Me]):Me;re(t),x?pe(null):ee(!1)}},je=function(t){var a;V(t),null===(a=e.addNewRefHandler)||void 0===a||a.call(e),ee(!1)},ze=function(e){if(V(e),!!Array.isArray(De)&&De.length+Le===le.length)re([]);else{var t=le.indexOf(P);re(le.slice(t+1))}},Ge=function(e){return function(){ve(e),e&&I&&ee(!1)}};if(e.readOnly)return C.default.createElement("div",{"data-testid":k},C.default.createElement("ul",{className:(0,b.default)(Ve.chipsRootReadOnly,Ve.ellipsisOverflow)},F(De).map((function(t,a){var n;return C.default.createElement("li",{key:a,"aria-label":ke(t,Ae),className:Ve.displayGrid},C.default.createElement(s.Chip,{icon:C.default.createElement(M.PseudoTypeDisplayImageLabel,{imageLabel:p.getImageLabel(t,R),variant:"circle",leftMargin:!0,isTableQuickEdit:I}),label:C.default.createElement(M.PseudoTypeDisplay,Object.assign({},Object.assign(Object.assign({},(0,M.getPseudoTypeDisplayProperties)(t,d,p,y,g,R,Ae,!0)),{overflowLineCount:I?"1":"2"}))),classes:{icon:Ve.chipIcon,label:Ve.chipLabel},className:(0,b.default)(Ve.chip,(n={},(0,l.default)(n,Ve.chipTableQuickEditModeNonReadOnlyMode,e.isTableQuickEdit&&!e.readOnly),(0,l.default)(n,Ve.chipTableQuickEditReadOnlyMode,e.isTableQuickEdit&&e.readOnly),(0,l.default)(n,Ve.ellipsisOverflowChipReadOnly,e.readOnly),(0,l.default)(n,Ve.ellipsisOverflow,!e.readOnly),n),Ve.labelsContainer)}))}))));return C.default.createElement("div",{"data-testid":p.name(),className:(0,b.default)("DesktopDropdownContainer",(t={},(0,l.default)(t,Ve.dropdownContainerTableQuickEdit,I),(0,l.default)(t,Ve.dropdownContainerTableQuickEditFocused,I&&me),t))},C.default.createElement(w.default,{tabIndex:-1,innerRef:Q,options:le,limitTags:I?1:12,value:De||null,inputValue:Me,autoHighlight:!0,popupIcon:We,closeIcon:$({setIsOpen:ee}),open:J,disableClearable:!De||I,multiple:x,blurOnSelect:!1,freeSolo:e.allowAdds,disableCloseOnSelect:x,forcePopupIcon:!I,getOptionLabel:function(e){return ke(e,!1)},filterOptions:function(e,t){var a=(0,w.createFilterOptions)()(e,t),n=[].concat((0,i.default)(xe?[_]:[]),(0,i.default)(Oe?[B]:[]),(0,i.default)(Be?[P]:[]));return n?(0,T.default)(n,a):a},renderOption:function(t,a){switch(t){case _:return C.default.createElement(K,{inputString:Me,isDisabled:!Ne,onAddClick:Ue,multiselect:x,shouldRenderBottomBorder:!Pe});case B:return C.default.createElement(Y,{isDisabled:!_e,onNewClick:je,multiselect:x,label:e.label,shouldRenderBottomBorder:!Pe&&!!H(le)});case P:return C.default.createElement(q,{onSelectAllClick:ze,options:le,selection:F(De),isDisabled:!Pe,isTableQuickEdit:e.isTableQuickEdit,numSpecialOptions:Le,shouldRenderBottomBorder:!0});default:var n=(0,M.getPseudoTypeDisplayProperties)(t,d,p,y,g,R,Ae),r=n.imageLabel||"",i=n.textLabel||"",o=C.default.createElement("div",{key:i,className:(0,b.default)(Ve.labelsContainer,Ve.ellipsisOverflow)},C.default.createElement(M.PseudoTypeDisplay,Object.assign({},n,{overflowLineCount:I?"1":"2",imageLabelProps:{imageLabel:r,isTableQuickEdit:I,variant:"square"}})));if(x){var l=C.default.createElement(s.FormControlLabel,{control:C.default.createElement(D.ASTooltip,{title:a.selected?(0,A.mapActionName)("Deselect"):(0,A.mapActionName)("Select"),arrow:!0,enterDelay:1e3,enterNextDelay:1e3,leaveDelay:250},C.default.createElement(u.default,{icon:C.default.createElement(v.default,{fontSize:"small"}),checkedIcon:C.default.createElement(m.default,{fontSize:"small"}),checked:a.selected,classes:{checked:Ve.checkboxColored}})),className:Ve.formControlLabelRoot,classes:{label:Ve.formControlLabelLabel},label:o});return C.default.createElement("span",{key:i,"aria-label":i,className:(0,b.default)(Ve.option),onClickCapture:function(e){e.preventDefault()}},l)}return C.default.createElement("span",{key:i,"aria-label":i,className:(0,b.default)(Ve.option)},o)}},renderInput:function(t){var a,n,r,i,o,s=(0,b.default)((a={},(0,l.default)(a,Ve.notchedOutlineFocused,me),(0,l.default)(a,Ve.notchedOutlineTableQuickEdit,I),a)),u=(0,b.default)(Ve.inputBase,(n={},(0,l.default)(n,Ve.inputBaseNoFocus,!me),(0,l.default)(n,Ve.inputBaseTableQuickEdit,I),(0,l.default)(n,Ve.inputBaseTableQuickEditNoFocus,I&&!me),(0,l.default)(n,Ve.inputBaseTableQuickEditFocused,I&&me),(0,l.default)(n,Ve.inputBaseTableQuickEditFocusedMultiselect,I&&me&&x),n)),f=Object.assign(Object.assign({},t.InputProps),{className:(0,b.default)(t.InputProps.className,u),classes:{root:u,notchedOutline:s},readOnly:e.readOnly});if(!x&&Ie&&De){var h=(0,M.getPseudoTypeDisplayProperties)(De,d,p,y,g,R,Ae,!0),m=h.imageLabel,v=h.iconsArray,w=h.iconStyles;o=O(h,["imageLabel","iconsArray","iconStyles"]).formatRules,me&&!Ae||(f.startAdornment=C.default.createElement(C.default.Fragment,null,C.default.createElement(M.PseudoTypeDisplayImageLabel,{imageLabel:m,variant:"square",isTableQuickEdit:I}),C.default.createElement(M.PseudoTypeDisplayIcon,{iconsArray:v,iconStyles:w})))}var S="";(me||J)&&(S=(0,A.mapActionName)("Search"),e.allowAdds&&(S=(0,A.mapActionName)("Add or search"))),me&&(o={});var T=C.default.createElement(c.default,Object.assign({inputRef:U},t,{autoComplete:"off",variant:"outlined",InputProps:f,value:Me,onChange:function(e){return pe(e.target.value)},placeholder:S,classes:{root:Ve.textFieldRoot},inputProps:Object.assign(Object.assign({},t.inputProps),{style:Object.assign(Object.assign({},t.inputProps),null==o?void 0:o.style),"aria-label":e.label,className:(0,b.default)("DesktopDropdownInputElement",null===(i=t.inputProps)||void 0===i?void 0:i.className,null==o?void 0:o.className,Ve.dropdownInput,(r={},(0,l.default)(r,Ve.dropdownInputTableQuickEdit,I),(0,l.default)(r,Ve.dropdownInputTableQuickEditFocused,I&&me),(0,l.default)(r,Ve.dropdownInputTableQuickEditNoFocus,I&&!me),r)),classes:{notchedOutline:s},onFocus:function(e){var a;null===(a=t.inputProps)||void 0===a||a.onFocus(e),Ge(!0)()},onBlur:function(e){var a;null===(a=t.inputProps)||void 0===a||a.onBlur(e),Ge(!1)()},onKeyDown:function(e){var a;"onKeyDown"in t.inputProps&&t.inputProps.onKeyDown(e),"Escape"===e.key&&!J&&I&&(null===(a=U.current)||void 0===a||a.blur())}})}));if(x)return T;var E=ke(e.savedSelection,Ae);return C.default.createElement(D.ASTooltip,{title:me?"":E,arrow:!0,placement:I?"bottom":"bottom-start",enterDelay:1e3,enterNextDelay:1e3,leaveDelay:250},T)},onChange:function(e,t){if(t){var a=Array.isArray(t)?t[t.length-1]:t;switch(a){case _:Ue(e);break;case B:je(e);break;case P:ze(e)}if(L.has(a))return}re(null==t?x?[]:"":t)},onOpen:function(){ee(!0)},onClose:function(e,t){ee(!1),be(t)},onKeyDown:function(e){["ArrowDown","ArrowUp","Enter"].includes(e.key)&&V(e)},classes:{root:(0,b.default)(Ve.autocompleteRoot,(0,l.default)({},Ve.autocompleteRootFocusedTableQuickEdit,me&&I)),popupIndicator:Ve.popupIndicator,option:Ve.optionBase,endAdornment:Ve.endAdornment,listbox:Ve.listbox},PopperComponent:z,PaperComponent:j,getOptionDisabled:function(e){switch(e){case _:return!Ne;case B:return!_e;case P:return!Pe;default:return!1}},ListboxComponent:G,ListboxProps:{autocompleteRef:Q},onInputChange:function(e,t,a){""!==t||x||re(""),Re(a)},renderTags:function(t,a){var n=I?1:10;return me&&(n=12),C.default.createElement(C.default.Fragment,null,t.slice(0,n).map((function(t,n){var r,i,o,u=(0,M.getPseudoTypeDisplayProperties)(t,d,p,y,g,R,Ae,!0);return C.default.createElement(s.Chip,Object.assign({key:n},a({index:n}),{icon:C.default.createElement(M.PseudoTypeDisplayImageLabel,{imageLabel:p.getImageLabel(t,R),variant:"circle",leftMargin:!1,isTableQuickEdit:I}),label:C.default.createElement(M.PseudoTypeDisplay,Object.assign({},u,{overflowLineCount:I?"1":"2"})),className:(0,b.default)(Ve.chip,(r={},(0,l.default)(r,Ve.chipNonTableQuickEditMode,!e.isTableQuickEdit),(0,l.default)(r,Ve.chipTableQuickEditModeNonReadOnlyMode,e.isTableQuickEdit&&!e.readOnly),(0,l.default)(r,Ve.chipTableQuickEditReadOnlyMode,e.isTableQuickEdit&&e.readOnly),(0,l.default)(r,Ve.ellipsisOverflowChipReadOnly,e.readOnly),(0,l.default)(r,Ve.ellipsisOverflow,!e.readOnly),r),Ve.labelsContainer),classes:{icon:Ve.chipIcon,label:(0,b.default)(Ve.chipLabel)},style:{color:null===(o=null===(i=u.formatRules)||void 0===i?void 0:i.style)||void 0===o?void 0:o.color}}))})),t.length>n&&C.default.createElement("span",{className:Ve.tagOverflowNumber},"+",t.length-n))},openText:"",closeText:"",clearText:""}))},t.isDesktopDropdown=void 0;var i=n(a(600861)),o=n(a(627424)),l=n(a(238416)),s=a(697211),u=n(a(925465)),d=n(a(407613)),c=n(a(185961)),p=n(a(329826)),f=n(a(363957)),h=n(a(289039)),m=n(a(62810)),v=n(a(317149)),y=n(a(735996)),g=n(a(459067)),w=N(a(12330)),b=n(a(294184)),S=n(a(618446)),T=n(a(393386)),C=N(a(667294)),R=a(74281),E=a(888641),k=a(56749),I=a(557310),A=a(351101),D=a(700386),M=a(670759);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(x=function(e){return e?a:t})(e)}function N(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=x(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}var O=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},_="| APPSHEET_DEV_ADD_BUTTON |",B="| APPSHEET_DEV_NEW_BUTTON |",P="| APPSHEET_DEV_SELECT_ALL_BUTTON |",L=new Set([_,B,P]),V=function(e){null==e||e.preventDefault(),null==e||e.stopPropagation()},F=function(e){var t=[];return e&&(t=Array.isArray(e)?e:[e]),t},H=function(e){for(var t=0,a=0;a<L.size;a++)L.has(e[a])&&t++;return e.length-t},W=(0,s.makeStyles)((function(e){return{autocompleteRoot:{width:"100%",height:"100%"},autocompleteRootFocusedTableQuickEdit:{height:"fit-content !important"},specialDropdownOption:{color:e.palette.primary.main,width:"100%",padding:"".concat(e.spacing(.75,2,.75,1.5)," !important"),display:"flex",justifyContent:"start",fontSize:".8888rem","&:hover":{backgroundColor:e.palette.action.hover},textAlign:"left"},specialDropdownOptionBorder:{borderBottom:"".concat((0,k.themeColor)("dropdownSpecialOptionBorderColor")," 1px solid")},selectAllOption:{padding:"0px ".concat(e.spacing(2),"px 0px ").concat(e.spacing(2),"px !important")},optionBase:{pointerEvents:"auto !important",height:"52px !important",padding:"".concat(e.spacing(.75),"px 0px ").concat(e.spacing(.75),"px 0px"),borderRadius:0,'&[aria-selected="true"]':{backgroundColor:"inherit"},'&[data-focus="true"]':{backgroundColor:"".concat(e.palette.action.hover," !important")},"&:hover":{backgroundColor:"".concat(e.palette.action.hover," !important")}},option:{display:"flex",padding:"0px ".concat(e.spacing(.75),"px 0px ").concat(e.spacing(2),"px"),width:"100%",height:"inherit"},listbox:{overflowX:"hidden",padding:"0px",maxHeight:"".concat(364,"px !important")},popupIndicator:{marginRight:e.spacing(.75)},chipsRootReadOnly:{height:"auto !important",display:"flex",justifyContent:"left",flexWrap:"wrap",listStyle:"none",padding:0,margin:0},chip:{backgroundColor:(0,k.themeColor)("dropdownChipBackgroundColor"),border:"1px solid ".concat((0,k.themeColor)("dropdownChipBorderColor")),margin:"".concat(e.spacing(.25),"px ").concat(e.spacing(.5),"px"),maxWidth:"-webkit-fill-available",textOverflow:"ellipsis"},chipNonTableQuickEditMode:{padding:"20px 0px",fontSize:".778rem"},chipTableQuickEditModeNonReadOnlyMode:{height:"1.667rem !important",margin:"\n      ".concat(e.spacing(.25),"px \n      ").concat(e.spacing(.25),"px \n      ").concat(e.spacing(.375),"px \n      ").concat(e.spacing(.5),"px"),fontSize:".72222rem"},chipTableQuickEditReadOnlyMode:{margin:"".concat(e.spacing(.25),"px ").concat(e.spacing(.5),"px"),display:"inline-flex !important",height:"auto !important",padding:"2px",fontSize:".72222rem"},iconContainer:{display:"flex",width:"inherit"},icon:{marginRight:e.spacing(1)},iconMultiselect:{marginRight:"".concat(e.spacing(2),"px !important")},checkboxColored:{color:"".concat(e.palette.primary.main," !important")},checkboxDisabled:{color:"".concat(e.palette.action.disabled," !important")},dropdownInput:{minHeight:"2.222rem !important",border:"none !important",paddingLeft:"".concat(e.spacing(.5),"px !important"),padding:"\n      ".concat(e.spacing(0),"px \n      ").concat(e.spacing(1.5),"px \n      ").concat(e.spacing(0),"px \n      ").concat(e.spacing(.5),"px !important"),width:"0 !important",textOverflow:"ellipsis",textAlign:"left !important"},dropdownInputTableQuickEdit:{fontSize:".722rem !important"},dropdownInputTableQuickEditFocused:{width:"auto !important",paddingLeft:"".concat(e.spacing(1.5),"px !important")},dropdownInputTableQuickEditNoFocus:{minWidth:"0 !important",width:"0 !important",paddingLeft:"0 !important",paddingRight:"0 !important"},tagOverflowNumber:{marginLeft:"2px",fontSize:".722rem !important",color:(0,k.themeColor)("dropdownOverflowNumberColor"),display:"flex",justifyContent:"center",alignItems:"center"},endAdornment:{top:"inherit"},notchedOutlineFocused:{borderColor:"".concat(e.palette.primary.main," !important"),borderWidth:"2px"},notchedOutlineTableQuickEdit:{border:"none !important"},inputBase:{minHeight:"3em",lineHeight:"inherit",padding:"".concat(e.spacing(1,8.125,1,1.5)," !important"),"&:hover $notchedOutline":{borderColor:""}},inputBaseNoFocus:{borderColor:"#80868b !important"},inputBaseTableQuickEdit:{height:"fit-content !important",width:"auto !important",padding:"0 !important",textOverflow:"ellipsis",fontSize:"1em"},inputBaseTableQuickEditNoFocus:{flexWrap:"nowrap"},inputBaseTableQuickEditFocused:{position:"relative !important",border:"1px solid ".concat(e.palette.primary.main),background:(0,k.themeColor)("dropdownInputBaseTableQuickEditFocusedColor")},inputBaseTableQuickEditFocusedMultiselect:{overflowY:"auto",maxHeight:"10rem"},selectedCount:{fontSize:".8888rem",fontWeight:"bold",display:"flex",alignItems:"center"},labelsContainer:{display:"flex",alignItems:"center",justifyContent:"start",maxWidth:"fit-content",width:"inherit"},ellipsisOverflow:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",width:"inherit"},ellipsisOverflowChipReadOnly:{textOverflow:"ellipsis",overflowX:"hidden",whiteSpace:"nowrap",width:"inherit"},readOnlyText:{width:"100%",height:"100%",display:"flex",alignItems:"center",marginLeft:e.spacing(1.5),textOverflow:"ellipsis"},selectAllRoot:{width:"100%"},dropdownContainerTableQuickEdit:{display:"flex",width:"100%",textOverflow:"ellipsis",fontSize:".722rem !important"},dropdownContainerTableQuickEditFocused:{height:"fit-content",width:"fit-content",zIndex:100,position:"fixed !important",minWidth:"300px",maxWidth:"500px",marginLeft:"-12px"},tagsContainer:{textAlign:"start",maxHeight:"10rem",overflowY:"scroll"},tagsContainerTableQuickEditFocused:{display:"contents",overflowY:"scroll",maxHeight:"20px"},tagsContainerTableQuickEditNoFocus:{display:"inherit"},tagsContainerNonTableQuickEditFocused:{paddingTop:"9px",paddingBottom:"9px"},formControlLabelRoot:{marginRight:"0",width:"inherit"},formControlLabelLabel:{width:"inherit"},chipIcon:{marginRight:0},chipLabel:{width:"max-content",paddingLeft:0,paddingRight:0,display:"flex"},displayGrid:{display:"grid"},textFieldRoot:{minHeight:"3em",justifyContent:"space-evenly"}}})),U=(0,s.makeStyles)((function(){return{paper:{marginTop:0,marginBottom:0}}})),j=function(e){var t=U();return C.default.createElement(d.default,Object.assign({},e,{elevation:8,className:(0,b.default)(t.paper,e.className)}))},z=function(e){return C.default.createElement(s.Popper,Object.assign({},e))},G=C.default.forwardRef((function(e,t){var a,n,r=e.children,i=e.autocompleteRef,o=O(e,["children","autocompleteRef"]),l=(null===(a=r)||void 0===a?void 0:a.length)||0;return C.default.createElement("div",{ref:t},C.default.createElement("div",Object.assign({},o,{role:void 0}),C.default.createElement(R.List,{role:"listbox",width:(null===(n=null==i?void 0:i.current)||void 0===n?void 0:n.offsetWidth)||500,height:Math.min(52*l,364),rowHeight:52,estimatedRowSize:52,overscanCount:0,rowCount:l,rowRenderer:function(e){var t=e.index,a=e.key,n=e.style,i=r[t];return C.default.cloneElement(i,{style:n,key:a,tabIndex:"inherit"})}})))})),K=function(e){var t=e.inputString,a=e.onAddClick,n=e.isDisabled,r=e.multiselect,i=e.shouldRenderBottomBorder,o=W(),u=t?"":(0,A.mapActionName)("Add a new option by typing"),d=t?"".concat((0,A.mapActionName)("Add")," '").concat(t,"'"):(0,A.mapActionName)("Add");return C.default.createElement(D.ASTooltip,{title:u,arrow:!0,placement:"left",enterDelay:1e3,enterNextDelay:1e3,leaveDelay:250},C.default.createElement(s.Button,{color:"primary",className:(0,b.default)(o.specialDropdownOption,o.optionBase,(0,l.default)({},o.specialDropdownOptionBorder,i)),disabled:n,"aria-disabled":n,onClick:a,"data-testid":"Dropdown-AddButton"},C.default.createElement("div",{className:o.iconContainer},C.default.createElement(f.default,{className:(0,b.default)(o.icon,(0,l.default)({},o.iconMultiselect,r)),titleAccess:u}),C.default.createElement("span",{className:o.ellipsisOverflow},d))))},Y=function(e){var t=e.onNewClick,a=e.label,n=e.isDisabled,r=e.multiselect,i=e.shouldRenderBottomBorder,o=W(),u="".concat((0,A.mapActionName)("Create a new")," '").concat(a,"'"),d=(0,A.mapActionName)("New");return C.default.createElement(D.ASTooltip,{title:u,arrow:!0,placement:"left",enterDelay:1e3,enterNextDelay:1e3,leaveDelay:250},C.default.createElement(s.Button,{color:"primary",className:(0,b.default)(o.specialDropdownOption,o.optionBase,(0,l.default)({},o.specialDropdownOptionBorder,i)),disabled:n,"aria-disabled":n,onClick:t,"data-testid":"Dropdown-NewButton"},C.default.createElement("div",{className:o.iconContainer},C.default.createElement(g.default,{className:(0,b.default)(o.icon,(0,l.default)({},o.iconMultiselect,r)),"aria-label":u}),d)))},q=function(e){var t=e.options,a=e.selection,n=e.isDisabled,r=e.numSpecialOptions,i=e.shouldRenderBottomBorder,o=W(),d=0===a.length,c=a.length+r===t.length,f=a.length,h=!d,y=!d&&!c,g=h&&!y?(0,A.mapActionName)("Clear all"):(0,A.mapActionName)("Select all");return C.default.createElement("div",{onClick:e.onSelectAllClick,"data-testid":"Dropdown-SelectAll",className:o.selectAllRoot},C.default.createElement(s.Button,{color:"primary",className:(0,b.default)((0,l.default)({},o.specialDropdownOptionBorder,i),o.specialDropdownOption,o.selectAllOption,o.optionBase),disabled:n,"aria-disabled":n},C.default.createElement(D.ASTooltip,{title:g,arrow:!0,placement:"left",enterDelay:1e3,enterNextDelay:1e3,leaveDelay:250},C.default.createElement(s.FormControlLabel,{label:C.default.createElement("span",{className:o.selectedCount},0===f?(0,A.mapActionName)("Select all"):"".concat(f," ").concat((0,A.mapActionName)("Selected"))),control:C.default.createElement(D.ASTooltip,{title:h&&!y?(0,A.mapActionName)("Deselect"):(0,A.mapActionName)("Select"),arrow:!0,placement:"bottom",enterDelay:1e3,enterNextDelay:1e3,leaveDelay:250},C.default.createElement(u.default,{icon:C.default.createElement(v.default,{fontSize:"small"}),indeterminateIcon:C.default.createElement(p.default,null),checkedIcon:C.default.createElement(m.default,{fontSize:"small"}),color:"primary",className:(0,b.default)((0,l.default)({},o.checkboxDisabled,n)),classes:{checked:o.checkboxColored,indeterminate:o.checkboxColored},checked:h&&!y,indeterminate:h&&y,inputProps:{"aria-label":g}}))}))))};t.isDesktopDropdown=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.ReactRootUIConfig.isInDesktopExperience(),a="ref"===e.type().toLowerCase(),n="Buttons"!==e.auxData().InputMode,r=n&&a,i=(e.isValidityEnum()||e.hasSuggestedValues()||["Enum","EnumList"].includes(e.type()))&&!e.shouldUseButtonSelect(e.enumValues()||[],e.allowOtherValues(),"enumlist"===e.type().toLowerCase(),e.isScannable());return t&&(r||i)};var $=function(e){var t=e.setIsOpen,a=(0,A.mapActionName)("Clear");return C.default.createElement(D.ASTooltip,{title:a,arrow:!0,placement:"bottom",enterDelay:1e3,enterNextDelay:1e3,leaveDelay:250},C.default.createElement(y.default,{fontSize:"medium",titleAccess:a,onClick:function(){t(!1)}}))}},148448:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyView=void 0;var r=n(a(667294)),i=n(a(294184)),o=(0,a(695386).makeStyles)((function(){return{centeredContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",fontSize:"0.778rem",whiteSpace:"normal",maxWidth:200,minHeight:100}}}));t.EmptyView=function(e){var t=e.message,a=void 0===t?"":t,n=e.className,l=e.height,s=e.width,u=o({});return r.default.createElement("div",{"data-testid":"empty-view",className:(0,i.default)("EmptyView",n,u.centeredContainer),style:{margin:"auto",padding:0,height:l,width:s}},a)}},318927:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.Fab=void 0;var r=n(a(667294)),i=a(697211),o=a(56749),l=a(700386),s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};t.Fab=function(e){var t=e.title,a=e.className,n=e.children,u=s(e,["title","className","children"]);return r.default.createElement(o.ASThemeProvider,null,r.default.createElement(l.ASTooltip,{title:t,placement:"left",arrow:!0},r.default.createElement(i.Fab,Object.assign({color:"primary",className:"circle-button-fab ".concat(a),"aria-label":t},u),n)))}},92329:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormEntryDataTestids=void 0;var i,o=n(a(856690)),l=n(a(689728)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=M(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(496486)),p=n(a(667294)),f=a(264317),h=n(a(294184)),m=a(695386),v=n(a(853240)),y=n(a(805227)),g=n(a(652401)),w=n(a(828471)),b=n(a(925465)),S=n(a(365914)),T=n(a(150198)),C=a(462485),R=n(a(839999)),E=a(557310),k=a(44617),I=a(593186),A=a(300431),D=a(388884);function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(M=function(e){return e?a:t})(e)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.FormEntryDataTestids=i,function(e){e.Container="form-entry"}(i||(t.FormEntryDataTestids=i={}));var N=function(e){(0,s.default)(a,e);var t=x(a);function a(e){var n;return(0,o.default)(this,a),(n=t.call(this,e)).mainRef=function(e){n.$domNode=e||void 0},n.handleSingleEnumClick=function(){var e,t=n.props.attribute,a=n.props.value;a&&t.isRequired()||(a=a||null===(e=t.auxData().EnumValues)||void 0===e?void 0:e[0],n.props.onEntryValueChange(t,a,{}))},n.originalEditingState=window.IsEditing,n.onValueChange=function(e,t){n.props.onEntryValueChange&&n.props.onEntryValueChange(n.props.attribute,e,t)},n.onFocus=function(e){window.IsEditing=!0,n.props.onEntryFocus&&n.props.onEntryFocus(n.props.attribute,e)},n.onBlur=function(e){window.IsEditing=n.originalEditingState,n.props.onEntryBlur&&n.props.onEntryBlur(n.props.attribute,e)},n.onKeyDown=function(e){n.props.onEntryKeyDown&&n.props.onEntryKeyDown(n.props.attribute,e)},n.onTouchStart=function(e){n.props.onEntryTouchStart&&n.props.onEntryTouchStart(n.props.attribute,e)},n}return(0,l.default)(a,[{key:"getCheckboxColorTheme",value:function(){return(0,m.createTheme)({palette:{primary:{main:{red:"#fa5252",orange:"#ff922b",yellow:"#ffd43b",green:"#51cf66",blue:"#329af0",purple:"#cc5de8",black:"#444",white:"#eee",brown:"#8B4513"}[this.props.value?this.props.value.toLowerCase():"green"]}},typography:{useNextVariants:!0}})}},{key:"componentDidUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.attribute;E.ReactRootUIConfig.isReactRoot()&&t.isListOfRefs()&&(this.referencedTableTimestamps=t.appFormulaEvalTree().referencedTableTimestamps())}},{key:"shouldComponentUpdate",value:function(e){var t=!!S.default.compareObjs(this.props,e).length,a=e.attribute;return t||!a.isListOfRefs()||!E.ReactRootUIConfig.isReactRoot()||this.isBehindFormOverlay||(0,c.isEqual)(this.referencedTableTimestamps,a.appFormulaEvalTree().referencedTableTimestamps())?t:((0,I.logToDevConsole)("Updating ".concat(a.name()," because dependent table changed")),!0)}},{key:"inputId",value:function(){var e=this.props.screenId;return S.default.makeElementId("__"+(null!=e?e:"")+this.props.attribute.name())}},{key:"tableMode",get:function(){return"table"===this.props.viewType}},{key:"focus",value:function(e){this.typeInput.focus(e)}},{key:"scrollPosition",value:function(){return this.$domNode?this.$domNode.offsetTop:null}},{key:"reserveSpaceForIcons",value:function(){var e=0;return this.props.attribute.isScannable()&&e++,this.props.attribute.isNfcScannable()&&e++,e||1}},{key:"isSingleEnumOption",value:function(e){return"Color"===e.type()&&1===(e.auxData().EnumValues||[]).length}},{key:"table",get:function(){var e=this.props,t=e.appModel,a=e.tableName,n=this.props.table;null==n&&(n=t.findTableCollection(a).table);return n}},{key:"missingRequired",get:function(){var e=this.props,t=e.value,a=e.attribute;return e.required&&!T.default.valueExists(t,a.type())}},{key:"renderErrorMessage",value:function(){var e=this.props,t=e.appModel,a=e.attribute,n=e.dataContext,r=e.valid,i=e.unsaved,o=e.modified,l=e.showErrorState,s=this.missingRequired;if(!this.tableMode&&(l||o)){if(!r){var u=a.invalidMessageEvalTree(),d=(null==u?void 0:u.run(n))||t.MapActionName("This entry is invalid");return p.default.createElement("div",{className:"ErrorMessageText","data-testid":"error-message-text"},d)}if(s)return p.default.createElement("div",{className:"ErrorMessageText","data-testid":"error-message-text"},t.MapActionName("This entry is required"));if(i)return p.default.createElement("div",{className:"ErrorMessageText","data-testid":"error-message-text"},t.MapActionName("Unable to save changes"))}}},{key:"renderInput",value:function(e){var t,a=this,n=this.props,r=n.value,o=n.attribute,l=n.dataContext,s=n.entryId,u=n.itemNumber,d=n.required,f=n.valid,S=n.editable,T=n.focused,C=n.modified,R=n.unsaved,I=n.showErrorState,A=n.usePlaceholderLabel,M=n.displayName,x=n.yesNoMode,N=n.refreshId,O=n.maxNestedRows,_=n.formStyle,B=n.width,P=n.height,L=this.table,V=this.missingRequired,F=this.tableMode;if(null==L)return null;var H,W,U,j=this.renderErrorMessage(),z=o.description(l);z?(H=z,W=p.default.createElement("span",{className:"FieldDescription"},H)):(H=M||o.displayName(l),W=p.default.createElement("span",{className:"FieldName"},H)),null!=u&&(U=p.default.createElement("span",{className:"FieldCount"},u+": "));var G,K;if(!F){var Y={paddingRight:A?"".concat(2.25*this.reserveSpaceForIcons(),"em"):void 0};G=p.default.createElement("div",{className:(0,h.default)("FormEntryLabel","control-label",{DesktopDetailViewFont:E.ReactRootUIConfig.isReactRoot()}),style:Y},U,W)}var q=B,$=P;F&&(K=c.default.pick(this.props,["height","width","paddingLeft","paddingRight"])).width&&(q=K.width-(this.props.paddingLeft||0)-(this.props.paddingRight||0));var Q={};"Yes/No"===o.type()&&x&&"yes/no"!==x&&(Q.display="flex",Q.flexDirection="row",Q.alignItems="center");var X,Z=(0,h.default)("FormEntry","control-group",s,{"FormEntry--invalid":(I||C)&&(!f||R),"FormEntry--required":d,"FormEntry--missingRequired":(I||C)&&V,"FormEntry--modified":C,"FormEntry--disabled":F&&!S,PlaceholderLabel:A,FocusedInput:T,TableMode:F,DesktopDropdownMode:(0,D.isDesktopDropdown)(this.props.attribute),QuickEditCalendarIconRollout:k.dynamicRollouts.includeByOwnerId("QuickEditCalendarIconRollout")});if(this.isSingleEnumOption(o))return p.default.createElement(m.MuiThemeProvider,{theme:this.getCheckboxColorTheme()},p.default.createElement("div",{className:Z,ref:this.mainRef,style:K},p.default.createElement("div",{className:j?"ErrorMessage":null},p.default.createElement("div",{className:"FormEntryContent",style:Q},p.default.createElement(v.default,{className:this.props.classes.list},p.default.createElement(y.default,{button:!0,className:this.props.classes.list,onClick:this.handleSingleEnumClick},p.default.createElement(w.default,{primary:G}),p.default.createElement(g.default,null,p.default.createElement(b.default,{onClick:this.handleSingleEnumClick,classes:{root:this.props.classes.checkbox,checked:this.props.classes.checked},checked:!!r}))))))));F&&(C||I&&(!f||R||V))&&(X=p.default.createElement("div",{className:"FormEntry--indicator",style:{position:"absolute",width:0,height:0}}));var J=E.ReactRootUIConfig.isInDesktopExperience()?{}:Q;return p.default.createElement("div",{className:Z,ref:this.mainRef,style:K,"data-testid":i.Container,"data-vfe-column":null!==(t=null==o?void 0:o.name())&&void 0!==t?t:void 0,"data-vfe-interactive":!0},p.default.createElement("div",{className:j?"ErrorMessage":null},p.default.createElement("div",{className:"FormEntryContent",style:J},G,p.default.createElement("div",{className:"FormEntryValue",style:{flex:1}},p.default.createElement("div",{id:this.inputId(),className:"EditableAttributeValue controls",onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onTouchStart:this.onTouchStart},p.default.createElement(e,Object.assign({},this.props,{ref:function(e){a.typeInput=e},label:H,value:r,yesNoMode:x,table:L,tableSchema:L.tableSchema,editable:S,valid:f,required:d,refreshId:N,onValueChange:this.onValueChange,width:q,height:$,maxNestedRows:O,formStyle:_}))),j))),X)}},{key:"render",value:function(){var e,t=this.props.attribute,a=this.table;if(null==a)return null;if(!this.props.hidden&&t.hasInputMethod()){var n=t.type();if("Show"===n)e=p.default.createElement(R.default,Object.assign({},this.props,{table:a}));else{var r=C.TypeInputsApi.lookup(n,t);e=this.renderInput(r)}}return e?p.default.createElement(f.TransitionGroup,null,p.default.createElement(f.CSSTransition,{classNames:"form-entry",timeout:{enter:250,exist:250}},e)):null}}]),a}(A.ViewAwareComponent),O=(0,m.withStyles)((function(e){return{textField:{width:"100%"},list:{paddingLeft:0,paddingRight:0},checkbox:{"&$checked":{color:e.palette.primary.main},marginRight:-16},checked:{}}}))(N);t.default=O},59775:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormFooterButtonText=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(112963)),p=a(21870);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}t.FormFooterButtonText=r,function(e){e.Cancel="Cancel",e.Delete="Delete",e.Done="Done",e.Next="Next",e.Prev="Prev",e.Save="Save"}(r||(t.FormFooterButtonText=r={}));var h=function(e){(0,l.default)(a,e);var t=f(a);function a(e){return(0,i.default)(this,a),t.call(this,e)}return(0,o.default)(a,[{key:"renderPrevButton",value:function(){var e=this.props.onPrevious;return e?d.default.createElement(c.default,{"data-testid":"footer-button-prev",className:"FormView__footer-button FormView__footer-prevButton",onTap:e},this.mapActionName(r.Prev)):null}},{key:"renderNextButton",value:function(){var e=this.props.onNext;return e?d.default.createElement(c.default,{"data-testid":"footer-button-next",className:"FormView__footer-button FormView__footer-nextButton",onTap:e},this.mapActionName(r.Next)):null}},{key:"renderCancelButton",value:function(){var e=this.props,t=e.onCancel,a=e.onPrevious,n=e.inNestedAddForm?"Delete":"Cancel";if(!t)return null;var i=a?{position:"relative"}:{left:"21px"};return d.default.createElement(c.default,{"data-testid":"footer-button-cancel",className:"FormView__footer-button FormView__footer-cancelButton",style:i,onTap:t},this.mapActionName(n||r.Cancel))}},{key:"renderSaveButton",value:function(){var e=this.props,t=e.onSave,a=e.inNestedAddForm?"Done":"Save";return t?d.default.createElement(c.default,{"data-testid":"footer-button-save",className:"FormView__footer-button FormView__footer-saveButton",onTap:t},this.mapActionName(a||r.Save)):null}},{key:"mapActionName",value:function(e){return this.props.appModel.MapActionName(e)}},{key:"render",value:function(){var e=this.props,t=e.moveToTop,a=e.scrollbarWidth,n=t?"TopPosition":"BottomPosition";return d.default.createElement("div",{className:"FormView__footer ".concat(n),style:{paddingRight:a,height:p.DEFAULT_FOOTER_HEIGHT}},d.default.createElement("div",{className:"FormView__footer-buttonWrapper"},this.renderPrevButton(),this.renderCancelButton(),this.renderNextButton(),this.renderSaveButton()))}}]),a}(d.default.Component);t.default=h},106375:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808)),u=n(a(294184)),d=n(a(496486)),c=n(a(667294)),p=n(a(112963)),f=a(10311),h=a(218546),m=a(318926),v=a(557310),y=n(a(173861)),g=a(664583),w=a(300431),b=a(44617);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var T=function(e){(0,o.default)(a,e);var t=S(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"handleTap",value:function(){var e=this.props,t=e.action,a=e.appModel,n=e.rowId,r=e.sourceLocationName,i=e.sourceTable;e.shouldBeHidden&&m.logger.logAppEvent(h.AppEventName.HiddenActionButton),(0,g.runAppAction)(t,{appModel:a,rowId:n,sourceLocationName:r,sourceTable:i},void 0,this.viewStateKey)}},{key:"displayName",get:function(){var e=this.props,t=e.action,a=e.appModel,n=e.tableSchema,r=e.rowValues;return t.displayName(a,n,r,{viewStateKey:this.viewStateKey})}},{key:"textMode",get:function(){var e,t=this.props.displayMode;return(null===(e=this.displayName)||void 0===e?void 0:e.trim())?"large"===t?"label":"tooltip":"none"}},{key:"updateFormattingRules",value:function(e){var t=(0,f.getActionFormattingRules)(e.appModel,e.action,e.rowId);this.setState({formattingSettings:t,lastDataStamp:e.appModel.DataStamp})}},{key:"UNSAFE_componentWillMount",value:function(){this.updateFormattingRules(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.rowId===this.props.rowId&&e.appModel.DataStamp===this.state.lastDataStamp||this.updateFormattingRules(e)}},{key:"colorStyles",get:function(){var e,t=this.props,a=t.displayMode,n=t.invertColors,r=null!==(e=this.state.formattingSettings.highlightColor)&&void 0!==e?e:void 0,i={};return n||"large"===a?i.backgroundColor=r:"small"===a&&(i.color=r),i}},{key:"render",value:function(){var e=(0,u.default)("GenericActionButton",this.props.appModel.rolloutClassNames,{"GenericActionButton--small-mode":"small"===this.props.displayMode,"GenericActionButton--large-mode":"large"===this.props.displayMode,"GenericActionButton--large-mode-desktop":"large"===this.props.displayMode&&v.ReactRootUIConfig.isInDesktopExperience(),"GenericActionButton--disabled":this.props.disabled}),t=y.default.cssStylesForText(this.state.formattingSettings),a=this.props.action.icon();this.state.formattingSettings.icon.length&&(a=this.state.formattingSettings.icon[0]);var n=this.textMode,r=this.displayName,i=b.dynamicRollouts.includeByOwnerId("TooltipsForInlineActions")||v.ReactRootUIConfig.isInDesktopExperience();return c.default.createElement(p.default,{className:e,onTap:this.handleTap.bind(this),enabled:!this.props.disabled,stopPropagation:!0,href:this.props.href,asyncTap:!1,style:d.default.extend({paddingLeft:this.props.paddingLeft+"px"},t),title:i&&(null==r?void 0:r.trim())||void 0,"data-testonly-action":this.props.action.name(),"data-testid":this.props.action.name(),"data-vfe-action":this.props.action.name(),"data-vfe-interactive":!0},c.default.createElement("div",{className:"GenericActionButton__paddington"+(this.props.invertColors?" Inverted":""),style:this.colorStyles},c.default.createElement("i",{className:"GenericActionButton__icon fa "+a}),c.default.createElement("span",{className:"sr-only"},r)),c.default.createElement("div",{className:"GenericActionButton__text","aria-hidden":!0},"label"===n?r:null))}}]),a}(w.ViewAwareComponent);t.default=T},367397:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(238416)),o=n(a(856690)),l=n(a(689728)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=E(a(667294)),p=n(a(294184)),f=n(a(496486)),h=a(697211),m=n(a(105041)),v=E(a(365914)),y=n(a(571524)),g=n(a(593186)),w=n(a(480952)),b=a(166089),S=a(351101),T=a(557310),C=a(44617);function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(R=function(e){return e?a:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=R(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var I=function(e){(0,s.default)(a,e);var t=k(a);function a(e){var n;return(0,o.default)(this,a),(n=t.call(this,e))._imageRef=(0,c.createRef)(),n._rootRef=(0,c.createRef)(),n.state={loading:a.isValidUrl(n.props.src),error:!1,timerThresholdExceeded:!1,imageCrop:{}},n.resizeHandler=f.default.throttle((function(){return n.setupContainer(n.props)}),100),n}return(0,l.default)(a,[{key:"imageElement",get:function(){return this._imageRef.current}},{key:"rootElement",get:function(){return this._rootRef.current}},{key:"error",get:function(){return this.state.error}},{key:"loading",get:function(){return this.state.loading}},{key:"renderedSrc",get:function(){return this.shouldUseIOSCache()&&this.state.src?this.state.src:this.props.src}},{key:"componentDidMount",value:function(){this.setupContainer(this.props),this.setupImage(this.props.src),window.addEventListener("resize",this.resizeHandler)}},{key:"componentWillUnmount",value:function(){this.cleanupImage(),window.removeEventListener("resize",this.resizeHandler)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.hasImageChanged(e)&&(this.cleanupImage(),this.setState({imageWidth:null,imageHeight:null}),this.setupImage(e.src)),this.isContainerResized(e)&&this.setupContainer(e)}},{key:"hasImageChanged",value:function(e){return e.src!==this.props.src||e.cropMode!==this.props.cropMode}},{key:"isContainerResized",value:function(e){return e.width!==this.props.width||e.height!==this.props.height}},{key:"setup",value:function(){this.setupContainer(this.props),this.setupImage(this.props.src)}},{key:"setupContainer",value:function(e){var t,a;if(C.dynamicRollouts.includeByOwnerId("ImagesUsePartialDimensions")){e.width&&(t=e.width),e.height&&(a=e.height);var n=this.rootElement;null!=t&&null!=a||null==n||(t=null!=t?t:n.offsetWidth,a=null!=a?a:n.offsetHeight),(t&&this.state.containerWidth!==t||a&&this.state.containerHeight!==a)&&this.setState({containerWidth:t,containerHeight:a})}else{var r,i;if(e.width&&e.height)r=e.width,i=e.height;else{var o=this.rootElement;null!=o&&(r=o.offsetWidth,i=o.offsetHeight)}(r&&this.state.containerWidth!==r||i&&this.state.containerHeight!==i)&&this.setState({containerWidth:r,containerHeight:i})}}},{key:"shouldUseIOSCache",value:function(){return y.default.InIOSWebView()&&y.default.InWKWebView()&&f.default.get(window,"AppModel.AppTemplate.Behavior.FullOfflineCaching")}},{key:"setupImage",value:function(e){var t=this;if(a.isValidUrl(e)){this.spinnerTimeout=setTimeout((function(){t.state.loading&&t.setState({timerThresholdExceeded:!0}),t.spinnerTimeout=null}),1e3),this.sizingInterval&&g.default.warnToDevConsole("Overwrote sizingInterval! (bad)"),this.sizingInterval=setInterval((function(){if(!t.loadingImage)return g.default.warnToDevConsole("Image with spinner sizing poll wasnt cleaned up"),void t.cancelSizingInterval();if(t.loadingImage.height||t.loadingImage.width){if(t.setState({imageWidth:t.loadingImage.width,imageHeight:t.loadingImage.height}),t.props.onImageSize){var e=t.sizing();t.props.onImageSize({loading:!1,width:t.loadingImage.width,height:t.loadingImage.height,scaledWidth:e.scaledWidth,scaledHeight:e.scaledHeight})}t.cancelSizingInterval()}}),150);var n=function(){t.loadingImage=(0,w.default)(e,null,(function(){var e=!t.state.imageWidth;if(t.loadingImage&&(t.setState({loading:!1,error:!1,src:t.loadingImage.src,imageWidth:t.loadingImage.width,imageHeight:t.loadingImage.height}),e&&t.props.onImageSize)){var a=t.sizing();t.props.onImageSize({loading:!1,width:t.loadingImage.width,height:t.loadingImage.height,scaledWidth:a.scaledWidth,scaledHeight:a.scaledHeight})}t.cancelSizingInterval(),t.loadingImage=null}),(function(a,n){g.default.ReportErrorOnce({errorMessage:"ImageWithSpinner failed to load",nestedErrorMessage:n,errorStatusCode:a,src:e}),t.cancelSizingInterval(),t.setState({loading:!1,error:!0,errorStatusCode:a,errorMessage:n}),t.loadingImage=null,t.props.onImageSize&&t.props.onImageSize({loading:!1,error:!0})}))};!0===this.props.zeroImageLoadDelay?(this.loadTimeout=null,n()):this.loadTimeout=setTimeout((function(){t.loadTimeout=null,n()}),100)}}},{key:"cleanupImage",value:function(){this.cancelSizingInterval(),this.loadingImage&&(this.loadingImage.onload=null,this.loadingImage.onerror=null,this.loadingImage.removeAttribute("src"),this.loadingImage=null),this.spinnerTimeout&&(clearTimeout(this.spinnerTimeout),this.spinnerTimeout=null),this.loadTimeout&&(clearTimeout(this.loadTimeout),this.loadTimeout=null)}},{key:"cancelSizingInterval",value:function(){null!=this.sizingInterval&&(clearInterval(this.sizingInterval),this.sizingInterval=null)}},{key:"sizing",value:function(){var e="full"===this.props.cropMode||"full-centered"===this.props.cropMode?"contain":"cover";return v.default.computeImageSizing({containerWidth:this.state.containerWidth,containerHeight:this.state.containerHeight,imageWidth:this.state.imageWidth,imageHeight:this.state.imageHeight,mode:e,centerHorizontal:"full"!==this.props.cropMode})}},{key:"renderTextAvatar",value:function(e){var t=b.AppGlobals.ViewManager.theme.getThemeColor("mainBackgroundVariantExtra"),a=b.AppGlobals.ViewManager.theme.getThemeColor("secondaryText"),n=this.props.formattingSettings;n&&n.textColor&&(a=n.textColor),n&&n.highlightColor&&(t=n.highlightColor);var r=this.sizing(),i=e.length>4?"inherit":void 0,o={top:r.top||0,left:r.left||0,width:r.scaledWidth,height:r.scaledHeight,background:t,color:a,fontSize:i,textAlign:"center"},l="square"===this.props.cropMode?"square":"circular";return this.renderRootWith(c.default.createElement(h.Avatar,{className:"ImageWithSpinner__image",style:o,variant:l},e))}},{key:"renderLoader",value:function(){return this.renderRootWith(c.default.createElement(m.default,{className:"ImageWithSpinner__spinner",lines:11,length:5,width:2,radius:3,color:"#737373",zIndex:"auto"}))}},{key:"renderImage",value:function(){var e=this.props,t=e.alignment,a=e.customStyle,n=e.isBasic,r=e.src,i=a;if(null==i&&!n){var o=this.sizing(),l=o.top,s=o.left,u=o.scaledWidth,d=o.scaledHeight;i={top:l,left:t===S.DisplayMode.Centered&&T.ReactRootUIConfig.isInDesktopExperience()?"auto":s,width:u,height:d}}return this.renderRootWith(c.default.createElement("img",{src:this.renderedSrc,className:"ImageWithSpinner__image",style:i,key:r,ref:this._imageRef}))}},{key:"renderError",value:function(){var e=this.state,t=e.errorStatusCode,a=e.errorMessage,n=f.default.compact([t,a]).join(": ");return this.renderRootWith(c.default.createElement("div",{className:"ImageWithSpinner__error",title:n},c.default.createElement("i",{className:"ImageWithSpinner__error-icon fa fa-exclamation-triangle"})))}},{key:"renderEmpty",value:function(){return this.renderRootWith(c.default.createElement("div",{className:"ImageWithSpinner","data-testonly-src":(0,v.fastTrim)(this.props.src)}))}},{key:"renderRootWith",value:function(e){var t=this.props,a=t.src,n=t.className,r=void 0===n?"":n,o=t.solidBackgroundColor,l=t.cropMode,s=t.imageBorderRadius,u=t.testId,d=t.alignment,f=this.state,h=f.imageWidth>f.imageHeight,m=T.ReactRootUIConfig.isInDesktopExperience()&&d===S.DisplayMode.Centered,y=(0,p.default)("ImageWithSpinner",(0,i.default)({"ImageWithSpinner--solid-background-color":o,"ImageWithSpinner--crop-mode-round":"round"===l,"ImageWithSpinner--landscape":h,"ImageWithSpinner--portrait":!h,"ImageWithSpinner--centered":m},r,!m)),g={borderRadius:"round"===l?void 0:s};return c.default.createElement("div",{ref:this._rootRef,className:y,style:g,"data-testonly-src":(0,v.fastTrim)(a),"data-testid":u},e)}},{key:"render",value:function(){var e=this.props.src,t=this.state,n=t.containerWidth,r=t.containerHeight,i=t.error,o=t.loading,l=t.timerThresholdExceeded;if(n&&r){var s=v.default.extractTextFromPlaceholderUrl(e);if(null!=s)return this.renderTextAvatar(s);if(o)return l?this.renderLoader():this.renderEmpty();if(i)return this.renderError();if(a.isValidUrl(e))return this.renderImage()}return this.renderEmpty()}}],[{key:"isValidUrl",value:function(e){return!!(0,v.fastTrim)(e)}}]),a}(c.default.Component);I.defaultProps={cropMode:"full"};var A=I;t.default=A},803444:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.InlineView=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808)),u=n(a(667294)),d=n(a(330702)),c=n(a(324675)),p=n(a(114871)),f=n(a(182788)),h=a(113473),m=n(a(101993)),v=n(a(675671)),y=n(a(748741)),g=n(a(593186)),w=n(a(750812)),b=a(648048),S=a(351101),T=a(888861),C=a(488386),R=a(557310),E=a(698739),k=a(307074),I=a(29827),A=a(95483),D=n(a(819433));function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var x=function(e){(0,o.default)(a,e);var t=M(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"getView",value:function(){return this.realView}},{key:"render",value:function(){var e,t,n,r,i,o,l,s,f,h,m,v,y,g,w,C,E,M,x,N,O,_,B,P,L,V,F,H,W,U,j,z,G,K,Y,q,$,Q,X,Z,J,ee,te,ae,ne,re,ie=this,oe=(0,S.getAppModel)().findTableCollection(this.props.tableName),le=oe.table,se=oe.tableSchema,ue=a.viewByName(this.props.viewType),de=ue===d.default||ue===c.default||ue===p.default,ce=!R.ReactRootUIConfig.isInDesktopExperience()&&de?this.props.maxRows:null,pe=(0,T.createAnd)(this.props.filterExpr?this.props.filterExpr:null===(e=this.props.viewState)||void 0===e?void 0:e.FilterExpr,this.context.query.toExpression());if(R.ReactRootUIConfig.isInDesktopExperience()){var fe=this.props,he=fe.tableName,me=fe.parentViewStateKey,ve=(0,A.getViewStack)((0,D.default)().getState());if(me){var ye=ve[(0,k.findViewStackIndex)(ve,me)+1],ge=ye?(0,I.getTableName)(ye):void 0,we=ye?(0,I.getViewType)(ye):void 0;re=he===ge&&"detail"===we?null==ye?void 0:ye.mutableState.RowKey:void 0}}return u.default.createElement(b.ErrorBoundary,null,u.default.createElement(ue,{isInline:!0,uiState:this.props.viewState,view:this.props.view,useCardLayout:null===(t=this.props.viewState)||void 0===t?void 0:t.UseCardLayout,interactiveDashboardMode:this.props.interactiveDashboardMode,interactiveRowIds:this.props.interactiveRowIds,coupledViews:this.props.coupledViews,quickEditMode:this.props.quickEditMode,disableNavigation:this.props.disableNavigation,controlName:this.props.controlName,table:le,tableSchema:se,filterExpr:pe,filterDefaults:this.props.filterDefaults||(null===(n=this.props.viewState)||void 0===n?void 0:n.DefaultValues),rowLimit:ce,visibleMaxRowCount:this.props.maxRows,width:this.props.width,height:this.props.height,translucentMode:this.props.translucentMode,columnOrder:null===(r=this.props.viewState)||void 0===r?void 0:r.ColumnOrder,columnWidth:null===(i=this.props.viewState)||void 0===i?void 0:i.ColumnWidth,groupBy:null===(o=this.props.viewState)||void 0===o?void 0:o.GroupBy,sortBy:null===(l=this.props.viewState)||void 0===l?void 0:l.SortBy,imageDisplayType:null===(s=this.props.viewState)||void 0===s?void 0:s.ImageDisplayType,invokeAction:null===(f=this.props.viewState)||void 0===f?void 0:f.InvokeAction,galleryImageSize:(null===(h=this.props.viewState)||void 0===h?void 0:h.GalleryImageSize)||"Small",sidewaysScroll:this.props.sidewaysScroll,chartType:null===(m=this.props.viewState)||void 0===m?void 0:m.ChartType,maxNestedRows:null===(v=this.props.viewState)||void 0===v?void 0:v.MaxNestedRows,chartColumns:null===(y=this.props.viewState)||void 0===y?void 0:y.ChartColumns,trendLine:null===(g=this.props.viewState)||void 0===g?void 0:g.TrendLine,showLegend:null===(w=this.props.viewState)||void 0===w?void 0:w.ShowLegend,labelType:null===(C=this.props.viewState)||void 0===C?void 0:C.LabelType,colorCodes:null===(E=this.props.viewState)||void 0===E?void 0:E.ColorCodes,showMap:this.props.showMap,mapType:null===(M=this.props.viewState)||void 0===M?void 0:M.MapType,mapColumn:null===(x=this.props.viewState)||void 0===x?void 0:x.MapCol,secondaryTableName:null===(N=this.props.viewState)||void 0===N?void 0:N.SecondaryTable,secondaryColumn:null===(O=this.props.viewState)||void 0===O?void 0:O.SecondaryColumn,selectedTable:null!==(_=this.props.selectedTable)&&void 0!==_?_:null!=this.props.rowId?this.props.tableName:void 0,selectedColumn:this.props.selectedColumn,locationMode:null===(B=this.props.viewState)||void 0===B?void 0:B.LocationMode,groupAggregate:null===(P=this.props.viewState)||void 0===P?void 0:P.groupAggregate,headerColumns:null===(L=this.props.viewState)||void 0===L?void 0:L.headerColumns,mapMode:this.props.mapMode,mainDeckImageColumn:null===(V=this.props.viewState)||void 0===V?void 0:V.mainDeckImageColumn,primaryDeckHeaderColumn:null===(F=this.props.viewState)||void 0===F?void 0:F.primaryDeckHeaderColumn,layout:null===(H=this.props.viewState)||void 0===H?void 0:H.Layout,clickOverride:this.props.clickOverride,secondaryDeckHeaderColumn:null===(W=this.props.viewState)||void 0===W?void 0:W.secondaryDeckHeaderColumn,deckSummaryColumn:null===(U=this.props.viewState)||void 0===U?void 0:U.deckSummaryColumn,startDateColumn:null===(j=this.props.viewState)||void 0===j?void 0:j.startDateColumn,endDateColumn:null===(z=this.props.viewState)||void 0===z?void 0:z.endDateColumn,startTimeColumn:null===(G=this.props.viewState)||void 0===G?void 0:G.startTimeColumn,endTimeColumn:null===(K=this.props.viewState)||void 0===K?void 0:K.endTimeColumn,labelColumn:null===(Y=this.props.viewState)||void 0===Y?void 0:Y.labelColumn,categoryColumn:null===(q=this.props.viewState)||void 0===q?void 0:q.categoryColumn,defaultCalendarView:null===($=this.props.viewState)||void 0===$?void 0:$.defaultCalendarView,showActionBar:!this.props.disableAllActions&&(null===(Q=this.props.viewState)||void 0===Q?void 0:Q.showActionBar),actionColumns:null===(X=this.props.viewState)||void 0===X?void 0:X.actionColumns,actionBarEntries:null===(Z=this.props.viewState)||void 0===Z?void 0:Z.actionBarEntries,rowId:this.props.rowId||(null===(J=this.props.viewState)||void 0===J?void 0:J.RowKey)||re,parentId:this.props.parentId,searchQuery:this.props.searchQuery?this.props.searchQuery:null===(ee=this.props.viewState)||void 0===ee?void 0:ee.SearchTerm,mainSlideshowImageColumn:null===(te=this.props.viewState)||void 0===te?void 0:te.mainSlideshowImageColumn,detailContentColumn:null===(ae=this.props.viewState)||void 0===ae?void 0:ae.detailContentColumn,slideshowDisplayMode:null===(ne=this.props.viewState)||void 0===ne?void 0:ne.SlideshowDisplayMode,onRowOpened:this.props.onRowOpened,disableSearchOnDrilldown:!0,disableAllActions:this.props.disableAllActions,overrideStateChangeMode:this.props.overrideStateChangeMode,ref:function(e){return ie.realView=e}}))}}],[{key:"viewByName",value:function(e){var t={card:y.default,table:c.default,fastTable:c.default,deck:d.default,map:m.default,"google-map":m.default,gallery:p.default,chart:f.default,slideshow:h.LegacySlideshowView,detail:h.LegacySlideshowView,calendar:v.default,onboarding:w.default,iframe:C.IFrameView}[e];return t||(g.default.ReportErrorOnce({errorMessage:"Attempted to use unsupported view type in InlineView",viewType:e}),t=c.default),t}}]),a}(u.default.Component);t.InlineView=x,x.contextType=E.FilterContext},638157:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(973935)),p=n(a(112963)),f=a(318926),h=a(218546);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,l.default)(a,e);var t=m(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state={showBox:!1},n.handleOnChange=n.handleOnChange.bind((0,o.default)(n)),n.handleOnFocus=n.handleOnFocus.bind((0,o.default)(n)),n.handleOnBlur=n.handleOnBlur.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"focus",value:function(){this.refs.input.focus()}},{key:"checkShowBox",value:function(){var e,t=this,a=c.default.findDOMNode(this);setTimeout((function(){e=$.contains(a,document.activeElement),t.mounted&&t.setState({boxIsFocused:e})}))}},{key:"positionDropdown",value:function(){var e=c.default.findDOMNode(this.refs.input),t=$(e),a=t.position();a.top+=t.outerHeight(),a.width=t.outerWidth(),$(c.default.findDOMNode(this.refs.box)).css(a)}},{key:"componentDidMount",value:function(){this.positionDropdown(),this.mounted=!0}},{key:"componentDidUpdate",value:function(){this.positionDropdown()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"handleOnChange",value:function(e){"function"==typeof this.props.onChange&&this.props.onChange(e)}},{key:"handleOnFocus",value:function(e){this.checkShowBox(),"function"==typeof this.props.onFocus&&this.props.onFocus(e)}},{key:"handleOnBlur",value:function(e){this.checkShowBox(),"function"==typeof this.props.onBlur&&this.props.onBlur(e)}},{key:"handleSelectItem",value:function(e){"function"==typeof this.props.onValue&&(f.logger.logAppEvent(h.AppEventName.AutoCompleteItemSelect),this.props.onValue(e))}},{key:"render",value:function(){var e,t=this;if(null==this.props.value||""===this.props.value||this.props.noFilter)e=this.props.values.filter((function(e){return null!=e&&""!==e}));else{var a=this.props.value.toString().toLowerCase();e=this.props.values.filter((function(e){return null!=e&&""!==e&&0===e.toString().toLowerCase().indexOf(a)}))}var n=e.sort().slice(0,7),r=this.props.value&&this.props.values.indexOf(this.props.value)>=0,i=this.state.boxIsFocused&&!r&&n.length>0;return d.default.createElement("div",{className:"InputWithAutocomplete"},d.default.createElement("input",{className:"InputWithAutocomplete__input",ref:"input",type:this.props.type,value:this.props.value||"",disabled:this.props.readOnly,onChange:this.handleOnChange,onFocus:this.handleOnFocus,onBlur:this.handleOnBlur}),i?d.default.createElement("div",{className:"InputWithAutocomplete__box",ref:"box"},n.map((function(e){return d.default.createElement(p.default,{className:"InputWithAutocomplete__item",key:e,onTap:t.handleSelectItem.bind(t,e),preventDefault:!0},e)}))):null)}}]),a}(d.default.Component);t.default=v},901711:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(294184)),p=n(a(496486)),f=n(a(571524));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var m="appsheet-cache://url=",v=function(e){return!(!e||0!==e.indexOf(m))},y=function(e){(0,l.default)(a,e);var t=h(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state={loading:a.isValidUrl(n.props.src),error:!1},n.imgRef=function(e){n._imageElement=e},n.onImageLoad=n.onImageLoad.bind((0,o.default)(n)),n.onImageError=n.onImageError.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"objectFit",value:function(){return"full"===this.props.cropMode||"full-centered"===this.props.cropMode?"contain":"cover"}},{key:"imageElement",get:function(){return this._imageElement}},{key:"error",get:function(){return this.state.error}},{key:"loading",get:function(){return this.state.loading}},{key:"onImageLoad",value:function(){this.imageElement&&this.setState({loading:!1,error:!1})}},{key:"onImageError",value:function(){var e=p.default.get(this,"imageElement.src");e&&v(e)&&!v(this.props.src)?this.imageElement.src=this.props.src:(this.setState({loading:!1,error:!0}),this.props.onImageError&&this.props.onImageError())}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.loading,r=this.props,i=r.className,o=r.solidBackgroundColor,l=r.cropMode,s=r.width,u=r.height,h=r.isBasic,y=r.imageBorderRadius,g=this.props.src;f.default.InIOSWebView()&&f.default.InWKWebView()&&p.default.get(window,"AppModel.AppTemplate.Behavior.FullOfflineCaching")&&!v(g)&&(g=m+encodeURIComponent(g));var w,b,S,T=(0,c.default)(i,"LightweightImageWithSpinner",{"LightweightImageWithSpinner--solid-background-color":o,"LightweightImageWithSpinner--crop-mode-round":"round"===l,"LightweightImageWithSpinner--errored":t});if(t||!a.isValidUrl(g))S=t&&d.default.createElement("i",{className:"LightweightImageWithSpinner__error-icon fa fa-exclamation-triangle"});else{var C={objectFit:this.objectFit(),maxWidth:"100%",maxHeight:"100%",opacity:n?0:1};s&&(C.width=s),u&&(C.height=u),w=d.default.createElement("img",{src:g,onLoad:this.onImageLoad,onError:this.onImageError,className:"LightweightImageWithSpinner__image",style:h?null:C,key:g,ref:this.imgRef}),n&&this.props.useLoadingSpinner&&(b=d.default.createElement("div",{className:"LightweightImageWithSpinner__spinner"}))}var R={borderRadius:"round"===l?void 0:y};return d.default.createElement("div",{className:T,style:R,"data-testonly-src":p.default.trim(g)},S,b,w)}}],[{key:"isValidUrl",value:function(e){return!!p.default.trim(e)}}]),a}(d.default.Component);y.defaultProps={cropMode:"full"};var g=y;t.default=g},605161:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808)),u=n(a(496486)),d=n(a(667294)),c=n(a(294184)),p=n(a(571524)),f=n(a(593186)),h=n(a(112963)),m=a(803583),v=a(299119),y=n(a(327755));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var w=function(e){(0,o.default)(a,e);var t=g(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).$modal=null,n.$popup=null,n.$tappable=null,n.modalRef=function(e){n.$modal=e},n.popupRef=function(e){n.$popup=e},n.tappableRef=function(e){n.$tappable=e},n.onTap=function(){n.$tappable&&$(n.$tappable).focus(),n.$modal&&n.$modal.setAnchorElement(document.body),!1!==n.props.preventImmediateClose&&(n.closeTimeout=setTimeout((function(){n.closeTimeout=null}),500)),n.setState({open:!0})},n.onFinish=function(e,t,a){var r=n.state.currentSelection,i=n.props.onChange;null==n.closeTimeout||r!==n.props.selected?n.setState({open:!1},(function(){setTimeout((function(){void 0!==r&&i&&i(r,a),t&&t()}),v.Modal.closeTimeout()+50)})):f.default.logToDevConsole("timeout block!")},n.onChange=function(e){n.setState({currentSelection:e})},n.onModalOpen=function(){!p.default.IsTouchEnabled()&&n.$popup&&n.$popup.focusInput()},n.onButtonKeyDown=function(e){!e||13!==e.keyCode||p.default.IsMobileBrowser()||n.state.open||n.onTap()},n.state={},n}return(0,i.default)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({currentSelection:this.props.selected})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){u.default.isEqual(this.props.selected,e.selected)||this.setState({currentSelection:e.selected})}},{key:"selectedArray",value:function(e){return e||(e=this.props),null==e.selected?[]:e.selected instanceof Array?e.selected:e.selected?[e.selected]:[]}},{key:"tableMode",value:function(){return this.props.typeInput&&this.props.typeInput.tableMode()}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.appModel,r=a.listAttribute,i=a.optionAttribute,o=a.table,l=a.displayMode,s=a.width,u=a.height,p=a.dataContext,f=a.renderInlineButtons,g=a.getInputStyleWithInlineButtons,w=r&&r.itemSeparator()||", ";if(i){var b=m.TypeDisplaysApi.lookup(i),S=this.selectedArray().map((function(e,a){return d.default.createElement(b,{attribute:i,value:e,allowTaps:!1,table:o,appModel:n,minimalView:!1,inlineModeBlockWidth:t.tableMode()?u:60,inlineModeBlockHeight:t.tableMode()?u:60,dataContext:p,key:a,displayMode:l||"block",height:u,width:s})})),T=[];S.forEach((function(e,t){var a=t===S.length-1;T.push(e),a||T.push(d.default.createElement("span",{className:"ListSelect__separator",key:"separator-"+t},w))})),e=T}else e=this.selectedArray().join(w);e&&e.length||(e=d.default.createElement("div",{className:"BaseTypeDisplay ListSelect--empty-spacer"}));var C,R,E=(0,c.default)("ListSelect",{"ListSelect--read-only":!!this.props.readOnly}),k=f&&f(),I=g&&g(k)||{};return this.tableMode()&&this.selectedArray().length||(null==k?void 0:k.length)>0||(C=d.default.createElement("i",{className:"icon DropdownCaret fa fa-fw "+(this.props.multiselect?"fa-plus":"fa-caret-down")})),null!=this.props.height&&(R={lineHeight:"".concat(this.props.height,"px")}),d.default.createElement("article",{className:E,style:R},d.default.createElement(h.default,{onTappableMount:this.tappableRef,className:"ListSelect__button",enabled:!this.props.readOnly,onTap:this.onTap,onKeyDown:this.onButtonKeyDown,style:I},e,C),k&&d.default.createElement("div",{className:"ListSelect__inline-buttons"},k),d.default.createElement(v.ReactiveModal,{isOpen:!!this.state.open,onRequestClose:this.onFinish,onAfterOpen:this.onModalOpen,contentLabel:this.props.title,ref:this.modalRef},d.default.createElement(y.default,Object.assign({ref:this.popupRef},this.props,{isOpen:!!this.state.open,selected:this.state.currentSelection,onChange:this.onChange,onFinish:this.onFinish}))))}}]),a}(d.default.Component);t.default=w},327755:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(496486)),c=n(a(667294)),p=n(a(676970)),f=a(697211),h=n(a(735996)),m=n(a(365914)),v=n(a(593186)),y=n(a(674823)),g=n(a(962553)),w=a(56749),b=n(a(626537)),S=n(a(112963));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var C=Symbol("ADD NEW"),R=Symbol("ADD REF"),E=function(e){(0,l.default)(a,e);var t=T(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).optionsRef=function(e){n.$options=e||void 0},n.inputRef=function(e){n.$input=e||void 0},n.modalRef=function(e){n.$modal=e||void 0},n.state={options:[],textBoxValue:""},n.handleHardwareScannerBound=n.handleHardwareScanner.bind((0,o.default)(n)),n.onTextKeyDown=n.onTextKeyDown.bind((0,o.default)(n)),n.clearTextBox=n.clearTextBox.bind((0,o.default)(n)),n.addTextBoxValue=n.addTextBoxValue.bind((0,o.default)(n)),n.textBoxChanged=n.textBoxChanged.bind((0,o.default)(n)),n.onClear=n.onClear.bind((0,o.default)(n)),n.onItemSelected=n.onItemSelected.bind((0,o.default)(n)),n.onSelectAll=n.onSelectAll.bind((0,o.default)(n)),n.renderOption=n.renderOption.bind((0,o.default)(n)),n.onFinish=n.onFinish.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"renderOption",value:function(e){var t,a,n,r=this._linesToRender?this._linesToRender[e]:this.linesToRender()[e];return r===C?(a="add",n=this.addTextBoxValue,r=this.state.textBoxValue):r===R?(a="add-ref",n=this.props.addNewRefHandler,r="New",this.props.appModel&&(r=this.props.appModel.MapActionName("New"))):(t=this.selectedArray().indexOf(r)>=0,a=null,n=this.onItemSelected),c.default.createElement(b.default,{option:r,index:e,special:a,isSelected:t,attribute:this.props.optionAttribute,appModel:this.props.appModel,table:this.props.table,multiselect:this.props.multiselect,dataContext:this.props.dataContext,onSelected:n,key:r||e})}},{key:"clearTextBox",value:function(){this.$options&&$(this.$options).scrollTop(0),this.setState({textBoxValue:""}),this.focusInput()}},{key:"textBoxChanged",value:function(e){var t=e.target.value;this.$options&&$(this.$options).scrollTop(0),this.setState({textBoxValue:t})}},{key:"selectOptionIfOnlyOption",value:function(){var e=this.currentItems();1===e.length&&(this.onItemSelected(e[0],0),this.props.multiselect?this.setState({textBoxValue:""}):this.finishAfterDelay())}},{key:"selectOption",value:function(e){switch(e){case R:this.props.addNewRefHandler();break;case C:this.addTextBoxValue(this.state.textBoxValue);break;default:this.onItemSelected(e),this.props.multiselect?this.setState({textBoxValue:""}):this.finishAfterDelay()}}},{key:"onTextKeyDown",value:function(e){if(13===e.keyCode)this.props.allowAdds?(this.addTextBoxValue(),this.props.multiselect&&e.stopPropagation()):this.selectOptionIfOnlyOption()}},{key:"addTextBoxValue",value:function(){this.props.allowAdds&&(this.textBoxValueAlreadyExists()||(this.onItemSelected(this.state.textBoxValue),this.props.multiselect?this.setState({textBoxValue:""}):this.finishAfterDelay()))}},{key:"finishAfterDelay",value:function(){var e=this;this.clearFinishDelay(),this.finishDelay=setTimeout((function(){e.onFinish()}),100)}},{key:"onItemSelected",value:function(e,t){var a=this;if(this.props.appModel&&this.props.appModel.inRollout("orderedEnumListSelection")&&null!=t){var n=this.linesToRender(),r=this.selectedArray(),i=new Array(n.length),o=!1;if(r.forEach((function(t){if(a.props.multiselect){var r=n.indexOf(t);r>=0?i[r]=t:i.push(t)}t===e&&(o=!0)})),this.props.multiselect)i[t]=o?void 0:e,i=i.filter((function(e){return null!=e})),this.props.onChange&&this.props.onChange(i);else{i[t]=e;var l=(i=i.filter((function(e){return null!=e})))[0];this.props.onChange&&this.props.onChange(l),this.finishAfterDelay()}}else if(this.props.multiselect){var s=m.default.arrayToggle(this.selectedArray(),e,this.props.multiselect);this.props.onChange&&this.props.onChange(s)}else{var u=e;this.props.onChange&&this.props.onChange(u),this.finishAfterDelay()}}},{key:"onClear",value:function(){this.props.multiselect?this.props.onChange&&this.props.onChange([]):this.props.onChange&&this.props.onChange(""),this.finishAfterDelay()}},{key:"onSelectAll",value:function(){this.props.multiselect?this.props.onChange&&this.props.onChange(this.currentItems()):v.default.ReportError({errorMessage:"Cannot select all on non-multiselect"})}},{key:"focusInput",value:function(){this.$input?this.$input.focus():this.$modal&&this.$modal.focus()}},{key:"onFinish",value:function(){this.props.onFinish&&this.props.onFinish()}},{key:"clearFinishDelay",value:function(){this.finishDelay&&(clearTimeout(this.finishDelay),this.finishDelay=null)}},{key:"handleHardwareScanner",value:function(e,t){this.setState({textBoxValue:t}),this.selectOptionIfOnlyOption()}},{key:"textBoxValueAlreadyExists",value:function(){return d.default.includes(this.state.options,this.state.textBoxValue)}},{key:"includeAddNew",value:function(){return this.props.allowAdds&&this.state.textBoxValue&&!this.textBoxValueAlreadyExists()}},{key:"includeAddRef",value:function(){var e;return this.props.allowAddRef&&this.props.optionAttribute.type()===(null===(e=this.props.appModel)||void 0===e?void 0:e.TABLEREF_TYPE)}},{key:"showClearButton",value:function(){return!this.state.textBoxValue&&this.selectedArray().length>0}},{key:"showBottomLeftButton",value:function(){return!this.showClearButton()&&this.props.multiselect}},{key:"selectedArray",value:function(e){return e||(e=this.props),null==e.selected?[]:e.selected instanceof Array?e.selected:e.selected?[e.selected]:[]}},{key:"UNSAFE_componentWillMount",value:function(){this.setState({options:d.default.union(this.props.options,this.selectedArray())}),$(JeeneeNamespace).on("hw-barcode-scan",this.handleHardwareScannerBound)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=d.default.clone(this.state.options);this.selectedArray(e).forEach((function(e){d.default.includes(t,e)||t.unshift(e)})),t=t.filter((function(e){return!!e})),this.setState({options:t})}},{key:"componentWillUnmount",value:function(){this.clearFinishDelay(),$(JeeneeNamespace).off("hw-barcode-scan",this.handleHardwareScannerBound)}},{key:"getRefTableName",value:function(){return this.props.optionAttribute?this.props.optionAttribute.auxData().ReferencedTableName:""}},{key:"refTable",value:function(){var e=this.getRefTableName();return e?g.default.findByName(e,this.props.appModel):{}}},{key:"currentItems",value:function(){var e=this.state.options,t=function(e){return(0,y.default)(String(e).toLowerCase())};if(this.state.textBoxValue){var a=t(this.state.textBoxValue),n=this.refTable().table,r={};n&&(r=n.keyLabelMap(this.props.appModel,this.props.dataContext)),e=e.filter((function(e){var n=r[e]||e;return n&&"string"==typeof n?t(n).indexOf(a)>=0:(v.default.warnToDevConsole("ListSelectPopup encountered a weird option",n),!1)}))}return e}},{key:"linesToRender",value:function(){var e=this.currentItems();return this.includeAddNew()&&(e=[C].concat(e)),this.includeAddRef()&&(e=[R].concat(e)),e}},{key:"renderInput",value:function(){var e=this.props,t=e.allowAdds,a=e.appModel,n=e.isOpen,r=this.state.textBoxValue,i=null==a?void 0:a.MapActionName(t?"Add or search":"Search"),o=r?c.default.createElement(f.InputAdornment,{position:"end"},c.default.createElement(f.IconButton,{className:"ListSelectPopup__input-clear-button","aria-label":"clear search",size:"small",onClick:this.clearTextBox},c.default.createElement(h.default,null))):null;return c.default.createElement("div",{className:"ListSelectPopup__input"},c.default.createElement(f.TextField,{variant:"outlined",size:"small",label:i,inputRef:this.inputRef,className:"ListSelectPopup__input-box",value:r,disabled:!n,onChange:this.textBoxChanged,onKeyDown:this.onTextKeyDown,InputProps:{endAdornment:o}}))}},{key:"render",value:function(){var e,t=this,a=function(e){return t.props.appModel?t.props.appModel.MapActionName(e):e};this._linesToRender=this.linesToRender(),this.showClearButton()?e=c.default.createElement(S.default,{className:"ListSelectPopup__clear-button",navigationDelay:!0,onTap:this.onClear},a("Clear")):this.showBottomLeftButton()&&(e=c.default.createElement(S.default,{className:"ListSelectPopup__select-all-button",onTap:this.onSelectAll},a("Select All")));var n=this.props.optionAttribute&&this.props.optionAttribute.basestType(),r=this._linesToRender.length>6||this.props.allowAdds||this.state.textBoxValue||"LongText"===n?this.renderInput():null;return c.default.createElement("section",{className:"ListSelectPopup disableLegacyStyles",ref:this.modalRef,"data-testid":"list-select-popup"},c.default.createElement(w.ASThemeProvider,null,c.default.createElement("div",{className:"ListSelectPopup__title"},this.props.title),r,c.default.createElement("div",{className:"ListSelectPopup__options",ref:this.optionsRef,style:{height:r?"calc(100% - 50px - 40px - 54px)":"calc(100% - 50px - 54px)"}},c.default.createElement(p.default,{length:this._linesToRender.length,itemRenderer:this.renderOption,threshold:600,itemSizeEstimator:function(){return 46},type:window.APPSHEET_TEST_CONTEXT?"simple":"variable"})),c.default.createElement("div",{className:"ListSelectPopup__bottom"},e,c.default.createElement(S.default,{className:"ListSelectPopup__finish-button",navigationDelay:!0,onTap:this.onFinish},a("Done")))))}}]),a}(c.default.Component);t.default=E},626537:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808)),u=n(a(496486)),d=n(a(667294)),c=n(a(112963)),p=n(a(294184)),f=a(803583),h=n(a(385857)),m=a(714611);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var y=function(e){(0,o.default)(a,e);var t=v(a);function a(){var e;return(0,r.default)(this,a),(e=t.apply(this,arguments)).handleTap=function(){var t=e.props,a=t.index,n=t.option;(0,t.onSelected)(n,a)},e}return(0,i.default)(a,[{key:"renderAdd",value:function(){var e=(0,p.default)("ListSelectPopupOption ListSelectPopupOption--special-add",{});return d.default.createElement(c.default,{onTap:this.props.onSelected,className:e},d.default.createElement("div",{className:"ListSelectPopupOption__icon-container"},d.default.createElement("i",{className:"fa fa-plus"})),d.default.createElement("div",{className:"ListSelectPopupOption__value"},"".concat(this.props.multiselect?"Add":"Use"," '").concat(this.props.option,"'")))}},{key:"renderAddRef",value:function(){var e=(0,p.default)("ListSelectPopupOption ListSelectPopupOption--special-add",{});return d.default.createElement(c.default,{onTap:this.props.onSelected,className:e},d.default.createElement("div",{className:"ListSelectPopupOption__icon-container"},d.default.createElement("i",{className:"fa fa-edit"})),d.default.createElement("div",{className:"ListSelectPopupOption__value"},this.props.option))}},{key:"renderNormal",value:function(){var e,t=null,a=this.props,n=a.dataContext;if(a.attribute){if(n){var r=u.default.clone(n.rowData);r[a.attribute.name()]=a.option,t=new h.default(a.appModel,n.tableSchema,r,n.formState,void 0,void 0,n.uiContext)}e=f.TypeDisplaysApi.lookup(a.attribute,a.option)}else e=f.TypeDisplaysApi.Text;var i=200,o=0;a.attribute&&null!=a.attribute.firstNestedOfType("Ref")&&(i=60,o=m.columnPadding);var l=d.default.createElement(e,{attribute:a.attribute,value:a.option,appModel:a.appModel,allowTaps:!1,imageDisplayType:"full",table:a.table,inlineModeBlockWidth:i+o,inlineModeBlockHeight:i,dataContext:t||a.dataContext,displayMode:"inline"}),s=(0,p.default)("ListSelectPopupOption",{"ListSelectPopupOption--selected":a.isSelected,"ListSelectPopupOption--multiselect":!!a.multiselect,"ListSelectPopupOption--singleselect":!a.multiselect});return d.default.createElement(c.default,{className:s,onTap:this.handleTap},d.default.createElement("div",{className:"ListSelectPopupOption__icon-container"},d.default.createElement("div",{className:"ListSelectPopupOption__icon"})),d.default.createElement("div",{className:"ListSelectPopupOption__value"},l))}},{key:"render",value:function(){return"add"===this.props.special?this.renderAdd():"add-ref"===this.props.special?this.renderAddRef():this.renderNormal()}}]),a}(d.default.PureComponent);t.default=y},105041:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(973935)),p=n(a(491035));function f(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw i}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var v=["className","color","component","corners","direction","fps","hwaccell","left","length","lines","loadedClassName","opacity","parentClassName","position","radius","rotate","scale","shadow","speed","top","trail","width","zIndex"],y=function(e){(0,l.default)(a,e);var t=m(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state={loaded:!1,options:{}},n.updateState=n.updateState.bind((0,o.default)(n)),n.spin=n.spin.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.updateState(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updateState(e)}},{key:"componentWillUnmount",value:function(){this.setState({loaded:!1})}},{key:"updateState",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a="options"in t?t.options:t,n="loaded"in a?!!a.loaded:this.state.loaded,r=this.state.options,i=f(v);try{for(i.s();!(e=i.n()).done;){var o=e.value;o in a&&(r[o]=a[o])}}catch(e){i.e(e)}finally{i.f()}this.setState({loaded:n,options:r},this.spin)}},{key:"spin",value:function(){if(!("undefined"==typeof window||!window.document||!window.document.createElement)&&!this.state.loaded){var e=new p.default(this.state.options),t=c.default.findDOMNode(this.refs.loader);t&&(t.innerHTML="",e.spin(t))}}},{key:"render",value:function(){var e,t;return this.state.loaded?(e={key:"content",className:this.props.loadedClassName},t=this.props.children):e={key:"loader",ref:"loader",className:this.props.parentClassName},d.default.createElement("div",Object.assign({},e),t)}}]),a}(d.default.Component);t.default=y},299119:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ReactiveModal=t.Modal=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(183253)),c=n(a(496486)),p=n(a(667294)),f=n(a(45697)),h=n(a(294184)),m=n(a(21870)),v=a(351101),y=a(318926),g=a(862858),w=a(202079),b=a(166089);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}d.default.defaultStyles.overlay={},d.default.defaultStyles.content={},d.default.setAppElement(document.body);var T=function(e){(0,l.default)(a,e);var t=S(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state={},n._cachedAnchorPosition=null,n.handleResizeBound=n.handleResize.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"onTap",value:function(){this.setState({open:!0})}},{key:"onFinish",value:function(){this.setState({open:!1})}},{key:"type",value:function(){return"local"===this.props.type?"local":"fullscreen"}},{key:"allItems",value:function(){return c.default.union(this.props.options,this.props.selected)}},{key:"setAnchorElement",value:function(e){this.setState({anchorElement:e})}},{key:"getAnchorPosition",value:function(){return this.state.anchorElement&&this.props.isOpen?(this._cachedAnchorPosition||(this._cachedAnchorPosition=this.getAnchorCenter(this.state.anchorElement)),this._cachedAnchorPosition):this._cachedAnchorPosition||{anchorX:0,anchorY:0}}},{key:"getAnchorCenter",value:function(e){var t=$(e),a=t.offset();return{anchorX:a.left+t.width()/2,anchorY:a.top+t.height()/2}}},{key:"handleResize",value:function(){this._cachedAnchorPosition=null,this.props.isOpen&&this.forceUpdate()}},{key:"componentDidMount",value:function(){$(window).on("resize",this.handleResizeBound)}},{key:"componentWillUnmount",value:function(){$(window).off("resize",this.handleResizeBound)}},{key:"render",value:function(){var e,t=this,n=a.anchoredMode(),r=m.default.windowHeight-40,i={};if("fullscreen"===this.type())if(n){var o=this.getAnchorPosition(),l=o.anchorX,s=o.anchorY,u=Math.min(800,r);i.left=l-300-16,i.top=Math.max(s-u,10),i.width=600,i.height=u,i.position="absolute"}else i.height=r;else i.position="absolute",i.right=0,i.top=0,i.width=this.props.width||220,i.height=this.props.height;var c=(0,v.getAppModel)(),f=(null==c?void 0:c.isReady())&&c.inRollout("materialDatePicker"),w=(0,h.default)("Modal",{"Modal--local":"local"===this.type(),"Modal--rollout":f},this.props.className,null===(e=b.AppGlobals.AppModel)||void 0===e?void 0:e.rolloutClassNames),S=(0,h.default)("Modal__contents",{"Modal--anchored-mode":n},this.props.className);return p.default.createElement(d.default,Object.assign({closeTimeoutMS:300},this.props,{onRequestClose:function(e){y.logger.endScenario({result:g.ScenarioResult.Abandon,abandonReason:g.ScenarioAbandonReason.ClosedModal}),t.props.onRequestClose&&t.props.onRequestClose(e)},overlayClassName:w,className:S,style:{content:i,overlay:{}},ref:function(e){t.portal=e&&e.portal}}),this.props.children)}}],[{key:"closeTimeout",value:function(){return 300}},{key:"anchoredMode",value:function(){return m.default.windowWidth>=768}},{key:"contentWidth",value:function(){return a.anchoredMode()?600:m.default.windowWidth-32}}]),a}(p.default.Component);t.Modal=T,T.propTypes=c.default.extend({},d.default.propTypes,{type:f.default.string});var C=(0,w.observer)(T);t.ReactiveModal=C;var R=T;t.default=R},525965:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.scrollCooldown=t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(973935)),p=n(a(294184)),f=n(a(527274)),h=n(a(593186)),m=a(700386);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}t.scrollCooldown=200;var y="Tappable-active",g="Tappable-tapped",w=!1;function b(e,t){var a=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.max(a,n)}var S=function(e){(0,l.default)(a,e);var t=v(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).lastScrollTime=0,n.handleDown=n.handleDownUnbound.bind((0,o.default)(n)),n.handleClick=n.handleClickUnbound.bind((0,o.default)(n)),n.handleMove=n.handleMoveUnbound.bind((0,o.default)(n)),n.handleUp=n.handleUpUnbound.bind((0,o.default)(n)),n.handleScroll=n.handleScrollUnbound.bind((0,o.default)(n)),n.handleNativeDragStart=n.handleNativeDragStartUnbound.bind((0,o.default)(n)),n.handleTouchCancel=n.handleTouchCancelUnbound.bind((0,o.default)(n)),n.onKeyDown=n.handleKeyDownUnbound.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"spanMode",get:function(){return!0}},{key:"componentDidMount",value:function(){var e=c.default.findDOMNode(this);if(this.bindPrimaryHandlers(e),null==this.scrollParent){var t=this.props.scrollParent||(0,f.default)(e);this.scrollParent=t!==document.body&&t}this.scrollParent&&this.scrollParent.addEventListener("scroll",this.handleScroll,!1)}},{key:"componentDidUpdate",value:function(){var e=c.default.findDOMNode(this);e!==this.primaryBoundElement&&(this.finishInteraction(),this.primaryBoundElement&&this.resetActiveState(this.primaryBoundElement),e&&this.resetActiveState(e),this.clearResetActiveStateTimeout(),this.bindPrimaryHandlers(e))}},{key:"bindPrimaryHandlers",value:function(e){this.unbindPrimaryHandlers(),e&&(e.addEventListener("touchstart",this.handleDown,{capture:!1,passive:!1}),e.addEventListener("mousedown",this.handleDown,!1),e.addEventListener("click",this.handleClick,!1),this.primaryBoundElement=e)}},{key:"unbindPrimaryHandlers",value:function(){this.primaryBoundElement&&(this.primaryBoundElement.removeEventListener("touchstart",this.handleDown,{capture:!1,passive:!1}),this.primaryBoundElement.removeEventListener("mousedown",this.handleDown,!1),this.primaryBoundElement.removeEventListener("click",this.handleClick,!1),this.primaryBoundElement=null)}},{key:"runOnTap",value:function(e){var t=this,a=c.default.findDOMNode(this);if(this.props.onTap){var n=this.currentInteraction||{},r=n.shiftKey,i=n.altKey,o=n.ctrlKey;this.asyncTapMode()&&!e.astappableTriggerSync?setTimeout((function(){e.isCancelled||(a.focus(),t.props.onTap({shiftKey:r,altKey:i,ctrlKey:o}))}),0):e.isCancelled||(a.focus(),this.props.onTap({shiftKey:r,altKey:i,ctrlKey:o}))}else this.props.href&&this.props.stopPropagation&&!this.props.preventDefault&&InputHandler.handleLinkClick($(a),this.props.href,e);this.props.navigationDelay?(this.setActiveState(a,{transition:!1}),this.clearResetActiveStateTimeout(),this.resetActiveStateTimeout=setTimeout((function(){t.resetActiveState(a),t.setTappedState(a)}),1200)):(this.resetActiveState(a),this.setTappedState(a))}},{key:"preventStuff",value:function(e){this.props.preventDefault&&e.preventDefault(),this.props.stopPropagation&&e.stopPropagation()}},{key:"trimRecentMoves",value:function(){if(this.currentInteraction)for(var e=Date.now(),t=0;t<this.currentInteraction.recentMoves.length;t++){if(!(e-this.currentInteraction.recentMoves[t].time>200))break;this.currentInteraction.recentMoves.splice(t,1),t--}}},{key:"handleDownUnbound",value:function(e){var t=this,a="touchstart"===e.type;if(this.isEnabled()&&("mousedown"!==e.type||3!==e.which)){this.preventStuff(e);var n,r,i=c.default.findDOMNode(this);if(a){if(w=!window.APPSHEET_TEST_CONTEXT,Date.now()-this.lastScrollTime<200)return;var o=e.changedTouches[0];n=o.clientX,r=o.clientY}else{if(w)return w=!1,e.preventDefault(),void e.stopPropagation();n=e.clientX,r=e.clientY}this.currentInteraction={isTouch:a,exceededTapThreshold:!1,x:n,y:r,lastX:n,lastY:r,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,altKey:e.altKey,originalTransitonStyle:i.style.transition,recentMoves:[{time:Date.now(),x:n,y:r}]},this.resetTappedState(i),this.setActiveState(i,{transition:!0}),this.props.onLongPress&&(this.longPressTimeoutStart=Date.now(),this.longPressTimeout=setTimeout((function(){var e=!1,a=document.elementFromPoint(n,r);if(null!=a)do{if(a===i){e=!0;break}a=a.parentNode}while(a!==document.documentElement&&null!=a);t.resetActiveState(i),t.finishInteraction(),(e||window.APPSHEET_TEST_CONTEXT)&&t.props.onLongPress()}),this.props.longPressTime||600)),a?(document.addEventListener("touchmove",this.handleMove,{capture:!1,passive:!1}),document.addEventListener("touchend",this.handleUp,!1),document.addEventListener("touchcancel",this.handleTouchCancel,!1)):(document.addEventListener("mousemove",this.handleMove,!1),document.addEventListener("mouseup",this.handleUp,!1)),document.addEventListener("dragstart",this.handleNativeDragStart,!1)}}},{key:"handleClickUnbound",value:function(e){this.preventStuff(e),e.preventDefault()}},{key:"handleMoveUnbound",value:function(e){var t=this;if(this.currentInteraction){var n="touchmove"===e.type;this.preventStuff(e);var r,i,o=c.default.findDOMNode(this);if(n){var l=e.changedTouches[0];r=l.clientX,i=l.clientY}else r=e.clientX,i=e.clientY;if(!this.currentInteraction.exceededTapThreshold)if(b(this.currentInteraction,{x:r,y:i})>12){this.currentInteraction.exceededTapThreshold=!0;var s=a.computeDirection([this.currentInteraction,{x:r,y:i}]);if(this.props.dragAxis&&s.greatestAxis!==this.props.dragAxis)return this.resetActiveState(o),void this.finishInteraction();if(this.props.onDragStart&&(this.props.onDragStart(),!this.currentInteraction))return}if(this.currentInteraction.exceededTapThreshold)if(this.clearLongPressTimeout(),this.props.onDrag||this.props.onDragEnd){this.trimRecentMoves(),this.currentInteraction.recentMoves.push({time:Date.now(),x:r,y:i});var u=r-this.currentInteraction.lastX,d=i-this.currentInteraction.lastY;this.currentInteraction.lastX=r,this.currentInteraction.lastY=i,this.props.onDrag&&this.props.onDrag({event:e,x:r,y:i,deltaX:u,deltaY:d,speed:function(){return a.computeSpeed(t.currentInteraction.recentMoves)},direction:function(){return a.computeDirection(t.currentInteraction.recentMoves)}})}else this.resetActiveState(o),this.finishInteraction()}else h.default.warnToDevConsole("ASTappable Move called with no interaction")}},{key:"handleUpUnbound",value:function(e){var t=this;if(this.currentInteraction){var n="touchend"===e.type;this.preventStuff(e);var r,i,o=c.default.findDOMNode(this);if(n){var l=e.changedTouches[0];r=l.clientX,i=l.clientY}else r=e.clientX,i=e.clientY;var s=b(this.currentInteraction,{x:r,y:i})>12;this.clearLongPressTimeout(),this.currentInteraction.exceededTapThreshold&&(this.trimRecentMoves(),this.currentInteraction.recentMoves.push({time:Date.now(),x:r,y:i}),this.props.onDragEnd&&this.props.onDragEnd({event:e,x:r,y:i,speed:function(){return a.computeSpeed(t.currentInteraction.recentMoves)},direction:function(){return a.computeDirection(t.currentInteraction.recentMoves)}})),this.currentInteraction&&(this.currentInteraction.exceededTapThreshold||s?this.resetActiveState(o):this.runOnTap(e),this.finishInteraction())}else h.default.warnToDevConsole("ASTappable Up called with no interaction")}},{key:"finishInteraction",value:function(){this.currentInteraction&&(this.currentInteraction.isTouch?(document.removeEventListener("touchmove",this.handleMove,{capture:!1,passive:!1}),document.removeEventListener("touchend",this.handleUp,!1),document.removeEventListener("touchcancel",this.handleTouchCancel,!1)):(document.removeEventListener("mousemove",this.handleMove,!1),document.removeEventListener("mouseup",this.handleUp,!1)),document.removeEventListener("dragstart",this.handleNativeDragStart,!1),this.currentInteraction=null)}},{key:"handleScrollUnbound",value:function(){if(this.lastScrollTime=Date.now(),this.isActive){var e=c.default.findDOMNode(this);this.resetActiveState(e)}this.props.ignoreScrollEvent||this.finishInteraction(),this.clearLongPressTimeout()}},{key:"handleNativeDragStartUnbound",value:function(e){this.props.onDrag&&e.preventDefault()}},{key:"handleTouchCancelUnbound",value:function(){var e=c.default.findDOMNode(this);this.resetActiveState(e),this.finishInteraction()}},{key:"handleKeyDownUnbound",value:function(e){if(13===e.keyCode&&this.props.onTap){var t=e.shiftKey,a=e.altKey,n=e.ctrlKey;this.props.onTap({shiftKey:t,altKey:a,ctrlKey:n})}}},{key:"setActiveState",value:function(e,t){var a=t.transition;this.clearResetActiveStateTimeout(),this.isActive||(this.isActive=!0,e.style.transition=a?"background 30ms linear 50ms":"",h.default.Test()||(e.className+=" "+y))}},{key:"resetActiveState",value:function(e){this.isActive&&(this.isActive=!1,window.removeEventListener("scroll",this.handleScroll,!0),e&&(e.style.transition="",e.className=e.className.toString().replace(y,"")))}},{key:"clearLongPressTimeout",value:function(){this.longPressTimeout&&(clearTimeout(this.longPressTimeout),this.longPressTimeout=null)}},{key:"setTappedState",value:function(e){h.default.Test()||(e.className+=" "+g)}},{key:"resetTappedState",value:function(e){e.className=e.className.toString().replace(g,"")}},{key:"clearResetActiveStateTimeout",value:function(){this.resetActiveStateTimeout&&(clearTimeout(this.resetActiveStateTimeout),this.resetActiveStateTimeout=null)}},{key:"componentWillUnmount",value:function(){this.unbindPrimaryHandlers(),this.finishInteraction(),this.clearResetActiveStateTimeout(),window.removeEventListener("scroll",this.handleScroll,!0),this.scrollParent&&this.scrollParent.removeEventListener("scroll",this.handleScroll,!1)}},{key:"isEnabled",value:function(){return!1!==this.props.enabled}},{key:"asyncTapMode",value:function(){return!1!==this.props.asyncTap}},{key:"render",value:function(){var e=this.props.href;e||(e="#");var t={};for(var a in this.props)0===a.indexOf("data-")&&(t[a]=this.props[a]);var n=(0,p.default)("ASTappable",this.props.className,{"ASTappable--pointer":this.isEnabled()&&!!this.props.onTap&&!this.props.noPointer});if(this.isEnabled()){var r=this.spanMode?"span":"a",i=d.default.createElement(r,Object.assign({},t,{ref:this.props.onTappableMount,id:this.props.id?this.props.id.split(" ").join("_"):null,className:n,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onKeyDown:this.props.onKeyDown||this.onKeyDown,style:this.props.style,href:e,tabIndex:0,role:"button"}),this.props.children);if(this.props.title){return d.default.createElement(m.ASTooltip,{arrow:!0,PopperProps:{popperOptions:{modifiers:{preventOverflow:{enabled:!0,boundariesElement:"viewport"}}}},title:this.props.title||""},i)}return i}return d.default.createElement("div",Object.assign({},t,{ref:this.props.onTappableMount,className:n,title:this.props.title,style:this.props.style}),this.props.children)}}],[{key:"ACTIVE_DELAY",get:function(){return 50}},{key:"NAVIGATION_DELAY",get:function(){return 1200}},{key:"computeSpeed",value:function(e){if(e.length<2)return 0;var t=e[0],a=e[e.length-1];return Math.abs(b(a,t))/((a.time-t.time)/1e3)}},{key:"computeDirection",value:function(e){if(e.length<2)return{};var t=e[0],a=e[e.length-1],n=a.x-t.x,r=a.y-t.y,i=Math.abs(n)>Math.abs(r)?"x":"y";return{n:"y"===i&&r<0,e:"x"===i&&n>0,s:"y"===i&&r>0,w:"x"===i&&n<0,greatestAxis:i}}}]),a}(d.default.Component);t.default=S},750812:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(918698)),p=n(a(667294)),f=n(a(977314)),h=a(202079),m=a(697211),v=a(56749),y=n(a(21870)),g=n(a(385857)),w=n(a(155345)),b=a(166089),S=a(557310),T=n(a(819433)),C=a(692479);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var E,k=function(e,t,a,n){var r,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,c.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(i<3?r(o):i>3?r(t,a,o):r(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o},I=(0,m.createStyles)({root:{color:"inherit",textDecoration:"inherit","&:hover":{textDecoration:"underline"}},disabledOutlined:{},image:{maxWidth:275,maxHeight:220,marginBottom:10},closeButtonRefresh:{fontSize:15,width:40,height:40,fontWeight:"normal"},closeButtonContainer:{width:"100%",display:"flex",justifyContent:"flex-end"}}),A=(0,v.cacheMuiTheme)((function(){return{overrides:{MuiMobileStepper:{dotActive:{backgroundColor:(0,v.themeColor)("actionIcon")},dot:{backgroundColor:(0,v.themeColor)("mainBackgroundVariantExtra")},root:{backgroundColor:"transparent"}},MuiTypography:{h2:{lineHeight:1.33,wordWrap:"break-word"}}},palette:{secondary:{main:(0,v.themeColor)("actionIcon"),contrastText:(0,v.themeColor)("actionButtonText")}}}})),D=E=function(e){(0,s.default)(a,e);var t=R(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).handleStepChange=function(e){var t;n.setState({activeStep:e}),null===(t=n.scrollPaneRef.current)||void 0===t||t.scrollTo(0,0)},n.state={activeStep:0},n.okClick=n.okClick.bind((0,o.default)(n)),n.scrollPaneRef=p.default.createRef(),n.contentHolderRef=p.default.createRef(),n}return(0,i.default)(a,[{key:"okClick",value:function(){this.props.onClose&&this.props.onClose(),E.goToFinishView(this.appModel,this.props.viewDefn.finishView)}},{key:"getLayoutForRow",value:function(e,t){var a=this.props.viewDefn||{},n=e[a.image],r=e[a.firstBlurb],i=e[a.title],o=e[a.secondBlurb],l=this.props.table,s=e[this.props.tableSchema.keyAttribute().name()],u=this.props.classes;if(b.AppGlobals.AppModel){var d=b.AppGlobals.AppModel.ResolveFile(n,l.rootName());n=Common.FlexImageUrl(d)}var c=S.ReactRootUIConfig.isInDesktopExperience()||window.innerWidth<1024;return p.default.createElement("div",{key:"onboarding-"+s,style:{overflowWrap:"anywhere",textAlign:"left",display:"flex",flexDirection:c?"column":"row",marginTop:window.innerWidth<768||S.ReactRootUIConfig.isInDesktopExperience()?0:"30%"}},p.default.createElement("img",{className:u.image,src:n,style:{margin:t?"0 auto 40px":"40px auto"}}),p.default.createElement("div",{style:{marginLeft:c?"":40}},p.default.createElement(m.Typography,{style:{color:(0,v.themeColor)("primaryText"),padding:"0 15px 8px",fontSize:"1.333rem",lineHeight:"1.333rem"},variant:"h5"},i),p.default.createElement("div",null,p.default.createElement(m.Typography,{style:{fontWeight:500,color:(0,v.themeColor)("secondaryText"),padding:"0 15px 15px",lineHeight:"1.333rem",fontSize:"0.889rem",whiteSpace:"pre-wrap"},variant:"subtitle1"},r),p.default.createElement(m.Typography,{style:{color:(0,v.themeColor)("secondaryText"),padding:"0 15px",fontSize:"0.778rem",lineHeight:"1.222rem",whiteSpace:"pre-wrap"},variant:"body2"},o))))}},{key:"render",value:function(){if(this.appModel.inRollout("asyncQuery"))return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this);var e=[];if(this.props.table){var t=new g.default(this.appModel,this.props.tableSchema,void 0,void 0,void 0,void 0,{viewStateKey:this.viewStateKey});e=this.props.table.queryRowValues({},this.appModel,t)}return this.renderRows(e)}},{key:"renderRows",value:function(e){var t,a=this,n=this.props.classes,r=b.AppGlobals.AppModel;if(!r)return null;var i=this.appModel.appTemplate.getView(this.props.controlName);if(null==i)return null;var o,l=!0;(S.ReactRootUIConfig.isInDesktopExperience()||b.AppGlobals.AppModel.POSITIONS_ORDERED.includes(i.position()))&&(l=!1);var s="calc(100% - 76px)",u=window.innerWidth<1024?600:800,d=window.innerWidth<768?"16px 18px":S.ReactRootUIConfig.isInDesktopExperience()?"16px 24px":"16px 10% 32px",c=window.innerWidth>=768?"0 7%":"20% 7%",h=y.default.windowWidth<y.default.widescreenBreakpoint?8:40;l&&(o=p.default.createElement("div",{style:{height:56},className:n.closeButtonContainer},p.default.createElement(m.IconButton,{"data-testid":"onboarding-view-close-button",className:n.closeButtonRefresh,style:{margin:h,color:(0,v.themeColor)("primaryText")},onClick:this.okClick},p.default.createElement("i",{className:"fal fa-times"}))),s=window.innerWidth<768?"calc(100% - 84px)":"calc(100% - 160px)");var g=p.default.createElement("div",{className:this.appModel.rolloutClassNames,style:{height:l?"100%":this.props.height,maxWidth:this.props.width,zIndex:1e3,background:(0,v.themeColor)("mainContentBackground"),display:"flex",flexDirection:"column",outline:"none"}},o,p.default.createElement("div",{ref:function(e){a.scrollPaneRef=e},style:{height:s,overflowY:"auto"}},p.default.createElement("div",{ref:function(e){a.contentHolderRef=e},style:{maxWidth:u,textAlign:"center",margin:"0 auto",padding:window.innerWidth<768?"0":c}},p.default.createElement(f.default,{style:{maxWidth:"100%"},index:this.state.activeStep,onChangeIndex:this.handleStepChange},e.map((function(e){return a.getLayoutForRow(e,l)}))))),p.default.createElement("div",{className:window.innerWidth<768&&(null===(t=this.contentHolderRef)||void 0===t?void 0:t.clientHeight)>500?"elevation_2":"",style:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",padding:d}},p.default.createElement("div",{style:{display:"flex",justifyContent:e.length>1?"space-between":"center",width:"100%"}},p.default.createElement(m.Button,{disabled:0===this.state.activeStep,style:{display:e.length>1?void 0:"none"},onClick:function(){return a.handleStepChange(a.state.activeStep-1)},variant:"outlined",color:"secondary",classes:{disabled:n.disabledOutlined}},r.MapActionName("Back")),p.default.createElement(m.MobileStepper,{variant:"dots",steps:e.length,position:"static",style:{display:e.length>5||e.length<=1?"none":void 0,paddingBottom:0},activeStep:this.state.activeStep}),p.default.createElement(m.Button,{disabled:this.state.activeStep===e.length-1,style:{display:this.state.activeStep===e.length-1?"none":void 0},onClick:function(){return a.handleStepChange(a.state.activeStep+1)},variant:"contained",color:"secondary"},r.MapActionName("Next")),p.default.createElement(m.Button,{style:{display:this.state.activeStep===e.length-1?void 0:"none"},onClick:this.okClick,variant:"contained",color:"secondary"},r.MapActionName("Done")))));return l&&(g=p.default.createElement(m.Modal,{style:{outline:"none",overflowY:"auto",overflowX:"hidden",width:"100%",height:"100%"},disableEnforceFocus:!0,open:this.props.open},g)),p.default.createElement(m.MuiThemeProvider,{theme:A()},g)}}],[{key:"goToFinishView",value:function(e,t){var a,n=null===(a=e.appTemplate)||void 0===a?void 0:a.getView(t);n?S.ReactRootUIConfig.isReactRoot()?(0,T.default)().dispatch((0,C.newViewStack)({Identifier:{Type:"Control",Name:n.name()}})):y.default.navigateToView(n):y.default.navigateToPreviousHashState()}}]),a}(w.default);D=E=k([h.observer],D);var M=(0,m.withStyles)(I)(D);t.default=M},480952:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=h,t.getFallbackUrlOrTryPreload=function(e,t){var a=f.get(e);null==a&&c()&&p()&&h(e,t,(function(t){f.set(e,t.src)}));return a};var r=n(a(496486)),i=n(a(571524)),o=a(263198),l=n(a(593186)),s=a(629503),u=a(318926),d=a(218546);function c(){return i.default.InIOSWebView()&&i.default.InWKWebView()}function p(){return r.default.get(window,"AppModel.AppTemplate.Behavior.FullOfflineCaching")}var f=new Map;function h(e,t,a,n){var r=new Image;if(!e)return l.default.ReportError({errorMessage:"Tried to preload image with blank url"}),n&&n(),r;var f=e,h=[],m=function(){var e=h.shift();e&&e()};return c()&&f&&0!==f.indexOf("data")&&(p()&&0!==f.indexOf("appsheet")&&(f="appsheet-cache://url="+encodeURIComponent(e)),(null==t?void 0:t.isIosHandle())?h.push((function(){u.logger.logAppEvent(d.AppEventName.IosCustomSchemeFailedPreview),s.Common.processImage(t,(function(e){r.src=e}),m)})):p()&&h.push((function(){o.JeeneeBrowserAPI.getBase64PhotoFromCacheIOS(e,(function(e){e?r.src=e:m()}))})),h.push((function(){r.src=e}))),n&&(i.default.IsEditorIFramePreview()&&"function"==typeof window.fetch?h.push((function(){fetch(r.src).then((function(e){return n(e.status,e.statusText)})).catch((function(){return n()}))})):h.push(n)),r.onload=function(){return a(r)},r.onerror=m,r.src=f,r}},372380:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(238416)),i=n(a(310434)),o=n(a(856690)),l=n(a(689728)),s=n(a(994993)),u=n(a(861655)),d=n(a(667294)),c=n(a(294184)),p=a(44617),f=n(a(571524)),h=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a},m=function(e){function t(){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,l.default)(t,[{key:"shouldComponentUpdate",value:function(e){return e.shouldUpdate}},{key:"render",value:function(){return d.default.createElement("div",null,this.props.render())}}]),t}(d.default.Component);function v(e,t){e.transform!==t&&(e.transform=t,e.webkitTransform=t,e.MozTransform=t,e.transition=""===t?"transform .2s ease-out":"")}var y="undefined"!=typeof navigator&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),g="down",w="up",b={activate:"release",deactivate:"pull",release:"loading",finish:"finish"},S=!1;try{var T=Object.defineProperty({},"passive",{get:function(){S=!0}});window.addEventListener("test",null,T)}catch(e){}var C=!!S&&{passive:!1},R=function(e){function t(){(0,o.default)(this,t);var e=(0,s.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={currSt:"deactivate",dragOnEdge:!1},e._lastScreenY=0,e._isMounted=!1,e.shouldUpdateChildren=!1,e.triggerPullToRefresh=function(){!e.state.dragOnEdge&&e._isMounted&&(e.props.refreshing?(e.props.direction===w&&(e._lastScreenY=-e.props.distanceToRefresh-1),e.props.direction===g&&(e._lastScreenY=e.props.distanceToRefresh+1),e.setState({currSt:"release"},(function(){return e.setContentStyle(e._lastScreenY)}))):e.setState({currSt:"finish"},(function(){return e.reset()})))},e.init=function(t){t&&(e._to={touchstart:e.onTouchStart.bind(e,t),touchmove:e.onTouchMove.bind(e,t),touchend:e.onTouchEnd.bind(e,t),touchcancel:e.onTouchEnd.bind(e,t)},Object.keys(e._to).forEach((function(a){t.addEventListener(a,e._to[a],C)})))},e.destroy=function(t){e._to&&t&&Object.keys(e._to).forEach((function(a){t.removeEventListener(a,e._to[a])}))},e.onTouchStart=function(t,a){e._ScreenY=e._startScreenY=a.touches[0].screenY,e._lastScreenY=e._lastScreenY||0},e.isEdge=function(t,a){var n=e.scrollContainer;if(n&&n===document.body){var r=document.scrollingElement?document.scrollingElement:document.body;if(a===w)return r.scrollHeight-r.scrollTop<=window.innerHeight;if(a===g)return r.scrollTop<=0}return a===w?t.scrollHeight-t.scrollTop===t.clientHeight:a===g?t.scrollTop<=0:void 0},e.damping=function(t){return Math.abs(e._lastScreenY)>e.props.damping?0:t*=.6*(1-Math.abs(e._ScreenY-e._startScreenY)/window.screen.height)},e.onTouchMove=function(t,a){var n=a.touches[0].screenY,r=e.props.direction;if(r===w&&e._startScreenY<n||r===g&&e._startScreenY>n||e.props.refreshing||e.props.disabled)e.state.dragOnEdge&&(e.setContentStyle(0),this.setState({dragOnEdge:!1}));else if(e.isEdge(t,r)){e.state.dragOnEdge||(e._ScreenY=e._startScreenY=a.touches[0].screenY,e.setState({dragOnEdge:!0})),p.dynamicRollouts.includeByOwnerId("ClientIOSScrollingFix")||a.cancelable&&a.preventDefault();var i=Math.round(n-e._ScreenY);e._ScreenY=n,e._lastScreenY+=e.damping(i),e.setContentStyle(e._lastScreenY),Math.abs(e._lastScreenY)<e.props.distanceToRefresh?"deactivate"!==e.state.currSt&&e.setState({currSt:"deactivate"}):"deactivate"===e.state.currSt&&e.setState({currSt:"activate"}),y&&a.changedTouches[0].clientY<0&&e.onTouchEnd()}},e.onTouchEnd=function(){e.state.dragOnEdge&&e.setState({dragOnEdge:!1}),"activate"===e.state.currSt?(e.setState({currSt:"release"}),e._timer=setTimeout((function(){e.props.refreshing||e.setState({currSt:"finish"},(function(){return e.reset()})),e._timer=void 0}),1e3),e.props.onRefresh()):e.props.refreshing||e.reset()},e.reset=function(){e._lastScreenY=0,e.setContentStyle(0)},e.setContentStyle=function(t){e.contentRef&&(e.props.useTranslate3d?v(e.contentRef.style,0===t?"":"translate3d(0px, "+t+"px, 0px)"):v(e.contentRef.style,0===t?"":"translate(0px, "+t+"px)"))},e}return(0,u.default)(t,e),(0,l.default)(t,[{key:"shouldComponentUpdate",value:function(e){return this.shouldUpdateChildren=this.props.children!==e.children,!0}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=this.props.getScrollContainer();t!==this.scrollContainer&&(this.destroy(this.scrollContainer),this.scrollContainer=t,this.init(this.scrollContainer)),this.props.refreshing&&this.props.refreshing===e.refreshing||this.triggerPullToRefresh()}}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var t=e.props.getScrollContainer();t&&(e.scrollContainer=t,e.init(e.scrollContainer),e.triggerPullToRefresh()),e._isMounted=!0}))}},{key:"componentWillUnmount",value:function(){this.destroy(this.scrollContainer)}},{key:"render",value:function(){var e=this,t=(0,i.default)({},this.props);delete t.damping;var a,n,o,l=t.className,s=t.prefixCls,u=t.children,p=t.direction,v=t.indicator,y=h(t,["useTranslate3d","scrollContainer","className","prefixCls","children","getScrollContainer","direction","onRefresh","refreshing","indicator","distanceToRefresh"]),S=(0,c.default)(l,s,s+"-"+p),T=s+"-content";return this.scrollContainer&&(T+=" "+s+"-"+p),d.default.createElement("div",(0,i.default)({className:S},y),(a=T,n=d.default.createElement(m,{shouldUpdate:e.shouldUpdateChildren,render:function(){return u}}),o=(0,c.default)(a,!e.state.dragOnEdge&&s+"-transition",(0,r.default)({},"".concat(s,"-flickerfix"),!f.default.IsChromeBrowser())),d.default.createElement("div",{className:s+"-content-wrapper"},d.default.createElement("div",{className:o,ref:function(t){return e.contentRef=t}},p===w?n:null,d.default.createElement("div",{className:s+"-indicator"},v[e.state.currSt]||b[e.state.currSt]),p===g?n:null))))}}]),t}(d.default.Component),E=R;t.default=E,R.defaultProps={prefixCls:"rmc-pull-to-refresh",getScrollContainer:function(){},direction:g,distanceToRefresh:25,damping:100,indicator:b}},283002:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;var i=n(a(627424)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294)),l=a(697211),s=a(695386),u=n(a(294184)),d=a(56749),c=a(714067),p=a(646514);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}var h=(0,s.makeStyles)((function(e){return{sliderContainer:function(e){return{padding:e.formStyle===c.FORMSTYLE_SXS?"6px 4px 0 0":"12px 4px 0 4px"}},root:{color:(0,d.themeColor)("themeMainColor"),height:e.spacing(1),display:"flex",alignItems:"center"},thumb:{height:e.spacing(3),width:e.spacing(3),backgroundColor:"dark"===e.palette.type?p.GOOGLE_GREY_300:p.GOOGLE_WHITE,border:"3px solid ".concat((0,d.themeColor)("themeMainColor")),marginTop:-2,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},valueLabel:function(e){var t=e.type;return{whiteSpace:"nowrap",color:"".concat((0,d.themeColor)("primaryText")),left:"percentage"===t?"calc(-50% + 6px)":"calc(-50% + 3px)",top:-22,"& *":{color:"".concat((0,d.themeColor)("primaryText")),background:"transparent"},fontSize:"0.889em"}},track:{height:14,borderRadius:"10px 0 0 10px"},rail:{height:e.spacing(1),borderRadius:10,opacity:1,backgroundColor:"dark"===e.palette.type?p.GOOGLE_GREY_700:p.GOOGLE_GREY_300}}}));t.Slider=function(e){var t=h(e),a=e.value,n=e.disabled,r=e.step,s=e.min,d=e.max,c=e.onChangeCommitted,p=e.valueDisplayFunction,f=(0,o.useState)(a),m=(0,i.default)(f,2),v=m[0],y=m[1];return(0,o.useEffect)((function(){y(a)}),[a]),o.default.createElement("div",{className:(0,u.default)("Slider",t.sliderContainer)},o.default.createElement(l.Slider,{classes:{root:t.root,thumb:"".concat(t.thumb," Slider-thumb"),valueLabel:"".concat(t.valueLabel," Slider-valueLabel"),track:"".concat(t.track," Slider-track"),rail:t.rail},step:r,min:s,max:d,disabled:n,value:v,onChangeCommitted:c,onChange:function(e,t){return y(t)},valueLabelFormat:p,"aria-labelledby":"slider-input",valueLabelDisplay:"on"}))}},300431:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.ViewAwareComponent=t.PureViewAwareComponent=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808)),u=a(496486),d=n(a(667294)),c=a(957831),p=a(673275),f=a(307074),h=a(557310),m=n(a(819433)),v=a(692479),y=a(95483),g=a(173399),w=a(29827),b=a(783252),S=a(166089),T=a(521671);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var R=function(e){(0,o.default)(a,e);var t=C(a);function a(){var e;return(0,r.default)(this,a),(e=t.apply(this,arguments)).launchRelatedForm=function(t,a,n,r,i){var o=S.AppGlobals.AppModel.FindControlsForTable(t,"form",!1)[0],l=e.mutableViewState.transactionId,s=(0,u.pickBy)({RowKey:a,defaultValues:n,launchedByAttributeName:r.name(),referenceRelationship:i,transactionId:l,isInEditMode:!0});(0,m.default)().dispatch((0,v.pushView)({Identifier:o?{Type:"Control",Name:o.Name||""}:{Type:"View",Action:"form",TableName:t},ViewState:s}))},e}return(0,i.default)(a,[{key:"viewStateKey",get:function(){return this.context}},{key:"appState",get:function(){return this.props.appState||(0,c.getAppState)()}},{key:"currentUIState",get:function(){var e;return h.ReactRootUIConfig.isReactRoot()?(0,p.getUIStateByKey)(this.viewStateKey):null===(e=this.appState)||void 0===e?void 0:e.CurrentUIState}},{key:"setCurrentUIState",value:function(e){if(h.ReactRootUIConfig.isReactRoot()){var t=(0,y.getViewStack)((0,m.default)().getState()),a=(0,f.findViewStackEntry)(t,this.viewStateKey),n=(0,g.mapViewStackToControl)(a).action,r=e[b.SPECIFIC_STATE_NAME_MAP[n]];(0,m.default)().dispatch((0,v.replaceView)({ViewState:r,ViewStateKey:this.viewStateKey}))}else this.appState.ReplaceState(e,!1)}},{key:"runViewStateSelector",value:function(e){try{var t=(0,m.default)().getState();return(0,f.createViewStateSelector)(this.viewStateKey,e)(t)}catch(e){return}}},{key:"mutableViewState",get:function(){var e;return null!==(e=this.runViewStateSelector(w.getMutableState))&&void 0!==e?e:{}}},{key:"isBehindFormOverlay",get:function(){return this.runViewStateSelector(w.isBehindFormOverlay)}},{key:"inPendingTransaction",get:function(){return h.ReactRootUIConfig.isReactRoot()&&null!=this.mutableViewState.transactionId}},{key:"pendingTransaction",get:function(){if(h.ReactRootUIConfig.isReactRoot())return this.runViewStateSelector(w.getPendingTransaction)}},{key:"pushView",value:function(e,t,a,n,r,i){if(h.ReactRootUIConfig.isReactRoot()){a.FilterExpr&&(a.filterExprString=JSON.stringify(a.FilterExpr.toJSON()));var o=r?{Type:"Control",Name:r.Name}:{Type:"View",Action:e,TableName:a.TableName};(0,m.default)().dispatch((0,v.pushView)({Identifier:o,ViewState:Object.assign(Object.assign({},a),{FilterExpr:void 0}),ViewStateKey:this.viewStateKey}))}else this.appState.PushView(e,t,a,n,r,i)}},{key:"pushState",value:function(e,t){if(h.ReactRootUIConfig.isReactRoot()){var a=e.ControlName?{Type:"Control",Name:e.ControlName}:{Type:"View",Action:e.Root,TableName:e.TableName};(0,m.default)().dispatch((0,v.pushView)({Identifier:a,ViewState:e,ViewStateKey:this.viewStateKey}))}else this.appState.PushState(e,t)}},{key:"topStackUIState",get:function(){var e;return null===(e=this.appState)||void 0===e?void 0:e.CurrentUIState}},{key:"canLaunchRelatedForm",value:function(e){if(!h.ReactRootUIConfig.isReactRoot())return!1;if(e){var t=this.runViewStateSelector(w.getViewStackIndex);if(!(0,T.findExistingViewInViewStack)(S.AppGlobals.AppModel,e,"form",t))return!0}return!1}}]),a}(d.default.Component);t.ViewAwareComponent=R,R.contextType=f.ViewStateKey;var E=function(e){(0,o.default)(a,e);var t=C(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a)}(R);t.PureViewAwareComponent=E,E.isPureReactComponent=!0},155345:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GROUPED_HEADER_ROW_HEIGHT=t.DRILLDOWN_HEADER_ROW_HEIGHT=void 0;var i=n(a(600861)),o=n(a(856690)),l=n(a(689728)),s=n(a(366115)),u=n(a(861655)),d=n(a(994993)),c=n(a(73808)),p=n(a(496486)),f=n(a(667294)),h=n(a(79406)),m=B(a(365914)),v=n(a(571524)),y=n(a(454852)),g=B(a(146913)),w=a(263198),b=n(a(593186)),S=B(a(179778)),T=a(413032),C=n(a(209491)),R=n(a(19849)),E=a(351101),k=a(557310),I=a(166089),A=a(300431),D=a(873030),M=a(697211),x=n(a(819433)),N=a(692479),O=a(250617);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_=function(e){return e?a:t})(e)}function B(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}t.DRILLDOWN_HEADER_ROW_HEIGHT=38;t.GROUPED_HEADER_ROW_HEIGHT=48;var L="localhost"===location.hostname?b.default.logToDevConsole:p.default.noop,V=function(e){(0,u.default)(a,e);var t=P(a);function a(e){var n;return(0,o.default)(this,a),(n=t.call(this,e)).reactListScrollParentGetter=function(){},n.commitTransaction=n.commitTransaction.bind((0,s.default)(n)),n.exitEditMode=n.exitEditMode.bind((0,s.default)(n)),n.onScrollContainerMount=n.onScrollContainerMount.bind((0,s.default)(n)),n.getScrollContainer=n.getScrollContainer.bind((0,s.default)(n)),n.getViewportHeight=n.getViewportHeight.bind((0,s.default)(n)),n.state={},n.debugLog=L.bind(window,n.constructor.name),n}return(0,l.default)(a,[{key:"appModel",get:function(){return this.props.appModel||I.AppGlobals.AppModel}},{key:"dataContext",value:function(){var e,t=(null!==(e=this.props.dataContext)&&void 0!==e?e:this.appModel.dataContext()).copy();return t.uiContext={viewStateKey:this.viewStateKey},t.tableSchema=this.props.tableSchema,t}},{key:"shouldShow",value:function(){var e;return!(!this.appModel||!1===(null===(e=this.appModel.AppTemplate)||void 0===e?void 0:e.IsValid))&&(!this.props.signature||this.props.signature===this.appModel.signature||(b.default.logToDevConsole(this,"render bailed because of signature mismatch"),!1))}},{key:"componentDidMount",value:function(){this.restoreScrollPosition(),this.disableScrollBounce()}},{key:"componentDidUpdate",value:function(e,t){k.ReactRootUIConfig.isInDesktopExperience()||this.restoreScrollPosition(),this.disableScrollBounce(),this.inSelectionMode()||delete this._lastRowToggled}},{key:"componentWillUnmount",value:function(){k.ReactRootUIConfig.isReactRoot()||this.endTransaction()}},{key:"disableScrollBounce",value:function(){v.default.IsIOSBrowser()&&!this.props.isInline&&document.addEventListener("touchstart",w.JeeneeBrowserAPI.disableScrollBounceIOS,{once:!0,capture:!0})}},{key:"allowsUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.table;return!(!t||!this.appModel)&&t.allowsUpdate(this.appModel)}},{key:"getTransaction",value:function(){var e,t;return null===(t=null===(e=this.appModel)||void 0===e?void 0:e.dataManager)||void 0===t?void 0:t.currentTransaction}},{key:"inMultiRowEditMode",value:function(){return this.props.quickEditMode&&this.allowQuickEditMode()}},{key:"commitTransaction",value:function(){var e=this,t=this.getTransaction();k.ReactRootUIConfig.isReactRoot()&&this.viewStateKey?(0,x.default)().dispatch((0,O.saveAndCloseEditMode)(this.viewStateKey)):t.modifiedData&&!t.closed?t.commit((function(a){if(a)return e.debugLog("the commit failed with message:",a.message),void I.AppGlobals.ViewManager.ShowInfoDialog(e.appModel.MapActionName("Unable to save changes"),a.message);e.debugLog("committed transaction with records",t.logRecords),e.appModel.ShouldDelaySync()||window.InputHandler.ProcessSync(),e.exitEditMode()})):this.exitEditMode()}},{key:"useCardLayout",value:function(){var e=this.getView();return!!e&&e.definition().UseCardLayout}},{key:"autoLayout",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.default.large,n=arguments.length>2?arguments[2]:void 0;if(this.props.tableSchema){var r=this.props.tableSchema.allAttributes().map((function(e){return e.model}));r=r.filter((function(e){var a;return!(null===(a=t.props.groupBy)||void 0===a?void 0:a.find((function(t){return t.Column===e.Name})))}));var i=this.props.table.name(),o=this.appModel.appTemplate.actions().actionsForTable(i,this.appModel,!1,this.dataContext()).map((function(e){return e.action}));return n&&(o=o.concat({Name:"Go to details",Icon:"far fa-indent"})),R.default.getSmartDefaults(a,r,o,e)}return null}},{key:"themeDataChanged",value:function(){var e;return this.themeData!==(null===(e=I.AppGlobals.ViewManager)||void 0===e?void 0:e.theme.themeData)||this.fontFamily!==this.appModel.AppTemplate.Presentation.FontFamily||this.fontSize!==this.appModel.appTemplate.normalizedFontSize()}},{key:"setupCurrentLayout",value:function(){var e,t,a,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.autoDefaults,l=void 0!==o&&o,s=i.autoLayoutOverrides,u=void 0===s?null:s,d=i.includeGotoDetails,c=void 0!==d&&d,p=null===(t=null===(e=this.getView())||void 0===e?void 0:e.definition())||void 0===t?void 0:t.Layout,f=k.ReactRootUIConfig.isReactRoot()&&p!==this.viewDefnLayoutString;if(this.props.tableSchema&&(!this.customLayout||this.themeDataChanged())||f){var h=null===(a=this.getView())||void 0===a?void 0:a.definition(),v=(0,m.getJSONFromString)(null==h?void 0:h.Layout);if(l&&(!(null==v?void 0:v.name)||"auto"===v.type)){var y=(null==v?void 0:v.name)?C.default[v.name]:C.default.large;v=this.autoLayout(u,y,c)}var g=null!==(r=null===(n=I.AppGlobals.ViewManager)||void 0===n?void 0:n.theme.themeData)&&void 0!==r?r:{},w=this.appModel.AppTemplate.Presentation.FontFamily,b=this.appModel.appTemplate.normalizedFontSize();this.themeData=g,this.fontFamily=w,this.fontSize=b,this.viewDefnLayoutString=p;var S=Object.assign(Object.assign({},g),{fontFamily:w,fontSize:b}),R=T.CardLayoutNode.getThemeNode(S);R.name=(null==v?void 0:v.name)||"large",R.children.push(v),this.customLayout=T.CardLayoutNode.build(R)}}},{key:"endTransaction",value:function(){var e=this.getTransaction();e&&e.started&&!this.props.isInline&&(this.debugLog("endTransaction"),e.abort(),I.AppGlobals.StateChangeHandler.ShowUIState(!0))}},{key:"exitEditMode",value:function(){if(k.ReactRootUIConfig.isReactRoot()&&this.viewStateKey)(0,x.default)().dispatch((0,O.cancelEditMode)(this.viewStateKey));else if(this.inMultiRowEditMode()&&I.AppGlobals.AppState){var e=this.getTransaction();e.started&&(this.debugLog("aborting transaction"),e.abort()),this.debugLog("exiting edit mode"),I.AppGlobals.AppState.AugmentCurrentState("quickedit",!1)}}},{key:"isScrollableInline",value:function(e){return null!=this.props.visibleMaxRowCount&&e>this.props.visibleMaxRowCount}},{key:"getVisibleBodyHeight",value:function(e){var t=e.isExpandedDrilldown,a=e.inDrilldownMode,n=e.rowHeight,r=e.annotatedRows,i=e.headerHeight,o=void 0===i?0:i,l=e.viewType,s=this.props.height,u=t?48:0,d=this.props.visibleMaxRowCount||Number.POSITIVE_INFINITY,c=Math.min(d,r.length);switch(!0){case!!s:return Number(s)-u;case!k.ReactRootUIConfig.isInDesktopExperience():case!this.isScrollableInline(r.length):return"auto";case a:return u+o+38*Number(c)+19;default:var p=r.slice(0,c),f="table"===l?this.appModel.GetTableRowHeight():48,h=p.filter((function(e){return Array.isArray(e)})).length;return o+u+h*f+n*(Number(c)-h)+(h>0?f/2:n/2)}}},{key:"scrollbarVisible",value:function(){var e=this.getScrollContainer();return(null==e?void 0:e.scrollHeight)>(null==e?void 0:e.clientHeight)}},{key:"scrollbarWidth",value:function(){return this.scrollbarVisible()?v.default.scrollbarWidth():0}},{key:"onScrollContainerMount",value:function(e){this.scrollContainer=e}},{key:"getScrollContainer",value:function(){var e;return null!==(e=this.scrollContainer)&&void 0!==e?e:null}},{key:"getViewportHeight",value:function(){return this.props.height}},{key:"restoreScrollPosition",value:function(){var e=this;setTimeout((function(){if(I.AppGlobals.AppState&&I.AppGlobals.AppState.restoreScrollPosition&&!e.props.isInline){var t=e.getScrollContainer();t&&(t.scrollTop=I.AppGlobals.AppState.restoreScrollPosition,delete I.AppGlobals.AppState.restoreScrollPosition)}}),0)}},{key:"fixedHeightMode",value:function(){return!!this.props.height}},{key:"containerWidth",value:function(){var e=this.props.width;if(null!=e&&!isNaN(e))return this.fixedHeightMode()?e-v.default.scrollbarWidth():e}},{key:"getView",value:function(){var e=this.props.controlName,t=this.appModel;return t&&t.appTemplate&&e?t.appTemplate.getView(e):null}},{key:"findTable",value:function(){return this.props.table}},{key:"paging",get:function(){var e,t,a=this.getView();return null!=a?a.paging:null===(t=null===(e=this.findTable())||void 0===e?void 0:e.tableSchema)||void 0===t?void 0:t.paging}},{key:"toggleRowSelected",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.shiftKey;if(t=k.ReactRootUIConfig.isReactRoot()?this.props.selectedRows||[]:I.AppGlobals.AppState.GetCurrentStateSelection()||[],n&&this.renderedRowIds){var r={},i={};this.renderedRowIds.forEach((function(e,t){r[e]=t,i[t]=e}));var o=p.default.keyBy(t,(function(e){return r[e]})),l=r[this._lastRowToggled],s=r[e];if(s!==l){var u=!p.default.includes(t,e);if(s>l)for(var d=l;d<=s;d++){var c=null!=o[d];c!==u&&(t=m.default.arrayToggle(t,i[d],!0))}else for(var f=l;f>=s;f--){var h=null!=o[f];h!==u&&(t=m.default.arrayToggle(t,i[f],!0))}}else t=m.default.arrayToggle(t,e,!0)}else t=m.default.arrayToggle(t,e,!0);this._lastRowToggled=e,k.ReactRootUIConfig.isReactRoot()?(0,x.default)().dispatch((0,N.mutateView)({ViewState:{selected:t},ViewStateKey:this.viewStateKey})):I.AppGlobals.AppState.AugmentCurrentStateWithSelection(t)}},{key:"handleRowLongPress",value:function(e){this.allowSelectionMode()&&this.toggleRowSelected(e)}},{key:"allowQuickEditMode",value:function(){return!1}},{key:"rowId",get:function(){return this.props.rowId}},{key:"actionsInScope",get:function(){var e;return this.appModel.appTemplate.actions().actionsAtTableScope(null===(e=this.props.table)||void 0===e?void 0:e.name(),this.appModel)}},{key:"fabActions",get:function(){var e,t,a,n=this.topStackUIState,r=this.props,i=r.disableAllActions,o=r.quickEditMode,l=r.isInline,s=r.parentId,u="dashboard"===(null==n?void 0:n.Root)&&(null==n?void 0:n.ControlName)===s,d=null===(a=null===(t=null===(e=this.appModel)||void 0===e?void 0:e.AppTemplate)||void 0===t?void 0:t.Presentation)||void 0===a?void 0:a.ShowOverlayActionsInSubViews;return!k.ReactRootUIConfig.isInDesktopExperience()&&!i&&!o&&(!l||u&&d)?this.actionsInScope.filter((function(e){return e.prominence()===y.default.DISPLAY_OVERLAY})).slice(0,S.FAB_LIMIT):[]}},{key:"renderFabs",value:function(){var e,t=this.props.table,a=this.fabActions;if(a.length){var n=null===(e=this.getView())||void 0===e?void 0:e.name(),r=this.groupByState?this.groupByState.filterDefaults():this.props.filterDefaults,i=this.groupByState?this.groupByState.filterExpr():this.props.filterExpr;return f.default.createElement(S.default,{name:n,sourceTable:t,actions:a,filterExpr:i,filterDefaults:r,rowId:this.rowId})}return null}},{key:"renderActionButtonPortal",value:function(){var e=this,t=this.props.actionButtonContainer,a=this.groupByState?this.groupByState.filterDefaults():this.props.filterDefaults,n=this.groupByState?this.groupByState.filterExpr():this.props.filterExpr;if(t){if(this.inMultiRowEditMode())return k.ReactRootUIConfig.isInDesktopExperience()?f.default.createElement(M.Portal,{container:t},f.default.createElement(D.NavBarButtons,{childrenOnly:!0},f.default.createElement(D.NavBarButton,{"aria-label":(0,E.mapActionName)("Cancel"),variant:"outlined",onClick:function(){return e.exitEditMode()}},(0,E.mapActionName)("Cancel")),f.default.createElement(D.NavBarButton,{"aria-label":(0,E.mapActionName)("Save"),variant:"contained",onClick:function(){return e.commitTransaction()}},(0,E.mapActionName)("Save")),f.default.createElement(D.NavBarDivider,null))):null;var r=this.allowSelectionMode(),i=this.allowQuickEditMode();return f.default.createElement(M.Portal,{container:t},f.default.createElement(D.NavBarButtons,{allowSelectionMode:r,allowQuickEditMode:i,usedActions:this.fabActions,filterExpr:n,filterDefaults:a}))}return null}},{key:"allowSelectionMode",value:function(){var e=this.props;if(!e.table)return!1;var t=this.appModel.appTemplate.actions().actionsForTable(e.table.name(),this.appModel,!1,this.dataContext()).filter((function(e){return!e.tableScope()&&e.isBulkRunnable()&&e.prominence()!==y.default.DO_NOT_DISPLAY}));return e.allowBulkSelect&&t.length>0}},{key:"inSelectionMode",value:function(){return Array.isArray(this.props.selectedRows)}},{key:"rowIsSelected",value:function(e){return(this.props.selectedRows||[]).indexOf((0,m.fastTrim)(e))>=0}},{key:"rowIsLastToggled",value:function(e){return this._lastRowToggled===e}},{key:"id",value:function(){var e=this.props,t=e.parentId,a=e.controlName;return a?t?t+"___"+a:a:""}},{key:"handleRowTap",value:function(e,t){var a,n,r=this.props,i=r.table,o=r.tableSchema,l=r.onRowOpened,s=r.disableSearchOnDrilldown,u=r.groupBy,d=r.sortBy,c=r.filterExpr,p=r.filterDefaults,f=this.appModel;if(this.state.selectedTable&&i&&this.state.selectedTable!==i.name()){var h=this.appModel.findTableCollection(this.state.selectedTable);a=h.table,n=h.tableSchema}else a=i,n=o;if(this.inSelectionMode())this.toggleRowSelected(e,t);else if(a&&n){var m=a.findRow(e);if(n.isAppLauncherSchema()){var v=n.findAttributesByType("App");if(v.length){var y=m[v[0].name()];return void StateReflector.SwitchApp(y)}}else if(n.isUrlLauncherSchema()){var w=n.findAttributesByType("Url");if(w.length){var b=w[0],S=m[b.name()],T=b.valueFromWireFormat(S).url;if(T&&!T.match(/\w+\:/)&&(T="http://"+T),T)return void InputHandler.switchToUrl(T,b.launchExternal())}}if(l)l(a.rootName(),e);else{var C=this.getView();if(C){var R=g.eventTypes.ROW_SELECTED,E=C.getEventByType(R);if(E){var k=a,I="".concat(C.name(),"|").concat(R.name);return void g.default.handle(E,{appModel:f,table:a,rowId:e,sourceLocationName:I,sourceTable:k},void 0,this.viewStateKey)}}var A=!0;s&&(A=!1),this.pushView("detail",!1,{TableName:a.name(),RowKey:e,GroupBy:u,SortBy:d,FilterExpr:c,DefaultValues:p},A,void 0,this.props.overrideStateChangeMode)}}}},{key:"renderRows",value:function(e){return null}},{key:"render",value:function(){var e,t,a,n=this,r=this.props,o=r.table,l=r.tableSchema;if(!this.shouldShow()||!l||!o)return null;var s,u,d,c=this.groupByState,p=this.props,m=p.searchQuery,v=p.rowLimit,y=p.groupAggregate,g=null==c?this.props:{filterDefaults:c.filterDefaults(),filterExpr:c.filterExpr(),groupBy:null!==(e=c.groupBy())&&void 0!==e?e:[],sortBy:null!==(t=c.sortBy())&&void 0!==t?t:[]},w=g.filterDefaults,b=g.filterExpr,S=g.groupBy,T=void 0===S?[]:S,C=g.sortBy,R=void 0===C?[]:C,E=null===(a=T[0])||void 0===a?void 0:a.Column;T.length>1?(u=E,s=[T[0]]):1===T.length&&"_RowNumber"!==E?(s=[T[0]].concat((0,i.default)(R)),d=y?void 0:v):(s=R,d=v);var k={filterExpr:b,filterDefaults:w,searchQuery:m,sortRules:s,limit:d,uniqueBy:u,transaction:this.pendingTransaction},I=JSON.stringify(Object.assign({timestamp:this.props.table.timestamp()},k));return f.default.createElement(h.default,{promiseFn:function(){return o.queryRowValuesAsync(k)},watch:I},f.default.createElement(h.default.Fulfilled,{persist:!0},(function(e){return n.renderRows(e)})))}}]),a}(A.ViewAwareComponent);t.default=V},675671:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(441588)),i=n(a(856690)),o=n(a(689728)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(496486)),c=n(a(667294)),p=n(a(45697)),f=n(a(155345)),h=a(358218),m=n(a(730381)),v=n(a(385857)),y=n(a(301940)),g=n(a(266522)),w=a(56749),b=a(697211),S=n(a(401890)),T=a(646514),C=a(166089);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var E=window.navigator.userLanguage||window.navigator.language,k=function(e){(0,l.default)(a,e);var t=R(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"getOuterView",value:function(){var e,t,a,n,r=this,i="ViewTab";return c.default.createElement("div",{className:"rbc-toolbar-view-nav-small"},c.default.createElement("div",{onClick:function(){return r.view("day")},className:"day"===this.props.view?"ViewTab Selected":i},null===(e=C.AppGlobals.AppModel)||void 0===e?void 0:e.MapActionName("Day")),c.default.createElement("div",{onClick:function(){return r.view("week")},className:"week"===this.props.view?"ViewTab Selected":i},null===(t=C.AppGlobals.AppModel)||void 0===t?void 0:t.MapActionName("Week")),c.default.createElement("div",{onClick:function(){r.view("month")},className:"month"===this.props.view?"ViewTab Selected":i},null===(a=C.AppGlobals.AppModel)||void 0===a?void 0:a.MapActionName("Month")),c.default.createElement("div",{style:{minWidth:"45%",textAlign:"right",padding:"0 0px 4px 0",marginLeft:"auto"}},c.default.createElement(b.Button,{className:"Today",onClick:function(){r.navigate("TODAY")}},null===(n=C.AppGlobals.AppModel)||void 0===n?void 0:n.MapActionName("Today"))))}},{key:"getIconButton",value:function(e){var t=this,a="PREV";return"left"!==e&&(a="NEXT"),c.default.createElement(S.default,{onClick:function(){return t.navigate(a)},size:"medium"},c.default.createElement("i",{className:"CalendarLeftRightButton fal fa-angle-"+e}))}},{key:"render",value:function(){var e=this.getOuterView();return c.default.createElement("div",null,e,c.default.createElement("div",{className:"rbc-toolbar"},this.getIconButton("left"),c.default.createElement("div",{className:"rbc-toolbar-label"},this.props.label),this.getIconButton("right")))}}]),a}(y.default),I=function(e){(0,l.default)(a,e);var t=R(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).eventStyle=function(e){var t=n.getEventColorBasedOnCategory(e),a="#ffffff"===t?T.GOOGLE_BLACK:T.GOOGLE_WHITE;return"month"===n.getCurrentCalendarView()?{style:{background:n.getEventColorBasedOnCategory(e),width:"100%",verticalAlign:(n.props.height||0)<360?"":"middle",height:(n.props.height||0)>450?"15px":"5px",color:(n.props.height||0)>450?a:"transparent",paddingBottom:2}}:{style:{background:t,color:a}}},n.state||(n.state={canPulldown:!0}),n.state.allowRowSwipe=!0,n.defaultEventColor=C.AppGlobals.ViewManager.theme.getThemeColor("actionIcon"),n.backgroundColor=C.AppGlobals.ViewManager.theme.getThemeColor("mainContentBackground"),n.possibleEventColors=["red","orange","yellow","green","cyan","blue","purple","pink","white","black"],n}return(0,o.default)(a,[{key:"getCalendarEvents",value:function(e){var t,a,n,r,i,o=this.props.viewDefn;return o?(t=o.StartDateColumn,a=o.EndDateColumn,n=o.StartTimeColumn,r=o.EndTimeColumn,i=o.LabelColumn):(t=this.props.startDateColumn,a=this.props.endDateColumn,n=this.props.startTimeColumn,r=this.props.endTimeColumn,i=this.props.labelColumn),t?e.map((function(e,o){var l=e[t],s=l;return a&&(s=e[a]),n&&"**none**"!==n&&"**auto**"!==n&&n!==t&&(l=l+" "+e[n]),r&&"**none**"!==r&&"**auto**"!==r&&a!==r&&(s=s+" "+e[r]),{id:o,row:e,start:new Date(l),end:new Date(s),title:i?e[i]:void 0}})):[]}},{key:"getDefaultView",value:function(){var e=this.props.defaultCalendarView||"month";return this.props.viewDefn&&(e=this.props.viewDefn.DefaultCalendarView||"month"),e.toLowerCase()}},{key:"getCurrentCalendarView",value:function(){return this.state.currentView||this.getDefaultView()}},{key:"handleSelectEvent",value:function(e){if("month"!==this.getCurrentCalendarView()){var t=this.props.tableSchema.keyAttribute(),a=e.row[t.name()];this.handleRowTap(a)}else this.setState({currentView:"day",date:e.start})}},{key:"handleNavigate",value:function(e){this.setState({date:e})}},{key:"initializeColors",value:function(){var e=this,t=this.categoryColumn();if(t){var a=this.props.tableSchema.findAttributeByName(t);if(this.colorHash={},this.colorIndex=0,a&&(a.type()===C.AppGlobals.AppModel.COLORENUM_TYPE||a.type()===C.AppGlobals.AppModel.ENUM_TYPE))a.auxData().EnumValues.forEach((function(t){e.setColorBasedOnValue(a,t)}))}}},{key:"categoryColumn",value:function(){return this.props.viewDefn?this.props.viewDefn.CategoryColumn:this.props.categoryColumn}},{key:"setColorBasedOnValue",value:function(e,t){var a=t;e.type()!==C.AppGlobals.AppModel.COLORENUM_TYPE&&(a=this.possibleEventColors[this.colorIndex],this.colorIndex++,this.colorIndex=this.colorIndex%this.possibleEventColors.length);var n=C.AppGlobals.AppModel.AppTemplate.Presentation.DisplayTheme;this.colorHash[t]=g.default.getFormattingColorForTheme(n,a.toLowerCase())}},{key:"getEventColorBasedOnCategory",value:function(e){var t=this.categoryColumn();if(t){var a=e.row[t];if(!a)return this.defaultEventColor;if(!this.colorHash[a]){var n=this.props.tableSchema.findAttributeByName(t);n&&this.setColorBasedOnValue(n,a)}return this.colorHash[a]}return this.defaultEventColor}},{key:"render",value:function(){if(this.appModel.inRollout("asyncQuery"))return(0,r.default)((0,u.default)(a.prototype),"render",this).call(this);if(!this.shouldShow())return null;var e=this.props,t=e.table,n=e.tableSchema,i=e.searchQuery,o=e.rowLimit,l=e.filterExpr,s=e.filterDefaults,d=[];if(t&&n){var c=new v.default(this.appModel,n,void 0,void 0,void 0,void 0,{viewStateKey:this.viewStateKey});d=t.queryRowValues({searchQuery:i,limit:o,filterExpr:l,filterDefaults:s,transaction:this.pendingTransaction},this.appModel,c)}return this.renderRows(d)}},{key:"renderRows",value:function(e){var t=this;this.dayHash={},this.props.table&&(this.colorHash||this.initializeColors());var a=this.getCalendarEvents(e),n=function(e){return c.default.createElement("div",null,c.default.createElement("div",{style:{fontSize:"1.5em",color:(0,w.themeColor)("secondaryText")}},e.localizer.format(e.date,"D")),c.default.createElement("div",{style:{color:(0,w.themeColor)("secondaryText")}},e.label))};n.propTypes={localizer:p.default.shape({format:p.default.func}),date:p.default.object,label:p.default.string};var r=this.props.height;r||(r=350);var i=d.default.get(C.AppGlobals.AppModel,"AppTemplate.Presentation.DisplayTheme"),o=d.default.isString(i)&&i.includes("-")?(0,w.themeColor)("mainContentBackground"):"white";return c.default.createElement("div",{className:C.AppGlobals.AppModel.rolloutClassNames,style:{height:r,backgroundColor:o}},c.default.createElement(h.Calendar,{components:{toolbar:k,week:{header:n}},formats:{weekdayFormat:function(e,t,a){return a.format(e,"dd")},dayFormat:function(e,t,a){return a.format(e,"dd")},timeGutterFormat:function(e,t,a){return 0===e.getHours()?"":a.format(e,"h A",t)}},showMultiDayTimes:!1,localizer:(0,h.momentLocalizer)(m.default),culture:E,scrollToTime:new Date,onSelectEvent:this.handleSelectEvent.bind(this),eventPropGetter:this.eventStyle,events:a,onNavigate:this.handleNavigate.bind(this),onView:function(e){return t.setState({currentView:e})},view:this.getCurrentCalendarView(),date:this.state.date,defaultDate:this.state.date||new Date}),this.renderFabs(),this.renderActionButtonPortal())}}]),a}(f.default);t.default=I},748741:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(238416)),o=n(a(627424)),l=n(a(856690)),s=n(a(689728)),u=n(a(366115)),d=n(a(441588)),c=n(a(861655)),p=n(a(994993)),f=n(a(73808)),h=n(a(918698)),m=n(a(722205)),v=n(a(227361)),y=n(a(435161)),g=n(a(667294)),w=a(202079),b=a(697211),S=n(a(676970)),T=n(a(294184)),C=n(a(155345)),R=a(894440),E=n(a(367418)),k=n(a(385857)),I=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=K(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(146913)),A=n(a(571524)),D=n(a(593186)),M=n(a(409022)),x=n(a(702671)),N=a(714611),O=n(a(17926)),_=n(a(526382)),B=a(56749),P=n(a(112963)),L=n(a(59775)),V=n(a(21870)),F=a(334500),H=a(413032),W=a(166089),U=a(148448),j=a(557310),z=a(318926),G=a(218546);function K(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(K=function(e){return e?a:t})(e)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,p.default)(this,a)}}var q=function(e,t,a,n){var r,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,h.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(i<3?r(o):i>3?r(t,a,o):r(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o},$={photo:350,backdrop:350,large:400},Q=(0,B.cacheMuiTheme)((function(){return{palette:{primary:{main:(0,B.themeColor)("headerBackground"),contrastText:(0,B.themeColor)("interfaceText")},secondary:{light:"#ff6600",main:"#ff4400",contrastText:"#fff"}},overrides:{MuiDrawer:{paper:{background:(0,B.themeColor)("elevationTone3"),"& .MuiPaper-root":{background:(0,B.themeColor)("elevationTone3")}}},MuiPaper:{elevation16:{background:(0,B.themeColor)("elevationTone3")}}},typography:{useNextVariants:!0,fontFamily:"inherit"}}})),X=function(e){(0,c.default)(a,e);var t=Y(a);function a(e){var n;(0,l.default)(this,a),n=t.call(this,e);var r=function(e){n.scrollContainer&&n.state.currentInteraction!==e.name&&n.setState({currentInteraction:e.name})};n.focusRowByRowIndex=n.focusRowByRowIndex.bind((0,u.default)(n));var i,o=n.handleRowTap.bind((0,u.default)(n)),s=n.handleRowLongPress.bind((0,u.default)(n)),d=n.handleRowSwiped.bind((0,u.default)(n),I.ROW_SWIPED_LEFT),c=n.handleRowSwiped.bind((0,u.default)(n),I.ROW_SWIPED_RIGHT),p={name:"PULLING_DOWN",allowPullToSync:!0,allowSwipe:!1,allowScroll:!1,handleDragEnd:function(){return r(i)}},f={name:"SWIPING",allowPullToSync:!1,allowSwipe:!0,allowScroll:!1,handleRowSwipedLeft:d,handleRowSwipedRight:c,handleChildDragEnd:function(){return r(i)}};return i={name:"IDLE",allowPullToSync:!0,allowSwipe:!0,allowScroll:!0,handleRowTap:o,handleRowLongPress:s,handleChildDrag:function(){return r(f)},handleDrag:function(){n.pullRef&&n.pullRef.isPullingDown()&&r(p)}},n.stateMachine={PULLING_DOWN:p,SWIPING:f,IDLE:i},n.state.currentInteraction=i.name,n.viewType="card",n}return(0,s.default)(a,[{key:"currentInteractionState",get:function(){return this.stateMachine[this.state.currentInteraction]||this.stateMachine.IDLE}},{key:"componentDidMount",value:function(){var e=this;(0,d.default)((0,f.default)(a.prototype),"componentDidMount",this).call(this),A.default.IsTouchEnabled()&&(this.scrollBlocker=function(t){!e.currentInteractionState.allowScroll&&t.cancelable&&(t.preventDefault(),t.stopPropagation())},document.addEventListener("touchmove",this.scrollBlocker,{passive:!1}))}},{key:"handleRowTap",value:function(e,t){this.groupByState.drilldownMode()?this.groupByState.drillDown(e,t,this.viewType):(0,d.default)((0,f.default)(a.prototype),"handleRowTap",this).call(this,e)}},{key:"UNSAFE_componentWillMount",value:function(){this.groupByState=new x.default(this.props,this.viewStateKey)}},{key:"componentWillUnmount",value:function(){(0,d.default)((0,f.default)(a.prototype),"componentWillUnmount",this).call(this),this.scrollBlocker&&document.removeEventListener("touchmove",this.scrollBlocker)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.groupByState.updateProps(e)}},{key:"onRowMount",value:function(e,t){this.tableRowComponents[e]=t}},{key:"drilldownAllSelected",value:function(){this.groupByState.drillDownAll(this.viewType)}},{key:"getCardChildrenFromCustomLayout",value:function(){return(0,v.default)(this.customLayout,["children","0","children","0","children"],[])}},{key:"customizeCardLayoutBasedOnContext",value:function(){var e,t,a=this,n={},r=(null===(e=this.props)||void 0===e?void 0:e.width)||0,i=null===(t=this.customLayout)||void 0===t?void 0:t.name;if("list"===i&&(r<V.default.widescreenBreakpoint||this.props.isInline)?n.cardHoverBackground={type:"variable",value:"cardHoverBackgroundNarrowscreen"}:(n.cardBorderStyle={type:"variable",value:"cardBorderStyleDefault"},n.cardBorderRadius={type:"variable",value:"cardBorderRadiusDefault"},n.cardOutline={type:"variable",value:"cardOutlineDefault"},n.cardHoverShadow={type:"variable",value:"cardHoverShadowDefault"},n.cardHoverBackground={type:"variable",value:"cardHoverBackgroundDefault"}),"photo"===i){var o=this.getCardChildrenFromCustomLayout(),l=(0,F.isNodeEmpty)({},o[0],this.viewStateKey);n.cardImageBorderRadius={type:"variable",value:l?"cardBorderRadiusDefault":"cardBottomBorderRadiusLarge"}}if("large"===i){var s=this.getCardChildrenFromCustomLayout(),u=(0,F.isNodeEmpty)({},s[0],this.viewStateKey),d=s.slice(2).every((function(e){return(0,F.isNodeEmpty)({},e,a.viewStateKey)})),c="";u&&d?c="cardBorderRadiusDefault":u?c="cardTopBorderRadiusLarge":d&&(c="cardBottomBorderRadiusLarge"),n.cardImageBorderRadius={type:"variable",value:c}}var p=(0,H.getVariableAssignmentsNode)(n,i);return p.children=[this.customLayout],p}},{key:"renderItem",value:function(e,t){var a,n=this,r=e.annotatedRows,i=e.rowSwipeActions,l=e.groupingColumn,s=e.nearestHeadings,u=e.drilldownColumn,d=e.rowLayout,c=e.dataContext,p=e.isDesktopInlineViewHoriz,f=(0,o.default)(i,2),h=f[0],m=f[1],v=this.props.tableSchema,y=this.currentInteractionState,w=y.handleChildDrag,b=y.handleChildDragEnd,S=y.handleRowSwipedLeft,T=y.handleRowSwipedRight,C=y.handleRowTap,R=y.handleRowLongPress,E=l?this.props.tableSchema.findAttributeByName(l):void 0,k=!!s&&s[t]===t;if(r[t]===this.groupByState.DRILLDOWN_ALL_SYMBOL())return g.default.createElement(_.default,{text:this.appModel.MapActionName("All"),onSelect:this.drilldownAllSelected.bind(this),key:"special-all"+u,index:t});if(E&&k){var I="list"===(null===(a=this.customLayout)||void 0===a?void 0:a.name),A=this.props.width>V.default.widescreenBreakpoint,M="1px solid ".concat((0,B.themeColor)("dividerColor")),x=0===t,N=!A&&I,P={padding:A&&I?0:"auto",paddingTop:A&&x?"16px":"8px"},L={height:x?40:32,padding:x?"20px 16px 0 16px":"4px 16px 0px 16px"},F=Object.assign(Object.assign({background:"transparent",fontSize:18,lineHeight:"24px",borderTop:A||!I||x?"none":M,borderBottom:!A&&I?M:"none"},!j.ReactRootUIConfig.isInDesktopExperience()&&P),j.ReactRootUIConfig.isInDesktopExperience()&&!N&&L),H=r[t],W=H.length&&H[0][E.name()],U="".concat(W,"_gh_").concat(t,"_").concat(this.groupByState.inlinePosition());return g.default.createElement(O.default,Object.assign({},this.props,{appModel:this.appModel,rows:H,attribute:E,tableSchema:this.props.tableSchema,groupAggregate:this.props.groupAggregate,selectionMode:this.inSelectionMode(),index:t,key:U,disableAllActions:!1,style:F,viewType:"card"}))}var z=r[t],G=this.props.tableSchema.keyAttribute().name(),K=z[G],Y="".concat(K,"_").concat(t,"_").concat(this.groupByState.inlinePosition());Array.isArray(z)&&D.default.warnToDevConsole("Table View: row passed in is an array! --- should be an object");var q=this.getTransaction(),$=q&&q.wasModified(this.props.table.rootName(),K);if(u){var Q=this.props.tableSchema.findAttributeByName(u);if(Q)return g.default.createElement(O.default,Object.assign({},this.props,{appModel:this.appModel,rows:[z],disableNavigation:this.props.disableNavigation,attribute:Q,tableSchema:v,groupAggregate:this.props.groupAggregate,selectionMode:this.inSelectionMode(),index:t,key:Y,onTap:function(){return n.handleRowTap(K,z)},drilldownColumn:u,viewType:"card"}))}var X=this.customizeCardLayoutBasedOnContext();return this.renderRowForGenericView({layout:d,rowValues:z,onDrag:w,onDragEnd:b,tableSchema:v,row:z,rowId:K,ref:this.onRowMount.bind(this,t),allowTaps:!u,quickEditMode:this.inMultiRowEditMode(),disableNavigation:this.props.disableNavigation||this.inMultiRowEditMode(),transaction:q,wasModified:$,entryAttributes:v.allAttributes(),groupAggregate:this.props.groupAggregate,groupBy:this.groupByState.groupBy(),filterExpr:this.groupByState.filterExpr(),filterDefaults:this.groupByState.filterDefaults(),highlighted:K===this.props.rowId,translucentMode:this.props.translucentMode,focusRowByRowIndex:this.focusRowByRowIndex,onRowSwipeLeft:S,onRowSwipeRight:T,onRowLongPress:R,onRowTap:C,isSelected:this.rowIsSelected(K),selectionMode:this.inSelectionMode(),key:Y,index:t,swipeLeftAction:h,swipeRightAction:m,drilldownColumn:u,dataContext:c,nodeToRender:X,isDesktopInlineViewHoriz:p})}},{key:"getActions",value:function(e){var t=this;return(e=e||[]).map((function(e){return t.appModel.appTemplate.actions().findByName(t.props.table.rootName(),e)}))}},{key:"renderCard",value:function(e){var t,a=e.rowId,n=e.dataContext,r=e.key,i=e.nodeToRender,o=e.isDesktopInlineViewHoriz,l=g.default.createElement(F.ReactCardLayoutNode,{table:this.props.table.name(),rowId:a,key:r,node:i,dataContext:n,onRowTap:this.handleRowTap.bind(this),highlighted:this.props.rowId===a});return o?g.default.createElement("span",{key:r,className:"InlineCardNodeContainer",style:{width:$[null===(t=this.customLayout)||void 0===t?void 0:t.name]}},l):l}},{key:"computeDeckLayout",value:function(){return this.props.table&&this.props.tableSchema?R.DeckRow.computeLayout({appModel:this.appModel,table:this.props.table,tableSchema:this.props.tableSchema,mainDeckImageColumn:this.props.mainDeckImageColumn,primaryDeckHeaderColumn:this.props.primaryDeckHeaderColumn,secondaryDeckHeaderColumn:this.props.secondaryDeckHeaderColumn,nestedTableColumn:this.props.deckNestedTableColumn,deckSummaryColumn:this.props.deckSummaryColumn,showActionBar:this.props.showActionBar,actionColumns:this.props.actionColumns,actionBarEntries:this.props.actionBarEntries}):void 0}},{key:"computeTableLayout",value:function(e){var t;return this.props.table&&this.props.tableSchema&&(t={quickEditMode:this.inMultiRowEditMode(),appModel:this.appModel,tableSchema:this.props.tableSchema,table:this.props.table,excludedColumns:e.excludedColumns,width:this.containerWidth()-1,columnOrder:this.props.columnOrder,columnWidthPreference:this.props.columnWidth,disableAllActions:this.props.disableAllActions}),this.computeRowLayout(t)}},{key:"computeRowLayout",value:function(){var e=this.props,t=e.table,a=e.tableSchema,n=e.mainDeckImageColumn,r=e.primaryDeckHeaderColumn,i=e.secondaryDeckHeaderColumn,o=e.deckNestedTableColumn,l=e.deckSummaryColumn,s=e.showActionBar,u=e.actionColumns,d=e.actionBarEntries;return t&&a?R.DeckRow.computeLayout({appModel:this.appModel,table:t,tableSchema:a,mainDeckImageColumn:n,primaryDeckHeaderColumn:r,secondaryDeckHeaderColumn:i,nestedTableColumn:o,deckSummaryColumn:l,showActionBar:s,actionColumns:u,actionBarEntries:d}):void 0}},{key:"computeLayoutForGeneric",value:function(e){return"table"===this.state.viewType?this.computeTableLayout(e):this.computeDeckLayout(e)}},{key:"renderRowForGenericView",value:function(e){switch(this.state.viewType){case"table":return g.default.createElement(E.default,Object.assign({},this.props,e,{forcedUpdate:void 0,appModel:this.appModel}));case"deck":return g.default.createElement(R.DeckRow,Object.assign({},this.props,e,{forcedUpdate:void 0,appModel:this.appModel}));default:return this.renderCard(e)}}},{key:"getPreviousGroupByValue",value:function(e){var t=W.AppGlobals.AppState.getPreviousGroupByColumnName();return t&&e.length>0&&this.groupByState.filterExpr()?e[0][t]:null}},{key:"sortByHeaderSelected",value:function(e){var t=this.props.sortBy,a=e.name(),n=null;this.groupByState.groupBy()&&0!==this.groupByState.groupBy().length||t&&t.length&&(n=t[0]);var r="Ascending";n&&n.Column===a&&(r="Ascending"===n.Order?"Descending":"Ascending");var o=this.currentUIState.ListUIState||{},l=(0,m.default)(this.currentUIState,(0,i.default)({},o,(0,m.default)(this.uiState,{SortBy:[{Column:a,Order:r}],GroupBy:[]})));this.setCurrentUIState(l)}},{key:"focusRowByRowIndex",value:function(e,t){var a=this.tableRowComponents[e];if(a&&a.formEntries){var n=a.formEntries[t.name()];if(n)return void n.focus()}document.activeElement.blur()}},{key:"handleRowSwiped",value:function(e,t){var a=this.getView();if(a){var n=a.getEventByType(e);if(n){var r=t.rowId(),i=this.props.table,o=i,l=this.appModel,s="".concat(a.name(),"|").concat(e.name),u={appModel:l,table:i,rowId:r,sourceLocationName:s,sourceTable:o};e===I.ROW_SWIPED_LEFT?z.logger.logAppEvent(G.AppEventName.RowSwipeLeftCard):z.logger.logAppEvent(G.AppEventName.RowSwipeRightCard),I.default.handle(n,u,(function(e){e.actionModifiedData&&!l.ShouldDelaySync()&&window.InputHandler.ProcessSync(),e.actionModifiedData&&!e.actionNavigatedApp&&l.ShouldDelaySync()&&StateReflector.ShowUIState(!0)}),this.viewStateKey)}}}},{key:"computeDrilldownLayout",value:function(e){return(0,N.computeDrilldownLayout)(e)}},{key:"rowHeight",value:function(){return N.rowHeight}},{key:"guessRowHeight",value:function(){var e;if(this.groupByState.drilldownMode())return 38;switch(null===(e=this.customLayout)||void 0===e?void 0:e.name){case"list":return 86;case"large":return 560;case"backdrop":return 180;case"image":case"photo":return 240;default:return 100}}},{key:"getNumberOfColumnsBasedOnBreakPoint",value:function(){var e=this.props.width;return e<600?1:e<960?2:e<1280?3:e<1920?4:6}},{key:"constructTwoDimensionalArrayForGridLayout",value:function(e){var t=this.getNumberOfColumnsBasedOnBreakPoint(),a=[],n=0;return e.forEach((function(e,r){var i=Array.isArray(e);if(i||0===n){var o=[r];a.push(o),n=i?0:1}else a[a.length-1].push(r),n=(n+1)%t})),a}},{key:"render",value:function(){var e,t,a,n,r=this;if(!this.shouldShow())return null;this.setupCurrentLayout({autoDefaults:!0,autoLayoutOverrides:null,includeGotoDetails:!0});var i=this.props,o=i.tableSchema,l=i.table,s=i.searchQuery,u=i.rowLimit,d=i.filterExpr,c=i.groupAggregate,p=i.isInline,f=i.sortBy,h=i.rowType,m=i.translucentMode;if(!o||!l)return g.default.createElement("div",null);var v,w,C,R,E,D=this.currentUIState.ListUIState||{},x=new k.default(this.appModel,o,void 0,void 0,void 0,void 0,{viewStateKey:this.viewStateKey});if(this.groupByState.drilldownMode())v=this.groupByState.currentDrilldownColumn(),w=this.groupByState.getDrilldownRows(),C=(0,N.computeDrilldownLayout)({attributeName:v,tableSchema:o,width:this.containerWidth()});else{E=[];var O={searchQuery:s,sortRules:[],limit:u,filterExpr:d,filterDefaults:this.groupByState.filterDefaults(),transaction:this.pendingTransaction};c&&delete O.limit;var B=(null===(e=this.topStackUIState)||void 0===e?void 0:e.DashboardUIState)&&p;this.groupByState.filterExpr()&&!B&&(E=E.concat((0,y.default)(undefined,"ColumnName")));var F=this.groupByState.groupBy();F&&F.length&&"_RowNumber"!==F[0].Column&&(O.sortRules.push(F[0]),R=F[0].Column,E.push(R)),f&&(O.sortRules=O.sortRules.concat(f)),w=l.queryRowValues(O,this.appModel,x),C=this.computeLayoutForGeneric({excludedColumns:E})}var H=this.groupByState.annotateRows(w,R),z=H.nearestHeadings,G=H.annotatedRows,K="fastTable"===h&&w.length>0&&this.appModel.AppTemplate.Presentation.ShowColumnNames,Y=K?this.appModel.GetTableRowHeight():0,q=[];K&&(q=C.map((function(e,t){var a=e.isAction,n=e.attribute,i=e.action,o=e.columnWidth,l=e.isCompact;if(!e.special){var s;s=l?null:n.displayName(x);var u=0===t,d=l,c=d?N.columnPadding/2:N.columnPadding,p=d?N.columnPadding/2:0,f=o+c+p+(u?-1:0);return g.default.createElement(P.default,{enabled:!r.groupByState.drilldownMode()&&!a&&!!D,onTap:r.sortByHeaderSelected.bind(r,n),className:(0,T.default)("TableView__header-column",{"TableView--header-column-compact":l}),style:{width:f+"px",paddingLeft:c,paddingRight:p},key:t,"data-testonly-column":n&&n.name(),"data-testonly-action":i&&i.name(),"data-vfe-action":i&&i.name(),"data-vfe-interactive":!0},s)}return null})));var X,Z,J,ee=this.getPreviousGroupByValue(w);if(ee&&W.AppGlobals.ViewManager.appHeader.setState({overrideTitle:ee}),this.inMultiRowEditMode()&&!p&&(X=g.default.createElement(L.default,{appModel:this.appModel,onCancel:this.exitEditMode,onSave:this.commitTransaction})),K&&(Z=g.default.createElement("div",{className:"TableView__header",style:{height:Y}},q)),p){var te=this.groupByState.inlineFilterDisplayValue();null!=te&&(J=g.default.createElement(_.default,{text:te,expanded:!0,onSelect:function(){r.groupByState.drillUp()},key:"special-back-"+this.groupByState.inlinePosition()}))}var ae=this.currentInteractionState,ne=ae.allowSwipe,re=ae.allowPullToSync,ie=ae.handleDrag,oe=ae.handleDragEnd,le=this.getView(),se=[];if(ne){var ue=this.appModel.appTemplate.actions();se=[I.ROW_SWIPED_LEFT,I.ROW_SWIPED_RIGHT].map((function(e){var t=le&&le.getEventByType(e);return t&&ue.findByName(r.props.table.rootName(),t.actionName())||void 0}))}var de,ce=this.props.isInline,pe=!re,fe=j.ReactRootUIConfig.isInDesktopExperience()&&this.props.isInline&&this.props.sidewaysScroll,he=!(!fe||!$[null===(t=this.customLayout)||void 0===t?void 0:t.name]),me=fe&&!$[null===(a=this.customLayout)||void 0===a?void 0:a.name],ve={annotatedRows:G,table:this.props.table,tableSchema:this.props.tableSchema,rowLayout:C,rowSwipeActions:se,groupingColumn:R,drilldownColumn:v,nearestHeadings:z,excludedColumns:E,dataContext:x,groupAggregate:this.props.groupAggregate,isDesktopInlineViewHoriz:he},ye=this.getVisibleBodyHeight({isExpandedDrilldown:!!J,inDrilldownMode:this.groupByState.drilldownMode(),rowHeight:this.guessRowHeight(),annotatedRows:G,viewType:"card"});if(this.props.width>V.default.widescreenBreakpoint&&!this.groupByState.drilldownMode()){var ge=this.constructTwoDimensionalArrayForGridLayout(G),we="list"===(null===(n=this.customLayout)||void 0===n?void 0:n.name)?2:void 0,be={margin:0,width:"100%",padding:j.ReactRootUIConfig.isInDesktopExperience()?"0 8px":"8px",justifyContent:"flex-start",alignItems:"stretch"},Se=this.getNumberOfColumnsBasedOnBreakPoint();de=g.default.createElement(S.default,{length:ge.length,threshold:400,useStaticSize:!1,type:"variable",scrollParentGetter:this.reactListScrollParentGetter(),itemSizeEstimator:function(e,t){return Array.isArray(G[ge[e][0]])?(0,N.rowHeight)():t[1]||r.guessRowHeight()},useTranslate3d:A.default.Supports3dTransform(),itemRenderer:function(e){var t=Array.isArray(G[ge[e][0]]);return g.default.createElement(b.Grid,{key:"grid-row-"+e,container:!0,spacing:we,direction:"row",justify:R?"flex-start":"center",style:Object.assign(Object.assign({},be),j.ReactRootUIConfig.isInDesktopExperience()&&t&&{paddingLeft:0}),alignItems:"stretch"},ge[e].map((function(e){var a,n=t?12:12/Se,i={xs:n,sm:n,md:n,lg:n,xl:n},o=j.ReactRootUIConfig.isInDesktopExperience()&&t;return g.default.createElement(b.Grid,Object.assign({key:"grid-item-"+e,item:!0},i,{classes:{item:o?null===(a=r.props.classes)||void 0===a?void 0:a.gridGroupedRow:""}}),r.renderItem(ve,e))})))}})}else de=g.default.createElement(S.default,{length:G.length,scrollParentGetter:this.reactListScrollParentGetter(),itemRenderer:function(e){return r.renderItem(ve,e)},threshold:he?600:400,useStaticSize:he,type:he?"uniform":"variable",itemSizeEstimator:function(e,t){return Array.isArray(G[e])?(0,N.rowHeight)():t[1]||r.guessRowHeight()},useTranslate3d:A.default.Supports3dTransform(),axis:he?"x":"y"});var Te=0===G.length?this.appModel.MapActionName("No items"):null,Ce=j.ReactRootUIConfig.isInDesktopExperience()?{maxHeight:ye}:{height:ye};return g.default.createElement(b.MuiThemeProvider,{theme:Q()},Te?g.default.createElement(U.EmptyView,{message:Te,width:this.props.width,height:this.props.height}):g.default.createElement("div",{className:(0,T.default)("BasePrimaryView CardView",{"CardView--fixed-height-mode":this.fixedHeightMode(),"CardView--translucent-mode":m||he}),ref:this.onScrollContainerMount,onTouchMove:ie,onTouchEnd:oe,onTouchCancel:oe,style:{draggable:!0,width:this.props.width,height:this.props.height}},g.default.createElement(g.default.Fragment,null,J,g.default.createElement(M.default,{innerRef:function(e){return r.pullRef=e},disabled:ce,paused:pe,getScrollContainer:this.getScrollContainer,appModel:this.appModel},g.default.createElement("div",{style:{display:me?"block":"inline-block",minWidth:"100%",maxWidth:"fastTable"!==h?"100%":void 0,paddingTop:J?(0,N.rowHeight)():0},"data-testid":"card-view-container"},Z,g.default.createElement("div",{className:(0,T.default)("CardView__list",{InlineShowAllVert:me,InlineShowAllHoriz:he}),style:Ce},de)))),X),this.renderFabs(),this.renderActionButtonPortal())}}]),a}(C.default);X=q([w.observer],X);var Z=(0,b.withStyles)((function(){return{gridGroupedRow:{padding:"0 !important"}}}))(X);t.default=Z},182788:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ChartViewDataTestIds=void 0;var i,o=n(a(600861)),l=n(a(856690)),s=n(a(689728)),u=n(a(366115)),d=n(a(441588)),c=n(a(861655)),p=n(a(994993)),f=n(a(73808)),h=n(a(294184)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=U(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(719730)),v=n(a(601958)),y=n(a(496486)),g=n(a(667294)),w=n(a(528482)),b=n(a(864122)),S=n(a(386036)),T=n(a(593186)),C=n(a(21870)),R=n(a(498967)),E=n(a(266522)),k=n(a(454852)),I=a(150198),A=a(888861),D=n(a(112963)),M=n(a(155345)),x=a(166089),N=a(957831),O=a(552179),_=a(578400),B=a(211305),P=a(56749),L=a(44617),V=a(218546),F=a(318926),H=a(351101),W=a(664583);function U(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(U=function(e){return e?a:t})(e)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,p.default)(this,a)}}t.ChartViewDataTestIds=i,function(e){e.Container="chart-view-container"}(i||(t.ChartViewDataTestIds=i={}));var z="[blank]";!function(e){var t,a,n,r;e.registerTheme("dark",(t="#eee",a=function(){return{axisLine:{lineStyle:{color:t}},axisTick:{lineStyle:{color:t}},axisLabel:{textStyle:{color:t}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:t}}}},(r={color:n=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],backgroundColor:(0,P.themeColor)("mainContentBackground"),tooltip:{axisPointer:{lineStyle:{color:t},crossStyle:{color:t},label:{color:"#000"}}},legend:{textStyle:{color:t},pageTextStyle:{color:t}},title:{textStyle:{color:t}},toolbox:{iconStyle:{normal:{borderColor:t}}},dataZoom:{dataBackgroundColor:"#eee",fillerColor:"rgba(200,200,200,0.2)",handleColor:"#dd6b66"},timeline:{itemStyle:{color:n[1]},lineStyle:{color:t},controlStyle:{color:t,borderColor:t},label:{color:t}},timeAxis:a(),logAxis:a(),valueAxis:a(),categoryAxis:a(),line:{symbol:"circle"},graph:{color:n},gauge:{axisLine:{lineStyle:{color:[[.2,"#dd6b66"],[.8,"#759aa0"],[1,"#ea7e53"]],width:8}}},candlestick:{itemStyle:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}).categoryAxis.splitLine.show=!1,r))}(m);var G=function(e){(0,c.default)(a,e);var t=j(a);function a(e){var n;return(0,l.default)(this,a),(n=t.call(this,e)).showHeader=function(){return n.props.table&&(n.props.includeActionButtons||n.props.viewDefn)},n.hideHeader=function(){return!n.showHeader()},n.getShowDataAction=function(e){return y.default.find(e||n.getTableScopeActions(),(function(e){return 0===e.name().indexOf("Chart Data for")&&e.isAutoCreated()}))},n.shouldShowDataAction=function(e){return!e||e.prominence()!==k.default.DO_NOT_DISPLAY},n.runAction=function(e){var t;(0,W.runAppAction)(e,{appModel:(0,H.getAppModel)(),table:n.props.table,sourceLocationName:null===(t=n.getView())||void 0===t?void 0:t.name(),filterExpr:n.props.filterExpr,defaultValues:n.props.filterDefaults,rowId:n.rowId},void 0,n.viewStateKey)},n.checkIfUsingNewChartExperience=function(){var e,t,a;return(null===(e=n.appModel)||void 0===e?void 0:e.inRollout("NewChartsRollout"))&&(null===(a=null===(t=n.getView())||void 0===t?void 0:t.definition())||void 0===a?void 0:a.UseNewChartExperience)},n.getShowDataButton=function(e){var t,a=e?function(){return n.runAction(e)}:n.showData.bind((0,u.default)(n));return n.checkIfUsingNewChartExperience()?(null===(t=n.getView())||void 0===t?void 0:t.definition().ChartConfig.HideDataButton)?null:g.default.createElement(w.default,{size:"small",color:"primary",onClick:a,startIcon:g.default.createElement(b.default,null)},n.appModel.MapActionName("Data")):g.default.createElement(D.default,{className:"ChartView__button",onTap:a},n.appModel.MapActionName("Data"))},n.getGraphAttributes=function(e){var t=e.tableSchema,a=e.chartColumns,n=e.groupBy;return n&&n.length?t.findAttributesByNames(n):a&&a.length?t.findAttributesByNames(a):[]},n.mapRange=function(e,t,a){if(t[0]===t[1])return a[0];var n=a[0]+(e-t[0])*(a[1]-a[0])/(t[1]-t[0]);return Math.max(Math.min(n,a[1]),a[0])},n.echartsTooltipPositioner=function(e,t,a,n,r){var i={left:e[0]+10,top:e[1]-a.clientHeight-10};return i.left+a.clientWidth>r.viewSize[0]&&(i.left=Math.max(10,r.viewSize[0]-a.clientWidth-10)),i.top=Math.max(10,i.top),i},n.echartsLabelFormatter=function(e){return(e="".concat(e||"")).length>20&&(e=e.slice(0,17)+"..."),e},n.getEchartsColor=function(e){var t=n.colorCodes(),a=(0,H.getAppModel)();if(t&&t.length>0){var r=n.themeColorCodes().filter((function(e){return!t.includes(e)}));return t.concat(r)}if(e.length>0&&a.COLORENUM_TYPE===e[0].type()){var i=e[0].auxData().EnumValues,o=n.themeColorCodes().filter((function(e){return!i.includes(e)}));return i.concat(o)}return["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"]},n.getEchartsOption=function(e,t){var a,r=(0,H.getAppModel)(),i=n.getViewDefn();if(!i)return{};var l=i.groupAggregate,s=i.chartType,u=i.labelType,d=i.trendLine,c=n.props.tableSchema;if(!c)return{};if(n.checkIfUsingNewChartExperience()){var p=null===(a=n.getView())||void 0===a?void 0:a.definition().ChartConfig;if(p){var f=c.findAttributesByNames(["**all other columns**"]);return(0,_.createChartOption)((0,O.convertSavedConfig)(p,f),e,(0,B.transformColumnsToDataset)(f,e,n.dataContext()))}}var h=s!==r.CHART_OPTION_SCATTER&&i.showLegend,m=h&&[r.CHART_OPTION_ROW,r.CHART_OPTION_ROW_STACKED,r.CHART_OPTION_ROW_LINE,r.CHART_OPTION_AGGREGATE_PIECHART,r.CHART_OPTION_AGGREGATE_DONUTCHART,r.CHART_OPTION_PIECHART,r.CHART_OPTION_DONUTCHART].includes(s),v=c.keyAttribute(),g=c.labelBasicAttribute()||v,w=n.getGraphAttributes(i),b={color:n.getEchartsColor(w),tooltip:{position:n.echartsTooltipPositioner,transitionDuration:0},title:[{text:"",show:m,top:0,left:"left",textStyle:{fontWeight:"normal",fontSize:14}}],grid:{containLabel:!0,top:h?m?75:55:30,bottom:t?80:10,left:35,right:35},legend:{show:h,type:"scroll",orient:"horizontal",top:m?20:0,left:10,right:10},animation:!window.APPSHEET_TEST_CONTEXT},S=n.chartHeight()-b.grid.top-b.grid.bottom-85,T=Math.min(5,Math.max(1,Math.round(S/12)));switch(s){case r.CHART_OPTION_COL:case r.CHART_OPTION_COL_STACKED:case r.CHART_OPTION_COL_LINE:var C=w.filter((function(e){return e.isNumericType()})),R=n.colSeriesGraphData(e,c,C,!1).data,E=0===R.length?[]:R[0].values.map((function(e){return e.label})),k=g.displayName(n.dataContext());y.default.merge(b,{xAxis:{name:k,nameRotate:90,nameTextStyle:{fontSize:10},type:"category",data:E,axisLabel:{rotate:45,formatter:n.echartsLabelFormatter,fontSize:10}},yAxis:{type:"value",splitNumber:T,axisLabel:{fontSize:10},nameTextStyle:{fontSize:10},min:s===r.CHART_OPTION_COL_LINE?function(e){var t=e.min;return y.default.isFinite(t)?t:void 0}:void 0,max:s===r.CHART_OPTION_COL_LINE?function(e){var t=e.max;return y.default.isFinite(t)?t:void 0}:void 0},series:R.map((function(e){return{name:e.key,data:e.values,type:s===r.CHART_OPTION_COL_LINE?"line":"bar",stack:s===r.CHART_OPTION_COL_STACKED?"stack":void 0}})),tooltip:{trigger:"axis"}});break;case r.CHART_OPTION_ROW:case r.CHART_OPTION_ROW_STACKED:case r.CHART_OPTION_ROW_LINE:var I=w.filter((function(e){return e.isNumericType()})),A=n.rowSeriesGraphData(e,c,I,!1),D=g.displayName(n.dataContext()),M=0===A.length?[]:A[0].values.map((function(e){return e.label}));y.default.merge(b,{title:[{text:D}],yAxis:{type:"value",splitNumber:T,axisLabel:{fontSize:10},nameTextStyle:{fontSize:10},min:s===r.CHART_OPTION_ROW_LINE?function(e){var t=e.min;return y.default.isFinite(t)?t:void 0}:void 0,max:s===r.CHART_OPTION_ROW_LINE?function(e){var t=e.max;return y.default.isFinite(t)?t:void 0}:void 0},xAxis:{nameRotate:90,nameTextStyle:{fontSize:10},type:"category",data:M,axisLabel:{rotate:45,formatter:n.echartsLabelFormatter,fontSize:10}},series:A.map((function(e){return{name:e.key,data:e.values,type:s===r.CHART_OPTION_ROW_LINE?"line":"bar",stack:s===r.CHART_OPTION_ROW_STACKED?"stack":void 0}}))});break;case r.CHART_OPTION_SCATTER:var x=n.scatterData(e,c,w).data[0].values;x.forEach((function(e){e.value=[e.x,e.y,e.size]}));var N=x.map((function(e){return e.size})),P=[Math.min.apply(Math,(0,o.default)(N)),Math.max.apply(Math,(0,o.default)(N))],L=[5,25];y.default.merge(b,{xAxis:{name:w.length>0?w[0].displayName(n.dataContext()):"",type:"value",nameRotate:90,nameTextStyle:{fontSize:10},axisLabel:{rotate:45,fontSize:10}},yAxis:{name:w.length>1?w[1].displayName(n.dataContext()):"",splitNumber:T,nameTextStyle:{fontSize:10},type:"value",axisLabel:{fontSize:10}},tooltip:{axisPointer:{type:"cross"},formatter:function(e){var t=e.value;return t.length>=w.length?w.map((function(e,a){return"".concat(e.displayName(n.dataContext()),": ").concat(t[a])})).join("<br/>"):""}},series:[{dimensions:w.map((function(e){return e.displayName(n.dataContext())})),type:"scatter",symbolSize:function(e){return n.mapRange(e[2],P,L)},data:x}]});break;case r.CHART_OPTION_HISTOGRAM:case r.CHART_OPTION_HORIZ_HISTOGRAM:var V=w.length>0?n.aggrGraphData(e,c,w[0],l).data[0].values:[];s===r.CHART_OPTION_HORIZ_HISTOGRAM&&V.reverse();var F={name:w.length>0?w[0].displayName(n.dataContext()):"",nameTextStyle:{fontSize:10},type:"category",data:V.map((function(e){return e.label})),axisLabel:{formatter:n.echartsLabelFormatter}},W=c.findAttributeByName(null==l?void 0:l.column),U=W?l.func+" "+W.displayName(n.dataContext()):"Count",j={name:h?void 0:U,nameTextStyle:{fontSize:10},type:"value"};s===r.CHART_OPTION_HISTOGRAM?y.default.merge(b,{xAxis:F,yAxis:j}):y.default.merge(b,{xAxis:j,yAxis:F}),y.default.merge(b,{xAxis:{nameRotate:90,axisLabel:{rotate:45,fontSize:10}},yAxis:{splitNumber:T,axisLabel:{fontSize:10}},series:[{type:"bar",name:U,data:V}]});break;case r.CHART_OPTION_AGGREGATE_PIECHART:case r.CHART_OPTION_AGGREGATE_DONUTCHART:case r.CHART_OPTION_PIECHART:case r.CHART_OPTION_DONUTCHART:var z,G=[r.CHART_OPTION_AGGREGATE_PIECHART,r.CHART_OPTION_AGGREGATE_DONUTCHART].includes(s),K=[r.CHART_OPTION_AGGREGATE_DONUTCHART,r.CHART_OPTION_DONUTCHART].includes(s);z=G?w.length>0?w[0].displayName(n.dataContext()):"":g?g.displayName(n.dataContext()):"";var Y=[];if(w.length>0)if(G)Y=n.aggrGraphData(e,c,w[0],l).data[0].values;else{var q=w.filter((function(e){return e.isNumericType()}));Y=n.colSeriesGraphData(e,c,q,!1).data[0].values}Y.forEach((function(e){e.name=e.label})),y.default.merge(b,{title:[{text:z}],series:[{type:"pie",data:Y,radius:[K?"50%":"0%","100%"],top:b.grid.top,bottom:b.grid.bottom,left:10,right:10,minShowLabelAngle:5,label:{show:"None"!==u,position:"inside",formatter:function(e){var t=e.name,a=e.value,n=e.percent;switch(u){case"Key":return t;case"Value":return a;default:return"".concat(Math.round(n),"%")}}}}]})}if(s===r.CHART_OPTION_COL&&g.isNumericType()){var $=e.map((function(e){return n.normalizeValue(e[g.name()],g)})),Q=n.getContinuousDomain($);if(Q){var X=b.series[0].data.map((function(e){return e.value})),Z=n.getTrendLine({attribute:w[0],trendLine:d,labels:$,values:X,domain:Q});Z&&b.series.push({name:"Trend Line",type:"line",data:Z.values})}}else if([r.CHART_OPTION_HISTOGRAM,r.CHART_OPTION_HORIZ_HISTOGRAM].includes(s)&&w[0]){var J;if(w[0].isNumericType()){var ee=b.series[0].data.map((function(e){return n.normalizeValue(e.label,w[0])}));"number"==typeof ee[0]&&(J=ee)}var te=J?n.getContinuousDomain(J):null;if(te){var ae=b.series[0].data.map((function(e){return e.value})),ne=n.getTrendLine({attribute:w[0],trendLine:d,labels:J,values:ae,domain:te});ne&&b.series.push({name:"Trend Line",type:"line",data:ne.values})}}return b},n.handleEchartsClick=function(e){var t,a=(0,H.getAppModel)();if("Trend Line"!==e.seriesName)if(n.checkIfUsingNewChartExperience()){if(null===(t=n.getView())||void 0===t?void 0:t.definition().ChartConfig.DisableClickThrough)return;n.handleColSeriesChartClick(null,null,e.data.rowId,null,n.props)}else{var r=n.getViewDefn();switch(r.chartType){case a.CHART_OPTION_ROW:case a.CHART_OPTION_ROW_STACKED:case a.CHART_OPTION_ROW_LINE:case a.CHART_OPTION_COL:case a.CHART_OPTION_COL_STACKED:case a.CHART_OPTION_COL_LINE:case a.CHART_OPTION_PIECHART:case a.CHART_OPTION_DONUTCHART:case a.CHART_OPTION_SCATTER:n.handleColSeriesChartClick(null,null,e.data.rowId,null,n.props);break;case a.CHART_OPTION_HISTOGRAM:case a.CHART_OPTION_HORIZ_HISTOGRAM:case a.CHART_OPTION_AGGREGATE_PIECHART:case a.CHART_OPTION_AGGREGATE_DONUTCHART:n.handleHistogramClick(n.getGraphAttributes(r),e.data.originalValue,null,n.props)}}},n.getEchartsTheme=function(){return n.appModel.AppTemplate.Presentation.DisplayTheme.toLowerCase().startsWith("dark")?"dark":"light"},n.echart=null,n.observer=new ResizeObserver((function(){null!=n.echart&&n.echart.resize()})),n.containerRef=g.default.createRef(),n}return(0,s.default)(a,[{key:"componentDidMount",value:function(){this.containerRef.current&&this.observer.observe(this.containerRef.current)}},{key:"componentWillUnmount",value:function(){this.observer.disconnect()}},{key:"colorCodes",value:function(){var e=this;return(this.getViewDefn().colorCodes||[]).map((function(t){if(E.default.isDynamicFormattingColor(t)){var a=e.appModel.AppTemplate.Presentation.DisplayTheme;return E.default.getFormattingColorForTheme(a,t)}return t}))}},{key:"themeColorCodes",value:function(){var e=E.default.dynamicFormattingColors(),t=this.appModel.AppTemplate.Presentation.DisplayTheme;return e.map((function(e){return E.default.getFormattingColorForTheme(t,e)}))}},{key:"gcdOfTwo",value:function(e,t){if("number"!=typeof e||"number"!=typeof t)return 1;for(e=Math.abs(e),t=Math.abs(t);t;){var a=t;t=e%t,e=a}return e}},{key:"gcd",value:function(e){if(!e||!e.length||e.length<2)return 1;for(var t=e[0],a=1;a<e.length;a++){var n=e[a];t=this.gcdOfTwo(t,n)}return t}},{key:"getContinuousDomain",value:function(e){var t=(e=e.sort((function(e,t){return e-t})))[0],a=e[e.length-1];if(t===a)return null;var n=this.gcd(e);if(0===n||(a-t)/n>1e3)return null;for(var r=[],i=t;i<=a;i+=n)r.push(i);return r.length<e.length&&(r=null),r}},{key:"getTrendLine",value:function(e){var t=e.attribute,a=e.trendLine,n=e.labels,r=e.values,i=e.domain,o=t.auxData().DecimalDigits;("number"!=typeof o||isNaN(o))&&(o=2);var l=null;return"Linear"===a?l=S.default.linearRegression(n,r,o):"Exponential"===a?l=S.default.exponentialRegression(n,r,o):"Logarithmic"===a?l=S.default.logarithmicRegression(n,r,o):"Power"===a?l=S.default.powerRegression(n,r,o):"Polynomial"===a&&(l=S.default.polynomialRegression(n,r,o)),l?{values:i.map((function(e){return{label:S.default.round(e,o),value:l(e)}})),bar:!1,key:"Trend Line",color:"#2ca02c"}:null}},{key:"sortChartData",value:function(e,t){for(var a="Date"===t.model.Type||"DateTime"===t.model.Type,n=t.valueComparer(I.ValueFormat.Wire),r=0;r<e.length;r++)R.default.sort(e[r].values,(function(e,t){var r=a?e.originalValue:e.label,i=a?t.originalValue:t.label;return n(r,i)}))}},{key:"computeAggregateValue",value:function(e,t){return t&&t.column?this.props.tableSchema.computeAggregate({aggregationFunction:t.func,targetColumnName:t.column,rows:e,tableName:this.props.table.name(),appModel:this.appModel}):e.length}},{key:"aggrGraphData",value:function(e,t,a,n){var r,i,o=this,l=(0,H.getAppModel)(),s=[],u={key:a.displayName(this.dataContext())+" "+(n?n.func:"Count"),values:[]},d={};if(s.push(u),a.type()===l.TABLEREF_TYPE){var c=l.findTableCollection(a.referencedTableName()),p=c.table,f=c.tableSchema;p&&f&&(r=p,i=f.labelBasicAttribute())}var h=function(e){var t;t=r&&e[a.name()]&&(t=r.labelTextForId(e[a.name()]))?o.normalizeValue(t,i):o.normalizeValue(e[a.name()],a);var n=d[t&&t.toLowerCase?t.toLowerCase():t];if(n)n.rows.push(e);else{var l=t.toString();L.dynamicRollouts.includeByOwnerId("CustomYNlabelsInChartView")&&a.isBooleanType()&&t!==z&&(l=a.localizeWireValue(t,{dataContext:o.dataContext}));var s={label:l,rows:[e],originalValue:e[a.name()]};u.values.push(s),d[t&&t.toLowerCase?t.toLowerCase():t]=s}};if(l.ENUM_TYPE===a.type()||l.COLORENUM_TYPE===a.type()||l.PROGRESSENUM_TYPE===a.type()){var m=a.auxData().EnumValues;if(m)for(var v=0;v<m.length;v++){var y={label:m[v],rows:[],originalValue:m[v]};u.values.push(y);var g=m[v];d[g&&g.toLowerCase?g.toLowerCase():g]=y}}if(null!=e)for(var w=0;w<e.length;w++)h(e[w]);var b=0,S=0;for(var T in d){var C=this.computeAggregateValue(d[T].rows,n);isNaN(C)&&(C=0),d[T].value=C,d[T].rows=null,b=C<b?C:b,S=C>S?C:S}return this.sortChartData(s,a),{data:s,min:b,max:S}}},{key:"normalizeValue",value:function(e,t){var a=(0,H.getAppModel)(),n=t.valueFromWireFormat(e);if(a.DECIMAL_TYPE===t.type()?n=Math.round(100*n)/100:a.PERCENT_TYPE===t.type()&&(n*=100),null!=n&&""!==n||(n=t.isNumericType()?0:z),n instanceof Date)switch(t.basestType()){case a.DATE_TYPE:case a.DATETIME_TYPE:case a.CHANGETIMESTAMP_TYPE:case a.TIME_TYPE:return t.basestAttribute().localizeWireValue(e)}return n}},{key:"colSeriesGraphData",value:function(e,t,a,n){var r=this,i=t.keyAttribute(),o=t.labelBasicAttribute()||i,l=[],s=null,u=null;return a.forEach((function(t){var a={key:t.displayName(r.dataContext()),values:[]};null!=e&&e.forEach((function(e,l){var d=r.normalizeValue(e[t.name()],t);a.values.push({label:n?l:r.normalizeValue(e[o.name()],o),value:d,originalValue:e[o.name()],rowId:e[i.name()]}),isNaN(d)||((!s||d<s)&&(s=d),(!u||d>u)&&(u=d))})),l.push(a)})),{data:l,min:s,max:u}}},{key:"rowSeriesGraphData",value:function(e,t,a,n){var r=this,i=t.keyAttribute(),o=t.labelBasicAttribute()||i,l=[],s=function(e){for(var t={key:r.normalizeValue(e[o.name()],o),values:[]},s=e[i.name()],u=0;u<a.length;u++){var d=a[u];t.values.push({label:n?u:d.displayName(r.dataContext()),value:r.normalizeValue(e[d.name()],d),originalValue:e[d.name()],rowId:s})}l.push(t)};if(null!=e)for(var u=0;u<e.length;u++)s(e[u]);return l}},{key:"scatterData",value:function(e,t,a){var n=this,r=[],i=null,o=null,l=null,s=null,u={key:"",values:[]};r.push(u);var d,c,p,f,h=a.length>0?a[0]:null,m=a.length>1?a[1]:null,v=a.length>2?a[2]:null,y=t.keyAttribute();if(null!=e&&a.length>=2)for(var g=0;g<e.length;g++)d=e[g],c=void 0,p=void 0,f=void 0,c=n.normalizeValue(d[h.name()],h),p=n.normalizeValue(d[m.name()],m),f=v?n.normalizeValue(d[v.name()],v):1,isNaN(c)||((!i||c<i)&&(i=c),(!o||c>o)&&(o=c)),isNaN(p)||((!l||p<l)&&(l=p),(!s||p>s)&&(s=p)),u.values.push({x:c,y:p,size:f,shape:"circle",rowId:d[y.name()]});return{data:r,minX:i?i-1:0,maxX:o?o+1:0,minY:l?l-1:0,maxY:s?s+1:0}}},{key:"handleHistogramClick",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props;T.default.AddTraceContext("chartView.handleHistogramClick");var r,i,l=t,s=(0,H.getAppModel)();s.PERCENT_TYPE===e[0].type()&&(l/=100),null!=n.filterExpr?(r=(0,A.createColFilter)(l,n.tableSchema,e[0]),r=(0,A.createAnd)(r,n.filterExpr)):(i=n.filterDefaults||[],e.length&&(i=[].concat((0,o.default)(i),[{ColumnName:e[0].name(),ColumnValue:l}])));var u=n.table.name(),d=this.getViewDefn();if(e.length>1){var c=!0;this.pushView("graph",!1,{TableName:u,FilterExpr:r,DefaultValues:i,GroupBy:e.slice(1).map((function(e){return e.name()})),groupAggregate:d.groupAggregate,ChartColumns:d.chartColumns,ColorCodes:this.colorCodes(),ChartType:d.chartType,TrendLine:d.trendLine,ShowLegend:d.showLegend,SortBy:d.sortBy,LabelType:d.labelType,GraphTitle:t,ControlName:n.controlName},c)}else{var p=this.getRefView(u);if(p){var f=!1;this.pushView(p.Action,!1,{TableName:u,RowKey:null,FilterExpr:r,DefaultValues:i},f,p)}else{var h=!0;this.pushView("fastTable",!1,{TableName:u,RowKey:null,FilterExpr:r,DefaultValues:i},h)}}}},{key:"handleColSeriesChartClick",value:function(e,t,a,n,r){T.default.AddTraceContext("chartView.handleColSeriesChartClick");this.pushView("detail",!1,{TableName:r.table.name(),RowKey:a,FilterExpr:r.filterExpr,DefaultValues:r.filterDefaults},!0)}},{key:"getViewDefn",value:function(){if(!this.props.viewDefn||this.checkIfUsingNewChartExperience())return this.props;var e=this.props.viewDefn;return{chartType:e.ChartType,chartColumns:e.ChartColumns,trendLine:e.TrendLine,showLegend:e.ShowLegend,labelType:e.LabelType,graphTitle:e.GraphTitle,colorCodes:e.ChartColors,groupAggregate:e.GroupAggregate,groupBy:e.GroupBy,sortBy:e.SortBy}}},{key:"getTableScopeActions",value:function(){var e=this.appModel.appTemplate.actions();return this.props.disableAllActions?[]:e.actionsAtTableScope(this.props.table.name(),this.appModel)}},{key:"getActions",value:function(){var e=this.getTableScopeActions();return{overlayActions:e.filter((function(e){return e.prominence()===k.default.DISPLAY_OVERLAY})),prominentActions:e.filter((function(e){return e.prominence()===k.default.DISPLAY_PROMINENTLY})),hasActionsV2:!!this.getShowDataAction(e)}}},{key:"componentDidUpdate",value:function(e,t){if((0,d.default)((0,f.default)(a.prototype),"componentDidUpdate",this).call(this,e,t),this.showHeader()){var n=this.getActions(),r=this.currentUIState;(0,N.getAppState)()&&r.GraphUIState&&r.ControlName===this.props.controlName&&n.hasActionsV2?(x.AppGlobals.ViewManager.appHeader.setState({tableSchema:this.props.tableSchema,normalActionButtons:n.prominentActions}),C.default.headerActionButtons=n.prominentActions):C.default.headerActionButtons=[]}}},{key:"height",value:function(){return this.props.height||300}},{key:"headerHeight",value:function(){return this.props.includeActionButtons||this.props.viewDefn?50:0}},{key:"chartHeight",value:function(){return this.height()-this.headerHeight()}},{key:"getRefView",value:function(e){var t=["deck","table","fastTable"],a=(0,H.getAppModel)().FindControlsForTable(e,t,!1);return(null==a?void 0:a.length)?y.default.sortBy(a,(function(e){var a=t.indexOf(e.Action);return"ref"===e.Position?a:a+10}))[0]:null}},{key:"showData",value:function(){if(T.default.AddTraceContext(".ShowDataButton"),F.logger.logAppEvent(V.AppEventName.ShowDataButton),null!=this.props.table){var e=this.props.table.name(),t=this.props.filterExpr,a=this.props.filterDefaults,n=this.getRefView(e);if(n){this.pushView(n.Action,!1,{TableName:e,RowKey:null,FilterExpr:t,DefaultValues:a},!1,n)}else{this.pushView("fastTable",!1,{TableName:e,RowKey:null,FilterExpr:t,DefaultValues:a},!0)}}}},{key:"renderHeader",value:function(){var e,t;if(this.hideHeader())return null;var a=this.checkIfUsingNewChartExperience()&&(null===(e=this.getView())||void 0===e?void 0:e.definition().ChartConfig.HideTitle)?"":null===(t=this.getView())||void 0===t?void 0:t.displayName(this.appModel,void 0,void 0,{viewStateKey:this.viewStateKey}),n=this.getShowDataAction();return g.default.createElement("div",{className:"ChartView__header",style:{height:this.headerHeight()}},g.default.createElement("p",{className:"title"},a),this.shouldShowDataAction(n)&&this.getShowDataButton(n))}},{key:"render",value:function(){var e;return this.shouldShow()?this.appModel.inRollout("asyncQuery")?(0,d.default)((0,f.default)(a.prototype),"render",this).call(this):this.renderRows((null===(e=this.props.table)||void 0===e?void 0:e.queryRowValues({sortRules:this.props.sortBy,filterExpr:this.props.filterExpr,filterDefaults:this.props.filterDefaults,transaction:this.pendingTransaction}))||[]):null}},{key:"renderRows",value:function(e){var t=this,a={height:this.height(),width:this.props.width},n={height:this.chartHeight()},r=(0,h.default)("BasePrimaryView ChartView",{"ChartView--translucent-mode":this.props.translucentMode,"ChartView--sm":this.props.width<480,"ChartView--md":this.props.width>=480&&this.props.width<768,"ChartView--lg":this.props.width>=768}),o=this.renderFabs();return g.default.createElement("div",{className:r,style:a,"data-testid":i.Container,ref:this.containerRef},this.renderHeader(),g.default.createElement(v.default,{onChartReady:function(e){t.echart=e},option:this.getEchartsOption(e,!!o),notMerge:!0,style:n,onEvents:{click:this.handleEchartsClick},theme:this.getEchartsTheme()}),o,this.renderActionButtonPortal())}}]),a}(M.default);t.default=G},330702:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DeckViewDataTestids=void 0;var i=n(a(627424)),o=n(a(856690)),l=n(a(689728)),s=n(a(366115)),u=n(a(441588)),d=n(a(861655)),c=n(a(994993)),p=n(a(73808)),f=n(a(918698)),h=n(a(496486)),m=n(a(667294)),v=P(a(155345)),y=n(a(676970)),g=n(a(294184)),w=a(894440),b=n(a(385857)),S=P(a(146913)),T=n(a(571524)),C=n(a(593186)),R=n(a(409022)),E=n(a(702671)),k=a(714611),I=n(a(17926)),A=n(a(526382)),D=a(202079),M=a(56749),x=a(148448),N=a(557310),O=a(318926),_=a(218546);function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(B=function(e){return e?a:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=B(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var V,F=function(e,t,a,n){var r,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,f.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(i<3?r(o):i>3?r(t,a,o):r(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};t.DeckViewDataTestids=V,function(e){e.Container="deck-view-container"}(V||(t.DeckViewDataTestids=V={}));var H=function(e){(0,d.default)(a,e);var t=L(a);function a(e){var n;(0,o.default)(this,a),n=t.call(this,e);var r,i=function(e){n.scrollContainer&&n.state.currentInteraction!==e.name&&n.setState({currentInteraction:e.name})},l=n.handleRowTap.bind((0,s.default)(n)),u=n.handleRowLongPress.bind((0,s.default)(n)),d=n.handleRowSwiped.bind((0,s.default)(n),S.ROW_SWIPED_LEFT),c=n.handleRowSwiped.bind((0,s.default)(n),S.ROW_SWIPED_RIGHT),p={name:"PULLING_DOWN",allowPullToSync:!0,allowSwipe:!1,allowScroll:!1,handleDragEnd:function(){return i(r)}},f={name:"SWIPING",allowPullToSync:!1,allowSwipe:!0,allowScroll:!1,handleRowSwipedLeft:d,handleRowSwipedRight:c,handleChildDragEnd:function(){return i(r)}};return r={name:"IDLE",allowPullToSync:!0,allowSwipe:!0,allowScroll:!0,handleRowTap:l,handleRowLongPress:u,handleChildDrag:function(){return i(f)},handleDrag:function(){n.pullRef&&n.pullRef.isPullingDown()&&i(p)}},n.stateMachine={PULLING_DOWN:p,SWIPING:f,IDLE:r},n.state.currentInteraction=r.name,n.drilldownAllSelected=n.drilldownAllSelected.bind((0,s.default)(n)),n}return(0,l.default)(a,[{key:"currentInteractionState",get:function(){return this.stateMachine[this.state.currentInteraction]||this.stateMachine.IDLE}},{key:"componentDidMount",value:function(){var e=this;(0,u.default)((0,p.default)(a.prototype),"componentDidMount",this).call(this),T.default.IsTouchEnabled()&&(this.scrollBlocker=function(t){!e.currentInteractionState.allowScroll&&t.cancelable&&(t.preventDefault(),t.stopPropagation())},document.addEventListener("touchmove",this.scrollBlocker,{passive:!1}))}},{key:"handleRowTap",value:function(e,t,n){this.groupByState.drilldownMode()?this.groupByState.drillDown(e,t,"deck"):(0,u.default)((0,p.default)(a.prototype),"handleRowTap",this).call(this,e,n)}},{key:"UNSAFE_componentWillMount",value:function(){this.groupByState=new E.default(this.props,this.viewStateKey)}},{key:"componentWillUnmount",value:function(){(0,u.default)((0,p.default)(a.prototype),"componentWillUnmount",this).call(this),this.scrollBlocker&&document.removeEventListener("touchmove",this.scrollBlocker)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.groupByState.updateProps(e)}},{key:"drilldownAllSelected",value:function(){this.groupByState.drillDownAll("deck")}},{key:"renderItem",value:function(e,t,a,n,r,o,l,s,u){var d,c=(0,i.default)(r,2),p=c[0],f=c[1],h=t.tableSchema,v=this.currentInteractionState,y=v.handleChildDrag,g=v.handleChildDragEnd,b=v.handleRowSwipedLeft,S=v.handleRowSwipedRight,T=v.handleRowTap,R=v.handleRowLongPress,E=o?h.findAttributeByName(o):void 0,k=!!s&&s[u]===u;if(e[u]===this.groupByState.DRILLDOWN_ALL_SYMBOL())return m.default.createElement(A.default,{text:this.appModel.MapActionName("All"),onSelect:this.drilldownAllSelected,key:"special-all"+l,index:u});if(E&&k){var D=e[u],x=D.length&&D[0][E.name()],N="".concat(x,"_gh_").concat(u,"_").concat(this.groupByState.inlinePosition());return m.default.createElement(I.default,Object.assign({},this.props,{appModel:this.appModel,rows:D,attribute:E,tableSchema:h,groupAggregate:this.props.groupAggregate,selectionMode:this.inSelectionMode(),index:u,key:N,disableAllActions:!1,style:{borderBottom:"1px solid ".concat((0,M.themeColor)("dividerColor"))},viewType:"deck"}))}var O=e[u],_=O[this.props.tableSchema.keyAttribute().name()],B=t.lookupTableRow(_),P=B&&B.timestamp,L="".concat(_,"_").concat(u,"_").concat(this.groupByState.inlinePosition());return Array.isArray(O)&&C.default.warnToDevConsole("Table View: row passed in is an array! --- should be an object"),m.default.createElement(w.DeckRow,Object.assign({},this.props,{appModel:this.appModel,forceUpdate:P,rowValues:O,onDrag:y,onDragEnd:g,layout:a,deckRowHeight:n,tableSchema:h,highlighted:_===this.props.rowId||(null===(d=this.props.interactiveRowIds)||void 0===d?void 0:d[t.rootName()])===_,onRowSwipeLeft:b,onRowSwipeRight:S,onRowLongPress:R,onRowTap:T,isLastToggled:this.rowIsLastToggled(_),isSelected:this.rowIsSelected(_),selectionMode:this.inSelectionMode(),translucentMode:this.props.translucentMode,groupAggregate:this.props.groupAggregate,groupBy:this.groupByState.groupBy(),filterExpr:this.groupByState.filterExpr(),filterDefaults:this.groupByState.filterDefaults(),key:L,index:u,swipeLeftAction:p,swipeRightAction:f,drilldownColumn:l}))}},{key:"handleRowSwiped",value:function(e,t){var a=this.getView();if(a){var n=a.getEventByType(e);if(n){var r=t.rowId(),i=this.props.table,o=i,l=this.appModel,s="".concat(a.name(),"|").concat(e.name),u={appModel:l,table:i,rowId:r,sourceLocationName:s,sourceTable:o};e===S.ROW_SWIPED_LEFT?O.logger.logAppEvent(_.AppEventName.RowSwipeLeftDeck):O.logger.logAppEvent(_.AppEventName.RowSwipeRightDeck),S.default.handle(n,u,(function(e){e.actionModifiedData&&!l.ShouldDelaySync()&&window.InputHandler.ProcessSync(),e.actionModifiedData&&!e.actionNavigatedApp&&l.ShouldDelaySync()&&StateReflector.ShowUIState(!0)}),this.viewStateKey)}}}},{key:"renderDeckRow",value:function(e){return m.default.createElement(w.DeckRow,Object.assign({},this.props,e,{appModel:this.appModel,forceUpdate:void 0}))}},{key:"computeLayoutForGenericView",value:function(){var e;return this.props.table&&this.props.tableSchema&&(e=w.DeckRow.computeLayout({appModel:this.appModel,table:this.props.table,tableSchema:this.props.tableSchema,mainDeckImageColumn:this.props.mainDeckImageColumn,primaryDeckHeaderColumn:this.props.primaryDeckHeaderColumn,secondaryDeckHeaderColumn:this.props.secondaryDeckHeaderColumn,nestedTableColumn:this.props.deckNestedTableColumn,deckSummaryColumn:this.props.deckSummaryColumn,showActionBar:this.props.showActionBar,actionColumns:this.props.actionColumns,actionBarEntries:this.props.actionBarEntries})),e}},{key:"getActions",value:function(e){var t=this;return e.map((function(e){return t.appModel.appTemplate.actions().findByName(t.props.table.rootName(),e)}))}},{key:"render",value:function(){var e,t=this;if(!this.shouldShow())return null;var a=this.appModel,n=this.props,r=n.table,i=n.tableSchema,o=n.groupAggregate,l=n.sortBy,s=n.isInline,u=n.width,d=n.height,c=n.deckNestedTableColumn,p=n.controlGroupBy;if(!i||!r)return m.default.createElement("div",null);var f,C,E,I,D,M=new b.default(a,i,void 0,void 0,void 0,void 0,{viewStateKey:this.viewStateKey});if(this.groupByState.drilldownMode())f=this.groupByState.currentDrilldownColumn(),C=this.groupByState.getDrilldownRows(),E=(0,k.computeDrilldownLayout)({attributeName:f,tableSchema:this.props.tableSchema,width:this.containerWidth()}),D=(0,k.rowHeight)();else{var O=[],_={searchQuery:this.props.searchQuery,sortRules:[],limit:this.props.rowLimit,filterExpr:this.groupByState.filterExpr(),filterDefaults:this.groupByState.filterDefaults(),transaction:this.pendingTransaction};o&&delete _.limit;var B=(null===(e=this.currentUIState)||void 0===e?void 0:e.DashboardUIState)&&s;this.groupByState.filterExpr()&&!B&&(O=O.concat(h.default.map(undefined,"ColumnName")));var P=this.groupByState.groupBy();P&&P.length&&"_RowNumber"!==P[0].Column&&(_.sortRules.push(P[0]),I=P[0].Column,O.push(I)),l&&(_.sortRules=_.sortRules.concat(l)),C=r.queryRowValues(_,a,M),E=w.DeckRow.computeLayout({appModel:a,table:r,tableSchema:i,mainDeckImageColumn:this.props.mainDeckImageColumn,primaryDeckHeaderColumn:this.props.primaryDeckHeaderColumn,secondaryDeckHeaderColumn:this.props.secondaryDeckHeaderColumn,nestedTableColumn:this.props.deckNestedTableColumn,deckSummaryColumn:this.props.deckSummaryColumn,showActionBar:this.props.showActionBar,actionColumns:this.props.actionColumns,actionBarEntries:this.props.actionBarEntries}),D=w.DeckRow.getDeckRowHeight(E)}var L=this.groupByState.annotateRows(C,I),F=L.nearestHeadings,H=L.annotatedRows,W=this.currentInteractionState,U=W.allowSwipe,j=W.allowPullToSync,z=W.handleDrag,G=W.handleDragEnd,K=[];if(U){var Y=this.getView(),q=a.appTemplate.actions();K=[S.ROW_SWIPED_LEFT,S.ROW_SWIPED_RIGHT].map((function(e){var t=Y&&Y.getEventByType(e);return t&&q.findByName(r.rootName(),t.actionName())||void 0}))}var $,Q=(0,g.default)(this.appModel.rolloutClassNames,"BasePrimaryView DeckView",{"DeckView--fixed-height-mode":this.fixedHeightMode(),"DeckView--translucent-mode":this.props.translucentMode});if(s){var X=this.groupByState.inlineFilterDisplayValue();null!=X&&($=m.default.createElement(A.default,{text:X,expanded:!0,onSelect:function(){t.groupByState.drillUp()},key:"special-back-"+this.groupByState.inlinePosition()}))}var Z=s,J=!j;this.renderedRowIds=C.map((function(e){return e[r.keyAttribute().name()]}));var ee=c?390:90,te=I?"variable":"uniform",ae=this.appModel.MapActionName("No items"),ne=this.getVisibleBodyHeight({isExpandedDrilldown:!!$,inDrilldownMode:this.groupByState.drilldownMode(),rowHeight:D,annotatedRows:H,viewType:"deck"}),re=!!N.ReactRootUIConfig.isReactRoot()&&(p&&p.length>1),ie=N.ReactRootUIConfig.isInDesktopExperience()?{maxHeight:ne}:{height:ne};return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{"data-testid":V.Container,className:Q,id:this.id(),onTouchMove:z,onTouchEnd:G,onTouchCancel:G,style:{draggable:!0,width:u,height:d}},$,m.default.createElement(R.default,{innerRef:function(e){return t.pullRef=e},disabled:Z,paused:J,getScrollContainer:this.getScrollContainer,appModel:a},m.default.createElement("div",{style:Object.assign({paddingTop:0},ie),className:(0,g.default)("DeckView__list",{InlineShowAllVert:N.ReactRootUIConfig.isInDesktopExperience()&&this.props.isInline&&this.isScrollableInline(H.length)}),ref:this.onScrollContainerMount},H.length>0?m.default.createElement(y.default,{key:te,length:H.length,scrollParentGetter:this.reactListScrollParentGetter(),itemRenderer:this.renderItem.bind(this,H,r,E,D,K,I,f,F),threshold:400,type:te,useTranslate3d:T.default.Supports3dTransform(),useStaticSize:!re&&!I&&!s,itemSizeEstimator:function(e,t){var a=N.ReactRootUIConfig.isInDesktopExperience()?D:ee,n=N.ReactRootUIConfig.isInDesktopExperience()?v.GROUPED_HEADER_ROW_HEIGHT:(0,k.rowHeight)();return Array.isArray(H[e])?n:t[1]||a}}):null!==ae?m.default.createElement(x.EmptyView,{message:ae}):"")),this.renderFabs(),this.renderActionButtonPortal()))}}]),a}(v.default),W=H=F([D.observer],H);t.default=W},114871:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GalleryViewDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(366115)),s=n(a(441588)),u=n(a(861655)),d=n(a(994993)),c=n(a(73808)),p=n(a(667294)),f=n(a(294184)),h=n(a(155345)),m=n(a(676970)),v=n(a(217738)),y=n(a(385857)),g=n(a(409022)),w=n(a(21870)),b=a(148448),S=a(557310);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}t.GalleryViewDataTestIds=r,function(e){e.Container="gallery-view-container",e.Line="gallery-view-line"}(r||(t.GalleryViewDataTestIds=r={}));var C=function(e){(0,u.default)(a,e);var t=T(a);function a(){var e;return(0,i.default)(this,a),(e=t.apply(this,arguments)).renderRows=function(t){var a,n=v.default.computeLayout({appModel:e.appModel,tableSchema:e.props.tableSchema,table:e.props.table,width:e.containerWidth(),galleryImageSize:e.props.galleryImageSize,sidewaysScroll:e.props.sidewaysScroll}),i=Math.ceil(t.length/n.imagesPerLine),o=(0,f.default)(e.appModel.rolloutClassNames,"BasePrimaryView GalleryView",{"GalleryView--sideways-scroll":!!n.sidewaysScroll,"GalleryView--fixed-height-mode":e.fixedHeightMode(),"GalleryView--translucent-mode":!!e.props.translucentMode||S.ReactRootUIConfig.isInDesktopExperience()&&e.props.isInline}),s=(null!==(a=e.props.width)&&void 0!==a?a:0)>w.default.widescreenBreakpoint,u=e.containerHPadding(),d=(n.sidewaysScroll?e.renderRow:e.renderLine).bind((0,l.default)(e),t,n);e.renderedRowIds=t.map((function(t){return t[e.props.table.keyAttribute().name()]}));var c=s&&!e.props.isInline?16:8,h=e.appModel.MapActionName("No items");return p.default.createElement("div",{className:o,"data-testid":r.Container},p.default.createElement(g.default,{getScrollContainer:e.getScrollContainer,disabled:e.props.isInline||s,appModel:e.appModel},p.default.createElement("div",{id:"galleryViewContainer",ref:e.onScrollContainerMount,className:"GalleryView__list",style:{width:e.props.width,height:e.props.height,paddingLeft:u+"px",paddingRight:u+"px"}},p.default.createElement("section",{className:"GalleryView__spacer",style:{height:n.sidewaysScroll?2:c}}),t.length>0?p.default.createElement(p.default.Fragment,null,p.default.createElement(m.default,{length:n.sidewaysScroll?t.length:i,scrollParentGetter:e.reactListScrollParentGetter(),itemRenderer:d,threshold:n.sidewaysScroll?600:1200,type:"uniform",axis:n.sidewaysScroll?"x":"y"}),p.default.createElement("section",{className:"GalleryView__spacer",style:{height:n.sidewaysScroll?2:64}})):null!==h?p.default.createElement(b.EmptyView,{message:h}):null)),e.renderFabs(),e.renderActionButtonPortal())},e}return(0,o.default)(a,[{key:"renderRow",value:function(e,t,a){var n,r=e[a],i=this.props.table,o=r[i.tableSchema.keyAttribute().name()],l=i.lookupTableRow(o),s=l&&l.timestamp;return p.default.createElement(v.default,Object.assign({},this.props,{appModel:this.appModel,timestamp:s,layout:t,rowValues:r,highlighted:o===this.props.rowId||(null===(n=this.props.interactiveRowIds)||void 0===n?void 0:n[i.rootName()])===o,onRowLongPress:this.handleRowLongPress.bind(this),onRowTap:this.handleRowTap.bind(this),isSelected:this.rowIsSelected(o),selectionMode:this.inSelectionMode(),key:a,index:a}))}},{key:"renderLine",value:function(e,t,a){var n=[],i=a*t.imagesPerLine,o=i+t.imagesPerLine;o=Math.min(o,e.length);for(var l=i;l<o;l++)n.push(this.renderRow(e,t,l));return p.default.createElement("div",{className:"GalleryView__line","data-testid":r.Line,key:a},n)}},{key:"render",value:function(){if(!this.shouldShow())return null;if(this.appModel.inRollout("asyncQuery"))return(0,s.default)((0,c.default)(a.prototype),"render",this).call(this);if(!this.props.tableSchema||!this.props.table)return p.default.createElement("div",null);var e=new y.default(this.appModel,this.props.tableSchema,void 0,void 0,void 0,void 0,{viewStateKey:this.viewStateKey}),t={searchQuery:this.props.searchQuery,sortRules:[],limit:this.props.rowLimit,filterExpr:this.props.filterExpr,filterDefaults:this.props.filterDefaults,transaction:this.pendingTransaction};this.props.sortBy&&(t.sortRules=t.sortRules.concat(this.props.sortBy));var n=this.props.table.queryRowValues(t,this.appModel,e);return this.renderRows(n)}},{key:"containerHPadding",value:function(){var e;return(null!==(e=this.props.width)&&void 0!==e?e:0)>w.default.widescreenBreakpoint&&!this.props.sidewaysScroll?16:0}},{key:"containerWidth",value:function(){var e;return(null!==(e=(0,s.default)((0,c.default)(a.prototype),"containerWidth",this).call(this))&&void 0!==e?e:0)-2*this.containerHPadding()}}]),a}(h.default);t.default=C},101993:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(238416)),i=n(a(600861)),o=n(a(856690)),l=n(a(689728)),s=n(a(366115)),u=n(a(441588)),d=n(a(861655)),c=n(a(994993)),p=n(a(73808)),f=n(a(667294)),h=n(a(294184)),m=n(a(571524)),v=n(a(190644)),y=n(a(315847)),g=n(a(314247)),w=a(46239),b=n(a(593186)),S=n(a(962553)),T=n(a(888861)),C=n(a(496486)),R=n(a(155345)),E=n(a(368142)),k=n(a(106375)),I=a(814394),A=n(a(303055)),D=n(a(454852)),M=n(a(385857)),x=n(a(21870)),N=a(318927),O=a(557310),_=a(166089),B=a(664583);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var L,V,F={opacity:.75},H=function(e){return e.filter((function(e){return v.default.isValidLatLng(e.Latitude,e.Longitude)}))},W=function(e){(0,d.default)(a,e);var t=P(a);function a(e){var n;return(0,o.default)(this,a),(n=t.call(this,e)).updateLayout=function(){var e=(n.props.width||$(window).width())<=512;n.state.compactView!==e&&n.setState({compactView:e})},n.state=n.initialState(e),n.mapPaneRef=function(e){n.mapPane=e},n.handleRowTap=n.handleRowTap.bind((0,s.default)(n)),n.placePinsConfirm=n.placePinsConfirm.bind((0,s.default)(n)),n.placePinsCancel=n.placePinsCancel.bind((0,s.default)(n)),n.placePinsStart=n.placePinsStart.bind((0,s.default)(n)),n.newRowHandler=n.newRowHandler.bind((0,s.default)(n)),n.closeDetailHandler=n.closeDetailHandler.bind((0,s.default)(n)),n.onPendingPinClick=n.onPendingPinClick.bind((0,s.default)(n)),n.onPinClick=n.onPinClick.bind((0,s.default)(n)),n.onMapClick=n.onMapClick.bind((0,s.default)(n)),n.onMapDragEnd=n.onMapDragEnd.bind((0,s.default)(n)),n.onMapTypeChanged=n.onMapTypeChanged.bind((0,s.default)(n)),n.onMapZoomChanged=n.onMapZoomChanged.bind((0,s.default)(n)),n.onPinDragStart=n.onPinDragStart.bind((0,s.default)(n)),n.onPinDragEnd=n.onPinDragEnd.bind((0,s.default)(n)),n}return(0,l.default)(a,[{key:"initialState",value:function(e){var t;this.hideInfoWindow();var a=(e=e||this.props).width||$(window).width(),n=g.default.normalizeMapType(e.mapType),r=null;return(null===(t=this.appModel)||void 0===t?void 0:t.inRollout("multiplePinDrop"))&&(r=[]),{mapType:n,pendingPins:r,compactView:a<=512,placingNewPin:null,newPinLatLng:null,newPinAddress:null,rowId:e.rowId||null,lastSelectedRowId:e.rowId||null,zoom:null,centerLat:null,centerLng:null,selectedTable:null,selectedColumn:null,infoWindow:null}}},{key:"componentDidMount",value:function(){(0,u.default)((0,p.default)(a.prototype),"componentDidMount",this).call(this),this.updateLayout(),window.addEventListener("resize",this.updateLayout);var e=this.customMapType();e&&!e.isReady()&&e.whenReady(this.updateLayout)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateLayout)}},{key:"componentDidUpdate",value:function(e,t){(0,u.default)((0,p.default)(a.prototype),"componentDidUpdate",this).call(this,e,t);var n=this.customMapType();n&&!n.isReady()&&n.whenReady(this.updateLayout)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,a,n=this.state.rowId,r=this.state.zoom,i=this.state.centerLat,o=this.state.centerLng,l=this.state.selectedTable,s=this.state.selectedColumn,u=this.state.lastSelectedRowId,d=this.state.mapType||e.mapType;e.viewAppState?(n=e.rowId,r=e.zoom,i=e.centerLat,o=e.centerLng,l=e.selectedTable,s=e.selectedColumn,d=e.mapType):e.rowId!==this.props.rowId&&(null!=(n=e.rowId)&&(l=e.selectedTable||l,s=e.selectedColumn||s,i=null,o=null,l?u=n:n=null),null==n&&(l=null,s=null)),(!this.props.table||e.table&&e.table.name()===this.props.table.name())&&e.mapColumn===this.props.mapColumn||this.placePinsCancel(),(null===(t=this.props.filterExpr)||void 0===t?void 0:t.hash)!==(null===(a=e.filterExpr)||void 0===a?void 0:a.hash)&&(u=void 0),this.setState({showMap:e.showMap,mapType:g.default.normalizeMapType(d),rowId:n,lastSelectedRowId:u,zoom:r,centerLat:i,centerLng:o,selectedTable:l,selectedColumn:s})}},{key:"mapColumnAttribute",value:function(){var e=this.props;return e.tableSchema&&e.mapColumn?e.tableSchema.findAttributeByName(e.mapColumn):null}},{key:"map",get:function(){return C.default.get(this,"mapPane.mapInstance.map")}},{key:"activeTable",value:function(){var e=this.props.table,t=this.state.selectedTable,a=e;return e&&t&&t!==e.name()&&(a=this.appModel.findTableCollection(t,!0).table),a}},{key:"activeAttribute",value:function(){var e=this.props.mapColumn,t=this.state.selectedColumn,a=this.activeTable(),n=e;return t&&t!==e&&(n=t),a&&a.tableSchema?a.tableSchema.findAttributeByName(n):null}},{key:"selectedRowValues",value:function(e,t){var a;return e&&null!=t&&(a=e.findRow(t)),a}},{key:"dataContext",value:function(){var e,t,a=this.props,n=a.filterExpr,r=a.filterDefaults,i=a.searchQuery,o=this.appModel,l=this.state,s=l.rowId,u=l.lastSelectedRowId,d=this.activeTable(),c=d&&d.tableSchema,p=c&&c.name(),f=this._dataContext||(null===(e=this.props.dataContext)||void 0===e?void 0:e.augmentWithViewContext(this.viewStateKey));(!f||c&&f.schemaName()!==p||(null===(t=this._dataContext)||void 0===t?void 0:t.appModel)!==o)&&(f=this._dataContext=new M.default(o,c,void 0,void 0,void 0,void 0,{viewStateKey:this.viewStateKey}));var h=null;if(s)h=this.selectedRowValues(d,s);else if(this.isCustomMap()){var m=this.activeAttribute().baseImageEvalTree(),v=m&&m.columnsReferenced();if(v&&v.length)if((h=this.selectedRowValues(d,u))||(h=d.queryRowValues({filterExpr:n,filterDefaults:r,searchQuery:i,limit:1,transaction:this.pendingTransaction},o,f)[0]),!h)h={},C.default.concat(T.default.getFilterDefaults(this.props.filterExpr),T.default.getFilterDefaults(d.sliceFilterEvalTree())).forEach((function(e){var t=e.ColumnName,a=e.ColumnValue;h[t]=a}))}return h&&c&&p===f.schemaName()&&f.replaceRowData(h),f}},{key:"baseImage",value:function(){var e=this.activeAttribute();if(this.isCustomMap()&&e){var t=this.dataContext(),a=e.baseImage(t);a&&(this._baseImage=a)}else e&&(this._baseImage=null);return this._baseImage}},{key:"isCustomMap",value:function(){var e=this.activeAttribute();return e&&"XY"===e.basestType()}},{key:"customMapType",value:function(){var e=this.baseImage();return e?w.ImageMapType.getForUrl(e):null}},{key:"fixedMode",value:function(){return"fixed"===this.props.mapMode}},{key:"fullMode",value:function(){return"full"===this.props.mapMode}},{key:"compactView",value:function(){return this.state.compactView}},{key:"showDetailView",value:function(){return this.fullMode()&&null!=this.state.rowId}},{key:"showAdd",value:function(){return this.fullMode()&&!this.showDetailView()&&this.props.table&&this.props.table.allowsAdd()}},{key:"showEdit",value:function(e){return this.fullMode()&&this.showDetailView()&&e&&e.allowsUpdate()}},{key:"showDelete",value:function(e){return this.fullMode()&&this.showDetailView()&&e&&e.allowsDelete()}},{key:"getNewState",value:function(e){return O.ReactRootUIConfig.isReactRoot()?{Root:"google-map",ControlName:e?e.ControlName:null,MapUIState:e,TableName:null==e?void 0:e.TableName,RowKey:null==e?void 0:e.RowKey}:_.AppGlobals.AppState.GoogleMapStateDef.CreateRootState(e)}},{key:"showAddPin",value:function(){if(!this.showAdd())return!1;if(!this.props.tableSchema||!this.props.mapColumn)return!1;var e=this.mapColumnAttribute();return!(!e||e.appFormula()||e.hasFormula()||e.isReadOnly())}},{key:"onPendingPinClick",value:function(e,t,a,n,r){var o=(0,i.default)(this.state.pendingPins);o.splice(r,1),this.hideInfoWindow(),this.setState({pendingPins:o,infoWindow:null})}},{key:"onPinClick",value:function(e,t){if(!this.placingNewPins()){var a,n=this.props,r=n.viewAppState,i=t.appsheetItem,o=i.TableName,l=i.MapCol,s=this.state.selectedColumn,u=this.appModel.inRollout("interactiveMapsFix");if(r)(a=this.getNewState({TableName:n.table.name(),MapCol:n.mapColumn,SecondaryTable:n.secondaryTableName,SecondaryColumn:n.secondaryColumn,RowKey:t.appsheetItem.Id,SelectedTable:o,SelectedColumn:l,MapType:this.state.mapType,CurrentLat:t.position.lat(),CurrentLng:t.position.lng(),FilterExpr:n.filterExpr,DefaultValues:n.filterDefaults,Zoom:t.map.getZoom(),ControlName:n.controlName,UserDefinedFilters:r.UserDefinedFilters,UserDefinedFilterExpression:r.UserDefinedFilterExpression})).SearchTerm=this.currentUIState.SearchTerm,this.setCurrentUIState(a);else if(this.fixedMode())(a=this.getNewState({TableName:n.table.name(),MapCol:n.mapColumn,SecondaryTable:n.secondaryTableName,SecondaryColumn:n.secondaryColumn,RowKey:t.appsheetItem.Id,SelectedTable:o,SelectedColumn:l,MapType:this.state.mapType,CurrentLat:t.position.lat(),CurrentLng:t.position.lng(),FilterExpr:n.filterExpr,DefaultValues:n.filterDefaults,Zoom:t.map.getZoom()})).SearchTerm=this.currentUIState.SearchTerm,this.pushState(a,!0);else{if(u&&n.onRowOpened&&n.interactiveRowIds){var d=this.appModel.findTableCollection(o,!0).rootTable,c=this.appModel.findTableCollection(this.state.selectedTable).rootTable;if(c&&c!==d){var p=this.state.rowId;n.interactiveRowIds[c.name()]===p&&n.onRowOpened(c.name(),p)}var f=i.Id;n.interactiveRowIds[d.name()]!==f&&n.onRowOpened(d.name(),f)}this.setState({rowId:t.appsheetItem.Id,selectedTable:o,selectedColumn:l,zoom:t.map.getZoom(),centerLat:t.position.lat(),centerLng:t.position.lng()})}this.placePinsCancel(),u||n.onRowOpened&&n.table&&n.table.name()===o&&(this.state.rowId===i.Id&&s&&s!==i.MapCol||n.onRowOpened(n.table.rootName(),t.appsheetItem.Id)),V=!0,setTimeout((function(){V=!1}),200)}}},{key:"onMapClick",value:function(e,t){var a;if(!V)if(this.placingNewPins())this.allowMultiRowAdd()&&this.placePin(e.latLng.lat(),e.latLng.lng());else{m.default.IsMobileBrowser()&&document.activeElement.blur();var n,r=this.props,i=r.viewAppState;if(i)null!=(null===(a=this.currentUIState.MapUIState)||void 0===a?void 0:a.RowKey)&&((n=this.getNewState({TableName:i.TableName,RowKey:null,MapCol:r.mapColumn,MapType:this.state.mapType,CurrentLat:g.default.getCenterLat(t),CurrentLng:g.default.getCenterLng(t),FilterExpr:r.filterExpr,DefaultValues:r.filterDefaults,Zoom:t.getZoom(),ControlName:r.controlName,UserDefinedFilters:i.UserDefinedFilters,UserDefinedFilterExpression:i.UserDefinedFilterExpression})).SearchTerm=this.currentUIState.SearchTerm,this.setCurrentUIState(n));else if(this.fixedMode())n=this.getNewState({TableName:r.table.name(),RowKey:null,MapCol:r.mapColumn,MapType:this.state.mapType,CurrentLat:g.default.getCenterLat(t),CurrentLng:g.default.getCenterLng(t),FilterExpr:r.filterExpr,DefaultValues:r.filterDefaults,Zoom:t.getZoom()}),this.pushState(n,!0);else{var o=this.state,l=o.rowId,s=o.selectedTable,u=o.selectedColumn;if(null!=l||null!=s||null!=u)if(this.setState({rowId:null,selectedTable:null,selectedColumn:null,zoom:t.getZoom(),centerLat:g.default.getCenterLat(t),centerLng:g.default.getCenterLng(t)}),this.appModel.inRollout("interactiveMapsFix")){var d=this.props,c=d.onRowOpened,p=d.interactiveRowIds;if(c&&p){var f=this.appModel.findTableCollection(s,!0).rootTable,h=p[f.name()];null!=h&&r.onRowOpened&&r.onRowOpened(f.name(),h)}}else r.onRowOpened&&r.onRowOpened(r.table.rootName(),null)}}}},{key:"onMapZoomChanged",value:function(e,t){var a=this;clearTimeout(L),L=setTimeout((function(){a.updateInfoWindow(t.getZoom());var e=a.props,n=e.viewAppState;if(n){var r=a.currentUIState;if("google-map"===r.Root&&C.default.isEqual(e.viewAppState,r.MapUIState)){var i=a.getNewState({TableName:n.TableName,RowKey:n.RowKey||null,MapCol:e.mapColumn,MapType:a.state.mapType,CurrentLat:g.default.getCenterLat(t),CurrentLng:g.default.getCenterLng(t),SelectedTable:n.SelectedTable,SelectedColumn:n.SelectedColumn,FilterExpr:e.filterExpr,DefaultValues:e.filterDefaults,Zoom:t.getZoom(),UserDefinedFilters:n.UserDefinedFilters,UserDefinedFilterExpression:n.UserDefinedFilterExpression});i.SearchTerm=r.SearchTerm,i.ControlName=e.controlName,a.setCurrentUIState(i)}}else a.setState({zoom:t.getZoom(),centerLat:g.default.getCenterLat(t),centerLng:g.default.getCenterLng(t)})}),1e3),this.hideInfoWindow()}},{key:"onMapTypeChanged",value:function(e,t){var a,n=t.mapTypeId,r=this.props,i=r.viewAppState;i?((a=this.getNewState({TableName:i.TableName,RowKey:i.RowKey||null,MapCol:r.mapColumn,MapType:n,CurrentLat:i.CurrentLat,CurrentLng:i.CurrentLng,FilterExpr:r.filterExpr,DefaultValues:r.filterDefaults,Zoom:i.Zoom,ControlName:r.controlName,UserDefinedFilters:i.UserDefinedFilters,UserDefinedFilterExpression:i.UserDefinedFilterExpression})).SearchTerm=this.currentUIState.SearchTerm,this.setCurrentUIState(a)):this.state.mapType!==n&&this.setState({mapType:n})}},{key:"closeDetailHandler",value:function(){var e=this.props,t=e.viewAppState;if(t){var a=t.CurrentLat,n=t.CurrentLng,r=this.getNewState({TableName:t.TableName,RowKey:null,MapCol:e.mapColumn,MapType:this.state.mapType,CurrentLat:a,CurrentLng:n,FilterExpr:e.filterExpr,DefaultValues:e.filterDefaults,Zoom:t.Zoom,UserDefinedFilters:t.UserDefinedFilters,UserDefinedFilterExpression:t.UserDefinedFilterExpression});r.SearchTerm=this.currentUIState.SearchTerm,r.ControlName=e.controlName,this.setCurrentUIState(r)}else{var i=this.state.selectedTable;if(this.setState({rowId:null,selectedTable:null,selectedColumn:null}),this.appModel.inRollout("interactiveMapsFix")){var o=this.props,l=o.onRowOpened,s=o.interactiveRowIds;if(l&&s){var u=this.appModel.findTableCollection(i,!0).rootTable,d=s[u.name()];null!=d&&e.onRowOpened&&e.onRowOpened(u.name(),d)}}else e.onRowOpened&&e.onRowOpened(e.table.rootName(),null)}}},{key:"placePin",value:function(e,t,a){var n=this;if(null!=e&&null!=t){var r=this.mapColumnAttribute();if(r){var o={lat:e,lng:t};r.basestType()===this.appModel.ADDRESS_TYPE&&y.default.lookupAddress(e,t,{interactive:!0}).then((function(a){var r=a.results;if(r&&r.length){n.hideInfoWindow(),o.address=r[0].formattedAddress;var i=n.newInfoWindow(o.address,e,t);n.setState({infoWindow:i})}})).catch(b.default.warnToDevConsole);var l=this.state.pendingPins||[],s=[].concat((0,i.default)(l),[o]);null!=a&&s.splice(a,1),this.setState({pendingPins:s})}}}},{key:"placePinsConfirm",value:function(){if(this.state.placingNewPin)return this.hideInfoWindow(),void this.newRowHandler();var e=this.appModel||_.AppGlobals.AppModel,t=this.props,a=t.filterDefaults,n=t.filterExpr,i=[],o=!0,l=M.default.getDefaultValues(a,n),s=this.mapColumnAttribute();if(s){o=!1;var u=s.name();this.state.pendingPins.forEach((function(t){var a=t.lat,n=t.lng,d=t.address;switch(s.basestType()){case e.ADDRESS_TYPE:var c;if(d)i.push(C.default.extend({},l,(c={},(0,r.default)(c,u,d),(0,r.default)(c,"_geo_"+u,a+", "+n),(0,r.default)(c,"_latitude"+u,a),(0,r.default)(c,"_longitude"+u,n),c)));else o=!0;break;case e.LATLONG_TYPE:i.push(C.default.extend({},l,(0,r.default)({},u,a+", "+n)));break;case e.XY_TYPE:i.push(C.default.extend({},l,(0,r.default)({},u,w.ImageMapType.fromLatLngToXYString(a,n))))}}))}o||(this.pushView("form",!1,{TableName:this.props.table.name(),DefaultValues:i}),this.placePinsCancel())}},{key:"placePinsCancel",value:function(){this.hideInfoWindow(),this.state.pendingPins?this.setState({pendingPins:[],infoWindow:null}):this.setState({placingNewPin:null,newPinLatLng:null,newPinAddress:null,infoWindow:null})}},{key:"placePinsStart",value:function(){var e;if(null===(e=this.appModel)||void 0===e?void 0:e.inRollout("multiplePinDrop")){var t=this.state.centerLat,a=this.state.centerLng;null!=t&&null!=a||null==this.map||(t=g.default.getCenterLat(this.map),a=g.default.getCenterLng(this.map)),this.placePin(t,a)}else this.setState({placingNewPin:!0})}},{key:"getDraggablePinEventHandlers",value:function(){return this.placingNewPins()?{dragend:this.onPinDragEnd,dragstart:this.onPinDragStart,click:this.onPendingPinClick}:this.state.placingNewPin?{dragend:this.onPinDragEnd,dragstart:this.onPinDragStart}:null}},{key:"onPinDragStart",value:function(){this.hideInfoWindow()}},{key:"onPinDragEnd",value:function(e,t,a,n,r){var i=this,o=this.appModel,l={};if(this.props.mapColumn){var s,u,d,c=this.mapColumnAttribute(),p=e.latLng.lat(),f=e.latLng.lng();if(c)if(this.state.pendingPins)this.placePin(p,f,r);else switch(c.basestType()){case o.ADDRESS_TYPE:y.default.lookupAddress(p,f,{interactive:!0}).then((function(e){var t=e.results;t&&t.length&&(d=t[0].formattedAddress,i.hideInfoWindow(),u=i.newInfoWindow(d,p,f),i.setState({newPinLatLng:p+", "+f,newPinAddress:t[0],infoWindow:u}))})).catch(b.default.warnToDevConsole);break;case o.LATLONG_TYPE:case o.XY_TYPE:this.hideInfoWindow(),l={newPinLatLng:s=p+", "+f,newPinAddress:null,infoWindow:u=this.newInfoWindow(s,p,f)}}}this.onMapDragEnd(e,a,n,l)}},{key:"onMapDragEnd",value:function(e,t,a,n){var r=this.props,i=r.viewAppState;if(n=n&&(n.pendingPins||n.newPinLatLng)?n:null,i){var o=this.getNewState({TableName:i.TableName,RowKey:i.RowKey||null,MapCol:r.mapColumn,MapType:this.state.mapType,CurrentLat:g.default.getCenterLat(t),CurrentLng:g.default.getCenterLng(t),SelectedTable:i.SelectedTable,SelectedColumn:i.SelectedColumn,FilterExpr:r.filterExpr,DefaultValues:r.filterDefaults,Zoom:t.getZoom(),ControlName:r.controlName,UserDefinedFilters:i.UserDefinedFilters,UserDefinedFilterExpression:i.UserDefinedFilterExpression});o.SearchTerm=this.currentUIState.SearchTerm,this.setCurrentUIState(o),n&&this.setState(n)}else this.setState(C.default.extend(n,{zoom:t.getZoom(),centerLat:g.default.getCenterLat(t),centerLng:g.default.getCenterLng(t)}))}},{key:"hideInfoWindow",value:function(){var e=this.state&&this.state.infoWindow;e&&e.close()}},{key:"infoWindowOffset",value:function(e){var t=this.state.pendingPins?.0015:.0025;return 15!==e&&(t=t/g.default.zoomScaling[15]*g.default.zoomScaling[e]),t}},{key:"newInfoWindow",value:function(e,t,a){var n=this.map,r=g.default.api,i=n&&n.getZoom();if(!this.isCustomMap()&&i&&i<21){var o=new r.maps.InfoWindow({content:'<div class="AddressInfoWindow">'+e+"</div>",maxWidth:250,disableAutoPan:!0});return o.currentOffset=this.infoWindowOffset(i),o.setPosition(new r.maps.LatLng({lat:t+o.currentOffset,lng:a})),o.open(n),o}return null}},{key:"updateInfoWindow",value:function(e){var t=this.state.infoWindow;if(t&&t.position&&this.map){var a=t.position.lat(),n=t.position.lng(),r=t.currentOffset;t.currentOffset=this.infoWindowOffset(e),t.setPosition({lat:a-r+t.currentOffset,lng:n}),t.open(this.map)}}},{key:"placingNewPins",value:function(){return this.state.pendingPins&&this.state.pendingPins.length}},{key:"allowMultiRowAdd",value:function(){return this.props.table.hasUniqueComputedKey()}},{key:"newRowHandler",value:function(){var e=this.appModel||_.AppGlobals.AppModel,t=this.props.mapColumn,a=this.props,n=a.filterDefaults,r=a.filterExpr,i=M.default.getDefaultValues(n,r)||{};if(t){var o=this.mapColumnAttribute(),l=this.state.newPinAddress,s=this.state.newPinLatLng,u=s?s.split(", "):[];if(2===u.length&&o)switch(o.basestType()){case e.ADDRESS_TYPE:l&&(i[t]=l.formattedAddress,i["_geo_"+t]=s,i["_latitude"+t]=u[0],i["_longitude"+t]=u[1]);break;case e.LATLONG_TYPE:i[t]=s;break;case e.XY_TYPE:i[t]=w.ImageMapType.fromLatLngToXYString(u[0],u[1])}}this.pushView("form",!1,{TableName:this.props.table.name(),DefaultValues:i}),this.placePinsCancel()}},{key:"getDirectionsUrl",value:function(e,t){var a="";if(null!=e&&!this.isCustomMap()){var n="";if(!m.default.IsMobileBrowser()&&null!=v.default.lastPosition){var r=v.default.lastPosition.coords,i=r.latitude,o=r.longitude;n="".concat(i,",").concat(o)}var l="";null!=e.Latitude&&null!=e.Longitude?l="".concat(e.Latitude,",").concat(e.Longitude):t&&(l=encodeURIComponent(t));var s="saddr="+n+"&daddr="+l;a=m.default.IsIOSBrowser()||m.default.InIOSWebView()?"comgooglemapsurl://maps?"+s:"http://maps.google.com/maps?"+s}return a}},{key:"makeAddRowControl",value:function(e){var t,a=this;if(this.state.placingNewPin||this.placingNewPins())t=f.default.createElement("div",{className:"GoogleMapView__add-row-control"},f.default.createElement(N.Fab,{className:"add-row-cancel",onClick:this.placePinsCancel,title:"Cancel"},f.default.createElement("i",{className:"fa fa-remove"})),this.state.newPinLatLng||this.placingNewPins()?f.default.createElement(N.Fab,{className:"add-row-confirm",onClick:this.placePinsConfirm,title:"Confirm",navigationDelay:!0},f.default.createElement("i",{className:"fa fa-check"})):null);else{var n,r=this.props,i=r.table,o=r.filterDefaults,l=r.filterExpr,s=this.appModel;if(!O.ReactRootUIConfig.isInDesktopExperience())if(i&&s&&e.hasSystemAddActions()){var u=(e.actionsForTable(i.name(),s,void 0,this.dataContext())||[]).filter((function(e){return"ADD_RECORD"===e.type()&&e.isAutoCreated()}))[0];if(u&&u.prominence()===D.default.DISPLAY_OVERLAY){n=f.default.createElement(N.Fab,{className:"add-row-start",onClick:function(){var e=M.default.getDefaultValues(o,l);(0,B.runAppAction)(u,{appModel:s,sourceLocationName:"Map Overlay",sourceTable:i,defaultValues:e},void 0,a.viewStateKey)},title:u.displayName(s,i.tableSchema),navigationDelay:!0},f.default.createElement("i",{className:"fa "+u.icon()}))}}else n=f.default.createElement(N.Fab,{className:"add-row-start",onClick:this.newRowHandler,title:"Add",navigationDelay:!0},f.default.createElement("i",{className:"fa fa-plus"}));t=f.default.createElement("div",{className:"GoogleMapView__add-row-control"},n,this.showAddPin()?f.default.createElement(N.Fab,{className:(0,h.default)({"place-pin-start":!O.ReactRootUIConfig.isInDesktopExperience()}),onClick:this.placePinsStart,title:"Place pin"},f.default.createElement("i",{className:"fa fa-map-marker"})):null)}return t}},{key:"renderSlideshowPage",value:function(e,t){var a=_.AppGlobals.AppModel.FindControlsForTable(t.name(),"detail",!1),n=null;a.length&&(n=a[0]);var r,i={};if(n){var o=_.AppGlobals.AppModel.FindTable(t.name());i=_.AppGlobals.AppModel.NavStateForView(n,o?o.Name:void 0),r=C.default.get(n,"ViewDefinition.QuickEditColumns")}return f.default.createElement(I.SlideshowPage,{isInline:!0,quickEditColumns:r,appModel:this.appModel,table:t,tableSchema:t.tableSchema,rowId:this.state.rowId,rowValues:e,width:400,height:this.props.height-40,fixedHeightMode:!0,slideshowDisplayMode:i.SlideshowDisplayMode,headerColumns:i.headerColumns,imageDisplayType:i.ImageDisplayType,mainSlideshowImageColumn:i.mainSlideshowImageColumn,columnOrder:i.ColumnOrder,maxNestedRows:i.MaxNestedRows,scrollbarWidth:this.scrollbarWidth.bind(this)})}},{key:"rowDetailHeight",value:function(){return A.default.computeHeight(this.props)}},{key:"makeDetailView",value:function(e,t){var a=this.appModel,n=t&&t.tableSchema;if(!e||!t||!n)return null;var r,i=this.selectedRowValues(t,e.Id);if(null==i)return null;var o=i[e.MapCol];if(this.compactView()){var l,s=_.AppGlobals.AppModel.FindControlsForTable(t.name(),"deck",!1),u=null;s.length&&(u=s[0]);var d={};u&&(d=_.AppGlobals.AppModel.NavStateForView(u,t.name()));var c=this.handleRowTap;l=f.default.createElement(A.default,Object.assign({},this.props,{appModel:this.appModel,table:t,tableSchema:n,rowValues:i,onRowTap:c,closeHandler:this.closeDetailHandler,directionsUrl:this.getDirectionsUrl(e,o),actionColumns:d.actionColumns,actionBarEntries:d.actionBarEntries,deckSummaryColumn:d.deckSummaryColumn,imageDisplayType:d.ImageDisplayType,mainDeckImageColumn:d.mainDeckImageColumn,primaryDeckHeaderColumn:d.primaryDeckHeaderColumn,secondaryDeckHeaderColumn:d.secondaryDeckHeaderColumn,showActionBar:d.showActionBar}));var p={bottom:0};this.showDetailView()||(p.transform="translate(0, 100%)",p.MsTransform=p.transform,p.WebkitTransform=p.transform),r=f.default.createElement("div",{className:"GoogleMapView__detail",style:p},l)}else{var h=this.renderSlideshowPage(i,t),m=a.appTemplate.actions().actionsForTable(t.name(),a,void 0,this.dataContext()),v=[],y=this.getDirectionsUrl(e,o);y&&v.push(new D.default({ActionType:"NAVIGATE_URL",Icon:"fa-car",IsValid:!0,Name:"Get driving directions",Table:t.name(),ValueEvaluatable:T.default.createConcatenate(T.default.createConstantValue(y,"Url")).model}));var g=this.dataContext();if(g){if(this.showDelete(t)){var w=m.filter((function(e){return"DELETE_RECORD"===e.type()&&e.prominence()!==D.default.DO_NOT_DISPLAY&&e.isValidForRow(i,g)})),b=w.filter((function(e){return e.isAutoCreated()})).concat(w)[0];b&&v.push(b)}if(this.showEdit(t)){var S=m.filter((function(e){return"EDIT_RECORD"===e.type()&&e.isAutoCreated()&&e.prominence()!==D.default.DO_NOT_DISPLAY&&e.prominence()!==D.default.DISPLAY_PROMINENTLY&&e.isValidForRow(i,g)}))[0];S&&v.push(S)}}var C=v.map((function(n){return f.default.createElement("li",{key:n.name()},f.default.createElement("div",{className:"button-container"},f.default.createElement(k.default,{appModel:a,action:n,rowId:e.Id,sourceLocationName:"Map Sidebar",sourceTable:t,displayMode:"small"})))})),R=O.ReactRootUIConfig.isReactRoot()?{left:"".concat(this.props.width-400,"px")}:{};r=f.default.createElement("div",{className:"GoogleMapView__sidebar",style:R},f.default.createElement("div",{className:"GoogleMapView__sidebar-header",style:{height:40}},f.default.createElement("ul",{className:"group-left"},C),f.default.createElement("ul",{className:"group-right"},f.default.createElement("li",null,f.default.createElement("span",{className:"button-container",onClick:this.closeDetailHandler},f.default.createElement("i",{className:"button fa fal fa-close"}))))),h)}return r}},{key:"render",value:function(){var e;if(!this.shouldShow())return null;var t=this.props,a=this.appModel,n=this.props,r=n.table,i=n.mapColumn,o=n.filterExpr,l=n.filterDefaults,s=n.searchQuery,u=this.state,d=u.rowId,c=u.centerLat,p=u.centerLng,m=u.selectedTable,v=u.selectedColumn,y=u.showMap,w=this.rowDetailHeight(),b=this.activeTable(),T=this.activeAttribute(),R=this.baseImage(),k=this.customMapType();if(this.isCustomMap()&&!R)return null;var I,A=g.default.getMapItems(i,d,r,a,o,l,s,R,this.pendingTransaction),D=H(A.all);b===r&&T&&T.name()===i&&(I=A.selected);var M=[],N={};if(t.isInline||(N.top=x.default.headerHeight+1,N.bottom=x.default.footerHeight),t.secondaryTableName&&t.secondaryColumn){var _,B,P={tableName:t.secondaryTableName,mapColumn:t.secondaryColumn};(_=r&&t.secondaryTableName===r.name()?r:S.default.findByName(t.secondaryTableName,a).table)&&(B=g.default.getMapItems(t.secondaryColumn,d,_,a,o,l,s,R,this.pendingTransaction)),P.mapItems=H(null!==(e=null==B?void 0:B.all)&&void 0!==e?e:[]),t.secondaryTableName===m&&t.secondaryColumn===v&&(I=null==B?void 0:B.selected),M.push(P)}t.viewAppState||(t.width&&(N.width=t.width,N.height=t.height||250),this.fixedMode()&&(N.cursor="pointer")),O.ReactRootUIConfig.isReactRoot()&&(N.height=t.height||250);var L={click:this.onPinClick},V={click:this.onMapClick,dragend:this.onMapDragEnd,maptypeid_changed:this.onMapTypeChanged,zoom_changed:this.onMapZoomChanged},W={};this.fixedMode()&&(W={disableDefaultUI:!0,draggable:!1,scrollwheel:!1,zoomControl:!0,disableDoubleClickZoom:!0,gestureHandling:"greedy"}),this.fullMode()&&(W={disableDefaultUI:!!this.showDetailView(),draggable:!0,scrollwheel:!0,disableDoubleClickZoom:!1,gestureHandling:"greedy"}),k&&(W=C.default.extend(W,k.mapOptions()));var U,j=this.appModel.appTemplate.actions();this.showAdd()&&(U=this.makeAddRowControl(j));var z=null;this.showDetailView()&&null!=I&&(z=this.makeDetailView(I,b));var G=this.showDetailView()&&this.compactView()?"translate(0, -"+Math.floor(w/2)+"px)":null,K=O.ReactRootUIConfig.isReactRoot()?{}:{transform:G,MsTransform:G,WebkitTransform:G},Y=!(this.fixedMode()||"None"===t.locationMode),q=C.default.get(this.appModel,"AppTemplate.Presentation.HidePointsOfInterest");y&&!k||(Y=!1);var $=this.state.zoom;null==$&&(k?$=k.defaultZoom({focused:null!=I}):y&&($=15)),this.placingNewPins()&&this.allowMultiRowAdd()&&(W.draggableCursor="crosshair");var Q=this.getView(),X=Q&&Q.definition().MinimumClusterSize||0;return 1===X?X=2:X<1&&(X=1e8),f.default.createElement("div",{style:N,className:(0,h.default)("".concat(this.appModel.rolloutClassNames," BasePrimaryView GoogleMapView"),{ShowDetailView:this.showDetailView(),CompactView:this.compactView(),ReactRootMapPane:O.ReactRootUIConfig.isReactRoot()})},f.default.createElement("div",{className:"GoogleMapView__map-pane",style:K},f.default.createElement(E.default,Object.assign({},this.props,{appModel:this.appModel,ref:this.mapPaneRef,showMap:y,items:D,layers:M,mapOptions:W,mapType:this.state.mapType,customMapType:k,blockLinkToMaps:!!k,locationMode:t.locationMode,minimumClusterSize:X,selectedItem:I,selectedTable:m,selectedColumn:v,zoom:$,centerLat:c,centerLng:p,showCurrentLocation:Y,hidePointsOfInterest:q,draggablePinCoordinates:this.state.pendingPins,draggablePinOptions:F,draggablePinEventHandlers:this.getDraggablePinEventHandlers(),mapEventHandlers:V,pinEventHandlers:L}))),z,U,this.renderActionButtonPortal())}}]),a}(R.default);W.defaultProps={mapMode:"full"};var U=W;t.default=U},488386:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameView=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(155345)),c=a(44617),p=n(a(667294)),f=n(a(150198));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var m=function(e){(0,l.default)(a,e);var t=h(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state||(n.state={}),n}return(0,i.default)(a,[{key:"render",value:function(){var e,t,n,r,i,l,s,d,h,m,v=null===(t=null===(e=this.getView())||void 0===e?void 0:e.definition())||void 0===t?void 0:t.UrlColumn,y=null===(r=null===(n=this.getView())||void 0===n?void 0:n.definition())||void 0===r?void 0:r.AllowScripts,g=null===(l=null===(i=this.getView())||void 0===i?void 0:i.definition())||void 0===l?void 0:l.AllowForms,w=null===(d=null===(s=this.getView())||void 0===s?void 0:s.definition())||void 0===d?void 0:d.AllowSameOrigin;if(this.appModel.inRollout("asyncQuery"))return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this);if(!this.shouldShow())return null;var b,S="".concat(g?"allow-forms":""," ").concat(y?"allow-scripts":""," ").concat(w?"allow-same-origin":"");if(!(null===c.dynamicRollouts||void 0===c.dynamicRollouts?void 0:c.dynamicRollouts.includeByOwnerId("AllowIFrameView")))return p.default.createElement("div",null);var T=this.props,C=T.isInline,R=T.table,E=T.rowId;if(C&&E&&R){var k=R.lookupTableRow(E);b=f.default.toHttpsUrl(f.default.urlValueFromWireFormat(null==k?void 0:k.get(v)).url)}else b=f.default.toHttpsUrl(null===(m=null===(h=this.getView())||void 0===h?void 0:h.definition())||void 0===m?void 0:m.IFrameUrl);return b&&(null===c.dynamicRollouts||void 0===c.dynamicRollouts?void 0:c.dynamicRollouts.includeByOwnerId("AllowIFrameView"))?p.default.createElement("iframe",{src:b,sandbox:S,style:{width:this.props.width,height:this.props.height,border:0}}):p.default.createElement("div",null,"No URL set")}}]),a}(d.default);t.IFrameView=m},179778:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OverlayActionsDataTestids=t.FAB_LIMIT=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(385857)),p=n(a(571524)),f=a(318927),h=a(351101),m=a(300431),v=a(664583);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}t.OverlayActionsDataTestids=r,function(e){e.Fab="overlay-actions-fab"}(r||(t.OverlayActionsDataTestids=r={}));t.FAB_LIMIT=4;var g=function(e){(0,l.default)(a,e);var t=y(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).actionButtonClick=function(e){var t=(0,h.getAppModel)(),a=n.props,r=a.name,i=a.sourceTable,o=a.filterDefaults,l=a.filterExpr,s=a.rowId,u=void 0===s?void 0:s,d=c.default.getDefaultValues(o,l);(0,v.runAppAction)(e,{appModel:t,sourceTable:i,sourceLocationName:r+" Overlay",defaultValues:d,rowId:u},void 0,n.viewStateKey)},n.state={iosZindexHack:!1},n}return(0,o.default)(a,[{key:"componentDidMount",value:function(){var e,t=this;(null===(e=(0,h.getAppModel)())||void 0===e?void 0:e.inRollout("iosActionButtonFix"))&&p.default.InIOSWebView()&&!1===this.state.iosZindexHack&&requestAnimationFrame((function(){t.setState({iosZindexHack:!0})}))}},{key:"render",value:function(){var e,t=this,a=(0,h.getAppModel)(),n=this.props,i=n.actions,o=n.sourceTable,l=n.rowId,s=null===(e=null==o?void 0:o.lookupTableRow(l,this.pendingTransaction))||void 0===e?void 0:e.values;return d.default.createElement("div",{className:"add-row-control"},i.slice(0,4).map((function(e,n){return d.default.createElement(f.Fab,{key:n,"data-testid":r.Fab,"data-vfe-action":e&&e.name(),"data-vfe-interactive":!0,className:"button-position-".concat(n),style:t.state.iosZindexHack?{zIndex:6}:void 0,onClick:function(){return t.actionButtonClick(e)},title:e.displayName(a,null==o?void 0:o.tableSchema,s)},d.default.createElement("i",{className:"fa "+e.icon()}))})))}}]),a}(m.ViewAwareComponent);t.default=g},409022:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(856690)),o=n(a(689728)),l=n(a(366115)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(918698)),p=n(a(496486)),f=n(a(667294)),h=a(695386),m=a(202079),v=n(a(401890)),y=a(56749),g=n(a(372380)),w=n(a(571524)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=C(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(21870)),S=n(a(593186)),T=a(166089);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(C=function(e){return e?a:t})(e)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var E=function(e,t,a,n){var r,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,c.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(i<3?r(o):i>3?r(t,a,o):r(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o},k=(0,y.cacheMuiTheme)((function(){return{palette:{primary:{main:(0,y.themeColor)("actionIcon")},secondary:{light:"#ff6600",main:"#ff4400",contrastText:"#fff"}},typography:{useNextVariants:!0,fontFamily:"inherit"}}})),I=function(e){(0,s.default)(a,e);var t=R(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).lastUpdate=new Date,n.getScrollContainerOrDefault=function(){var e;return n.props.getScrollContainer&&(e=n.props.getScrollContainer()),e||$("#ControlWarehouse").get(0)},n.handleRef=function(e){n.pullToRefreshRef=e},n.handleRefresh=n.handleRefresh.bind((0,l.default)(n)),n}return(0,o.default)(a,[{key:"appModel",get:function(){return this.props.appModel||T.AppGlobals.AppModel}},{key:"disabled",value:function(){return this.props.disabled||!p.default.get(this,"appModel.AppTemplate.Behavior.PullToSync")}},{key:"shouldShow",value:function(){return b.default.syncState.ui===b.SyncUI.Detailed}},{key:"handleRefresh",value:function(){this.disabled()||T.AppGlobals.StateChangeHandler.RefreshAppData({preferredUI:b.SyncUI.Detailed,initiatedBy:"User"})}},{key:"getMinutesSincePreviousUpdate",value:function(){var e=new Date-this.lastUpdate;return Math.round(e%864e5%36e5/6e4)}},{key:"getPreviousUpdateString",value:function(){return 0===this.getMinutesSincePreviousUpdate()?"Last updated less than 1m ago.":"Last updated "+this.getMinutesSincePreviousUpdate()+"m ago."}},{key:"getActivateState",value:function(){return f.default.createElement("div",{className:"Inner"},f.default.createElement("div",{className:"TextAndIcons"},f.default.createElement("i",{className:"far fa-long-arrow-alt-up",style:{fontSize:30,opacity:.4,marginRight:5}}),f.default.createElement("div",{style:{marginLeft:5}},f.default.createElement("div",{className:"Text"},"Release to sync."),f.default.createElement("div",{className:"SmallText"},this.getPreviousUpdateString()))))}},{key:"getFinishedState",value:function(){return f.default.createElement("div",{className:"Inner"})}},{key:"getReleaseState",value:function(){var e,t=this.props.classes;return f.default.createElement("div",{className:"Inner"},f.default.createElement("div",{className:"TextAndIcons"},f.default.createElement("div",{style:{marginLeft:5}},f.default.createElement("div",{className:"Text"},null!==(e=b.default.syncState.message)&&void 0!==e?e:""),f.default.createElement("div",{className:"SmallText"},this.getPreviousUpdateString())),f.default.createElement(v.default,{className:t.button,style:{position:"absolute",right:15},onClick:function(){return b.default.syncState.close()}},f.default.createElement("i",{className:"far fa-times",style:{fontSize:18,opacity:.4}}))))}},{key:"getDeactivateState",value:function(){return f.default.createElement("div",{className:"Inner"},f.default.createElement("div",{className:"TextAndIcons"},f.default.createElement("i",{className:"far fa-long-arrow-alt-down",style:{fontSize:30,opacity:.4,marginRight:5}}),f.default.createElement("div",{style:{marginLeft:5}},f.default.createElement("div",{className:"Text"},"Pull to sync."),f.default.createElement("div",{className:"SmallText"},this.getPreviousUpdateString()))))}},{key:"getErrorStatus",value:function(){if(b.default.syncState.error&&this.shouldShow()){var e=b.default.syncState.error.split("\n");return f.default.createElement("div",{className:"Error"},f.default.createElement("div",{className:"ErrorText",onClick:function(){2===e.length?T.AppGlobals.ViewManager.ShowInfoDialog(e[0],e[1]):T.AppGlobals.ViewManager.ShowInfoDialog("Error syncing data",b.default.syncState.error),b.default.syncState.error=void 0}},f.default.createElement("i",{className:"ErrorIcon far fa-exclamation-triangle"}),e[0]),f.default.createElement("i",{className:"ErrorClose far fa-times",onClick:function(){return b.default.syncState.error=void 0}}))}return f.default.createElement("div",null)}},{key:"isPullingDown",value:function(){return!!p.default.get(this,"pullToRefreshRef.contentRef.style.transform")&&!this.isPulledDown()}},{key:"isPulledDown",value:function(){return b.default.syncState.refreshing&&this.shouldShow()}},{key:"render",value:function(){var e="PullToSyncView",t=this.props,a=t.paused,n=t.children;return this.disabled()?(e+=e+"--disabled",f.default.createElement(h.MuiThemeProvider,{theme:k()},f.default.createElement("div",{className:"PullToSyncView PullToSyncView--disabled"},n))):(S.default.Debug()&&(window.pullToSync=this.handleRefresh.bind(this)),f.default.createElement(h.MuiThemeProvider,{theme:k()},f.default.createElement(g.default,{ref:this.handleRef,refreshing:this.isPulledDown(),disabled:a,onRefresh:this.handleRefresh,damping:500,indicator:{deactivate:this.getDeactivateState(),activate:this.getActivateState(),release:this.getReleaseState(),finish:this.getFinishedState()},getScrollContainer:this.getScrollContainerOrDefault,scrollContainer:this.getScrollContainerOrDefault(),prefixCls:e,useTranslate3d:w.default.Supports3dTransform(),distanceToRefresh:60},f.default.createElement("div",{style:{position:"relative"}},this.getErrorStatus(),n))))}}]),a}(f.default.Component);I=E([m.observer],I);var A=(0,h.withStyles)((function(){return{root:{flexGrow:1},progress:{margin:13},button:{color:"inherit"}}}))(I);t.default=A},791899:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.TableSubscriptionAPI=void 0;var r=n(a(856690)),i=n(a(689728)),o=a(351101),l=new(function(){function e(){(0,r.default)(this,e),this.subscriptions={}}return(0,i.default)(e,[{key:"subscribeToColumn",value:function(e,t,a,n){var r;if(e&&t&&a){var i=(null===(r=(0,o.getAppModel)())||void 0===r?void 0:r.findTableCollection(e))||{},l=i.rootTable,s=i.rootTableSchema,u=null==l?void 0:l.lookupTableRow(t),d=null==s?void 0:s.findAttributeByName(a);if(d&&u){var c={columnValue:u.get(a),row:u,attribute:d,rowState:u.rowState};null==n||n(c)}else null==n||n(null)}else n&&n(null)}},{key:"unsubscribeFromColumn",value:function(e,t,a,n){delete this.subscriptions[e+"/"+t+"/"+a],null==n||n(null)}}]),e}());t.TableSubscriptionAPI=l},324675:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.allowTableEditMode=K,t.default=void 0;var r=n(a(600861)),i=n(a(366115)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(856690)),c=n(a(689728)),p=n(a(918698)),f=n(a(667294)),h=n(a(294184)),m=n(a(496486)),v=n(a(138138)),y=n(a(112963)),g=n(a(59775)),w=a(21870),b=n(a(385857)),S=n(a(155345)),T=n(a(676970)),C=n(a(367418)),R=a(714611),E=n(a(17926)),k=n(a(526382)),I=n(a(409022)),A=n(a(702671)),D=a(202079),M=n(a(571524)),x=n(a(593186)),N=n(a(621673)),O=n(a(329594)),_=n(a(401890)),B=a(56749),P=a(57846),L=a(714067),V=a(166089),F=a(148448),H=a(44617),W=a(557310);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var j=function(e,t,a,n){var r,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,p.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(i<3?r(o):i>3?r(t,a,o):r(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o},z=!0,G=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()};function K(e,t){if(!e||!t)return!1;var a=t.appTemplate.getView(e);if(!a)return!1;var n=a.definition(),r=t.findTableCollection(a.table()).table;return!(!r||!t)&&!(!n.EnableQuickEdit||!r.allowsUpdate(t))}var Y=function(){function e(){(0,d.default)(this,e),this.HORIZONTAL_SCROLLING_THRESHOLD_PX=10,this.reset()}return(0,c.default)(e,[{key:"draggingX",get:function(){return Math.abs(this.deltaX)>this.HORIZONTAL_SCROLLING_THRESHOLD_PX}},{key:"draggingY",get:function(){return Math.abs(this.deltaY)>this.HORIZONTAL_SCROLLING_THRESHOLD_PX}},{key:"onlyDraggingX",get:function(){return this.draggingX&&!this.draggingY}},{key:"onlyDraggingY",get:function(){return this.draggingY&&!this.draggingX}},{key:"reset",value:function(){this.deltaX=0,this.deltaY=0,this.dx=0,this.dy=0,this.lastX=null,this.lastY=null}},{key:"update",value:function(e){var t=this,a=e.touches[0].clientX,n=e.touches[0].clientY,r=null!=t.lastX?a-t.lastX:0,i=null!=t.lastY?n-t.lastY:0;t.dx=r,t.dy=i,t.deltaX+=r,t.deltaY+=i,t.lastX=a,t.lastY=n}}]),e}(),q=function(e){(0,l.default)(a,e);var t=U(a);function a(e){var n;(0,d.default)(this,a),(n=t.call(this,e)).onHorizontalScrollContainerMount=function(e){n.horizontalScrollContainer=e},n.freezeColumnEnabled=function(e,t,a){var r=n.props.width;return n.appModel.inRollout("freezeFirstColumn")&&0===e&&a.length>2&&(t.isKey()||t.isLabel())&&"number"==typeof r&&a[0].columnWidth<r/2},n.state={deltaColumnWidth:[]},n.tableRowComponents=[],n.focusRowByRowIndex=n.focusRowByRowIndex.bind((0,i.default)(n)),n.drilldownAllSelected=n.drilldownAllSelected.bind((0,i.default)(n)),n.handleRowTap=n.handleRowTap.bind((0,i.default)(n)),n.handleRowLongPress=n.handleRowLongPress.bind((0,i.default)(n)),n.handleResize=n.handleResize.bind((0,i.default)(n));var r,o=function(e){n.scrollContainer&&n.state.currentInteraction!==e.name&&(x.default.logToDevConsole("transition from",n.currentInteractionState.name,"to",e.name),n.setState({currentInteraction:e.name}))},l=new Y,s=n.handleRowTap.bind((0,i.default)(n)),u=n.handleRowLongPress.bind((0,i.default)(n)),c={name:"PULLING_DOWN",allowPullToSync:!0,allowSwipe:!1,allowScroll:!1,handleDragEnd:function(){return o(r)}},p=H.dynamicRollouts.includeByOwnerId("ClientIOSScrollingFix");n.manuallyManagedScroll=!p&&M.default.IsIOSBrowser();var f={name:"HORIZONTAL_SCROLLING",allowPullToSync:!1,allowSwipe:!0,allowScroll:p,handleDrag:function(e){n.horizontalScrollContainer&&n.manuallyManagedScroll&&(l.update(e),n.horizontalScrollContainer.scrollLeft-=l.dx)},handleDragEnd:function(){l.reset(),o(r)}};return r={name:"IDLE",allowPullToSync:!0,allowSwipe:!0,allowScroll:!0,handleRowTap:s,handleRowLongPress:u,handleDrag:function(e){l.update(e),n.pullRef&&n.pullRef.isPullingDown()&&l.onlyDraggingY?o(c):l.onlyDraggingX&&o(f)},handleDragEnd:function(){l.reset()}},n.stateMachine={PULLING_DOWN:c,HORIZONTAL_SCROLLING:f,IDLE:r},n.state.currentInteraction=r.name,n.scrollBlocker=function(e){!n.currentInteractionState.allowScroll&&e.cancelable&&(e.preventDefault(),e.stopPropagation())},document.addEventListener("touchmove",n.scrollBlocker,{passive:!1}),n}return(0,c.default)(a,[{key:"currentInteractionState",get:function(){return this.stateMachine[this.state.currentInteraction]||this.stateMachine.IDLE}},{key:"componentDidMount",value:function(){var e=this;(0,o.default)((0,u.default)(a.prototype),"componentDidMount",this).call(this),z&&setTimeout((function(){z=!1,e.setState(e.state)}),100)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){W.ReactRootUIConfig.isReactRoot()||!this.props.quickEditMode||e.quickEditMode||this.getTransaction().started&&this.endTransaction();this.groupByState.updateProps(e)}},{key:"onRowMount",value:function(e,t){this.tableRowComponents[e]=t}},{key:"allowQuickEditMode",value:function(){return K(this.props.controlName,this.appModel)&&!this.groupByState.drilldownMode()}},{key:"allowSelectionMode",value:function(){return(0,o.default)((0,u.default)(a.prototype),"allowSelectionMode",this).call(this)&&!this.groupByState.drilldownMode()&&!this.inMultiRowEditMode()}},{key:"drilldownAllSelected",value:function(){this.groupByState.drillDownAll("fastTable")}},{key:"sortByHeaderSelected",value:function(e){var t=e.name(),a=this.getCurrentSortObject(),n="Ascending";a&&a.Column===t&&(n="Ascending"===a.Order?"Descending":"Ascending"),this.groupByState.sort(t,n)}},{key:"getCurrentSortObject",value:function(){var e,t=this.groupByState.groupBy();if(!t||!t.length){var a=this.groupByState.sortBy();a&&(e=a[0])}return e}},{key:"handleResize",value:function(e,t){var a=Object.assign({},this.state.deltaColumnWidth);a[e]=(a[e]||0)+t.deltaX,this.setState({deltaColumnWidth:a})}},{key:"renderItem",value:function(e,t,a,n,r,i,o){var l,s,u,d=this.currentInteractionState,c=d.handleRowTap,p=d.handleRowLongPress,h=null,m=r.tableSchema;if(a&&((h=m.findAttributeByName(a))||x.default.warnToDevConsole("Could not find groupingAttribute with name",a)),t){var v=t[o];s=v===o,u=(o-v)%2==1}else s=!1,u=o%2==0;if(e[o]===this.groupByState.DRILLDOWN_ALL_SYMBOL())return f.default.createElement(k.default,{text:this.appModel.MapActionName("All"),onSelect:this.drilldownAllSelected,key:"special-all"+n,index:o});if(h&&s){var y=e[o],g=y.length&&y[0][h.name()],w="".concat(g,"_gh_").concat(o,"_").concat(this.groupByState.inlinePosition()),b=this.props.width,S=b||window.innerWidth;"number"==typeof S&&(S-=(M.default.scrollbarWidth()||0)+1);var T=(0,R.isAttributeColumnLayout)(i[0])&&this.freezeColumnEnabled(0,i[0].attribute,i)?{position:"sticky",left:0,zIndex:20,width:S+"px"}:null;return f.default.createElement(E.default,Object.assign({},this.props,{style:Object.assign(Object.assign({},T),{height:(0,R.rowHeight)()}),appModel:this.appModel,rows:y,attribute:h,tableSchema:m,groupAggregate:this.props.groupAggregate,selectionMode:this.inSelectionMode(),index:o,key:w,viewType:"table"}))}var I=e[o],A=I[this.props.tableSchema.keyAttribute().name()],D=r.lookupTableRow(A,this.pendingTransaction),N=D&&D.timestamp,O="".concat(A,"_").concat(o,"_").concat(this.groupByState.inlinePosition());Array.isArray(I)&&x.default.warnToDevConsole("Table View: row passed in is an array! --- should be an object");var _=this.getTransaction(),B=!!(null==_?void 0:_.wasModified(this.props.table.rootName(),A));return f.default.createElement(C.default,Object.assign({},this.props,{view:this.appModel.appTemplate.getView(this.props.controlName),appModel:this.appModel,forceUpdate:N,ref:this.onRowMount.bind(this,o),layout:i,rowValues:I,rowId:A,rowIndex:o,tableSchema:m,minimalView:!n,allowTaps:!n,quickEditMode:this.inMultiRowEditMode(),disableNavigation:this.props.disableNavigation||this.inMultiRowEditMode(),useTransactions:!0,wasModified:B,entryAttributes:m.allAttributes(),groupAggregate:this.props.groupAggregate,groupBy:this.groupByState.groupBy(),filterExpr:this.groupByState.filterExpr(),filterDefaults:this.groupByState.filterDefaults(),highlighted:A===this.props.rowId||(null===(l=this.props.interactiveRowIds)||void 0===l?void 0:l[r.rootName()])===A,translucentMode:this.props.translucentMode,onRowLongPress:p,focusRowByRowIndex:this.focusRowByRowIndex,onRowTap:c,isSelected:this.rowIsSelected(A),isLastToggled:this.rowIsLastToggled(A),selectionMode:this.inSelectionMode(),key:O,index:o,isOdd:u,drilldownColumn:n,isFreezingEnabled:this.freezeColumnEnabled}))}},{key:"focusRowByRowIndex",value:function(e,t){var a=this.tableRowComponents[e];if(a&&a.formEntries){var n=a.formEntries[t.name()];if(n)return void n.focus()}document.activeElement.blur()}},{key:"handleRowTap",value:function(e,t,n){this.groupByState.drilldownMode()?this.groupByState.drillDown(e,t):(0,o.default)((0,u.default)(a.prototype),"handleRowTap",this).call(this,e,n)}},{key:"getPreviousGroupByValue",value:function(e){var t=V.AppGlobals.AppState.getPreviousGroupByColumnName();return t&&e.length>0&&this.groupByState.filterExpr()?e[0][t]:null}},{key:"UNSAFE_componentWillMount",value:function(){this.groupByState=new A.default(this.props,this.viewStateKey)}},{key:"getHeaderWidth",value:function(e){return e?"fit-content":"100%"}},{key:"getTotalColumnsWidth",value:function(e){var t=0;return null==e||e.forEach((function(e){t+=e.columnWidth})),t}},{key:"renderSortArrow",value:function(e){var t=e.visible,a=e.sortOrder;return f.default.createElement("span",{style:{visibility:t?"visible":"hidden"}},f.default.createElement(_.default,{"aria-label":"arrow",style:{padding:"3px"}},"Ascending"===a?f.default.createElement(O.default,{titleAccess:t?"Ascending sort arrow":void 0,fontSize:"small",style:{verticalAlign:"middle",fontSize:"0.8125rem",color:(0,B.themeColor)("primaryText")}}):f.default.createElement(N.default,{titleAccess:t?"Descending sort arrow":void 0,fontSize:"small",style:{verticalAlign:"middle",fontSize:"0.8125rem",color:(0,B.themeColor)("primaryText")}})))}},{key:"renderHeaderColumn",value:function(e){var t,a,n,r=e.index,i=e.attributeName,o=e.actionName,l=e.headerHeight,s=e.columnWidth,u=e.isCompact,d=e.isLastColumn,c=e.isSortedColumn,p=e.sortOrder,m=e.text,v=e.shouldRightAlign,g=e.onTap,w=e.onResize,b=e.isFrozenColumn,S=0===r,T=(0,h.default)("TableView__header-column",{"TableView--header-column-compact":u,"TableView__header-frozen-shadow":b&&!M.default.IsIOSBrowser()}),C=0,E=0;u?E=C=R.columnPadding/2:v?(E=0,C=R.columnPadding,n="right"):C=R.columnPadding;var k=d&&!S,I=null===(a=null===(t=this.topStackUIState)||void 0===t?void 0:t.DashboardUIState)||void 0===a?void 0:a.interactiveMode,A=this.inMultiRowEditMode(),D=s+C+E+(S?-1:0)+(!k||I||A?0:R.drillArrowWidth+R.columnPadding);p&&(D+=this.appModel.getSortHandleWidth());var x=this.appModel.inRollout("filterFromTableHeader")&&i&&this.props.tableSchema.findAttributeByName(i).isSearchable();return x&&(D+=L.SORTHANDLE_WIDTH),this.appModel.inRollout("filterFromTableHeader")&&(x||p)&&(D+=R.columnPadding),f.default.createElement(f.default.Fragment,{key:r},f.default.createElement("span",{className:(0,h.default)({"TableView__header-column-frozen":b})},f.default.createElement(y.default,{enabled:null!=g,onTap:g,className:T,style:{width:D+"px",paddingLeft:C,paddingRight:E,textAlign:n,display:this.appModel.inRollout("filterFromTableHeader")?"inline-flex":void 0},key:r,"data-testonly-column":i,"data-testonly-action":o},this.appModel.inRollout("filterFromTableHeader")?f.default.createElement(f.default.Fragment,null,f.default.createElement("span",{style:{flexGrow:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},m),(p||x)&&f.default.createElement("span",{style:{flexShrink:0,paddingRight:R.columnPadding},onMouseUp:G},p&&this.renderSortArrow({visible:!!c,sortOrder:p}),x&&f.default.createElement(P.FilterAttributeButton,{tableSchema:this.props.tableSchema,attributeName:i}))):f.default.createElement(f.default.Fragment,null,m,p&&this.renderSortArrow({visible:!!c,sortOrder:p}))),null!=w&&f.default.createElement(y.default,{spanMode:!0,key:"".concat(r," _resizer"),onDrag:w,dragAxis:"x",className:"TableView__header-column-resizer",style:{height:l}})))}},{key:"renderHeaderRow",value:function(e,t){var a,n=this,r=new b.default(this.appModel,this.props.tableSchema,void 0,void 0,void 0,void 0,{viewStateKey:this.viewStateKey}),i=e.filter(R.isSpecialColumnLayout).length,o=!(null===(a=this.appModel.AppTemplate.Presentation)||void 0===a?void 0:a.DisableUserSorting),l=e.map((function(a,l){var s=l===e.length-i-1;if((0,R.isActionColumnLayout)(a)){var u=a.columnWidth,d=a.action,c={index:l,isLastColumn:s,headerHeight:t,columnWidth:u,actionName:d.name(),isCompact:!0,isSortedColumn:!1,isFrozenColumn:!1};return n.renderHeaderColumn(c)}if((0,R.isAttributeColumnLayout)(a)){var p=a.attribute,f=a.columnWidth,h=a.isCompact,m=!s,v=n.getCurrentSortObject(),y=(null==v?void 0:v.Order)||"Ascending",g=p.name()===(null==v?void 0:v.Column),w=n.freezeColumnEnabled(l,p,e),b={index:l,isLastColumn:s,headerHeight:t,attributeName:p.name(),columnWidth:f,isCompact:h,isSortedColumn:g,sortOrder:y,text:p.displayName(r),shouldRightAlign:p.shouldRightAlign(),onTap:o&&!n.groupByState.drilldownMode()?n.sortByHeaderSelected.bind(n,p):void 0,onResize:m?function(e){return n.handleResize(p.name()||"",e)}:void 0,isFrozenColumn:w};return n.renderHeaderColumn(b)}return null})),s=(0,h.default)("TableView__header","TableView__header-underlined","TableView__header-seperator");return f.default.createElement("div",{className:s,style:{height:t}},l)}},{key:"render",value:function(){if(this.appModel.inRollout("asyncQuery"))return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this);if(!this.shouldShow())return null;var e=this.props;if(!e.tableSchema||!e.table||z)return f.default.createElement("div",null);if(this.groupByState.drilldownMode())return this.renderRows(this.groupByState.getDrilldownRows());var t={searchQuery:e.searchQuery,limit:e.groupAggregate?void 0:e.rowLimit,filterExpr:this.groupByState.filterExpr(),filterDefaults:this.groupByState.filterDefaults(),transaction:this.pendingTransaction},n=[],i=this.groupByState.groupBy();i&&i.length&&"_RowNumber"!==i[0].Column&&n.push(i[0]);var l=this.groupByState.sortBy();l&&l.length&&(n=[].concat((0,r.default)(n),(0,r.default)(l))),t.sortRules=n;var s=this.appModel,d=new b.default(s,e.tableSchema,void 0,void 0,void 0,void 0,{viewStateKey:this.viewStateKey}),c=e.table.queryRowValues(t,s,d);return this.renderRows(c)}},{key:"renderRows",value:function(e){var t,a,n=this,i=null,o=this.currentInteractionState,l=o.allowPullToSync,s=o.handleDrag,u=o.handleDragEnd,d=this.props,c=this.appModel;if(this.groupByState.drilldownMode())i=this.groupByState.currentDrilldownColumn(),t=(0,R.computeDrilldownLayout)({attributeName:i,tableSchema:d.tableSchema,width:this.containerWidth()});else{var p=(0,r.default)(this.groupByState.alreadyDrilledColumns()),y=this.groupByState.groupBy();y&&y.length&&"_RowNumber"!==y[0].Column&&(a=y[0].Column,p.push(a));var b={quickEditMode:this.inMultiRowEditMode(),appModel:c,tableSchema:d.tableSchema,table:d.table,width:this.containerWidth()-1,excludedColumns:p,columnOrder:d.columnOrder,columnWidthPreference:d.columnWidth,disableAllActions:d.disableAllActions,dataContext:this.dataContext()},S=this.props.table?this.props.table.name():null,C={dataStamp:c.DataStamp,width:b.width,excludedColumns:p.join("`"),tableName:S};this._layoutCache&&(0,v.default)(C,this._layoutCache.key)?t=this._layoutCache.layout:e.length?(t=(0,R.computeLayout)(b),this._layoutCache={key:C,layout:t}):t=[]}var E=this.groupByState.annotateRows(e,a),A=E.nearestHeadings,D=E.annotatedRows;t=t.map((function(e){var t,a=n.state.deltaColumnWidth[(null===(t=e.attribute)||void 0===t?void 0:t.model.Name)||""]||0;return Object.assign(Object.assign({},e),{columnWidth:e.columnWidth+a})}));var x,N,O=e.length>0&&m.default.get(this,"appModel.AppTemplate.Presentation.ShowColumnNames"),_=this.appModel.GetTableRowHeight(),B=O?_:0,P=this.getVisibleBodyHeight({isExpandedDrilldown:this.groupByState.inlineFilterDisplayValue(),inDrilldownMode:this.groupByState.drilldownMode(),rowHeight:_,annotatedRows:D,headerHeight:B,viewType:"table"}),L=(0,h.default)(this.appModel.rolloutClassNames,"BasePrimaryView TableView","TableView--horizontal-scroll-mode",{TableScroll:!0,"TableView--fixed-height-mode":this.fixedHeightMode(),"TableView--translucent-mode":d.translucentMode});if(this.inMultiRowEditMode()&&!d.isInline&&(x=f.default.createElement(g.default,{appModel:this.appModel,onCancel:this.exitEditMode,onSave:this.commitTransaction})),this.props.isInline){var V=this.groupByState.inlineFilterDisplayValue();null!=V&&(N=f.default.createElement(k.default,{text:V,expanded:!0,onSelect:function(){n.groupByState.drillUp()},key:"special-back-"+this.groupByState.inlinePosition()}))}var H=this.props.isInline,U=!l||this.inMultiRowEditMode(),j=d.width?d.width:window.innerWidth,z=W.ReactRootUIConfig.isInDesktopExperience()?{maxHeight:this.props.isInline?P:"initial",height:this.props.isInline?"initial":"100%",width:"".concat(j,"px"),overflowY:"auto"}:{width:"".concat(j,"px"),height:P,overflowY:!this.props.height&&this.props.isInline?"hidden":void 0};this.renderedRowIds=e.map((function(e){return e[d.table.keyAttribute().name()]}));var G=f.default.createElement(T.default,{style:{width:"100%"},length:D.length,itemRenderer:this.renderItem.bind(this,D,A,a,i,d.table,t),scrollParentGetter:this.reactListScrollParentGetter(),scrollParentViewportSizeGetter:this.props.height?this.getViewportHeight:void 0,threshold:200,type:"uniform",useTranslate3d:M.default.Supports3dTransform()}),K=O?this.renderHeaderRow(t,B):void 0,Y=this.appModel.MapActionName("No items"),q=d.height;W.ReactRootUIConfig.isInMobileExperience()&&this.inMultiRowEditMode()&&d.height&&"number"==typeof d.height&&(q=d.height-w.DEFAULT_FOOTER_HEIGHT);return f.default.createElement("div",{className:L,style:{width:d.width,height:d.height},onTouchMove:s,onTouchEnd:u,onTouchCancel:u,id:this.id()},N,f.default.createElement(I.default,{innerRef:function(e){return n.pullRef=e},disabled:H,paused:U,getScrollContainer:this.getScrollContainer,appModel:this.appModel},f.default.createElement("div",{className:"TableView__horizontal-scroll-container","data-testid":"table-view-container",ref:this.onHorizontalScrollContainerMount,style:{overflowX:"hidden",overflowY:"hidden",width:d.width,height:q}},f.default.createElement("div",{style:{display:"inline-block",minWidth:"100%",paddingTop:0,height:"100%"}},f.default.createElement("div",{ref:this.onScrollContainerMount,className:"TableView__list",style:z},K,D.length>0?f.default.createElement("div",{className:"TableView__reactListWrapper"},G):null!=Y?f.default.createElement(F.EmptyView,{message:Y}):"")))),this.renderFabs(),this.renderActionButtonPortal(),x)}}]),a}(S.default),$=q=j([D.observer],q);t.default=$},392870:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeEmpty=t.ReactCardLayoutNode=void 0;var i=n(a(856690)),o=n(a(689728)),l=n(a(627424)),s=n(a(373303)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=x(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294)),d=n(a(960162)),c=n(a(294184)),p=a(697211),f=a(695386),h=a(791899),m=n(a(314247)),v=a(803583),y=n(a(367397)),g=n(a(21870)),w=a(56749),b=n(a(571524)),S=a(351101),T=n(a(454852)),C=a(629503),R=a(557310),E=a(307074),k=a(957831),I=n(a(819433)),A=a(664583),D=a(692479),M=a(49676);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(x=function(e){return e?a:t})(e)}function N(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return O(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw i}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var _=function(){function e(){(0,i.default)(this,e),this._components={}}return(0,o.default)(e,[{key:"add",value:function(e,t){this._components[e]=t}},{key:"get",value:function(e){return this._components[e]}}]),e}(),B=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;(0,i.default)(this,e),this._symbols={},this.enclosingScope=t,this.scopeLevel=0,t&&(this.scopeLevel=t.scopeLevel+1)}return(0,o.default)(e,[{key:"insert",value:function(e,t){this._symbols[e]=t}},{key:"lookup",value:function(e){return this._symbols[e]?this._symbols[e]:this.enclosingScope?this.enclosingScope.lookup(e):void 0}}]),e}(),P=function(e){return e.node.id+e.table+e.rowId},L=function(e,t){var a,n={},r=e.ignoreEvents,i=e.node,o=e.rowId,l=e.sourceLocationName,s=e.onRowTap,u=e.table;if(r)return n;for(var d=Object.keys(i),c=function(){var e=f[p],a=i[e];a&&"action"===a.type&&a.value&&(n[e]=function(e){if("Go to details"===a.value)s?s(o):function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;R.ReactRootUIConfig.isReactRoot()?(0,I.default)().dispatch((0,D.pushView)({Identifier:{Type:"View",Action:"detail",TableName:e},ViewState:{TableName:e,RowKey:t},ViewStateKey:n})):(0,k.getAppState)().PushView("detail",!1,{TableName:e,RowKey:t,GroupBy:null,SortBy:null,FilterExpr:null,DefaultValues:null},a)}(u,o,!0,t);else{var n=(0,S.getAppModel)();if(n){var r=n.appTemplate.actions(),i=n.findTableCollection(u).table;if(i){var d=r.findByName(i.rootName(),a.value);d&&(0,A.runAppAction)(d,{appModel:n,rowId:o,sourceLocationName:l,sourceTable:i},void 0,t)}}}e.preventDefault(),e.stopPropagation()})},p=0,f=d;p<f.length;p++)c();if(null===(a=i._inspection)||void 0===a?void 0:a.isInspectable){var h=i._inspection.eventHandlers,m=function(e){var t=h[e];if("function"==typeof t)if(n[e]){var a=n[e];n[e]=function(e){a(e),t(e,i)}}else n[e]=function(e){return t(e,i)}};for(var v in h)m(v)}return n},V=function e(t,a){return null==t?null:"variable"!==t.type?t:e(a.lookup(t.value),a)},F=function e(t,a){if(null==t)return{};if(Array.isArray(t)){var n,r={},i=N(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;Object.assign(r,e(o,a))}}catch(e){i.e(e)}finally{i.f()}return r}var l={};if("style"===t.type)for(var s=0,u=Object.keys(t);s<u.length;s++){var d=u[s];"id"!==d&&"type"!==d&&(l[d]=V(t[d],a))}else if("variable"===t.type){return e(V(t,a),a)}return l},H=function(e){return e.style||F(e.node.style,e.currentScope)},W=new _,U=function(e){var t=e.style;return u.default.createElement(d.default,{variant:"rect",style:t,"data-testid":"skeleton-card"})},j=function(e){if(!e.node||e.node.ignore)return null;var t=function(e){var t=e.node,a=e.currentScope||new B;if(e.node.variables){a=new B(a);var n,r=N(t.variables);try{for(r.s();!(n=r.n()).done;){var i=n.value;a.insert(i.name,i.value)}}catch(e){r.e(e)}finally{r.f()}}return a}(e),a=W.get(e.node.type);return a?u.default.createElement(a,Object.assign({},e,{currentScope:t})):null};t.ReactCardLayoutNode=j;var z=function(e,t){return t.icon.map((function(a,n){return u.default.createElement("i",{style:{color:t.highlightColor,height:"1em",marginRight:4,fontSize:"0.8em"},className:"fa "+a,key:"formatruleIcon-"+e.rowId+"-"+n})}))},G=function(e){var t,a,n,r,i=(0,S.getAppModel)();return null==i||"container"===e.node.type||!(null===(t=e.bindingMeta)||void 0===t?void 0:t.attribute)&&!(null===(a=e.node.onClick)||void 0===a?void 0:a.value)?{icon:[]}:i.appTemplate.formattingRules().getFormatting({tableOrSlice:e.table,column:null===(n=e.bindingMeta)||void 0===n?void 0:n.attribute.name(),actionName:null===(r=e.node.onClick)||void 0===r?void 0:r.value,rowKey:e.rowId})},K=function(e,t){var a=(0,S.getAppModel)();if(a){var n=a.appTemplate.actions(),r=a.findTableCollection(e.table).table;if(r)return n.findByName(r.rootName(),t)}return null},Y=function(e,t,a){if(!t.onClick||"container"===t.type)return!0;var n=K(e,t.onClick.value);if(n){var r=(0,S.getAppModel)();if(r){var i=r.findTableCollection(e.table),o=i.table,l=i.tableSchema,s=null==o?void 0:o.lookupTableRow(e.rowId);if(s){var u=s.dataContext.augmentWithViewContext(a);return n.isValidForTable(o,l,r,u)&&n.isValidForRow(s.values,u)&&n.prominence()!==T.default.DO_NOT_DISPLAY}}}return!0},q=function e(t,a,n){if(a.ignore||!Y(t,a,n)||a.child&&a.child.ignore)return!0;if("container"!==a.type)return!1;var r=a.children;return!r||!!r.every((function(a){return e(t,a,n)}))};t.isNodeEmpty=q;var $=function(e){var t=e.childShape||"";return u.default.createElement("span",{className:"BadgeDot "+t,style:Object.assign({backgroundColor:e.color},e.customStyle)})},Q=function(e){return u.default.createElement("span",{"data-testid":"badge",className:"BadgeRoot"},e.children,u.default.createElement($,Object.assign({},e)))},X=function(e){var t=(0,u.useContext)(E.ViewStateKey),a=G(e),n=Y(e,e.node,t),r=Object.assign({},F(e.node.style,e.currentScope)),i=(0,u.useState)("default"),o=(0,l.default)(i,2),s=o[0],d=o[1],p=r[s];if(!n)return null;var f=L(e,t),h=R.ReactRootUIConfig.isInDesktopExperience(),m=p;if(e.highlighted)if(h||"default"!==s){if(h&&("default"===s||"hover"===s)){var v=r.highlightedUpdate||r.highlighted;m=Object.assign(Object.assign({},p),v)}}else m=r.highlighted;m&&Object.assign(r,F(m,e.currentScope)),function(e,t){e&&(!0===e.bold&&(t.fontWeight="bold"),!0===e.italic&&(t.fontStyle="italic"),!0===e.underline&&(t.textDecoration="underline"),!0===e.strikethrough&&(t.textDecoration=t.textDecoration?t.textDecoration+" line-through":"line-through"),!0===e.uppercase&&(t.textTransform="uppercase"),e.textSize>1&&(t.fontSize?t.fontSize=t.fontSize*e.textSize:t.fontSize=e.textSize+"rem"),null!=e.textColor&&(t.color=e.textColor))}(a,r);var y=f.onMouseOver;f.onMouseOver=function(e){b.default.IsMobileBrowser()||d("hover"),y&&y(e)};var g=f.onMouseDown;f.onMouseDown=function(e){d("down"),g&&g(e)};var w=f.onMouseUp;f.onMouseUp=function(e){d("default"),w&&w(e)};var S=f.onMouseLeave;f.onMouseLeave=function(e){d("default"),S&&S(e)};var T=e.children,C=z(e,a);return!C.length&&a.highlightColor&&(T=u.default.createElement(Q,{color:a.highlightColor},T)),u.default.createElement("div",Object.assign({"data-testid":"div-with-input-handling",id:P(e),style:r},f,{className:(0,c.default)({selected:e.inspectionSelectedNodeId===e.node.id&&!e.inspectionHoverNodeId,highlighted:e.inspectionHoverNodeId===e.node.id})}),C,T)},Z=function(e){if(!e.open)return null;return u.default.createElement(p.ClickAwayListener,{onClickAway:function(t){e.onClickAway&&e.onClickAway(t)}},u.default.createElement("div",{style:{position:"absolute",background:"white",borderRadius:5,marginLeft:-120,marginTop:-120,boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2), 0px 8px 10px 1px rgba(0,0,0,0.14), 0px 3px 14px 2px rgba(0,0,0,0.12)"}},e.children))},J=function(e){return e&&e.startsWith("fa-")&&(e="far "+e),e},ee=function(e,t){var a=K(e,t),n=(0,S.getAppModel)();if(a&&n){var r=n.findTableCollection(e.table),i=r.table,o=r.tableSchema,l=null==i?void 0:i.lookupTableRow(e.rowId);t=a.displayName(n,o,null==l?void 0:l.values)}return t},te=(0,f.makeStyles)((function(){return{iconButton:{color:function(e){var t=e.style;return t?t.color:void 0},fontSize:16,opacity:.8,width:30,height:30,padding:9,paddingTop:6}}})),ae=function(e){var t=(0,u.useContext)(E.ViewStateKey),a=J(V(e.node.icon.value));if(!a)return null;var n=L(e,t),r=H(e);return u.default.createElement(p.IconButton,Object.assign({key:e.node.id},n,{style:{color:r?r.color:void 0,fontSize:16,width:30,height:30,padding:9,paddingTop:6}}),u.default.createElement("i",{className:a}))};W.add("card",j),W.add("systemAction",(function(e){var t,a=J(V(null===(t=e.node.icon)||void 0===t?void 0:t.value)),n=V(e.node.text.value),r=ee(e,n),i=a?u.default.createElement("i",{"data-testid":"icon",className:a,style:{marginRight:8,color:(0,w.themeColor)("bottomDrawerIcon")}}):null;return u.default.createElement(X,Object.assign({},e),i,r)})),W.add("ellipsisMenu",(function(e){var t=(0,u.useContext)(E.ViewStateKey),a=L(e,t),n=u.default.useState(null),r=(0,l.default)(n,2),i=r[0],o=r[1],d=H(e),c=te({style:d}),f=function(t){a.onBeforeClose&&!a.onBeforeClose(t,e.node)||(o(null),t&&(t.stopPropagation(),t.preventDefault()))},h=e.node.items,m=e.node._inspection&&e.node._inspection.isInspectable,v=Boolean(i);if(0===h.length)return null;var y=(0,s.default)(h,"ignore");if(y===h.length)return null;if(y===h.length-1){var b=h.find((function(e){return!e.ignore}));return u.default.createElement(ae,Object.assign({},e,{node:b}))}var S,T,C={},k=!1;if(m?(C={onClickAway:f,anchorEl:i},S=Z):g.default.windowWidth>g.default.widescreenBreakpoint?(C={anchorEl:i},S=p.Popover):R.ReactRootUIConfig.isInMobileExperience()?(k=!0,S=p.Drawer):S=p.Drawer,k){var I=h.filter((function(a){return!q(e,a,t)})).map((function(a){var n,r=V(a.text.value),i=ee(e,r),o=J(V(null===(n=a.icon)||void 0===n?void 0:n.value)),l=L(Object.assign(Object.assign({},e),{node:a}),t);return{key:r,id:r,icon:o&&u.default.createElement("i",{"data-testid":"icon",className:o}),displayText:i,onClick:function(e){l.onClick&&l.onClick(e),m||f(e)}}}));T=u.default.createElement(M.MobileActionSheet,{open:v,onClose:f,listItemContents:I})}else T=u.default.createElement(S,Object.assign({open:v,anchor:"bottom",onClose:f},C,{PaperProps:{style:{backgroundColor:(0,w.themeColor)("elevationTone3")}}}),h.map((function(a,n){if(q(e,a,t))return null;var r=L(Object.assign(Object.assign({},e),{node:a}),t),i=Object.assign({},r);return i.onClick=function(e){r.onClick&&r.onClick(e),m||f(e)},u.default.createElement(p.MenuItem,Object.assign({style:{color:(0,w.themeColor)("bottomDrawerText")},key:e.table+e.rowId+e.node.id+n},i),u.default.createElement(j,Object.assign({},e,{ignoreEvents:!0,node:a})))})));return u.default.createElement("div",{style:d,id:P(e)},u.default.createElement(p.IconButton,{onClick:function(e){o(e.currentTarget),a.onClick&&a.onClick(e),e.stopPropagation(),e.preventDefault()},onMouseOver:function(t){a.onMouseOver&&a.onMouseOver(t,e.node),t.stopPropagation(),t.preventDefault()},className:c.iconButton},u.default.createElement("i",{className:"far fa-ellipsis-v","data-testid":"icon-button"})),T)})),W.add("circleProgress",(function(e){var t=H(e);if(t.position="relative",null===e.value)return u.default.createElement(U,{style:t});var a=e.value,n=t.color||"#3c9ee5";100===parseInt(a)&&(n=t.color||"green");var r=u.default.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",fontSize:t.height/5||"90%",display:"flex",justifyContent:"center",alignItems:"center",top:0}},a);return u.default.createElement("div",{style:t,"data-testid":"circle-progress-card"},u.default.createElement("svg",{viewBox:"0 0 36 36",style:{stroke:n}},u.default.createElement("path",{style:{fill:"none",stroke:"#eee",strokeWidth:3.8},d:"M18 2.0845\n                        a 15.9155 15.9155 0 0 1 0 31.831\n                        a 15.9155 15.9155 0 0 1 0 -31.831"}),u.default.createElement("path",{style:{fill:"none",strokeWidth:2.8,strokeLinecap:"round",animation:"progress 1s ease-out forwards"},strokeDasharray:e.value.replace("%","")+", 100",d:"M18 2.0845\n                        a 15.9155 15.9155 0 0 1 0 31.831\n                        a 15.9155 15.9155 0 0 1 0 -31.831"})),r)})),W.add("staticMap",(function(e){var t=(0,u.useContext)(E.ViewStateKey),a=H(e);if(null===e.value)return u.default.createElement(U,{style:a});var n=m.default.getStaticImageURLMultipleLatLongs([{name:"",value:e.value}],500,308),r=L(e,t);return u.default.createElement("div",Object.assign({id:P(e),style:a},r,{"data-testid":"static-map-card"}),u.default.createElement("img",{src:n,style:a}))})),W.add("text",(function(e){var t=e.value,a=H(e);return null===t?(a.borderRadius=5,a.minHeight=18,a.minWidth=90,a.margin=3,t=u.default.createElement(U,{style:a})):void 0!==(null==t?void 0:t.url)&&(t=t.linkText||t.url),u.default.createElement(X,Object.assign({},e),t)})),W.add("icon",(function(e){var t=H(e);if(null===e.value)return u.default.createElement(U,{style:t});var a=e.value;return a&&a.startsWith("fa-")&&(a="far "+a),u.default.createElement(X,Object.assign({},e),u.default.createElement("i",{className:a,"data-testid":"icon"}))})),W.add("image",(function(e){var t,a=(0,u.useContext)(E.ViewStateKey),n=e.value,r=H(e),i=G(e);if(null==n)return u.default.createElement(U,{style:r});var o=L(e,a),l=(0,S.getAppModel)(),s=null===(t=e.bindingMeta)||void 0===t?void 0:t.attribute;if("LatLong"===(null==s?void 0:s.type())||"Address"===(null==s?void 0:s.type()))n=m.default.getStaticImageURLMultipleLatLongs([{name:s.name(),value:n}],500,308);else if(l){if(!s)return null;var d=l.findTableCollection(e.table).table;if(d){n=C.Common.FlexImageUrl(l.ResolveFile(n,d.rootName()))||void 0;var p=u.default.createElement("div",Object.assign({style:r},o),u.default.createElement(y.default,{useLoadingSpinner:!0,zeroImageLoadDelay:!0,src:n,className:"",customStyle:r,height:r.height,width:r.width,testId:"card-app-image"}));if(!z(e,i).length&&r.width<100&&i.highlightColor){var f="50%"===r.borderRadius?"CircleImageChild":"RectangleImageChild";p=u.default.createElement(Q,{color:i.highlightColor,childShape:f,customStyle:{marginRight:r.marginRight}},p)}return p}}var h=e.node,v=e.inspectionSelectedNodeId,g=e.inspectionHoverNodeId;return u.default.createElement("img",Object.assign({id:P(e)},o,{src:n,style:r,className:(0,c.default)({selected:v===h.id&&!g,highlighted:g===h.id}),"data-testid":"image-card"}))})),W.add("variable",(function(e){var t=e.currentScope,a=V(e.node,t),n=e.node.child||a;return e.node.child?u.default.createElement(j,Object.assign({},e,{value:a,node:n})):u.default.createElement(j,Object.assign({},e,{node:n}))})),W.add("constant",(function(e){return u.default.createElement(j,Object.assign({},e,{value:e.node.value,node:e.node.child}))})),W.add("actionDisplayText",(function(e){var t=V(e.node.value),a=ee(e,t);return u.default.createElement(j,Object.assign({},e,{node:e.node.child,value:a}))})),W.add("binding",(function(e){var t=(0,u.useContext)(E.ViewStateKey),a=e.node.value,n=function(e,t,a){var n,r=(0,u.useState)(null),i=(0,l.default)(r,2),o=i[0],s=i[1];return(0,u.useEffect)((function(){var n=function(e){s(e)};return h.TableSubscriptionAPI.subscribeToColumn(e,t,a,n),function(){h.TableSubscriptionAPI.unsubscribeFromColumn(e,t,a,n)}}),[e,t,a,null===(n=(0,S.getAppModel)())||void 0===n?void 0:n.DataStamp]),o}(e.table,e.rowId,a);if(!n)return u.default.createElement(j,Object.assign({},e,{value:null,node:e.node.child}));if(!n.rowState.isHidden(n.attribute,t)){var r=n.columnValue,i=n.attribute.type();if("Ref"===i){var o=n.attribute.derefRow(r);r=o?o.labelValue:r}else r="Url"===i?n.attribute.valueFromWireFormat(r):n.attribute.localizeWireValue(r,{dataContext:e.dataContext});return u.default.createElement(j,Object.assign({},e,{value:r,bindingMeta:n,node:e.node.child}))}return null})),W.add("container",(function(e){var t=(0,u.useContext)(E.ViewStateKey),a=e.node.children.map((function(t,a){return u.default.createElement(j,Object.assign({},e,{key:e.table+"/"+e.rowId+"/"+a,node:t}))}));return q(e,e.node,t)?null:u.default.createElement(X,Object.assign({},e),a)})),W.add("legacyInline",(function(e){var t,a=(0,u.useContext)(E.ViewStateKey),n=e.value,r=e.bindingMeta,i=e.node,o=e.rowId,l=null==r?void 0:r.attribute,s=H(e),d=(0,S.getAppModel)(),c=null!==(t=null==d?void 0:d.findTableCollection(e.table))&&void 0!==t?t:{},p=c.table,f=c.tableSchema;if(null===n||null==d||null==f)return u.default.createElement(U,{style:s});var h=v.TypeDisplaysApi.lookup(l),m=null==r?void 0:r.rowState.dataContext,y=L(e,a);return u.default.createElement(h,{id:P(e),key:"cardLegacyTypeDisplay-"+i.id,table:p,appModel:d,rowId:o,dataContext:m,attribute:l,showContent:null,showListInline:!0,clickOverride:function(e){y.onClick&&y.onClick(e,i)},height:s.height||150,width:s.width||300,disableNavigation:!1,imageDisplayType:"full-centered",value:n})}))},334500:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReactCardLayoutNode",{enumerable:!0,get:function(){return n.ReactCardLayoutNode}}),Object.defineProperty(t,"isNodeEmpty",{enumerable:!0,get:function(){return n.isNodeEmpty}});var n=a(392870)},497797:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSlideshowView=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=n(a(973935)),f=n(a(496486)),h=n(a(294184)),m=n(a(571524)),v=n(a(143249)),y=n(a(150198)),g=n(a(593186)),w=a(916230),b=n(a(112963)),S=a(814394),T=n(a(155345)),C=n(a(21870)),R=n(a(303055)),E=a(318926),k=a(218546),I=a(735894),A=a(557310),D=a(166089),M=a(680462);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var N=400,O=M.SLIDESHOW_PAGE_MAX_WIDTH+156,_=function(){var e,t,a=document.activeElement,n=((null==a?void 0:a.tagName)||"").toLowerCase(),r="button"===(null===(e=a)||void 0===e?void 0:e.role),i=-1===(null===(t=a)||void 0===t?void 0:t.tabIndex),o=r&&i;return D.AppGlobals.AppState&&D.AppGlobals.AppState.CurrentUIState&&"detail"===D.AppGlobals.AppState.CurrentUIState.Root&&!f.default.includes(["input","textarea"],n)&&!o},B=function(e){(0,s.default)(a,e);var t=x(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).resizeHandler=function(){n.forceUpdate()},n.handleRowTap=n.handleRowTap.bind((0,o.default)(n)),n.handleKey=n.handleKeyUnbound.bind((0,o.default)(n)),n.commitTransaction=n.commitTransaction.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"componentDidMount",value:function(){var e,t=this;(0,l.default)((0,d.default)(a.prototype),"componentDidMount",this).call(this),$(window).on("resize",this.resizeHandler),"detail"===(null===(e=this.topStackUIState)||void 0===e?void 0:e.Root)&&$(document).on("keyup",this.handleKey),this.swipeElement=new w.SwipeElement({$selectorRoot:$(p.default.findDOMNode(this)),selector:".ReactSlideshowView__page",denylist:".GalleryView, .TableView, .BaseScribbleTypeInput, .Slider, .GoogleMapPane",rightSwipeHandler:function(){g.default.AddTraceContext("SlideshowView swipePrev"),E.logger.logAppEvent(k.AppEventName.SlideshowViewSwipePrev),t.handleNavigate(-1)},leftSwipeHandler:function(){g.default.AddTraceContext("SlideshowView swipeNext"),E.logger.logAppEvent(k.AppEventName.SlideshowViewSwipeNext),t.handleNavigate(1)}})}},{key:"componentWillUnmount",value:function(){(0,l.default)((0,d.default)(a.prototype),"componentWillUnmount",this).call(this),$(window).off("resize",this.resizeHandler),$(document).off("keyup",this.handleKey),this.swipeElement.reset()}},{key:"getViewSettings",value:function(){var e=this.props,t=e.table,a=e.controlName,n=this.appModel;if(t&&n){var r=n.appTemplate,i=r.findControl(a);if(i&&"detail"===i.Action||(i=r.findControlsForTable(t.name(),"detail")[0]),i)return r.getViewDefinition(i.Name)}return{}}},{key:"quickEditColumns",value:function(){return this.getViewSettings().QuickEditColumns}},{key:"page",value:function(e,t,a,n,r,i){var o,l={marginLeft:r?"-100%":0,height:"100%",transform:a?"translate("+a+"px, 0)":"translate(0, 0)"};return o=this.showDetailContent()?this.renderDetailContentView(e,t,i):this.renderDetailListView(e,t,n,i),c.default.createElement("div",{className:"ReactSlideshowView__page",style:l,key:e},o)}},{key:"showDetailContent",value:function(){return this.props.detailContentColumn&&"**none**"!==this.props.detailContentColumn}},{key:"onScrollContainerMount",value:function(e){(0,l.default)((0,d.default)(a.prototype),"onScrollContainerMount",this).call(this,e),this.forceUpdate()}},{key:"slideshowPageExtraProps",get:function(){return{}}},{key:"renderDetailListView",value:function(e,t,a,n){var r=this,i=this.props.columnOrder||[],o=!i.length||f.default.includes(i,"**all other columns**"),l=this.props.tableSchema.nonCosmeticAttributes().filter((function(e){return o||f.default.includes(i,e.name())})),s=v.default.inRollout(this.appModel,"detailViewTransactions")||A.ReactRootUIConfig.isReactRoot();return"string"==typeof a&&(a=C.default.windowWidth||document.body.clientWidth),c.default.createElement(S.SlideshowPage,Object.assign({},this.props,{appModel:this.appModel,layout:this.customLayout,useCardLayout:this.useCardLayout(),quickEditColumns:this.quickEditColumns(),useDesktopMultiColumn:this.getViewSettings().UseDesktopMultiColumn,parentId:this.id(),useTransactions:s,fixedHeightMode:this.fixedHeightMode(),rowId:e,width:a,height:this.props.height,onScrollContainerMount:n?this.onScrollContainerMount:void 0,interactiveRowIds:this.props.interactiveRowIds,isPrimaryPage:n,isSingleRow:this.isSingleRow(),allowNavigation:this.allowNavigation(),onPrev:this.isFirst()?void 0:function(){return r.transition(-1)},onNext:this.isLast()?void 0:function(){return r.transition(1)},view:this.getView(),entryAttributes:l,scrollbarWidth:this.scrollbarWidth.bind(this),fabActions:this.fabActions,rowValues:t||{}},this.slideshowPageExtraProps))}},{key:"renderDetailContentView",value:function(e,t,a){var n,r=this.props,i=this.isCompactView();n=i?this.renderDetailBottomBar(t):this.renderDetailSideBar(e,t,a);var o={};r.isInline||this.appModel.inRollout("pdfViewerPaddingFix")||(o.bottom=C.default.footerHeight),r.width&&(o.width=r.width,o.height=r.height);var l=this.renderDetailContent(t),s=Math.floor(R.default.computeHeight(this.props)),u={position:"absolute",top:"58px",width:r.width-(i?0:N),height:r.height-(i?s:0),left:i?0:N};return c.default.createElement("div",{style:o,className:"BasePrimaryView DetailContent"+(i?" BottomBar":" SideBySide")},c.default.createElement("div",{className:"DetailContent-pane",style:u},l),n)}},{key:"detailContentColumnAttribute",value:function(){return this.showDetailContent()?this.props.tableSchema.findAttributeByName(this.props.detailContentColumn):null}},{key:"isCompactView",value:function(){return this.props.width<=512}},{key:"renderDetailContent",value:function(e){var t=this.detailContentColumnAttribute();switch(null==t?void 0:t.type().toLowerCase()){case"url":return this.renderDetailContentIframe(y.default.toHttpsUrl(y.default.urlValueFromWireFormat(e[t.name()]).url));case"file":if(this.appModel.inRollout("detailContentFiles"))return this.renderDetailContentEmbeddedFile(y.default.urlValueFromWireFormat(e[t.name()]).url)}return null}},{key:"renderDetailContentEmbeddedFile",value:function(e){return c.default.createElement(I.EmbeddedFileObject,{displayURL:e})}},{key:"renderDetailContentIframe",value:function(e){return c.default.createElement("iframe",{src:e,sandbox:"",name:"iframe_pane",frameBorder:"0",style:{width:"100%",height:"100%",margin:0,padding:0}})}},{key:"renderDetailBottomBar",value:function(e){var t=this.props.table,a=D.AppGlobals.AppModel.FindControlsForTable(t.name(),"deck",!1),n=null;a.length&&(n=a[0]);var r={};n&&(r=D.AppGlobals.AppModel.NavStateForView(n,t.name()));var i=this.handleRowTap,o=c.default.createElement(R.default,Object.assign({},this.props,{appModel:this.appModel,table:t,tableSchema:this.props.tableSchema,rowValues:e,onRowTap:i,actionColumns:r.actionColumns,actionBarEntries:r.actionBarEntries,deckSummaryColumn:r.deckSummaryColumn,imageDisplayType:r.ImageDisplayType,mainDeckImageColumn:r.mainDeckImageColumn,primaryDeckHeaderColumn:r.primaryDeckHeaderColumn,secondaryDeckHeaderColumn:r.secondaryDeckHeaderColumn,showActionBar:r.showActionBar})),l={position:"absolute",bottom:0,width:this.props.width};return c.default.createElement("div",{className:"DetailContent-BottomBar",style:l},o)}},{key:"renderDetailSideBar",value:function(e,t,a){var n=this.renderDetailListView(e,t,N,a),r={position:"absolute",width:N,height:this.props.height,left:0,top:0};return c.default.createElement("div",{className:"DetailContent-SideBar",style:r},n)}},{key:"handleKeyUnbound",value:function(e){switch(e.keyCode){case 37:_()&&(this.handleNavigate(-1),e.preventDefault());break;case 39:_()&&(this.handleNavigate(1),e.preventDefault())}}},{key:"handleNavigate",value:function(e){this.transition(e)}},{key:"isSmallScreen",value:function(){return this.props.width<=O+this.scrollbarWidth()}},{key:"allowNavigation",value:function(){var e=this.getView();return!e||e.definition().SlideshowMode}},{key:"shouldAlwaysShowArrows",value:function(){return!(this.isSingleRow()||!this.props.showNavigationArrows)&&!this.isSmallScreen()}},{key:"shouldShowArrowsOnHover",value:function(){return!(this.isSingleRow()||!this.props.showNavigationArrows)&&(this.isSmallScreen()&&!m.default.IsTouchEnabled())}},{key:"renderArrows",value:function(e){if(!((this.shouldAlwaysShowArrows()||this.shouldShowArrowsOnHover())&&this.allowNavigation()))return null;var t=this.isSmallScreen(),a=t?32:56,n=t?80:56,r=!t,i={left:0},o={left:this.showDetailContent()&&!this.isCompactView()?N-a:"calc(100% - "+a+"px)"},l=c.default.createElement("i",{className:"fal fa-chevron-left"}),s=c.default.createElement("i",{className:"fal fa-chevron-right"});if(r){var u=this.props.height&&this.scrollbarWidth()||0;i={left:"calc(50% - ".concat(M.SLIDESHOW_PAGE_MAX_WIDTH/2+56+u+10,"px")},o={left:"calc(50% + ".concat(M.SLIDESHOW_PAGE_MAX_WIDTH/2+10,"px")}}else o={left:"calc(100% - "+(a+(this.scrollbarWidth()||0))+"px)"};this.showDetailContent()&&(i={left:0},o={left:"calc(100% - ".concat(a,"px)")});var d={width:a,height:n,top:"calc(50% - 40px)",position:"absolute",borderRadius:r?"50%":"0"},p="Background"===this.props.imageDisplayType&&!!e;return c.default.createElement(c.default.Fragment,null,c.default.createElement(b.default,{key:"previous",className:(0,h.default)("ReactSlideshowView__previous",{"slideshow-arrow-wide-mode":r&&!p,"slideshow-arrow-wide-background-image-mode":r&&p}),onTap:this.handleNavigate.bind(this,-1),style:Object.assign(Object.assign({},d),i)},l,c.default.createElement("span",{className:"sr-only"},"Previous Page")),c.default.createElement(b.default,{key:"next",className:(0,h.default)("ReactSlideshowView__next",{"slideshow-arrow-wide-mode":r&&!p,"slideshow-arrow-wide-background-image-mode":r&&p}),onTap:this.handleNavigate.bind(this,1),style:Object.assign(Object.assign({},d),o)},s,c.default.createElement("span",{className:"sr-only"},"Next Page")))}}]),a}(T.default);t.BaseSlideshowView=B},159747:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.LegacySlideshowView=void 0;var i=n(a(856690)),o=n(a(689728)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=n(a(496486)),f=n(a(294184)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=D(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(365914)),m=n(a(571524)),v=n(a(385857)),y=n(a(962553)),g=n(a(888861)),w=n(a(593186)),b=a(803583),S=a(814394),T=a(148448),C=n(a(409022)),R=n(a(21870)),E=a(260493),k=a(557310),I=a(44617),A=a(497797);function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(D=function(e){return e?a:t})(e)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var x=function(e){(0,s.default)(a,e);var t=M(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).state=n.makeStateFromProps(e),n}return(0,o.default)(a,[{key:"transitionStateToRowId",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.endTransaction();var n=k.ReactRootUIConfig.isInDesktopExperience(),r=!m.default.IsAndroid4()&&!n;r?this.setState({extraScreenId:e},(function(){setTimeout((function(){t.setState({currentRowId:e,extraScreenId:t.state.currentRowId,transitioning:!0},(function(){setTimeout((function(){t.setState(p.default.extend(a,{currentRowId:e,extraScreenId:null,transitioning:!1}))}),300)}))}),16)})):this.setState(p.default.extend(a,{currentRowId:e}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.makeStateFromProps(e);if(e.table&&null!=t.currentRowId&&null!=this.state.currentRowId&&this.state.currentRowId!==t.currentRowId){var a=t.currentRowId;t.currentRowId=this.state.currentRowId,this.transitionStateToRowId(a,t)}else this.setState(t)}},{key:"makeStateFromProps",value:function(e){var t=this,a={},n=e.rowId,r=this.queryRows(e),i=e.tableSchema&&e.tableSchema.keyAttribute();null==n&&r.length&&i&&(e.interactiveDashboardMode&&e.coupledViews&&e.coupledViews.length||(n=r[0][i.name()]));a.currentRowId=n;var o=-1;if(null!=n?o=p.default.findIndex(r,(function(a){return t.rowIdForRow(e,a)===n})):a.splitViewExpanded=!1,n&&-1===o)if(this.props.interactiveDashboardMode)a.currentRowId=null;else{var l=this.findRowInSourceTable(e,n);if(l){var s=this.sourceTableRows(e);r=h.default.arrayInsertSorted(r,l,s,this.rowIdForRow.bind(this,e))}else a.currentRowId=null}return a.rows=r,a.rowIds=r.map(this.rowIdForRow.bind(this,e)),a.rowsById=p.default.zipObject(a.rowIds,r),a}},{key:"calculateNewIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.wrap,n=void 0!==a&&a,r=this.currentIndex()+e;return r<0||r>=this.state.rows.length?n&&this.state.rows.length>0?r<0?this.state.rows.length-1:0:null:r}},{key:"findNewRowId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.wrap,n=void 0!==a&&a,r=this.calculateNewIndex(e,{wrap:n});return null==r?null:this.rowIdAtIndex(r)}},{key:"transition",value:function(e){if(this.allowNavigation()){var t=this.calculateNewIndex(e);if(null!==t){var a=this.rowIdAtIndex(t),n=p.default.extend(this.currentUIState,{SlideshowUIState:p.default.extend(this.currentUIState.SlideshowUIState,{RowKey:a})});this.setCurrentUIState(n)}}}},{key:"nearbyRowKey",value:function(){var e,t=this.currentIndex();return e=t<=0?t+1:t-1,this.rowIdAtIndex(e)}},{key:"rowIdForRow",value:function(e,t){var a=e.tableSchema.keyAttribute().name();return(0,h.fastTrim)(t[a])}},{key:"isEmpty",value:function(){return 0===this.state.rows.length||null==this.state.currentRowId}},{key:"isSingleRow",value:function(){return 1===this.state.rows.length}},{key:"isFirst",value:function(){return this.currentIndex()<=0}},{key:"isLast",value:function(){return this.currentIndex()>=this.state.rows.length-1}},{key:"queryRows",value:function(e){if(e||(e=this.props),!e.table)return[];var t={sortRules:[],filterExpr:e.filterExpr,filterDefaults:e.filterDefaults,searchQuery:e.searchQuery};return!k.ReactRootUIConfig.isInDesktopExperience()&&e.groupBy&&(t.sortRules=t.sortRules.concat(e.groupBy)),e.sortBy&&e.sortBy.length&&(t.sortRules=t.sortRules.concat(e.sortBy)),e.table.queryRowValues(t,this.appModel)}},{key:"findRowInSourceTable",value:function(e,t){var a;a=e.tableSchema.isSlice()?e.tableSchema.sourceTableName():e.table.name();var n=y.default.findByName(a,this.appModel,!0),r=n.table,i=n.tableSchema,o=r.queryRowValues({filterExpr:g.default.createColFilter(t,i,i.keyAttribute())||void 0},this.appModel)[0];if(!o)return null;var l={};for(var s in o)e.tableSchema.isInSlice(s)&&(l[s]=o[s]);return l}},{key:"sourceTableRows",value:function(e){var t;t=e.tableSchema.isSlice()?e.tableSchema.sourceTableName():e.table.name();var a=y.default.findByName(t,this.appModel,!0).table,n={sortRules:[]};return e.groupBy&&(n.sortRules=n.sortRules.concat(e.groupBy)),e.sortBy&&e.sortBy.length&&(n.sortRules=n.sortRules.concat(e.sortBy)),a.queryRowValues(n,this.appModel)}},{key:"findRow",value:function(e){var t=this;return this.state.rows.find((function(a){return t.rowIdForRow(t.props,a)===e}))}},{key:"currentIndex",value:function(){return this.indexOfRowId(this.state.currentRowId)}},{key:"currentRowKey",value:function(){return null!=this.state.currentRowId?this.state.currentRowId:this.state.rows.length?this.rowIdForRow(this.props,this.state.rows[0]):null}},{key:"rowIdAtIndex",value:function(e){return this.state.rowIds[e]}},{key:"indexOfRowId",value:function(e){return this.state.rowIds.indexOf(e)}},{key:"renderPrefetch",value:function(e){var t=this;if(!e)return null;var a=this.props.tableSchema.keyAttribute(),n=this.currentIndex();if(n<0)return null;var r=[];if(null==this.state.extraScreenId||this.state.transitioning){if(!this.allowNavigation())return null;var i=this.state.rows[n-1],o=this.state.rows[n+1];i&&r.push(i),o&&r.push(o)}else{var l=this.state.rowsById[this.state.extraScreenId];l&&r.push(l)}var s=b.TypeDisplaysApi.lookup(e),u=r.map((function(n){if(!n)return null;var r=n[e.name()];if(!r)return null;var i=n[a.name()];return c.default.createElement(s,{renderPlainImage:!0,attribute:e,value:r,table:t.props.table,dataContext:new v.default(t.appModel,t.props.tableSchema,n,void 0,void 0,void 0,{viewStateKey:t.viewStateKey}),appModel:t.appModel,rowId:i,key:i})}));return c.default.createElement("div",{className:"ReactSlideshowView__prefetch-container"},u)}},{key:"allowNavigation",value:function(){return!this.state.transitioning&&(0,l.default)((0,d.default)(a.prototype),"allowNavigation",this).call(this)}},{key:"rowId",get:function(){return this.rowIdAtIndex(this.currentIndex())}},{key:"actionsInScope",get:function(){var e,t=this.appModel.appTemplate.actions(),a=p.default.clone(this.findRow(this.rowId));return a&&t.actionsForRow(a,null===(e=this.props.table)||void 0===e?void 0:e.name(),this.appModel,this.dataContext())||[]}},{key:"render",value:function(){var e;if(this.useCardLayout()&&this.setupCurrentLayout({autoDefaults:!0}),!this.shouldShow())return null;if(!this.props.tableSchema||!this.props.table)return c.default.createElement("div",{className:"ReactSlideshowView ReactSlideshowView--no-table-schema"});if(this.isEmpty())return c.default.createElement(T.EmptyView,{className:"ReactSlideshowView",width:this.props.width,height:this.props.height,message:this.appModel.MapActionName("No items selected")});this.props.width||w.default.warnToDevConsole("SlideshowView needs a width");var t=this.currentIndex(),a=this.indexOfRowId(this.state.extraScreenId);(a<0||a===t)&&(a=null);var n;n=t<(null!=a?a:0)?this.props.width:-this.props.width;var r=[null,null],i=t<(null!=a?a:0)?0:1,o=1===i?0:1,l=this.rowIdAtIndex(t);if(l){var s=p.default.clone(this.findRow(l)),u=1===i&&null!=a;r[i]=this.page(l,s,0,this.props.width,u,!0)}if(null!=a){var d=this.rowIdAtIndex(a);if(d){var h=p.default.clone(this.findRow(d)),m=1===o&&null!=l;r[o]=this.page(d,h,n,this.props.width,m)}}var v=(0,f.default)(this.appModel.rolloutClassNames,"BasePrimaryView ReactSlideshowView",{NoMaterialOverrides:k.ReactRootUIConfig.isInDesktopExperience(),Widescreen:!this.isSmallScreen(),"ReactSlideshowView--first-slide":this.isFirst(),"ReactSlideshowView--last-slide":this.isLast(),"ReactSlideshowView--transitioning":!!this.state.transitioning,"ReactSlideshowView--show-arrows-always":this.shouldAlwaysShowArrows(),"ReactSlideshowView--show-arrows-hover":this.shouldShowArrowsOnHover(),"ReactSlideshowView--inset-arrows":this.isSmallScreen()}),y=R.default.widescreenBreakpoint,g=this.props,b=g.width,A=g.height,D=g.isInline,M=this.isCompactView()&&this.showDetailContent()?null:this.renderFabs(),x=void 0;M&&I.dynamicRollouts.includeByOwnerId("AdditionalPaddingWhenShowingFab")&&(x=this.fabActions.length);var N=(0,S.getPrimaryImageAttribute)({mainSlideshowImageColumn:this.props.mainSlideshowImageColumn,tableSchema:this.props.tableSchema});return c.default.createElement("div",{className:v,style:{width:b,height:k.ReactRootUIConfig.isInDesktopExperience()?void 0:A,display:"flex"},"data-fab-count":x},c.default.createElement("div",{style:{width:this.props.width}},c.default.createElement(C.default,{getScrollContainer:this.getScrollContainer.bind(this),disabled:D||(null!==(e=R.default.windowWidth)&&void 0!==e?e:b)>y,appModel:this.appModel},r,this.renderPrefetch(N),k.ReactRootUIConfig.isInDesktopExperience()?c.default.createElement(E.IfScreenIs,{narrow:!0},this.renderArrows(N)):this.renderArrows(N)),M))}}]),a}(A.BaseSlideshowView);t.LegacySlideshowView=x},34384:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.ReactAppSlideshowView=void 0;var r=n(a(600861)),i=n(a(856690)),o=n(a(689728)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(496486)),p=n(a(294184)),f=n(a(593186)),h=n(a(21870)),m=a(557310),v=a(148448),y=a(497797),g=a(680462),w=n(a(409022)),b=a(260493),S=a(44617),T=a(307074);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var R=function(e){(0,l.default)(a,e);var t=C(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"calculateNewIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.wrap,n=void 0!==a&&a,r=this.currentIndex()+e,i=this.props.tableRows.length;return r<0||r>=i?n&&i>0?r<0?i-1:0:-1:r}},{key:"transition",value:function(e){if(this.allowNavigation()){var t=this.calculateNewIndex(e),a=this.rowIdAtIndex(t);if(a){var n=c.default.extend(this.currentUIState,{SlideshowUIState:c.default.extend(this.currentUIState.SlideshowUIState,{RowKey:a})});this.setCurrentUIState(n)}}}},{key:"isSingleRow",value:function(){return 1===this.props.tableRows.length}},{key:"isFirst",value:function(){return this.currentIndex()<=0}},{key:"isLast",value:function(){return this.currentIndex()>=this.props.tableRows.length-1}},{key:"currentIndex",value:function(){var e=this.props,t=this.rowId;return e.tableRows.findIndex((function(e){return e.keyValue===t}))}},{key:"currentRow",value:function(){return this.props.tableRows[this.currentIndex()]}},{key:"rowIdAtIndex",value:function(e){var t;return null===(t=this.props.tableRows[e])||void 0===t?void 0:t.keyValue}},{key:"dataContext",value:function(){var e=this.viewStateKey;return this.currentRow().dataContext.augmentWithViewContext(e)}},{key:"rowId",get:function(){var e=this.props,t=e.rowId,a=e.tableRows,n=e.interactiveDashboardMode,r=e.coupledViews;if(null==t&&a.length&&!(n&&(null==r?void 0:r.length)))return a[0].keyValue;return t}},{key:"actionsInScope",get:function(){var e,t,a=this.appModel.appTemplate.actions(),n=null===(e=this.currentRow())||void 0===e?void 0:e.values;return n&&a.actionsForRow(n,null===(t=this.props.table)||void 0===t?void 0:t.name(),this.appModel,this.dataContext())||[]}},{key:"slideshowPageExtraProps",get:function(){return{rowValues:void 0,tableRows:void 0,dataContext:this.dataContext()}}},{key:"render",value:function(){var e,t;if(this.useCardLayout()&&this.setupCurrentLayout({autoDefaults:!0}),!this.shouldShow())return null;var a=this.props,n=a.table,r=a.tableSchema,i=a.width,o=a.height,l=a.isInline;if(!r||!n)return d.default.createElement("div",{className:"ReactSlideshowView ReactSlideshowView--no-table-schema"});var s=null===(e=this.currentRow())||void 0===e?void 0:e.values,u=this.rowId;if(null==s||null==u)return d.default.createElement(v.EmptyView,{className:"ReactSlideshowView",width:i,height:o,message:this.appModel.MapActionName("No items selected")});i||f.default.warnToDevConsole("SlideshowView needs a width");var c=this.page(u,s,0,i,!1,!0),y=(0,p.default)(this.appModel.rolloutClassNames,"BasePrimaryView ReactSlideshowView",{NoMaterialOverrides:m.ReactRootUIConfig.isInDesktopExperience(),Widescreen:!this.isSmallScreen(),"ReactSlideshowView--first-slide":this.isFirst(),"ReactSlideshowView--last-slide":this.isLast(),"ReactSlideshowView--show-arrows-always":this.shouldAlwaysShowArrows(),"ReactSlideshowView--show-arrows-hover":this.shouldShowArrowsOnHover(),"ReactSlideshowView--inset-arrows":this.isSmallScreen()}),T=h.default.widescreenBreakpoint,C=this.isCompactView()&&this.showDetailContent()?null:this.renderFabs(),R=void 0;C&&S.dynamicRollouts.includeByOwnerId("AdditionalPaddingWhenShowingFab")&&(R=this.fabActions.length);var E=(0,g.getPrimaryImageAttribute)({mainSlideshowImageColumn:this.props.mainSlideshowImageColumn,tableSchema:this.props.tableSchema});return d.default.createElement("div",{className:y,style:{width:i,display:"flex"},"data-fab-count":R},d.default.createElement("div",{style:{width:this.props.width}},d.default.createElement(w.default,{getScrollContainer:this.getScrollContainer.bind(this),disabled:l||(null!==(t=h.default.windowWidth)&&void 0!==t?t:i)>T,appModel:this.appModel},c,d.default.createElement(b.IfScreenIs,{narrow:!0},this.renderArrows(E))),C))}}]),a}(y.BaseSlideshowView);t.ReactAppSlideshowView=function(e){var t=e.searchQuery,a=e.filterExpr,n=e.filterDefaults,i=e.sortBy,o=e.table,l=e.rowId,s=e.interactiveDashboardMode,u=(0,T.usePendingTransaction)(),c=o.queryRows({searchQuery:t,filterExpr:a,filterDefaults:n,sortRules:i,transaction:u}),p=o.isSlice()||a||n||t;if(l&&!s&&p){var f=o.rootTable().lookupTableRow(l,u);f&&!c.includes(f)&&(c=[].concat((0,r.default)(c),[f]))}return d.default.createElement(R,Object.assign({},e,{tableRows:c}))}},113473:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LegacySlideshowView",{enumerable:!0,get:function(){return n.LegacySlideshowView}}),Object.defineProperty(t,"ReactAppSlideshowView",{enumerable:!0,get:function(){return r.ReactAppSlideshowView}});var n=a(159747),r=a(34384)},578914:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(856690)),o=n(a(689728)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(496486)),p=n(a(385857)),f=n(a(150198)),h=n(a(494012)),m=n(a(593186)),v=n(a(192137)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(365914)),g=n(a(571524)),w=n(a(962553)),b=n(a(389549)),S=a(300431),T=a(557310),C=a(166089),R=a(44617);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}function k(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw i}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var D=function(e){(0,l.default)(a,e);var t=A(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).wasRecentlyTouched=function(){return!1},n.onEntryTouchStart=function(e){var t=(new Date).getTime();n.wasRecentlyTouched=function(a){if(e.name()===a.name()&&(new Date).getTime()-t<1e3)return!0;return!1}},n.showContent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.row;return"Show"===e.type()?(t||(t=n.makeNewRowState(n.props)),t.showContent(e,n.viewStateKey)):null},n.state={},e.table&&e.tableSchema&&n.supportsEdits(e)&&(n.state=n.initializeEditableState(e)),n}return(0,o.default)(a,[{key:"rowState",get:function(){var e,t;if(this.props.tableRow)return this.props.tableRow.rowState;if(this.props.useTransactions){var a=this.rowId(this.props),n=this.props.table.rootTable().lookupTableRow(a,this.pendingTransaction);if(n)return T.ReactRootUIConfig.isReactRoot()&&(null===(e=this.props.view)||void 0===e?void 0:e.paging)?n.getRowState({paging:null===(t=this.props.view)||void 0===t?void 0:t.paging}):n.rowState}return this._rowState},set:function(e){this._rowState=e}},{key:"row",get:function(){return this.rowState},set:function(e){this._rowState=e}},{key:"tableRow",get:function(){var e;return null===(e=this.props.table)||void 0===e?void 0:e.lookupTableRow(this.props.rowId,this.pendingTransaction)}},{key:"updateMechanism",get:function(){}},{key:"transaction",get:function(){var e,t=this.props,a=t.appModel;if(t.useTransactions)return w.default.usePendingChangesStore&&this.pendingTransaction?this.pendingTransaction:null===(e=null==a?void 0:a.dataManager)||void 0===e?void 0:e.currentTransaction}},{key:"initializeEditableState",value:function(e){var t=this,a=(e=e||this.props).table.name();if(this.lastUpdateValues=c.default.clone(this.dataContext(e).rowData)||{},this.lastSavedValues=c.default.clone(this.dataContext(e).rowData)||{},this.getAsyncCallback=function(e){return function(n){var r;e.needsAsyncCallback()&&(n=e.coerceValue(n),n=e.valueToWireFormat(n),t.transaction?t.transaction.update(a,e.name(),t.stableId(t.props),n,t.updateMechanism,null===(r=t.props.view)||void 0===r?void 0:r.paging.rowStateColumnNames):(t.dataContext().setValue(e.name(),n),t.updateInfluencedEntries(e,{noAsync:!0})))}},this.formEntries={},this.onEntryMount=this.onEntryMount.bind(this),this.onEntryValueChange=this.onEntryValueChange.bind(this),this.onEntryFocus=this.onEntryFocus.bind(this),this.onEntryBlur=this.onEntryBlur.bind(this),this.onEntryKeyDown=this.onEntryKeyDown.bind(this),!e.useTransactions){var n=this.row=this.makeNewRowState(e);this.initialErrorState=n?n.validateSave({viewStateKey:this.viewStateKey}).errorState:{}}return this.initialState(e)}},{key:"onTransactionUpdated",value:function(e){document.activeElement.blur(),C.AppGlobals.StateChangeHandler.ShowUIState(!0)}},{key:"onEntryMount",value:function(e,t){t?this.formEntries[e.name()]=t:delete this.formEntries[e.name()]}},{key:"onEntryValueChange",value:function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.fullValue,i=n.forceUpdate,o=n.noAutoAdvance,l=this.props,s=l.rowIds,u=l.userEdited,d=l.table,p=this.transaction,h=e.name(),m=this.lastUpdateValues[h],v=this.dataContext(),g=!o,w=!0;if("string"==typeof t&&(t=(0,y.fastTrim)(t)),p){if(e.shouldUpdateOnChange()||r){if(i||g){var b,S=(null==s?void 0:s.length)?s:[this.stableId()],T=!1,C=k(S);try{for(C.s();!(b=C.n()).done;){var R=b.value,E=p.update(d.name(),R,h,t,this.updateMechanism,null===(a=this.props.view)||void 0===a?void 0:a.paging.rowStateColumnNames);E&&(T=!0)}}catch(e){C.e(e)}finally{C.f()}T&&this.onTransactionUpdated(p),w=!1}else g||(this.refreshEntryState([e]),w=!1);var I=this.isRequired(e)&&!f.default.valueExists(t,e.type()),A=null!=c.default.get(window,"AppState.CurrentUIState.FormUIState");A&&!I&&g&&(this.queueFocusAfter(h,{requireAutoAdvance:!0}),w=!0)}}else{var D=m!==t;if(v.setValue(h,t),u&&D&&(u[h]=!0),e.shouldUpdateOnChange()||r){i||D&&g?(this.updateInfluencedEntries(e),w=!1):g||(this.refreshEntryState([e]),w=!1);var M=this.isRequired(e)&&!f.default.valueExists(t,e.type()),x=null!=c.default.get(window,"AppState.CurrentUIState.FormUIState");x&&!M&&g&&(this.queueFocusAfter(h,{requireAutoAdvance:!0}),w=!0)}}w&&this.setState(c.default.extend({},this.state,{refreshId:Math.floor(1e9*Math.random()).toString()}))}},{key:"onEntryFocus",value:function(e){g.default.IsAndroidBrowser()&&!this.wasRecentlyTouched(e)||this.clearQueuedFocus(),this.setState({focused:e})}},{key:"onEntryBlur",value:function(e){this.state.focused===e&&this.setState({focused:null})}},{key:"onEntryKeyDown",value:function(e,t){"input"===t.target.tagName.toLowerCase()&&(13===t.keyCode||g.default.InMobileWebView()&&9===t.keyCode)&&(this.queueFocusAfter(e.name()),document.activeElement.blur())}},{key:"makeNewRowState",value:function(e){var t={editableColumnAllowlist:this.editableColumnAllowlist(e),editableColumnDenylist:this.editableColumnDenylist(e),getVisitedDataContext:e.getVisitedDataContext,view:e.view};return new h.default(e.appModel,e.table,this.dataContext(e),this.rowKey(e),e.entryAttributes,t)}},{key:"initialState",value:function(e){var t={invalidatesRow:{},showErrorState:!1,lastDataStamp:e.appModel?e.appModel.DataStamp:null,focused:null};return t}},{key:"supportsEdits",value:function(e){return!1}},{key:"editableColumnAllowlist",value:function(e){return null}},{key:"editableColumnDenylist",value:function(e){return e.editableColumnDenylist}},{key:"fullRefreshCondition",value:function(e){return this.state.lastDataStamp!==e.appModel.DataStamp||(this.props.rowId!==e.rowId||(this.rowId(this.props)!==this.rowId(e)||(!!e.fullRefresh||this.props.quickEditMode!==e.quickEditMode)))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.appModel){var t,a=this.state,n=a.showErrorState,r=a.invalidatesRow;this.fullRefreshCondition(e)&&(this.resetDataContext(e),this.supportsEdits(e)&&(this.supportsEdits(this.props)?(this.lastUpdateValues=c.default.clone(this.rowValues(e)),this.lastSavedValues=c.default.clone(this.rowValues(e)),e.useTransactions||(this.row=this.makeNewRowState(e))):t=this.initializeEditableState(e)),n=!1,r={}),this.setState(c.default.extend(t,{lastDataStamp:e.appModel.DataStamp,showErrorState:n,invalidatesRow:r}))}}},{key:"showErrorState",value:function(){return!("showErrorState"in this.props)||this.props.showErrorState}},{key:"queueFocusAfter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._focusAfter={attrName:e,params:t}}},{key:"clearQueuedFocus",value:function(){delete this._focusFirst,delete this._focusAfter,delete this._focusPending}},{key:"rowValues",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return t.rowValues?e=t.rowValues:t.dataContext&&(e=t.dataContext.rowData),e||{}}},{key:"stableId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return T.ReactRootUIConfig.isReactRoot()&&e.tableRow instanceof b.default?e.tableRow.stableId:this.rowId(e)}},{key:"rowId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.tableSchema.keyAttribute().name(),a=this.rowValues(e);return c.default.trim(a[t])}},{key:"rowCssSelector",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t="_RowElement_"+this.props.table.name()+"_"+this.rowId(e);return t.replace(/~|!|@|\$|%|\^|&|\*|\(|\)|\+|=|,|\.|\/|'|;|:|"|\?|>|<|\[|\]|\\|{|}|\||`|#/g,"_")}},{key:"dataContext",value:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(a.dataContext)return a.dataContext.augmentWithViewContext(this.viewStateKey);if(null==this._dataContext){var n={rowData:{},tableName:a.table.name(),rootTableName:a.table.rootName(),keyAttrName:a.tableSchema.keyAttribute().name(),tempId:Math.floor(1e9*Math.random()).toString()};this._dataContext=new p.default(a.appModel,a.tableSchema,{},n,void 0,void 0,{viewStateKey:this.viewStateKey}),this.resetDataContext(a)}return(null===(t=null===(e=this._dataContext)||void 0===e?void 0:e.uiContext)||void 0===t?void 0:t.viewStateKey)||(this._dataContext=this._dataContext.augmentWithViewContext(this.viewStateKey)),this._dataContext}},{key:"resetDataContext",value:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(this._dataContext&&this.rowValues(a)){var n=this.rowValues(a);if(a.table.isSlice()){var r=this.rowId(a),i=a.table.rootTable();n=null!==(t=null===(e=null==i?void 0:i.lookupTableRow(r,this.pendingTransaction))||void 0===e?void 0:e.values)&&void 0!==t?t:n}this.supportsEdits(a)&&(n=c.default.clone(n)),this._dataContext.replaceRowData(n),a.appModel&&(this._dataContext.appModel=a.appModel)}}},{key:"isEntryAttribute",value:function(e){var t;return c.default.includes(null===(t=this.props.entryAttributes)||void 0===t?void 0:t.map((function(e){return e.name()})),e.name())}},{key:"updateInfluencedEntries",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.props.useTransactions){if(this.POSSIBLE_INFINITE_LOOP){if(n>0)return;this.POSSIBLE_INFINITE_LOOP=!1}var r=this.props,i=this.dataContext(),o=r.tableSchema,l=c.default.keys(r.userEdited),s=v.default.attributeNames(o.changeTriggeredAttributes()),u=new Date,d={},p={},f={considered:d,computed:p,noAsync:a.noAsync,getAsyncCallback:this.getAsyncCallback,computeDefaults:this.isNewRow(r),skipTheseDefaults:c.default.keyBy(l.concat(s)),skipLeafAttrs:!0,initialData:r.initialData||this.lastSavedValues,nowDate:u};e.isKey()&&i.resolveParentRefs(),i.recomputeInfluencedAttributes(e,f),this.updateValidityEnums(e,a,n);var h=c.default.unionBy(o.influencedAttributes(e),[e],(function(e){return e.name()})),m=h.filter((function(e){return t.isEntryAttribute(e)}));this.refreshEntryState(m)}}},{key:"updateValidityEnums",value:function(e,t){for(var a,n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.props,o=i.tableSchema.influencedValidityEnums(e),l=this.dataContext(),s={},u=[],d=e.inFullDependentChain(o),p=R.dynamicRollouts.includeByOwnerId("TransactionRecomputeInfluenced"),f=0;f<o.length;f++){var h=o[f],v=l.getValue(h),y=this.validOptions(h)||[],g=p&&(h===e||h.hasAppFormula()),w=!this.isEntryAttribute(h)||g||d&&0===f&&(0===r&&y.length||r>0&&""===v);if(w)a=v;else{if(d&&f>0&&(null==a||""===a))y=[];else{var b=h.validIfEvalTree().getInConditionListInformation(l),S=b.values,T=b.elementAttribute;y=T.valuesToWireFormat(S)}s[h.name()]=y;var C=Array.isArray(v)?v:[v];h.type()===i.appModel.ENUMLIST_TYPE&&(C=h.splitEnumListValue(v,y));for(var E=!0,k=0;k<C.length;k++){var I=C[k];if(""!==I&&null!=I&&!c.default.includes(y,I)){E=!1;break}}null==y||E||""===l.getValue(h)||(v="",l.setValue(h.name(),v),u.push({attr:h})),a=v}}return u.forEach((function(a){var i=a.attr;if(e.name()!==i.name())if(r<20)n.updateInfluencedEntries(i,t,r+1);else if(!n.POSSIBLE_INFINITE_LOOP){n.POSSIBLE_INFINITE_LOOP=!0;var o="Possible infinite loop in onEntryValueChange";m.default.ReportErrorOnce({errorMessage:o}),m.default.warnToDevConsole(o)}})),s}},{key:"refreshEntryState",value:function(e){this.row&&this.row.refreshState(e),this.setState({refreshId:Math.floor(1e9*Math.random()).toString()})}},{key:"isNewRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return null==this.rowKey(e)||""===this.rowKey(e)}},{key:"isValid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.row;return!t||t.isValid(e,this.viewStateKey)}},{key:"isHidden",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.row;return!!t&&t.isHidden(e,this.viewStateKey)}},{key:"isRequired",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.row;return!!t&&t.isRequired(e,this.viewStateKey)}},{key:"isEditable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.row;return!!t&&t.isEditable(e,this.viewStateKey)}},{key:"validOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.row;return t?t.validOptions(e,this.viewStateKey):null}},{key:"suggestedValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.row;return t?t.suggestedValues(e,this.viewStateKey):null}},{key:"displayName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.row;return t?t.displayName(e,this.viewStateKey):null}},{key:"rowKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return null!=e.rowKey&&""!==e.rowKey?e.rowKey:e.rowId}},{key:"usePlaceholderLabel",value:function(e){if(T.ReactRootUIConfig.isInDesktopExperience())return!1;var t=this.dataContext().getValue(e);if(e.hasAppFormula())return!1;if(null!=t&&""!==t)return!1;var a=document.activeElement;if(a&&this.state.focused&&this.state.focused.name()===e.name()&&!e.isEnumerated()&&("INPUT"===a.tagName||"TEXTAREA"===a.tagName))return!1;var n=!this.isValid(e)||this.isRequired(e)&&!f.default.valueExists(t,e.type());if(this.showErrorState()&&n)return!1;if(e.isNumericType()&&!e.isEnumerated())return!1;var r=e.type().toLowerCase();if(e.isValidityEnum()&&this.row){var i=this.validOptions(e);return!e.shouldUseButtonSelect(i,!1,"enumlist"===r,e.isScannable())}switch(r){case"date":case"time":case"datetime":case"changetimestamp":case"changecounter":case"changeLocation":case"image":case"drawing":case"signature":case"thumbnail":case"file":case"yes/no":case"progress":case"color":case"url":return!1;case"enum":case"enumlist":var o=e.auxData(),l=o.EnumValues,s=o.AllowOtherValues;return!e.shouldUseButtonSelect(l,s,"enumlist"===r);case"ref":return"Buttons"!==e.auxData().InputMode;default:return!0}}},{key:"makeEntryId",value:function(e){return y.default.makeElementId("Attr_"+e.name())}},{key:"render",value:function(){return d.default.createElement("div",null)}}]),a}(S.PureViewAwareComponent);t.default=D},866610:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.DeckRowDataTestids=t.DeckRow=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(366115)),s=n(a(441588)),u=n(a(861655)),d=n(a(994993)),c=n(a(73808)),p=n(a(667294)),f=n(a(294184)),h=n(a(496486)),m=n(a(578914)),v=n(a(112963)),y=a(803583),g=n(a(454852)),w=n(a(593186)),b=n(a(17926)),S=a(10311),T=a(234902);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}t.DeckRowDataTestids=r,function(e){e.Container="deck-row-container"}(r||(t.DeckRowDataTestids=r={}));var R=100,E=function(e){(0,u.default)(a,e);var t=C(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).handleSelect=function(e){n.props.onRowTap&&0===n.state.dragPosition&&n.props.onRowTap(n.rowId(),n.rowValues(),e)},n.handleRef=function(e){n.slideRef=e},n.state.dragging=!1,n.state.dragPosition=0,n.handleDragStart=n.handleDragStart.bind((0,l.default)(n)),n.handleDragEnd=n.handleDragEnd.bind((0,l.default)(n)),n.handleDrag=n.handleDrag.bind((0,l.default)(n)),n.dragState={dragDeltaX:0,outOfBounds:!1},n}return(0,o.default)(a,[{key:"handleDragStart",value:function(){this.props.onDragStart&&this.props.onDragStart()}},{key:"handleDrag",value:function(e){if(this.slideRef){if(!this.state.dragging){if(this.dragState.dragDeltaX=e.deltaX+(this.dragState.dragDeltaX||0),Math.abs(this.dragState.dragDeltaX)<=20)return;var t=this.slideRef.getBoundingClientRect(),a=t.top,n=t.bottom,r=t.left,i=t.right,o=e.x,l=e.y;if(this.dragState.outOfBounds||o<r||o>i||l<a||l>n)return void(this.dragState.outOfBounds=!0)}var s=this.state.dragPosition;s||(s=0);var u=Math.round(24*Math.abs(s)/R);u>24&&(u=24);var d=e.deltaX+s;d>R?d=R:d<-100&&(d=-100),!this.allowRowSwipe()||d<0&&!this.props.swipeLeftAction||d>0&&!this.props.swipeRightAction?this.setState({dragging:!1,dragPosition:0,dragIconHeight:0}):(this.setState({dragging:!0,dragPosition:d,dragIconHeight:u}),"function"==typeof this.props.onDrag&&this.props.onDrag(this))}}},{key:"handleDragEnd",value:function(){var e=this,t=this.props,a=t.onRowSwipeLeft,n=t.onRowSwipeRight,r=t.onDragEnd,i=this.state.dragPosition,o=i>=R,l=i<=-100,s=function(){e.slideRef&&(e.setState({dragging:!1,dragPosition:0}),e.dragState.dragDeltaX=0,e.dragState.outOfBounds=!1)};o||l?setTimeout(s,window.Common.FADE_OUT_DURATION_MS):s(),o&&n?n(this):l&&a&&a(this),r&&r(this)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=null,n=null;e.swipeLeftAction&&(t=(0,S.getActionFormattingRules)(e.appModel,e.swipeLeftAction,this.rowId()),this.setState({leftFormattingRules:t})),e.swipeRightAction&&(n=(0,S.getActionFormattingRules)(e.appModel,e.swipeRightAction,this.rowId()),this.setState({rightFormattingRules:n})),!this.allowRowSwipe(e)&&this.allowRowSwipe(this.props)&&this.setState({dragging:!1,dragPosition:0,dragIconHeight:0}),(0,s.default)((0,c.default)(a.prototype),"UNSAFE_componentWillReceiveProps",this).call(this,e)}},{key:"allowRowSwipe",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return!(!e.swipeRightAction&&!e.swipeLeftAction)}},{key:"render",value:function(){var e;if(this.props.drilldownColumn){var t=this.props.tableSchema.findAttributeByName(this.props.drilldownColumn);if(t)return p.default.createElement(b.default,Object.assign({},this.props,{rows:[this.props.rowValues],disableNavigation:this.props.disableNavigation,attribute:t,tableSchema:this.props.tableSchema,groupAggregate:this.props.groupAggregate,selectionMode:this.props.selectionMode,index:this.props.index,onTap:this.handleSelect,viewType:"deck"}))}var a=this.props.appModel.AppTemplate.Presentation.RespectShowIfEverywhere,n=null;if(this.props.layout.nestedTable){var i=this.props.layout.nestedTable,o=i.TypeDisplay,l=i.attribute;(a&&l.showIfEvalTree()?l.showIfEvalTree().run(this.dataContext()):!l.isHidden())&&(n=p.default.createElement("div",{className:"DeckRow_nested-table"},p.default.createElement(o,{attribute:l,value:this.props.rowValues[l.name()],showContent:this.showContent(l),table:this.props.table,showListInline:!0,dataContext:this.dataContext(),appModel:this.props.appModel,imageDisplayType:this.props.imageDisplayType,rowId:this.rowId(),width:this.props.width})))}var s,u=this.state,d=u.dragPosition,c=u.dragging,h=u.leftFormattingRules,m=u.rightFormattingRules,y=d<0;h&&c&&y?s=h.highlightColor:m&&c&&!y&&(s=m.highlightColor);var g,w,S,C=y?this.props.swipeLeftAction:this.props.swipeRightAction;this.allowRowSwipe()&&(S=this.handleDragEnd,w=this.handleDragStart,g=this.handleDrag);var R=(0,f.default)("DeckRow",{WithNestedTable:n,Dragging:c,Left:c&&y,Right:c&&!y});return p.default.createElement(v.default,{"data-testid":r.Container,id:"Deck"+this.rowCssSelector(),"data-testonly-row-index":this.props.index,spanMode:!0,navigationDelay:!0,className:R,style:{background:s,display:"block"},onTap:this.handleSelect,onDragEnd:S,onDragStart:w,onDrag:g,onLongPress:null===(e=this.props.onRowLongPress)||void 0===e?void 0:e.bind(null,this.rowId())},p.default.createElement(T.DeckRowContents,Object.assign({handleRef:this.handleRef,dragPosition:d,showContent:this.showContent.bind(this),getDataContext:this.dataContext.bind(this),rowCssSelector:this.rowCssSelector.bind(this),getRowId:this.rowId.bind(this),draggingLeft:y,dragIconHeight:this.state.dragIconHeight,swipeAction:C},this.props)),n)}}],[{key:"primaryImageAttribute",value:function(e){var t=e.tableSchema,a=e.mainDeckImageColumn;return"**none**"===a?null:a?t.findAttributeByName(a):t.labelImageAttribute(!0)}},{key:"primaryTextAttribute",value:function(e){var t=e.tableSchema,a=e.primaryDeckHeaderColumn,n=e.usedAttributes;if("**none**"===a)return null;if(a)return t.findAttributeByName(a);var r=t.labelBasicAttribute();if(!h.default.includes(n,r))return r;var i=t.basicAttributesByImportance(),o=h.default.difference(i,n);return h.default.head(o)}},{key:"secondaryTextAttribute",value:function(e){var t=e.tableSchema,a=e.secondaryDeckHeaderColumn,n=e.usedAttributes;if("**none**"===a)return null;if(a)return t.findAttributeByName(a);var r=t.basicTypeAttributes(),i=h.default.difference(r,n);return h.default.head(i)}},{key:"nestedTableAttribute",value:function(e){var t=e.tableSchema,a=e.nestedTableColumn;return"**none**"===a?null:a?t.findAttributeByName(a):null}},{key:"summaryAttribute",value:function(e){var t=e.tableSchema,a=e.deckSummaryColumn,n=e.usedAttributes;if("**none**"===a)return null;if(a)return t.findAttributeByName(a);var r=t.summaryFormulaAttributesByImportance(),i=h.default.difference(r,n);return h.default.head(i)}},{key:"computeLayout",value:function(e){var t=e.appModel,a=e.table,n=e.tableSchema,r=e.mainDeckImageColumn,i=e.primaryDeckHeaderColumn,o=e.secondaryDeckHeaderColumn,l=e.deckSummaryColumn,s=e.nestedTableColumn,u=e.showActionBar,d=e.actionBarEntries,c=e.actionColumns,p=e.swipeLeftEvent,f=e.swipeRightEvent,h=e.dataContext,m=[],v=[r,i,o,l];c&&(v=v.concat(c)),m=n.findAttributesByNames(v.filter((function(e){return Boolean(e&&"**none**"!==e)})));var b={actionButtons:[],imageBorderRadius:n.isAppLauncherSchema()?16:2},S=this.primaryImageAttribute({tableSchema:n,mainDeckImageColumn:r});S&&(m.push(S),b.primaryImage={TypeDisplay:y.TypeDisplaysApi.lookup(S),attribute:S});var T=this.primaryTextAttribute({tableSchema:n,primaryDeckHeaderColumn:i,usedAttributes:m});T&&(m.push(T),b.primaryText={TypeDisplay:y.TypeDisplaysApi.lookup(T),attribute:T});var C=this.summaryAttribute({tableSchema:n,deckSummaryColumn:l,usedAttributes:m});C&&(m.push(C),b.topRight={TypeDisplay:y.TypeDisplaysApi.lookup(C),attribute:C});var R=this.secondaryTextAttribute({tableSchema:n,secondaryDeckHeaderColumn:o,usedAttributes:m});R&&(m.push(R),b.secondaryText={TypeDisplay:y.TypeDisplaysApi.lookup(R),attribute:R});var E=this.nestedTableAttribute({tableSchema:n,nestedTableColumn:s,usedAttributes:m});if(E&&(m.push(E),b.nestedTable={TypeDisplay:y.TypeDisplaysApi.lookup(E),attribute:E}),!1!==u){if(d&&d.length)d.forEach((function(e){var r=t.appTemplate.actions().findByName(a.rootName(),e);r?r.isValidForTable(a,n,t,h)?b.actionButtons.push(r):w.default.warnToDevConsole("action specified in deck row is not valid for table"):w.default.warnToDevConsole("Could not find action specified in Deck view",e)}));else if(c&&c.length){n.findAttributesByNames(c).forEach((function(e){var r=g.default.createFromAttribute(t,n,a.name(),e);b.actionButtons=b.actionButtons.concat(r)}))}else{var k=t.appTemplate.actions().actionsForTable(a.name(),t).filter((function(e){return!e.tableScope()}));b.actionButtons=b.actionButtons.concat(k)}b.actionButtons=b.actionButtons.filter((function(e){return e.prominence()!==g.default.DO_NOT_DISPLAY}))}return p&&(b.swipeLeftActionIcon=t.appTemplate.actions().findByName(a.rootName(),p.EventAction)),f&&(b.swipeRightAction=t.appTemplate.actions().findByName(a.rootName(),f.EventAction)),b}},{key:"getDeckRowHeight",value:function(e){if(!!e.primaryImage)return 90;var t=e.actionButtons||[],a=!!e.primaryText,n=!!e.secondaryText,r=!!e.topRight,i=n&&!a&&!r;return(t.length>0?30:0)+(a||i||r&&!a&&!n||!a&&n&&r?38:0)+(!i&&n?22:0)}}]),a}(m.default);t.DeckRow=E},234902:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.DeckRowContents=t.DECK_ROW_IMAGE_WIDTH=void 0;var r=n(a(238416)),i=n(a(667294)),o=n(a(294184)),l=a(695386),s=n(a(106375));t.DECK_ROW_IMAGE_WIDTH=70;var u=(0,l.makeStyles)((function(e){return{DeckRowSlide:function(e){return{height:e.deckRowHeight,display:e.hasActionButtons?"":"flex",alignItems:e.hasActionButtons?"":"center"}},main:{boxSizing:"border-box",display:"inline-block",verticalAlign:"top",width:"100%",marginTop:function(e){return e.hasActionButtons?10:0}},topRowContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},primaryText:function(e){return{fontWeight:500,fontSize:"0.778rem",maxWidth:e.hasSummaryText?"70%":"100%"}},primaryImage:{boxSizing:"border-box",display:"inline-block",verticalAlign:"top",marginTop:10,left:0,padding:"0 ".concat(e.spacing(1.5),"px"),position:"absolute",top:0,width:94},hasImage:{paddingLeft:94},actionButtonContainer:function(e){return{fontSize:"0.9em",position:"absolute",right:"2px",overflow:"hidden",maxWidth:"calc(100% - ".concat(94,"px)"),top:"calc(".concat(e.deckRowHeight,"px - ").concat(38,"px)"),display:"flex",flexWrap:"wrap",flexDirection:"row-reverse"}},actionButton:{display:"inline-block",height:38,verticalAlign:"top",width:38}}}));t.DeckRowContents=function(e){var t,a,n=e.handleRef,l=e.rowCssSelector,d=e.dragPosition,c=e.appModel,p=e.layout,f=e.deckRowHeight,h=void 0===f?90:f,m=e.rowValues,v=e.getRowId,y=e.getDataContext,g=e.imageDisplayType,w=e.showContent,b=e.table,S=e.additionalActions,T=void 0===S?[]:S,C=e.translucentMode,R=e.isSelected,E=e.isLastToggled,k=e.highlighted,I=e.collapseBlankImage,A=e.swipeAction,D=e.draggingLeft,M=e.dragIconHeight,x=(p.actionButtons||[]).concat(T).filter((function(e){return e.isValidForRow(m,y())})),N=!!p.topRight,O=x.length>0,_=u({hasSummaryText:N,hasActionButtons:O,deckRowHeight:h}),B=c.AppTemplate.Presentation.RespectShowIfEverywhere,P=null,L=!1;if(p.primaryImage){var V=p.primaryImage,F=V.TypeDisplay,H=V.attribute;if(L=!!(a=m[H.name()])||!I,(B&&H.showIfEvalTree()?H.showIfEvalTree().run(y()):!H.isHidden())&&L){var W=g;"Thumbnail"===H.type()&&(W="full-centered"),P=i.default.createElement("div",{className:(0,o.default)("DeckRow__primary-image",_.primaryImage),key:v()},i.default.createElement(F,{className:"DeckRow__primary-image-display",attribute:H,value:a,showContent:w(H),table:b,dataContext:y(),appModel:c,imageDisplayType:W,imageBorderRadius:p.imageBorderRadius,useLoadingSpinner:!0,allowTaps:!1,width:70,height:70,rowId:v()}),R?i.default.createElement("aside",{className:"DeckRow__selection-indicator",style:{width:"70px",height:"70px",borderRadius:"Round Image"===W?"400px":p.imageBorderRadius+"px"}},i.default.createElement("i",{className:"fa fa-check"})):null)}}var U=null;if(p.topRight){var j=p.topRight,z=j.TypeDisplay,G=j.attribute;(B&&G.showIfEvalTree()?G.showIfEvalTree().run(y()):!G.isHidden())&&(U=i.default.createElement("div",{className:"DeckRow__top-right-text"},i.default.createElement(z,{attribute:G,value:m[G.name()],showContent:w(G),table:b,dataContext:y(),appModel:c,imageDisplayType:g,rowId:v()})))}var K=null;if(p.primaryText){var Y=p.primaryText,q=Y.TypeDisplay,$=Y.attribute;(B&&$.showIfEvalTree()?$.showIfEvalTree().run(y()):!$.isHidden())&&(K=i.default.createElement("div",{className:(0,o.default)("DeckRow__primary-text",_.primaryText)},i.default.createElement(q,{attribute:$,value:m[$.name()],showContent:w($),table:b,dataContext:y(),appModel:c,imageDisplayType:g,rowId:v()})))}var Q=null;if(p.secondaryText){var X=p.secondaryText,Z=X.TypeDisplay,J=X.attribute;(!(!B||!J.showIfEvalTree())?J.showIfEvalTree().run(y()):!J.isHidden())&&(Q=i.default.createElement("div",{className:"DeckRow__secondary-text"},i.default.createElement(Z,{attribute:J,value:m[J.name()],showContent:w(J),table:b,dataContext:y(),appModel:c,imageDisplayType:g,rowId:v()})))}var ee,te=x.map((function(e,t){return i.default.createElement("div",{className:_.actionButton,key:"".concat(e.name(),"-").concat(t)},i.default.createElement(s.default,{appModel:c,action:e,rowId:v(),sourceLocationName:"Deck Row",sourceTable:b,displayMode:"small"}))})).reverse();A&&(ee=i.default.createElement(s.default,{appModel:c,action:A,disabled:!0,rowId:v(),sourceLocationName:"Deck Row",sourceTable:b,displayMode:"small",invertColors:!0}));var ae=(0,o.default)("DeckRowSlide",_.DeckRowSlide,(t={"DeckRow--has-top-right-text":!!U},(0,r.default)(t,_.hasImage,L),(0,r.default)(t,"DeckRow--translucent-mode",C),(0,r.default)(t,"DeckRow--selected",R),(0,r.default)(t,"DeckRow--last-toggled",E),(0,r.default)(t,"DeckRow--highlighted",k),t));return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"DeckRow__swipe-action-button",style:{position:"absolute",left:D?void 0:55,right:D?51:void 0,marginTop:Math.floor(h/2),verticalAlign:"middle",fontSize:M}},ee),i.default.createElement("div",{ref:n,className:ae,id:"draggable"+l(),"data-testid":"deck-row-slide-".concat(l()),style:{position:"relative",left:d,paddingLeft:L?void 0:"16px"}},L?P:null,i.default.createElement("div",{className:_.main},i.default.createElement("div",{className:_.topRowContainer},K,U),Q,i.default.createElement("div",{className:_.actionButtonContainer},te))))}},894440:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DECK_ROW_IMAGE_WIDTH",{enumerable:!0,get:function(){return r.DECK_ROW_IMAGE_WIDTH}}),Object.defineProperty(t,"DeckRow",{enumerable:!0,get:function(){return n.DeckRow}});var n=a(866610),r=a(234902)},217738:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GalleryRowDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(578914)),c=n(a(667294)),p=n(a(496486)),f=n(a(294184)),h=n(a(112963)),m=a(803583),v=a(557310);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}t.GalleryRowDataTestIds=r,function(e){e.Container="gallery-row-container"}(r||(t.GalleryRowDataTestIds=r={}));var g={Tiny:{screenSm:{width:72,fontSizeMultiplier:.667,accentLine:!1,margin:16,titleHPadding:8},screenMd:{width:90,fontSizeMultiplier:.667,accentLine:!1,margin:16,titleHPadding:8},screenLg:{width:140,fontSizeMultiplier:.667,accentLine:!1,margin:16,titleHPadding:8}},Small:{screenSm:{width:140,fontSizeMultiplier:.778,accentLine:!0,margin:16,titleHPadding:8},screenMd:{width:180,fontSizeMultiplier:.778,accentLine:!0,margin:16,titleHPadding:8},screenLg:{width:198,fontSizeMultiplier:.778,accentLine:!0,margin:16,titleHPadding:8}},Medium:{screenSm:{width:150,fontSizeMultiplier:.778,accentLine:!0,margin:16,titleHPadding:8},screenMd:{width:220,fontSizeMultiplier:.778,accentLine:!0,margin:16,titleHPadding:8},screenLg:{width:315,fontSizeMultiplier:.778,accentLine:!0,margin:16,titleHPadding:8}},Large:{screenSm:{width:600,fontSizeMultiplier:.778,accentLine:!0,margin:16,titleHPadding:8},screenMd:{width:600,fontSizeMultiplier:.778,accentLine:!0,margin:16,titleHPadding:8},screenLg:{width:600,fontSizeMultiplier:.778,accentLine:!0,margin:16,titleHPadding:8}}},w=function(e){(0,l.default)(a,e);var t=y(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"handleSelect",value:function(){this.props.onRowTap&&this.props.onRowTap(this.rowId())}},{key:"render",value:function(){var e,t=this.props.layout.image,a=this.props.layout.title,n=this.props.appModel.AppTemplate.Presentation.RespectShowIfEverywhere,i=this.props.layout.boxWidth;i-=2;var o=this.props.imageDisplayType||"square";(this.props.layout.appLauncherAttribute||t&&"Image"!==t.attribute.type())&&(o="full-centered"),"full"===o&&(o="full-centered");var l=null;if(t){var s=!0;n&&t.attribute.showIfEvalTree()&&(s=t.attribute.showIfEvalTree().run(this.dataContext())),s&&(l=c.default.createElement("div",{className:"GalleryRow__image"},c.default.createElement(t.typeDisplay,{attribute:t.attribute,value:this.props.rowValues[t.attribute.name()],table:this.props.table,appModel:this.props.appModel,rowId:this.rowId(),dataContext:this.dataContext(),allowTaps:!1,imageDisplayType:o,minimalView:!1,imageBorderRadius:this.props.layout.borderRadius,useLoadingSpinner:!0,width:i,height:i}),this.props.isSelected?c.default.createElement("aside",{className:"GalleryRow__selection-indicator",style:{width:i+"px",height:i+"px",borderRadius:this.props.layout.borderRadius+"px"}},c.default.createElement("span",null,c.default.createElement("i",{className:"fa fa-check"}))):null))}var u=null;if(a){var d=!0;n&&a.attribute.showIfEvalTree()&&(d=a.attribute.showIfEvalTree().run(this.dataContext())),d&&(u=c.default.createElement(a.typeDisplay,{attribute:a.attribute,value:this.props.rowValues[a.attribute.name()],table:this.props.table,appModel:this.props.appModel,allowTaps:!1,rowId:this.rowId(),dataContext:this.dataContext(),minimalView:!1,showTooltip:!0}))}var p=v.ReactRootUIConfig.isInDesktopExperience(),m={width:this.props.layout.boxWidth,height:p?38+i:"auto",margin:this.props.layout.margin/2+"px"},y={height:38,fontSize:this.props.layout.fontSizeMultiplier+"em",paddingLeft:this.props.layout.titleHPadding+"px",paddingRight:this.props.layout.titleHPadding+"px"},g=(0,f.default)("GalleryRow",{"GalleryRow--include-accent-line":this.props.layout.accentLine,"GalleryRow--selected":this.props.isSelected,"GalleryRow--highlighted":this.props.highlighted&&!p,"GalleryRow--highlighted-update":this.props.highlighted&&p});return c.default.createElement("span",{"data-testid":r.Container},c.default.createElement(h.default,{navigationDelay:!0,onTap:this.handleSelect.bind(this),onLongPress:null===(e=this.props.onRowLongPress)||void 0===e?void 0:e.bind(null,this.rowId()),className:g,style:m,"data-testonly-row-index":this.props.index,id:"Gallery"+this.rowCssSelector()},l,c.default.createElement("div",{className:"GalleryRow__title",style:y},u)))}}],[{key:"computeLayout",value:function(e){var t=e.tableSchema,a=e.width,n=e.galleryImageSize,r=e.sidewaysScroll;!r||"Medium"!==n&&"Large"!==n||(n="Small");var i=t.labelImageAttribute(!0),o=null;i&&(o={attribute:i,typeDisplay:m.TypeDisplaysApi.lookup(i)});var l=t.labelBasicAttribute(),s=null;l&&(s={attribute:l,typeDisplay:m.TypeDisplaysApi.lookup(l)});var u=(g[n]||g.Medium)[a<=480?"screenSm":a<=768?"screenMd":"screenLg"],d=Math.min(u.width,a||u.width),c=r?null:Math.floor(a/d);null!==c&&(d=(a-c*u.margin)/c);var f=u.borderRadius;return t.isAppLauncherSchema()&&(f=16),p.default.extend({},u,{image:o,title:s,boxWidth:d,sidewaysScroll:r,imagesPerLine:c,borderRadius:f})}}]),a}(d.default);t.default=w},303055:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808)),u=n(a(667294)),d=n(a(294184)),c=a(803583),p=a(894440),f=n(a(578914)),h=n(a(888861)),m=n(a(454852));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var y=function(e){(0,o.default)(a,e);var t=v(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"handleSelect",value:function(){this.pushView("detail",!1,{TableName:this.props.table.name(),RowKey:this.rowId()},!0)}},{key:"render",value:function(){var e=this.props,t=e.table,n=e.tableSchema,r=e.rowValues,i=e.appModel,o=e.mapColumn,l=n.findAttributeByName(o),s=null!=l&&!l.isHidden()?u.default.createElement(c.TypeDisplaysApi.Text,{className:"GoogleMapRow__address-text",attribute:l,value:r[o],table:t,dataContext:this.dataContext(),appModel:i,rowId:this.rowId()}):null,f=[];this.props.directionsUrl&&f.push(new m.default({ActionType:"NAVIGATE_URL",Icon:"fa-car",IsValid:!0,Name:"Get driving directions",Table:this.props.table.name(),ValueEvaluatable:h.default.createConcatenate(h.default.createConstantValue(this.props.directionsUrl,"Url")).model}));var v=p.DeckRow.computeLayout({appModel:this.props.appModel,table:this.props.table,tableSchema:this.props.tableSchema,actionColumns:this.props.actionColumns,actionBarEntries:this.props.actionBarEntries,deckSummaryColumn:this.props.deckSummaryColumn,mainDeckImageColumn:this.props.mainDeckImageColumn,primaryDeckHeaderColumn:this.props.primaryDeckHeaderColumn,secondaryDeckHeaderColumn:this.props.secondaryDeckHeaderColumn,showActionBar:this.props.showActionBar}),y=(0,d.default)("GoogleMapRow"),g={height:a.computeHeight(this.props)};return u.default.createElement("div",{className:y,style:g},s,u.default.createElement(p.DeckRow,{onRowTap:this.props.onRowTap||this.handleSelect.bind(this),layout:v,rowValues:this.props.rowValues,table:this.props.table,appModel:this.props.appModel,tableSchema:this.props.tableSchema,additionalActions:f,actionColumns:this.props.actionColumns,actionBarEntries:this.props.actionBarEntries,deckSummaryColumn:this.props.deckSummaryColumn,imageDisplayType:this.props.imageDisplayType,mainDeckImageColumn:this.props.mainDeckImageColumn,primaryDeckHeaderColumn:this.props.primaryDeckHeaderColumn,secondaryDeckHeaderColumn:this.props.secondaryDeckHeaderColumn,showActionBar:this.props.showActionBar,collapseBlankImage:!0}))}}],[{key:"computeHeight",value:function(e){var t=e.tableSchema,a=e.mapColumn;if(null==t)return 90;var n=t.findAttributeByName(a);return null!=n&&!n.isHidden()?118:90}}]),a}(f.default);t.default=y},17926:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GroupedHeaderRowTestIds=void 0;var r,i=n(a(600861)),o=n(a(627424)),l=n(a(856690)),s=n(a(689728)),u=n(a(861655)),d=n(a(994993)),c=n(a(73808)),p=n(a(667294)),f=n(a(294184)),h=a(803583),m=n(a(578914)),v=a(714611),y=n(a(454852)),g=n(a(150198)),w=n(a(112963)),b=n(a(106375)),S=n(a(385857)),T=n(a(593186)),C=a(563479),R=a(664583),E=a(557310);function k(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw i}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}t.GroupedHeaderRowTestIds=r,function(e){e.Container="grouped-header-row-container",e.DrillArrow="grouped-header-row-drill-arrow"}(r||(t.GroupedHeaderRowTestIds=r={}));var D=function(e){(0,u.default)(a,e);var t=A(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"computeAggregateValue",value:function(){var e,t=this.props.rows,a=this.props,n=a.appModel,r=a.tableSchema,l=a.drilldownColumn,s=a.table,u=a.searchQuery,d=a.rowLimit,c=a.groupBy,p=a.groupAggregate,f=a.filterExpr,h=a.filterDefaults,m=new S.default(n,r,void 0,void 0,void 0,void 0,{viewStateKey:this.viewStateKey});if(l){var v={searchQuery:u,limit:d,sortRules:[{Column:l,Order:c[0].Order}],filterExpr:f,filterDefaults:h,groupBy:l,transaction:this.pendingTransaction},y=s.queryRowValuesGroupBy(v,n,m),w=r.findAttributeByName(l);"EnumList"===(null==w?void 0:w.type())&&function(){var e,t=new Map(y),a=k(t);try{var n=function(){var a=(0,o.default)(e.value,1)[0],n=g.default.splitEnumListValue(a);n.length>1&&n.forEach((function(e){var n,r;t.set(e,[].concat((0,i.default)(null!==(n=t.get(e))&&void 0!==n?n:[]),(0,i.default)(null!==(r=t.get(a))&&void 0!==r?r:[])))}))};for(a.s();!(e=a.n()).done;)n()}catch(e){a.e(e)}finally{a.f()}y=t}();var b=t[0][l];t=null!==(e=y.get(b))&&void 0!==e?e:[]}return r.computeAggregate({aggregationFunction:p.func,targetColumnName:p.column,rows:t,tableName:s.name(),appModel:n})}},{key:"inlineTextSelected",value:function(e){e&&(0,R.runAppAction)(e,{appModel:this.props.appModel,rowId:this.rowId(),sourceLocationName:"Slideshow Inline",sourceTable:this.props.table},void 0,this.viewStateKey)}},{key:"rowValues",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return null!==(e=t.rows[0])&&void 0!==e?e:{}}},{key:"renderAggregate",value:function(){var e=this.props.tableSchema.findAttributeByName(this.props.groupAggregate.column);this.props.groupAggregate.column&&!e&&T.default.warnToDevConsole("No targetAttribute for group aggregate",this.props.groupAggregate);var t=this.computeAggregateValue();return p.default.createElement(C.Badge,{attribute:e,value:t})}},{key:"render",value:function(){var e=this,t=(0,f.default)("TableViewRow",{"TableViewRow--translucent-mode":this.props.translucentMode,"TableViewRow--selection-mode":this.props.selectionMode,"TableViewRow--highlighted":this.props.highlighted,"TableViewRow--no-selection-mode":!this.props.selectionMode,"TableViewRow--selected":this.props.isSelected}),a=this.props.appModel,n=this.props.attribute,i=this.props.tableSchema.keyAttribute().name(),o=this.props.rows[0],l=this.dataContext(),s=o[i],u=o[n.name()],d=h.TypeDisplaysApi.lookup(n,u),c=null,m=null;if(this.props.groupAggregate&&(m=this.renderAggregate()),this.props.drilldownColumn||null!=u&&""!==u){var g=a.appTemplate.actions(),S=[];S=(this.props.disableAllActions?[]:g.actionsForRow(o,this.props.table.name(),a,this.dataContext())).filter((function(e){if(e.prominence()!==y.default.DISPLAY_INLINE)return!1;var t=e.columnAttachment();return t&&t===n.name()})).filter((function(e){if("Ref"===n.type()&&"NAVIGATE_APP"===e.type()&&e.isAutoCreated()&&null!=a.findReferencedRow(n,l))return!0;return!1})).slice(0,1);var T=d.isBlock(n),C=(this.props.onTap||S.length>0&&!this.props.disableNavigation)&&!T,R=p.default.createElement(d,{attribute:n,value:u,table:this.props.table,imageDisplayType:this.props.imageDisplayType,inlineModeBlockHeight:(0,v.rowHeight)(),inlineModeBlockWidth:(0,v.rowHeight)(),dataContext:l,appModel:a,rowId:s});if(!E.ReactRootUIConfig.isInDesktopExperience()&&C&&(R=p.default.createElement(w.default,{className:t,navigationDelay:!0,stopPropagation:!0,onTap:this.props.onTap?this.props.onTap:this.inlineTextSelected.bind(this,S[0]),spanMode:!0},R)),this.props.drilldownColumn){var k={paddingLeft:v.columnPadding/2,paddingRight:v.columnPadding/2};c=p.default.createElement(w.default,{className:"GroupedHeaderRow__type-view",navigationDelay:!0,stopPropagation:!0,onTap:this.props.onTap?this.props.onTap:this.inlineTextSelected.bind(this,S[0]),spanMode:!0},R,m,p.default.createElement("div",{className:"TableViewRow__drill-arrow",style:k,key:"drill-arrow","data-testid":r.DrillArrow},p.default.createElement("i",{className:"fa fa-angle-right"})))}else c=p.default.createElement("div",{className:(0,f.default)("GroupedHeaderRow__type-view",{"GroupedHeaderRow__desktop-ui":E.ReactRootUIConfig.isInDesktopExperience()&&"table"!==this.props.viewType})},R,m,!E.ReactRootUIConfig.isInDesktopExperience()&&p.default.createElement("div",{className:"GroupedHeaderRow__inline-actions"},S.map((function(t,n){return p.default.createElement("div",{className:"GroupedHeaderRow__inline-action "+(0===n?"GroupedHeaderRow__inline-action--first":""),key:n},p.default.createElement(b.default,{appModel:a,disabled:e.props.disableNavigation,action:t,rowId:s,sourceLocationName:"TableView GroupedHeaderRow Inline",sourceTable:e.props.table,displayMode:"small",href:null}))}))))}else c=p.default.createElement("div",{className:(0,f.default)("GroupedHeaderRow__empty",{"GroupedHeaderRow__desktop-ui":E.ReactRootUIConfig.isInDesktopExperience()&&"table"!==this.props.viewType})},p.default.createElement("div",{className:(0,f.default)("GroupedHeaderRow__empty-text",{"GroupedHeaderRow__desktop-ui-table-view":E.ReactRootUIConfig.isInDesktopExperience()&&"table"===this.props.viewType})},p.default.createElement("i",null,"blank")),m);return t=(0,f.default)("GroupedHeaderRow",{DesktopUI:E.ReactRootUIConfig.isInDesktopExperience()&&"table"!==this.props.viewType,"GroupedHeaderRow--MultiLine":!E.ReactRootUIConfig.isInDesktopExperience(),"GroupedHeaderRow--FlexRollout":a.inDynamicRolloutByOwnerId("GroupedHeaderRowFlexRollout"),"GroupedHeaderRow--selection-mode":this.props.selectionMode,"GroupedHeaderRow--translucent-mode":this.props.translucentMode,"GroupedHeaderRow--tall":this.props.tall}),this.props.drilldownColumn&&(t=(0,f.default)("GroupedHeaderRow Drilldown",{"GroupedHeaderRow--FlexRollout":a.inDynamicRolloutByOwnerId("GroupedHeaderRowFlexRollout"),"GroupedHeaderRow--selection-mode":this.props.selectionMode,"GroupedHeaderRow--translucent-mode":this.props.translucentMode,"GroupedHeaderRow--highlighted":this.props.highlighted,"GroupedHeaderRow--no-selection-mode":!this.props.selectionMode,"GroupedHeaderRow--selected":this.props.isSelected,"GroupedHeaderRow--tall":this.props.tall})),p.default.createElement("div",{"data-testid":"".concat(r.Container,"-").concat(u),className:t,style:this.props.style,"data-testonly-row-index":this.props.index},c)}}]),a}(m.default);t.default=D},400219:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.NonCardHeader=void 0;var r=n(a(238416)),i=n(a(667294)),o=n(a(294184)),l=a(695386),s=a(803583),u=a(398171),d=a(307074),c=a(216437),p=a(56749),f=a(646514),h=(0,l.makeStyles)((function(e){return{headerContainer:{overflow:"hidden"},notBackgroundHeaderContainer:{boxSizing:"border-box",position:"relative",padding:"0 ".concat(e.spacing(2))},backgroundImageMode:{backgroundColor:(0,p.themeColor)("detailBackground")},hasBodyActions:{marginBottom:e.spacing(2)},hText:{lineHeight:"1.2rem","&:not(:last-child)":{marginBottom:"6px"}},h1Text:{fontSize:"1.556rem",fontWeight:500,lineHeight:"1.833rem"},h2Text:{fontSize:"1.333rem",fontWeight:400,lineHeight:"1.556rem"},h3Text:{fontSize:"1.222rem",fontWeight:400,lineHeight:"1.333rem"},h4Text:{fontSize:"1.111rem",fontWeight:400,lineHeight:"1.333rem"},h5Text:{fontSize:"1rem",fontWeight:400,lineHeight:"1.333rem"},h6Text:{fontSize:"0.889rem",fontWeight:400,lineHeight:"1.333rem"},headerItems:{padding:e.spacing(2)},headerItemsOverlay:function(t){return{position:"absolute",bottom:t.headerItemAttributesCount>10?"auto":0,left:0,right:0,paddingTop:e.spacing(3),background:(0,p.themeColor)("nonCardHeaderTextOverlay"),color:f.GOOGLE_WHITE}}}}));t.NonCardHeader=function(e){var t,a=e.isBackgroundImageMode,n=e.primaryImageAttribute,l=e.headerItemAttributes,p=e.imageHeaderHeight,f=e.dataContext,m=e.imageDisplayType,v=e.table,y=e.rowId,g=e.rowState,w=e.bodyActionsView,b=e.onImageSize,S=e.showContentFn,T=(0,d.useReactAppSelector)(u.getAppModelHook),C=h({headerItemAttributesCount:l.length}),R=null;if(n&&!a){var E,k=f.rowData[n.name()],I=s.TypeDisplaysApi.lookup(n,k);if(k)E="Thumbnail"===n.type()||"Fit"===m?"full-centered":"square",R=i.default.createElement("div",{className:"SlideshowPage__header-image"},i.default.createElement(I,{attribute:n,value:k,table:v,appModel:T,dataContext:f,imageDisplayType:E,zeroImageLoadDelay:!0,height:p,rowId:y,onImageSize:b}))}if(!R&&0===l.length&&!w)return null;var A=p;l.length>10&&(A=34*(l.length-5)+152);var D=a?"auto":A,M=l.filter((function(e){return!!("Show"===e.type()?S(e,g):f.rowData[e.name()])})).map((function(e,t){var a=f.rowData[e.name()],n=s.TypeDisplaysApi.lookup(e,a),r={0:C.h1Text,1:C.h2Text,2:C.h3Text,3:C.h4Text,4:C.h5Text,5:C.h6Text};return i.default.createElement("div",{key:"header-item-".concat(e.name(),"-").concat(t),className:(0,o.default)(C.hText,r[t]||C.h6Text),"data-testonly-column":e.name()},i.default.createElement(n,{attribute:e,value:a,table:v,appModel:T,dataContext:f,displayMode:"inline",rowId:y,showContent:S(e,g),suppressShowTypeStyles:!0}))}));return i.default.createElement("div",null,i.default.createElement("div",{key:"head","data-testid":c.SlideshowPageDataTestIds.Header,className:(0,o.default)(C.headerContainer,(t={},(0,r.default)(t,C.notBackgroundHeaderContainer,!a),(0,r.default)(t,C.hasBodyActions,!a&&w),(0,r.default)(t,C.backgroundImageMode,a),t)),style:{height:D||"auto"}},R,!!M.length&&i.default.createElement("div",{"data-testid":"non-card-header-overlay",className:(0,o.default)(C.headerItems,(0,r.default)({},C.headerItemsOverlay,!!R))},M)),w)}},680462:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.getPrimaryImageAttribute=t.SlideshowPage=t.SLIDESHOW_PAGE_MAX_WIDTH=void 0;var i=n(a(600861)),o=n(a(238416)),l=n(a(856690)),s=n(a(689728)),u=n(a(441588)),d=n(a(861655)),c=n(a(994993)),p=n(a(73808)),f=n(a(667294)),h=n(a(496486)),m=n(a(294184)),v=a(697211),y=n(a(365914)),g=n(a(92329)),w=n(a(888861)),b=n(a(385857)),S=n(a(494012)),T=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=Q(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(150198)),C=n(a(454852)),R=n(a(593186)),E=n(a(143249)),k=n(a(112963)),I=n(a(729390)),A=n(a(106375)),D=a(803583),M=n(a(578914)),x=a(334500),N=a(413032),O=n(a(21870)),_=a(629503),B=a(563479),P=a(216437),L=a(515801),V=a(557310),F=a(166089),H=a(149313),W=a(873030),U=a(351101),j=a(664583),z=a(250617),G=n(a(819433)),K=a(29827),Y=n(a(962553)),q=a(400219);function Q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(Q=function(e){return e?a:t})(e)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}function Z(e){return void 0===e.lines}function J(e){return Z(e)||e.lines.length>0}function ee(e){return e.sections.some(J)}t.SLIDESHOW_PAGE_MAX_WIDTH=768;var te=O.default.widescreenBreakpoint,ae=(0,v.createStyles)((function(e){return{columnsContainer:{display:"flex",padding:e.spacing(2),justifyContent:"center"},contentColumns:{display:"flex",boxSizing:"border-box",overflow:"hidden",flexGrow:1},column:{flex:"1 1 0",minWidth:0,maxWidth:"700px","&:not(:last-of-type)":{marginRight:e.spacing(2)}},card:{padding:e.spacing(2,0),"&:not(:last-of-type)":{marginBottom:e.spacing(2)}},divider:{marginBottom:e.spacing(1)},lineSideBySide:{marginBottom:4},linePageHeader:{marginBottom:0},headerContainer:{display:"flex",flexDirection:"column"},headerItemsContainer:{padding:e.spacing(2)},actionBarContainer:{display:"flex",flexWrap:"wrap",padding:e.spacing(0,2),paddingBottom:e.spacing(2)},inlineCard:{paddingBottom:e.spacing(1)},headerCard:{padding:0},regularCard:{padding:"".concat(e.spacing(2),"px 0")},showTypeHeaderLabelClamp:{overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":2,"-webkit-box-orient":"vertical"}}})),ne=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return{lines:[],inlineMode:e,sectionLabel:t}},re=function(e){var t,a=e.mainSlideshowImageColumn,n=e.tableSchema;if("**none**"===a)t=null;else if(null==a||"**auto**"===a){var r=n.labelAttributes(!1),i=n.labelImageAttribute(!1);i?t=i:r.length||(t=h.default.find(n.visibleAttributesWithoutShowTypes(),(function(e){return e.isPresentableImageType()})))}else t=n.findAttributeByName(a);return t};t.getPrimaryImageAttribute=re;var ie=function(e){(0,d.default)(a,e);var t=X(a);function a(e){var n;return(0,l.default)(this,a),(n=t.call(this,e)).state=Object.assign(Object.assign({},n.state),{topImageLoading:!0,lastActionInvoked:null,scrollbarVisible:!1}),n}return(0,s.default)(a,[{key:"updateMechanism",get:function(){return this.isInEditMode?"form":"quickedit"}},{key:"supportsEdits",value:function(){return!0}},{key:"allRowValues",value:function(){return this.dataContext().rowData}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){(0,u.default)((0,p.default)(a.prototype),"UNSAFE_componentWillReceiveProps",this).call(this,e),this.fullRefreshCondition(e)&&this.refreshEntryState()}},{key:"onTransactionUpdated",value:function(e){document.activeElement.blur();var t=function(){return F.AppGlobals.StateChangeHandler.ShowUIState(!0)},a=this.viewStateKey,n=this.pendingTransaction;this.props.quickEditMode||this.isInEditMode?t():e.commitAsync().then((function(){Y.default.usePendingChangesStore&&a&&e===n?(0,G.default)().dispatch((0,z.setPendingTransaction)(a,void 0)):t()})).catch((function(){Y.default.usePendingChangesStore&&a&&e!==n?(0,G.default)().dispatch((0,z.setPendingTransaction)(a,e.id)):t()}))}},{key:"inlineTextSelected",value:function(e){this.runAction(e,"Slideshow Inline")}},{key:"updateInfluencedEntries",value:function(e){var t={initialData:this.lastSavedValues,noAsync:!0};if((e.resetsEachUpdate()||e.hasResetExpression())&&(t.skipTheseDefaults=(0,o.default)({},e.name(),!0)),this.dataContext().recomputeAppFormulas(t),this.refreshEntryState(this.props.entryAttributes),this.row){var a=this.row.values();this.lastUpdateValues=h.default.clone(a);var n=this.row.validateSave({viewStateKey:this.viewStateKey,transaction:this.pendingTransaction}).errorState;if(S.default.changeInvalidatesRow(e,this.initialErrorState,n)){var r=h.default.clone(this.state.invalidatesRow);r[e.name()]=!0,this.setState({invalidatesRow:r,showErrorState:!0})}else{if(!h.default.isEqual(this.lastSavedValues,a)){var i=this.props,l=i.appModel,s={tableName:i.table.name(),row:h.default.clone(a),appName:l.AppTemplate.Name,appId:l.AppTemplate.Id,appVersion:l.AppTemplate.Version,userSettings:l.GetUserSettings(),mechanism:"QuickEdit",viewName:this.props.controlName};if(l.UpdateTableRow(s),this.lastSavedValues=h.default.clone(a),this.initialErrorState=this.row.validateSave({viewStateKey:this.viewStateKey,transaction:this.pendingTransaction}).errorState,l.ShouldDelaySync()){F.AppGlobals.StateChangeHandler.ShowUIState(!0)}else window.InputHandler.ProcessSync()}this.setState({showErrorState:!1,invalidatesRow:{}})}}}},{key:"editableColumnAllowlist",value:function(e){return(e=e||this.props).table.allowsUpdate(e.appModel)?this.isInEditMode?null:e.quickEditColumns||[]:[]}},{key:"isEditable",value:function(e,t){var a=t||this.row;return!!a&&(!!this.props.table.allowsUpdate(this.props.appModel)&&(!(!this.isInEditMode&&!h.default.includes(this.props.quickEditColumns,e.name()))&&a.isEditable(e,this.viewStateKey)))}},{key:"refListButtonSelected",value:function(e,t){var a,n,r=this.props,i=r.appModel,o=r.table,l=t.listElementAttribute().auxData().ReferencedTableName,s=this.dataContext(),u=i.findTableCollection(l).tableSchema,d=t.refListFilterDefaults(s);if(d||(n=t.refListFilter(s)),"new"===e){d=d||w.default.getFilterDefaults(n);var c=b.default.getDefaultValues(d);if(V.ReactRootUIConfig.isReactRoot()){var p=(null!==(a=t.internalQualifier().Properties)&&void 0!==a?a:{}).ReferencingColumnName,f=o.lookupTableRow(this.props.rowId,this.pendingTransaction);this.launchRelatedForm(l,null,c,t,p&&o&&f&&this.isInEditMode?{hasReferenceTo:{refColumnName:p,referencedTableName:o.rootName(),referencedStableId:f.stableId}}:void 0)}else this.pushView("form",!1,{TableName:l,DefaultValues:c})}else{var h=I.default.chooseInlineViewType({tableSchema:u,tableName:l}),m=h.viewType,v=h.viewControl;"table"===m&&(m="fastTable"),(0,H.$TSFixMeMaybeNull)(m),this.pushView(m,!1,{TableName:l,FilterExpr:n,DefaultValues:d},!1,null!=v?v:void 0)}}},{key:"actionSelected",value:function(e){this.runAction(e,"Slideshow Body")}},{key:"renderRefListButtons",value:function(e,t){var a=this.props.appModel,n=e.listElementAttribute().auxData().ReferencedTableName,r=a.findTableCollection(n).table,i=[],o=(0,m.default)("SlideshowPage__list-ref-button","DefaultButton",{"SlideshowPage__list-ref-button-desktop-detail":V.ReactRootUIConfig.isInDesktopExperience()});if(!this.props.disableNavigation&&(t&&i.push(f.default.createElement(k.default,{className:o,navigationDelay:!0,onTap:this.refListButtonSelected.bind(this,"all",e),key:V.ReactRootUIConfig.isInDesktopExperience()?"expand":"view"},V.ReactRootUIConfig.isInDesktopExperience()?a.MapActionName("Expand"):a.MapActionName("View"))),r&&r.allowsAdd(a)&&(!V.ReactRootUIConfig.isReactRoot()||this.canLaunchRelatedForm(r.name())))){var l=[];(l=a.appTemplate.actions().actionsAtTableScope(r.rootName(),a).filter((function(e){return"ADD_RECORD"===e.type()&&e.prominence()!==C.default.DO_NOT_DISPLAY}))).length&&i.push(f.default.createElement(k.default,{className:o,navigationDelay:!0,onTap:this.refListButtonSelected.bind(this,"new",e),key:"new"},l[0].displayName(a)))}return i}},{key:"maxNestedRows",value:function(){return null!=this.props.maxNestedRows?this.props.maxNestedRows:this.props.appModel.AppTemplate.Presentation.MaxNestedRows||0}},{key:"onTopImageSize",value:function(e){var t=e.loading,a=e.error,n=e.scaledWidth,r=e.scaledHeight;this.setState({topImageWidth:n,topImageHeight:r,topImageLoading:t,topImageError:a})}},{key:"renderAttributeLine",value:function(e){var t,a,n,r=this,i=e.attribute,l=e.allRowActions,s=e.usedRowActions,u=e.skippedRowActions,d=e.pageWidth,c=e.showHeadings,p=e.displayMode,v=e.rowState,w=e.transactionErrorState,b=this.props,S=b.appModel,C=b.table,R=b.tableSchema,I=b.rowId,M=b.quickEditMode,x=b.disableNavigation,N=b.classes,O=this.transaction,_=this.dataContext(),P=i.isListOfRefs(),L=_.rowData[i.name()],F=D.TypeDisplaysApi.lookup(i,L),H=P&&i.getValues(L).length,W=this.maxNestedRows(),j=P&&W>0,z=this.isEditable(i,v),G=p===U.DisplayMode.SideBySide,K=G&&z,Y="Show"===i.type(),q=this.showContent(i,v),$=q||i.displayNameField(_)||i.description(_);if(V.ReactRootUIConfig.isInDesktopExperience()&&Y&&null==$)return{showValuesInline:j,view:null};var Q=(0,m.default)("SlideshowPage__line",(t={"SlideshowPage__line--reflist-inline":P&&j,"SlideshowPage__line--align-right":K,"SlideshowPage__line--edit":z,"SlideshowPage__line--showtype":Y},(0,o.default)(t,N.lineSideBySide,V.ReactRootUIConfig.isInDesktopExperience()&&G),(0,o.default)(t,N.linePageHeader,V.ReactRootUIConfig.isInDesktopExperience()&&i.isPageHeader()),t)),X=[];"List"!==i.type()&&(X=h.default.difference(l,s).filter((function(e){return e.showInlineFor(i)})).filter((function(e){if("Ref"===i.type()&&"NAVIGATE_APP"===e.type()&&e.isAutoCreated()&&null==S.findReferencedRow(i,r.dataContext()))return u.push(e),!1;return!0})).slice(0,3));var Z=G?.68*(d-16)-20:d-40;j&&(Z=d);var J,ee=null;if(c){var te=V.ReactRootUIConfig.isReactRoot()?"SlideshowPage__heading-label":"SlideshowPage__heading-label-legacy";J=i.displayName(this.dataContext()),ee=f.default.createElement("div",{className:(0,m.default)("SlideshowPage__heading",{"SlideshowPage__heading-desktop-detail-view":V.ReactRootUIConfig.isReactRoot()})},f.default.createElement("span",{className:te},f.default.createElement("span",{className:(0,m.default)((0,o.default)({},N.showTypeHeaderLabelClamp,V.ReactRootUIConfig.isInDesktopExperience()))},J),P&&f.default.createElement(B.Badge,{value:H})))}var ae,ne=null,re=w&&!w.isValid(),ie=null==w?void 0:w.for(C.name()).get(I),oe=ie&&(h.default.includes(ie.invalid,i.name())||h.default.includes(ie.missingRequired,i.name()));if(j||!P)if(z||oe||i.isShowType()){var le=this.dataContext();ee=null;var se,ue,de=(0,m.default)("SlideshowPage__value",{ShowErrorState:this.showErrorState(),"SlideshowPage__value--legacy-rollout-mode":!1,"SlideshowPage__value-desktop-detail-view":V.ReactRootUIConfig.isInDesktopExperience()}),ce=(0,m.default)("SlideshowPage__value-display",{PageHeaderValueDisplay:V.ReactRootUIConfig.isInDesktopExperience()&&i.isPageHeader()});null!=O?O.started&&!O.closed&&(ue=(se=null!=I&&O.wasModified(C.name(),I,i.name()))&&!M&&re):ue=null===(a=this.state.invalidatesRow)||void 0===a?void 0:a[i.name()],ne=f.default.createElement("div",{className:de,style:{overflow:"visible"}},f.default.createElement("div",{className:ce},f.default.createElement(g.default,Object.assign({},this.props,{classes:void 0,yesNoMode:i.isBooleanWithCustomLabel()?void 0:"Switch",innerRef:this.onEntryMount.bind(this,i),dataContext:le,table:null,tableName:C.name(),row:O?null:this.row,tableSchema:R,screenId:I,viewType:"detail",showErrorState:this.showErrorState(),usePlaceholderLabel:!G&&this.usePlaceholderLabel(i),attribute:i,appModel:S,entryId:y.default.makeElementId("Attr_"+i.name()),value:L,modified:se,unsaved:ue,editable:z&&!this.isAnotherViewInEditMode,valid:this.isValid(i,v),required:this.isRequired(i,v),hidden:this.isHidden(i,v),validOptions:this.validOptions(i,v),suggestedValues:this.suggestedValues(i,v),displayName:this.displayName(i,v),showContent:q,baseImage:i.baseImage(le),onEntryValueChange:this.onEntryValueChange,onEntryFocus:this.onEntryFocus,onEntryBlur:this.onEntryBlur,onEntryKeyDown:this.onEntryKeyDown,width:Z,height:null}))))}else{var pe,fe=F.isBlock(i,L);"Phone"===i.type()&&L&&(pe=y.default.phoneUrl(L));var he="full";this.displayMode()===U.DisplayMode.Centered&&(he="full-centered");var me=null;E.default.get("interactiveDashboardRefChains").includeByOwner(S.AppTemplate)&&(me=this.props.onRowOpened);var ve=j&&!V.ReactRootUIConfig.isInDesktopExperience()?Z:null;ne=f.default.createElement("div",{className:"SlideshowPage__value "+(fe?"SlideshowPage__value--block":"")},f.default.createElement(k.default,{className:(0,m.default)("SlideshowPage__value-display",{"LongTextType-HTML":i.longTextFormatting()===T.LongTextFormatting.HTML,PageHeaderValueDisplay:V.ReactRootUIConfig.isInDesktopExperience()&&c&&P}),enabled:1===X.length&&!fe,href:pe,onTap:this.inlineTextSelected.bind(this,X[0]),style:i.isShowVideo()||"LatLong"===i.type()?{width:"100%"}:null},f.default.createElement(F,{attribute:i,parentId:this.props.parentId,quickEditMode:M,disableNavigation:x,value:L,table:C,appModel:S,dataStamp:S.DataStamp,dataContext:this.dataContext(),imageDisplayType:he,rowId:I,onRowOpened:me,maxNestedRows:W,translucentMode:this.backgroundImageMode(),showListInline:!0,actions:X,alignment:p,viewType:null===(n=this.props.view)||void 0===n?void 0:n.viewType(),width:ve,interactiveRowIds:this.props.interactiveRowIds})),f.default.createElement("div",{className:"SlideshowPage__inline-action-container"},"LatLong"!==i.type()?X.map((function(e,t){return s.push(e),f.default.createElement("div",{className:"SlideshowPage__inline-action "+(0===t?"SlideshowPage__inline-action--first":""),key:t},f.default.createElement(A.default,{appModel:S,action:e,disabled:x,rowId:r.rowId(),sourceLocationName:"Slideshow Inline",sourceTable:C,displayMode:"small",href:pe,tableSchema:R,rowValues:r.allRowValues()}))})):null))}else P&&(ne=f.default.createElement("div",{className:"SlideshowPage__value "},f.default.createElement("div",{className:"SlideshowPage__ref-list-buttons-above"},this.renderRefListButtons(i,H))));return j&&P&&(ae=this.renderRefListButtons(i,H)).length&&(ae=f.default.createElement("div",{className:"SlideshowPage__ref-list-buttons-below"},ae)),{showValuesInline:j,sectionLabel:j?J:void 0,view:f.default.createElement("div",{className:Q,key:"".concat(I,"-").concat(i.name()),"data-testonly-column":i.name(),"data-testid":i.name()},ee,ne,ae)}}},{key:"columnOrder",value:function(){return h.default.uniq(this.props.columnOrder)}},{key:"allAttributes",value:function(){var e,t=this.props,a=t.appModel,n=t.tableSchema,r=t.layout,i=t.useCardLayout,o=a.AppTemplate.Presentation.ShowTypesInSlideshow;return this.columnOrder().length?n.findAttributesByNames(this.columnOrder(),{includeHidden:o}).filter((function(e){return!e.isHidden()})):(e=o&&V.ReactRootUIConfig.isInDesktopExperience()?n.visibleAttributes():o?n.visibleAttributesWithoutPageHeaders():n.visibleAttributesWithoutShowTypes(),i&&(e=e.filter((function(e){return!N.CardLayoutNode.hasBinding(r,e.name())}))),h.default.sortBy(e,(function(e){return e.isLabel()?1:2})))}},{key:"visibleAttributes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.row,a=this.allAttributes(),n=a.filter((function(a){if(e.props.appModel.AppTemplate.Presentation.RespectShowIfEverywhere&&a.showIfEvalTree())return a.showIfEvalTree().run(e.dataContext());if(a.isShowType())return!0;var n,r=e.dataContext().rowData[a.name()];if("Progress"===a.type())n=!1;else if("List"===a.type()){var i=a.listElementAttribute();if(i&&"Ref"===i.type()){var o=a.getValues(r).length,l=i.auxData().ReferencedTableName,s=e.props.appModel.findTableCollection(l).table,u=s&&s.allowsAdd(e.props.appModel);n=0===o&&!u}else n=!1}else n=!e.isEditable(a,t)&&!T.default.valueExists(r,a.type());return!n}));return n}},{key:"imageDisplayType",value:function(){return this.props.imageDisplayType||this.props.appModel.AppTemplate.Presentation.SlideshowImageStyle}},{key:"backgroundImageMode",value:function(){return"Background"===this.imageDisplayType()&&!!this.primaryImageAttribute()}},{key:"primaryImageAttribute",value:function(){return re({mainSlideshowImageColumn:this.props.mainSlideshowImageColumn,tableSchema:this.props.tableSchema})}},{key:"legacyTotalHeaderItemsHeight",value:function(){return this.state.headerSizing?this.state.headerSizing.reduce((function(e,t){return e+t.height}),0):0}},{key:"headHeight",value:function(e,t,a,n){var r=0;if(e)if(this.backgroundImageMode()){var i=V.ReactRootUIConfig.isInDesktopExperience()?.5:.6666;r=n.length?this.props.height*i:20}else if(t){var o;o="Thumbnail"===e.type()?100:a?400:320,r="Fit"===this.imageDisplayType()&&this.state.topImageHeight?Math.min(o,this.state.topImageHeight):o}var l=this.legacyTotalHeaderItemsHeight();return r=Math.max(r,l)}},{key:"getImageHeight",value:function(e,t,a){return e&&t?(n="Thumbnail"===e.type()?100:a?400:320,"Fit"===this.imageDisplayType()&&this.state.topImageHeight?Math.min(n,this.state.topImageHeight):n):null;var n}},{key:"getContentColumnsLegacy",value:function(e){var t,a=this,n=e.outsideHeadView,r=e.bodyActionsView,i=e.headView,o=e.attributesToDisplay,l=e.usedRowActions,s=e.skippedRowActions,u=e.pageWidth,d=e.showHeadings,c=e.displayMode,p=e.rowState,f=this.rowActions(),h={lines:[],inlineMode:!1},m={flex:!1,sections:[h]};!n&&i&&(this.props.useCardLayout?(m.sections.pop(),m.sections.push(i),m.sections.push(h)):h.lines.push(i)),r&&h.lines.push(r);var v=null===(t=this.transaction)||void 0===t?void 0:t.validate([this.tableRow]);return o.forEach((function(e){var t=a.renderAttributeLine({attribute:e,allRowActions:f,usedRowActions:l,skippedRowActions:s,pageWidth:u,showHeadings:d,displayMode:c,rowState:p,transactionErrorState:v}),n=t.view,r=t.showValuesInline,i=t.sectionLabel;(!h||r||h.inlineMode)&&(h={lines:[],inlineMode:r,sectionLabel:r?i:void 0},m.sections.push(h)),n&&h.lines.push(n)})),[m]}},{key:"getContentColumns",value:function(e){var t=this,a=e.headView,n=e.canRenderMultiColumns,r=e.attributesToDisplay,i=e.usedRowActions,o=e.skippedRowActions,l=e.pageWidth,s=e.showHeadings,u=e.displayMode,d=e.rowState,c=e.maxColumnCount,p=e.headerColumnEnabled,f=this.transaction,h=0,m=ne(),v=[{flex:!1,sections:[]}],y=this.rowActions();!p&&a&&v[0].sections.unshift(a);var g=null==f?void 0:f.validate([this.tableRow]);return r.forEach((function(e){var a=t.renderAttributeLine({attribute:e,allRowActions:y,usedRowActions:i,skippedRowActions:o,pageWidth:l,showHeadings:s,displayMode:u,rowState:d,transactionErrorState:g}),r=a.view,p=a.showValuesInline,f=a.sectionLabel;(e.isPageHeader()||p||m.inlineMode)&&J(m)&&(v[h].sections.push(m),m=ne(p,f),n&&(v[h=(h+1)%c]||(v[h]={flex:!1,sections:[]}))),r&&m.lines.push(r)})),J(m)&&v[h].sections.push(m),v}},{key:"renderCardHeadHeaderInEditMode",value:function(e){var t,a=this,n=e.pageWidth,r=e.showHeadings,i=e.displayMode,o=e.rowState,l=this.props,s=l.tableSchema,u=l.layout,d=N.CardLayoutNode.findNodes(u,(function(e){return"binding"===e.type&&!!e.value})).map((function(e){return e.value})).map((function(e){return s.findAttributeByName(e)})).filter((function(e){return e})),c=null===(t=this.transaction)||void 0===t?void 0:t.validate([this.tableRow]);return f.default.createElement(f.default.Fragment,null,d.map((function(e){return a.renderAttributeLine({attribute:e,allRowActions:[],usedRowActions:[],skippedRowActions:[],pageWidth:n,showHeadings:r,displayMode:i,rowState:o,transactionErrorState:c,shouldRenderMultipleColumns:!0}).view})))}},{key:"renderCardHeader",value:function(e){var t=e.pageWidth,a=e.showHeadings,n=e.displayMode,r=e.rowState,i=this.props,o=i.table,l=i.rowId,s=i.layout;return this.isInEditMode?this.renderCardHeadHeaderInEditMode({pageWidth:t,showHeadings:a,displayMode:n,rowState:r}):f.default.createElement(x.ReactCardLayoutNode,{node:s,table:o.name(),rowId:l,dataContext:this.dataContext()})}},{key:"renderHeadInEditMode",value:function(e){var t,a=this,n=e.pageWidth,r=e.showHeadings,o=e.displayMode,l=e.rowState,s=e.primaryImageAttribute,u=e.isBackgroundImageMode,d=this.headerItemAttributes(),c=s&&!u?[s].concat((0,i.default)(d)):d,p=null===(t=this.transaction)||void 0===t?void 0:t.validate([this.tableRow]);return 0===c.length?null:f.default.createElement(f.default.Fragment,null,c.map((function(e){return a.renderAttributeLine({attribute:e,allRowActions:[],usedRowActions:[],skippedRowActions:[],pageWidth:n,showHeadings:r,displayMode:o,rowState:l,transactionErrorState:p}).view})))}},{key:"renderHead",value:function(e){var t=e.isBackgroundImageMode,a=e.primaryImageAttribute,n=e.headerAttributes,r=e.primaryImageUrl,i=e.wideMode,o=e.pageWidth,l=e.showHeadings,s=e.displayMode,u=e.rowState,d=e.bodyActionsView;if(this.props.useCardLayout)return this.renderCardHeader({pageWidth:o,showHeadings:l,displayMode:s,rowState:u});if(this.isInEditMode)return this.renderHeadInEditMode({pageWidth:o,showHeadings:l,displayMode:s,rowState:u,primaryImageAttribute:a,isBackgroundImageMode:t});var c=this.headHeight(a,r,i,n);return V.ReactRootUIConfig.isReactRoot()?(a?this.dataContext().rowData[a.name()]:null)||0!==this.headerItemAttributes().length||d?f.default.createElement(q.NonCardHeader,{isBackgroundImageMode:t,headerItemAttributes:this.headerItemAttributes(),primaryImageAttribute:a,imageHeaderHeight:c,dataContext:this.dataContext(),imageDisplayType:this.imageDisplayType(),table:this.props.table,rowId:this.props.rowId,showContentFn:this.showContent,rowState:this.row,bodyActionsView:d,onImageSize:this.onTopImageSize.bind(this)}):null:this.renderHeadLegacy({isBackgroundImageMode:t,primaryImageAttribute:a,primaryImageUrl:r,pageWidth:o,headerHeight:c})}},{key:"renderHeadLegacy",value:function(e){var t=this,a=e.isBackgroundImageMode,n=e.primaryImageAttribute,r=e.primaryImageUrl,i=e.pageWidth,o=e.headerHeight,l=this.props,s=l.appModel,u=l.table,d=l.rowId,c=null;if(n&&!a){var p,h=this.dataContext().rowData[n.name()],v=D.TypeDisplaysApi.lookup(n,h);if(h)p="Thumbnail"===n.type()||"Fit"===this.imageDisplayType()?"full-centered":"square",c=f.default.createElement("div",{className:"SlideshowPage__header-image"},f.default.createElement(v,{attribute:n,value:h,table:u,appModel:s,dataContext:this.dataContext(),imageDisplayType:p,zeroImageLoadDelay:!0,width:i,height:o,rowId:d,onImageSize:this.onTopImageSize.bind(this)}))}var y="Fit"===this.imageDisplayType()&&n&&r&&this.state.topImageLoading;this.state.topImageError&&(y=!1);var g=this.renderHeaderItemsLegacy(o,!0),w=this.renderHeaderItemsLegacy(o,!1);return f.default.createElement("div",{className:(0,m.default)("SlideshowPage__header",{hasHeaderImage:!!c&&!this.state.topImageError}),style:{height:o},key:"head",ref:function(e){return t.headerItems=e},"data-testid":P.SlideshowPageDataTestIds.Header,role:"heading","aria-level":3},c,y?null:g,f.default.createElement("div",{className:"SlideshowPage__header-measurer"},w))}},{key:"headerItemAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,a=t.headerColumns,n=t.tableSchema;if(!a||!a.length)return[];var r=[];if(a.forEach((function(e){var t=n.findAttributeByName(e);t?r.push(t):R.default.warnToDevConsole("Unknown header attribute",e)})),e&&!r.length){var i=n.labelBasicAttribute();i&&r.push(i)}return r}},{key:"renderHeaderItemsLegacy",value:function(e,t){var a,n=this,r=this.state.headerSizing;if(t&&!r)return[];var i=this.legacyTotalHeaderItemsHeight(),o=(Math.max(320,Math.min(te,this.props.width))-320)/(te-320);return a=this.headerItemAttributes().map((function(a,l){var s,u=0===l,d=n.dataContext().rowData[a.name()],c=D.TypeDisplaysApi.lookup(a,d);if(0===l){s=2.8*o+2.2}else{s=.7*o+1.8}var p=r&&r[l],h=1;p&&(h=p.scaleDownFactor);var m=0;t&&p&&u&&(m=e/2-i/2);var v={marginTop:m,fontWeight:s<3?"bold":"normal",fontSize:(t&&h?s*h:s)-.16+"em",height:t&&p?p.height:"auto"};return f.default.createElement("div",{className:"SlideshowPage__header-item",style:v,key:"header-item-".concat(a.name(),"-").concat(l),"data-testonly-column":a.name()},f.default.createElement(c,{attribute:a,value:d,table:n.props.table,appModel:n.props.appModel,dataContext:n.dataContext(),displayMode:"inline",rowId:n.props.rowId,showContent:n.showContent(a),interactiveRowIds:n.props.interactiveRowIds}))})),a}},{key:"hashStateForHeaderSizing",value:function(){return[this.props.rowId,this.props.headerColumns,this.props.width,this.props.height,this.state.topImageLoading,this.state.topImageError]}},{key:"legacyUpdateHeaderSizing",value:function(){if(this.headerItems){if(h.default.isEqual(this.state.headerSizingCacheKey,this.hashStateForHeaderSizing()))return;var e,t=$(this.headerItems).width();e=this.state.topImageWidth?Math.min(t,this.state.topImageWidth-20):t;var a=$(this.headerItems).find(".SlideshowPage__header-measurer .SlideshowPage__header-item").map((function(t,a){var n=$(a).outerHeight(),r=$(a).children().first().outerWidth(),i=Math.min(e/r,1)||0,o=i*n;return i<.4&&(i=.4),i<=.6&&(o=(i+=.3)*n*2),{scaleDownFactor:i,height:o}})).get();this.state.headerSizing&&h.default.isEqual(this.state.headerSizing,a)||this.setState({headerSizing:a,headerSizingCacheKey:this.hashStateForHeaderSizing()})}}},{key:"runAction",value:function(e,t){(0,j.runAppAction)(e,{appModel:this.props.appModel,rowId:this.rowId(),sourceLocationName:t,sourceTable:this.props.table},void 0,this.viewStateKey)}},{key:"invokeActionAndSetState",value:function(){var e=this.state.lastActionInvoked,t=this.props.invokeAction;if(t&&e!==t){var a=this.rowActions().find((function(e){return e.name()===t}));a&&(this.runAction(a,"Slideshow Direct"),this.setState({lastActionInvoked:t,actionToInvoke:null}))}}},{key:"componentDidUpdate",value:function(){this.invokeActionAndSetState(),this.legacyUpdateHeaderSizing()}},{key:"componentDidMount",value:function(){this.legacyUpdateHeaderSizing()}},{key:"displayMode",value:function(){var e=this.props.appModel.AppTemplate.Presentation.SlideshowDisplayMode,t=this.props.slideshowDisplayMode,a=t&&t!==U.DisplayMode.Automatic?t:e;return a}},{key:"rowActions",value:function(){var e=this.props.appModel.appTemplate.actions();if(this.props.disableAllActions)return[];var t=this.allRowValues(),a=this.props.table.name();return e.actionsForRow(t,a,this.props.appModel)||[]}},{key:"getActionsForAttributes",value:function(e){return this.rowActions().filter((function(t){return void 0!==e.find((function(e){return e.name()===t.columnAttachment()}))}))}},{key:"isAnotherViewInEditMode",get:function(){if(!V.ReactRootUIConfig.isInDesktopExperience())return!1;var e=(0,K.getViewInEditMode)((0,G.default)().getState());return!this.isInEditMode&&e}},{key:"isInEditMode",get:function(){return V.ReactRootUIConfig.isInDesktopExperience()&&Boolean(this.mutableViewState.isInEditMode)}},{key:"saveAndCloseEditMode",value:function(){(0,G.default)().dispatch((0,z.saveAndCloseEditMode)(this.viewStateKey))}},{key:"cancelEditMode",value:function(){(0,G.default)().dispatch((0,z.cancelEditMode)(this.viewStateKey))}},{key:"render",value:function(){var e=this,t=this.props,a=t.appModel,n=t.width,r=t.table,l=t.tableSchema,s=t.disableNavigation,u=t.onScrollContainerMount,d=t.useCardLayout,c=t.isPrimaryPage,p=t.isSingleRow,g=t.allowNavigation,w=t.onPrev,b=t.onNext,S=t.classes,T=this.displayMode(),R=T!==U.DisplayMode.NoHeadings,E=a.AppTemplate.Presentation.RespectShowIfEverywhere,k=this.backgroundImageMode(),I=this.mainWidth(),D=n>te,M=(D?768:I)-(k?20:0),x=(I-M)/2,N=this.dataContext(),O=this.row,B=this.primaryImageAttribute(),H=!0;E&&(null==B?void 0:B.showIfEvalTree())&&(H=B.showIfEvalTree().run(this.dataContext())),H||(B=null);var j=null;if(B){var z=N.rowData[B.name()];z&&(j=_.Common.FlexImageUrl(a.ResolveFile(z,r.rootName())))}var G=this.rowActions(),K=this.bodyRowActions(),Y=[],q=function(t){return f.default.createElement(A.default,{appModel:a,action:t,rowId:e.rowId(),disabled:s,sourceLocationName:"Slideshow Body",sourceTable:r,displayMode:"large",tableSchema:l,rowValues:e.allRowValues()})},$=K.length&&!d?f.default.createElement("div",{className:"SlideshowPage__action-bar",key:"as-action-bar"},K.map((function(e,t){return f.default.createElement("div",{className:(0,m.default)("SlideshowPage__header-action",{"SlideshowPage__header-action-desktop":V.ReactRootUIConfig.isReactRoot()}),key:t},V.ReactRootUIConfig.isReactRoot()?f.default.createElement("span",{className:(0,m.default)({"SlideshowPage__action-button-truncate":V.ReactRootUIConfig.isReactRoot()})},q(e)):q(e))}))):null,Q=this.headerItemAttributes(),X=B?[B]:[],ae=this.visibleAttributes(O),ne=[].concat(X,(0,i.default)(Q)),re=h.default.difference(ae,ne),ie=d?[]:K,oe=this.renderHead({isBackgroundImageMode:k,primaryImageAttribute:B,headerAttributes:Q,primaryImageUrl:j,wideMode:D,pageWidth:M,showHeadings:R,displayMode:T,rowState:O,bodyActionsView:$}),le=k&&!d&&!V.ReactRootUIConfig.isReactRoot(),se=le?f.default.createElement(f.default.Fragment,null,oe):null,ue=h.default.difference(G,ie).filter((function(e){return e.prominence()!==C.default.DISPLAY_INLINE&&(!h.default.includes(Y,e)&&(!(e.columnAttachment()&&e.isAutoCreated()&&!h.default.includes(ae.map((function(e){return e.name()})),e.columnAttachment()))&&e.prominence()!==C.default.DO_NOT_DISPLAY))})),de=null;if(V.ReactRootUIConfig.isReactRoot()&&c&&this.props.actionButtonContainer)if(this.isInEditMode)de=f.default.createElement(v.Portal,{container:this.props.actionButtonContainer},f.default.createElement(W.NavBarButtons,{childrenOnly:!0},f.default.createElement(W.NavBarButton,{"aria-label":(0,U.mapActionName)("Cancel"),variant:"outlined",onClick:function(){return e.cancelEditMode()}},(0,U.mapActionName)("Cancel")),f.default.createElement(W.NavBarButton,{"aria-label":(0,U.mapActionName)("Save"),variant:"contained",onClick:function(){return e.saveAndCloseEditMode()}},(0,U.mapActionName)("Save")),f.default.createElement(W.NavBarDivider,null)));else{ue=ue.filter((function(e){return e.prominence()!==C.default.DISPLAY_OVERLAY}));var ce=[];!p&&g&&V.ReactRootUIConfig.isInDesktopExperience()&&ce.push(f.default.createElement(W.NavBarIconButton,{onClick:w,key:"prev",disabled:!w,"aria-label":(0,U.mapActionName)("Prev")},f.default.createElement("i",{className:"fa fa-chevron-left"})),f.default.createElement(W.NavBarIconButton,{onClick:b,key:"next",disabled:!b,"aria-label":(0,U.mapActionName)("Next")},f.default.createElement("i",{className:"fa fa-chevron-right"}))),de=f.default.createElement(v.Portal,{container:this.props.actionButtonContainer},f.default.createElement(W.NavBarButtons,{rowIds:[this.rowId()],extraActions:ue,usedActions:[].concat((0,i.default)(ie),(0,i.default)(this.props.fabActions||[]))},ce))}else h.default.get(window,"AppState.CurrentUIState.SlideshowUIState")&&F.AppGlobals.AppState.CurrentUIState.ControlName===this.props.controlName&&F.AppGlobals.ViewManager.appHeader.setState({row:N.rowData,tableSchema:this.props.tableSchema,normalActionButtons:ue});var pe=B?this.dataContext().rowData[B.name()]:null,fe=(0,m.default)("SlideshowPage",{"SlideshowPage--sidebyside-mode":T===U.DisplayMode.SideBySide,"SlideshowPage--align-center":T===U.DisplayMode.Centered,"SlideshowPage--show-headings":R,"SlideshowPage--hide-headings":!R,"SlideshowPage--billboard-image-mode":pe&&!k,"SlideshowPage--background-image-mode":!!k,"SlideshowPage--missing-primary-image":!j,"SlideshowPage--fixed-height-mode":this.props.fixedHeightMode}),he={height:this.props.height};k&&j&&!this.props.useCardLayout&&(he.backgroundImage="url('"+j+"')");var me,ve=V.ReactRootUIConfig.isInDesktopExperience()&&D,ye=!!this.props.useDesktopMultiColumn&&ve,ge=d||null!=oe||null!=$,we=ye&&n>840&&ge,be=ye?function(e,t){var a=t?2:3,n=e-32-(t?L.HEADER_COLUMN_WIDTH+16:0);return Math.max(1,Math.min(Math.floor(n/440),a))}(I,we):1,Se=V.ReactRootUIConfig.isReactRoot()?this.getContentColumns({shouldRenderOutsideHeadView:le,bodyActionsView:$,headView:oe,attributesToDisplay:re,usedRowActions:ie,skippedRowActions:Y,canRenderMultiColumns:ye,pageWidth:M,showHeadings:R,displayMode:T,rowState:O,maxColumnCount:be,headerColumnEnabled:we}):this.getContentColumnsLegacy({outsideHeadView:se,bodyActionsView:$,headView:oe,attributesToDisplay:re,usedRowActions:ie,skippedRowActions:Y,pageWidth:M,showHeadings:R,displayMode:T,rowState:O}),Te=ve?f.default.createElement(f.default.Fragment,null,se,f.default.createElement("div",{className:S.columnsContainer},f.default.createElement(L.HeaderColumn,{headerColumnEnabled:we,headView:oe}),Se.filter(ee).map((function(e,t){return f.default.createElement("div",{key:"column-".concat(t),className:S.column,"data-testid":P.SlideshowPageDataTestIds.Column},e.sections.filter(J).map((function(e,a){var n,r=0===t&&0===a;return f.default.createElement(v.Card,{key:"card-section-".concat(a),variant:"outlined",className:(0,m.default)(S.card,(n={},(0,o.default)(n,S.inlineCard,!Z(e)&&e.inlineMode),(0,o.default)(n,S.headerCard,r&&ge&&!we),n)),"data-testid":P.SlideshowPageDataTestIds.Card},Z(e)?e:e.lines)})))})))):f.default.createElement(f.default.Fragment,null,se,Se[0].sections.filter(J).map((function(e,t){var a,n=0===t&&V.ReactRootUIConfig.isReactRoot()&&ge&&!we;return f.default.createElement("section",{key:"section-".concat(t),className:(0,m.default)("SlideshowPage__section",(a={},(0,o.default)(a,S.headerCard,n),(0,o.default)(a,S.regularCard,!n),a)),"data-testid":P.SlideshowPageDataTestIds.Section,"aria-label":Z(e)?void 0:e.sectionLabel},Z(e)?e:e.lines)})));if(ve){var Ce=we?L.HEADER_COLUMN_WIDTH:0,Re=16*(Se.length-1),Ee=Math.min(I,768*Se.length+Re+Ce);me=f.default.createElement("div",{className:"DesktopModeContainer",style:{maxWidth:Ee}},Te)}else me=f.default.createElement("div",{className:"WideModeContainer"},Te);var ke=_.Common.RunningInTestFramework?y.default.removeNewlines(this.props.rowId||""):void 0;return f.default.createElement("div",{className:fe,style:he,"data-testonly-row-id":ke,"data-testid":P.SlideshowPageDataTestIds.Container},de,f.default.createElement("div",{id:"scroller",className:"SlideshowPage__scroller",ref:u},f.default.createElement("div",{className:"SlideshowPage__main",style:ve?void 0:{height:this.props.height,paddingLeft:x,paddingRight:x,width:I},"data-testid":P.SlideshowPageDataTestIds.Main},me)))}},{key:"mainWidth",value:function(){var e,t=this.props,a=t.width;t.height?e=a-(this.props.scrollbarWidth?this.props.scrollbarWidth():0):e=a;return e}},{key:"autoDeleteRowActions",value:function(){return this.rowActions().filter((function(e){return e.isAutoCreated()&&"DELETE_RECORD"===e.type()}))}},{key:"bodyRowActions",value:function(){var e=this,t=this.autoDeleteRowActions();return this.rowActions().filter((function(a){var n="DELETE_RECORD"===a.type(),r=a.isAutoCreated();return a.prominence()===C.default.DISPLAY_PROMINENTLY&&!(n&&r||n&&!t.length&&!e.props.isInline)}))}}]),a}(M.default),oe=(0,v.withStyles)(ae)(ie);t.SlideshowPage=oe},216437:(e,t)=>{"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.SlideshowPageDataTestIds=void 0,t.SlideshowPageDataTestIds=a,function(e){e.Card="slideshow-page-card",e.Column="slideshow-page-column",e.Columns="slideshow-page-columns",e.Container="slideshow-page-container",e.Header="slideshow-page-header",e.HeaderColumn="slideshow-page-header-column",e.Main="slideshow-page-main",e.OutsideHeadView="outside-head-view",e.Section="slideshow-page-section"}(a||(t.SlideshowPageDataTestIds=a={}))},515801:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderColumn=t.HEADER_COLUMN_WIDTH=void 0;var r=n(a(667294)),i=a(697211),o=a(695386),l=a(216437),s=400;t.HEADER_COLUMN_WIDTH=s;var u=(0,o.makeStyles)((function(e){return{headerColumn:{width:"".concat(s,"px"),minWidth:"".concat(s,"px"),marginRight:e.spacing(2)},headerCard:{position:"fixed",width:"".concat(s,"px"),maxHeight:"100%",overflowY:"auto"}}}));t.HeaderColumn=function(e){var t=e.headerColumnEnabled,a=e.headView,n=u();return t?r.default.createElement("div",{className:n.headerColumn,"data-testid":l.SlideshowPageDataTestIds.HeaderColumn},r.default.createElement(i.Card,{key:"header-column-card-section",variant:"outlined",classes:{root:n.headerCard},"data-testid":l.SlideshowPageDataTestIds.Card},a)):null}},814394:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SlideshowPage",{enumerable:!0,get:function(){return r.SlideshowPage}}),Object.defineProperty(t,"SlideshowPageDataTestIds",{enumerable:!0,get:function(){return n.SlideshowPageDataTestIds}}),Object.defineProperty(t,"getPrimaryImageAttribute",{enumerable:!0,get:function(){return r.getPrimaryImageAttribute}});var n=a(216437),r=a(680462)},367418:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TableRowDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(294184)),c=n(a(496486)),p=n(a(667294)),f=n(a(112963)),h=a(557310),m=n(a(578914)),v=n(a(17926)),y=a(629502),g=a(714611);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}t.TableRowDataTestIds=r,function(e){e.Row="table-view-row"}(r||(t.TableRowDataTestIds=r={}));var b=function(e){(0,l.default)(a,e);var t=w(a);function a(){var e;return(0,i.default)(this,a),(e=t.apply(this,arguments)).handleSelect=function(t){e.props.onRowTap&&e.props.onRowTap(e.rowId(),e.rowValues(),t)},e}return(0,o.default)(a,[{key:"updateMechanism",get:function(){return"table"}},{key:"supportsEdits",value:function(e){return e=e||this.props,Boolean(e.quickEditMode)}},{key:"onEntryKeyDown",value:function(e,t){var a=t.target.tagName.toLowerCase(),n=this.props,r=n.focusRowByRowIndex,i=n.rowIndex;if("input"===a||"a"===a){if("Enter"===t.key){var o=t.shiftKey?i-1:i+1;r?r(o,e):document.activeElement.blur()}var l="ArrowUp"===t.key?-1:0,s="ArrowDown"===t.key?1:0;if(l||s)if("number"===t.target.type&&t.preventDefault(),!c.default.includes(["datetime-local","time"],t.target.type))r&&r(i+(l||s),e)}}},{key:"drilldownMode",value:function(){return this.props.groupBy&&this.props.groupBy.length>1}},{key:"render",value:function(){var e,t=this,a=this.props.isFreezingEnabled,n=void 0===a?function(){return!1}:a,i=this.props.layout.map((function(e,a){return p.default.createElement(y.TableColumn,Object.assign({key:a,tableRow:t,columnPadding:g.columnPadding,rowHeight:(0,g.rowHeight)(),isFrozen:!!(0,g.isAttributeColumnLayout)(e)&&n(a,e.attribute,t.props.layout)},e))})),o=this.props.selectionMode?p.default.createElement("div",{className:"TableViewRow__selection-indicator"},p.default.createElement("i",{className:"fa fa-check TableViewRow__selection-indicator-icon"})):null,l=h.ReactRootUIConfig.isInDesktopExperience(),s=(0,d.default)("TableViewRow",{"TableViewRow--translucent-mode":this.props.translucentMode,"TableViewRow--selection-mode":this.props.selectionMode,"TableViewRow--edit-mode":this.props.quickEditMode,"TableViewRow--hover-update":l,"TableViewRow--highlighted":this.props.highlighted&&!l,"TableViewRow--highlighted-update":this.props.highlighted&&l,"TableViewRow--no-selection-mode":!this.props.selectionMode,"TableViewRow--selected":this.props.isSelected,"TableViewRow--last-toggled":this.props.isLastToggled});if(this.props.drilldownColumn){var u=this.props.tableSchema.findAttributeByName(this.props.drilldownColumn);if(u)return p.default.createElement(v.default,Object.assign({},this.props,{rows:[this.props.rowValues],disableNavigation:this.props.disableNavigation,attribute:u,tableSchema:this.props.tableSchema,groupAggregate:this.props.groupAggregate,selectionMode:this.props.selectionMode,index:this.props.index,onTap:this.handleSelect,viewType:"table"}))}return this.props.quickEditMode?p.default.createElement("div",{className:s,style:{height:(0,g.rowHeight)(),display:"block"},"data-testonly-row-index":this.props.index,"data-testid":r.Row,id:"Table"+this.rowCssSelector()},i,o):p.default.createElement(f.default,{spanMode:!0,navigationDelay:!this.props.selectionMode,enabled:!(this.props.quickEditMode||this.props.disableNavigation),onTap:this.handleSelect,onLongPress:null===(e=this.props.onRowLongPress)||void 0===e?void 0:e.bind(null,this.rowId()),className:s,style:{height:(0,g.rowHeight)(),display:"block"},"data-testonly-row-index":this.props.index,"data-testid":r.Row,id:"Table"+this.rowCssSelector()},i,o)}}]),a}(m.default);t.default=b},629502:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.TableColumn=void 0;var r=n(a(667294)),i=n(a(294184)),o=n(a(92329)),l=n(a(106375)),s=n(a(365914)),u=n(a(496486)),d=n(a(571524)),c=a(714067);t.TableColumn=function(e){var t,a=e.rowHeight,n=e.columnWidth,p=e.columnPadding,f=e.attribute,h=e.isAction,m=e.isCompact,v=e.action,y=e.TypeDisplay,g=e.iconNavigationOnly,w=e.special,b=e.tableRow,S=e.isFrozen;if("drill-arrow"===w){var T=u.default.get(window,"AppState.CurrentUIState.DashboardUIState.interactiveMode");if(!(b.props.quickEditMode&&!b.drilldownMode())&&!T){var C={width:n+p+"px",paddingLeft:p/2,paddingRight:p/2};return r.default.createElement("div",{className:"TableViewRow__drill-arrow",style:C,key:"drill-arrow"},r.default.createElement("i",{className:"fa fa-angle-right"}))}return null}var R=null,E={height:a-1,width:(n=S&&n?n-2:n)+p},k=b.props.appModel,I=b.dataContext(),A=!k.AppTemplate.Presentation.RespectShowIfEverywhere||!f.showIfEvalTree()||f.showIfEvalTree().run(I);if(h&&v){(!k.inRollout("showIfActionButtons")||A)&&v.isValidForRow(b.rowValues(),b.dataContext())&&(R=r.default.createElement(l.default,{appModel:b.props.appModel,action:v,rowId:b.rowId(),sourceLocationName:"Table Row",sourceTable:b.props.table,displayMode:"small",padding:p,disabled:b.props.quickEditMode||b.props.disableNavigation,shouldBeHidden:!A}))}else{var D=k.getSortHandleWidth();E.width+=D;var M=k.inRollout("filterFromTableHeader")&&(null==f?void 0:f.isSearchable());if(M&&(E.width+=c.SORTHANDLE_WIDTH),k.inRollout("filterFromTableHeader")&&(D||M)&&(E.width+=p),A){var x=b.rowValues()[f.name()],N=!b.drilldownMode()&&b.props.quickEditMode&&f.supportsEditsInTableView()&&!b.isHidden(f),O=m||f.isImageType(),_=f.shouldRightAlign()&&!N,B=0,P=0;O?P=B=p/2:_?P=p:B=p;var L=b.props.table.name(),V=b.rowId(),F=null===(t=null==k?void 0:k.dataManager)||void 0===t?void 0:t.currentTransaction,H=N?null==F?void 0:F.wasModified(L,V,f.name()):void 0;R=N?r.default.createElement(o.default,Object.assign({},b.props,{yesNoMode:"Checkbox",viewMode:"compact",viewType:"table",modified:H,screenId:V,showErrorState:b.showErrorState(),innerRef:b.onEntryMount.bind(b,f),dataContext:I,table:null,tableName:L,attribute:f,appModel:k,entryId:s.default.makeElementId("Attr_"+f.name()),value:x,valid:b.isValid(f),hidden:b.isHidden(f),editable:b.isEditable(f),required:b.isRequired(f),validOptions:b.validOptions(f),suggestedValues:b.suggestedValues(f),displayName:b.displayName(f),showContent:b.showContent(f),baseImage:f.baseImage(I),onEntryValueChange:b.onEntryValueChange,onEntryFocus:b.onEntryFocus,onEntryBlur:b.onEntryBlur,onEntryKeyDown:b.onEntryKeyDown,width:n+p+D,height:a?a-1:a,paddingLeft:B,paddingRight:P})):r.default.createElement(y,{attribute:f,value:x,table:b.props.table,appModel:b.props.appModel,rowId:b.rowId(),dataContext:b.dataContext(),iconNavigationOnly:g,allowTaps:!1,minimalView:!1,width:n+p+D,height:a?a-1:a,paddingLeft:B,paddingRight:P,imageDisplayType:undefined})}}var W=(0,i.default)("TableViewRow__column",{"TableViewRow__column--frozen":S,"TableViewRow__column--frozen-shadow":S&&!d.default.IsIOSBrowser()});return R?r.default.createElement("div",{className:W,style:E},R):(W=(0,i.default)("TableViewRow__column-placeholder",{"TableViewRow__column--frozen":S,"TableViewRow__column--frozen-shadow":S&&!d.default.IsIOSBrowser()}),r.default.createElement("div",{className:W,style:E}))}},714611:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.columnPadding=void 0,t.computeDrilldownLayout=g,t.computeLayout=y,t.isSpecialColumnLayout=t.isAttributeColumnLayout=t.isActionColumnLayout=t.drillArrowWidth=t.default=void 0,t.rowHeight=d,t.totalWidths=v;var r=n(a(600861)),i=n(a(496486)),o=n(a(365914)),l=n(a(593186)),s=a(803583),u=n(a(192137));function d(){var e;return null===(e=null===window||void 0===window?void 0:window.AppModel)||void 0===e?void 0:e.GetTableRowHeight()}var c=12;t.columnPadding=c;t.drillArrowWidth=8;t.isAttributeColumnLayout=function(e){var t;return null!=(null===(t=e)||void 0===t?void 0:t.attribute)};t.isActionColumnLayout=function(e){var t;return null!=(null===(t=e)||void 0===t?void 0:t.action)};t.isSpecialColumnLayout=function(e){var t;return null!=(null===(t=e)||void 0===t?void 0:t.special)};var p=function(e,t){return"Wide"===t||e.isMostlyNumberType()?11.5:7},f=function e(t,a,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Normal";if(r._cachedPreferredWidths)return r._cachedPreferredWidths;var l,u=r.columnStats(),d=p(r,o),f=a.appTemplate.normalizedFontSize()/18,h=t.basePreferredWidth(r)*f,m=t.baseTightWidth(r)*f;if(u&&!r.isImageType()){var v=(u.AverageLength+1.5*u.StdDevLength)*d,y=u.MaxLength*d;v>y&&(v=y),l="Narrow"===o?{tightWidth:Math.min(v,m),cushyWidth:y+c}:{tightWidth:Math.min(h,v+c),cushyWidth:y+c}}else l="Narrow"===o?{tightWidth:m}:{tightWidth:h};var g=a.appTemplate.formattingRules(),w=g.computeWorstCaseFormatting(a,{tableOrSlice:n.name(),column:r.name()}),b=w.textSize||1,S=w.icon.length||0,T=null,C=r.referencedLabelCollection(),R=C.table,E=C.labelBasicAttribute;if(R&&E){var k=g.computeWorstCaseFormatting(a,{tableOrSlice:n.name(),column:E.name()}),I=k.icon.length||0;S+=I;var A=s.TypeDisplaysApi.lookup(E);T=e(A,a,R,E,o)}var D=2;"Narrow"===o?D=1:"Wide"===o&&(D=3),S>D&&(S=D);var M=27*S*f*b;i.default.each(l,(function(e,t){var a=Math.ceil(e*b+M);l[t]=a}));var x=T||l;return r._cachedPreferredWidths=x,x};function h(e,t,a,n,r,i){var o=i[e.name()]||[];0===o.length?t.push({isAction:!1,attribute:e}):o.forEach((function(a){t.push({isAction:!0,action:a,attribute:e})}))}function m(e){var t=e.attribute,a=e.appModel,n=e.table,r=e.columnWidthPreference,i=e.containerWidth,l=s.TypeDisplaysApi.lookup(t),u=l.basePreferredWidth(t)<=56&&!t.isImageType(),d=0;if(a.AppTemplate.Presentation.ShowColumnNames&&!u){var p=t.displayName(a.dataContext());d=o.default.measureText(p,"TableView__header")+c+a.getSortHandleWidth()}var h=f(l,a,n,t,r),m=h.tightWidth,v=h.cushyWidth,y=d-m;y>0&&(y>85?m+=85:m=d,m>v&&(v=m));var g=i-c;return m>g&&(m=g,v=g),{attribute:t,TypeDisplay:l,tightWidth:m,cushyWidth:v,columnWidth:m,isCompact:u}}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.reduce((function(e,a){return isNaN(a.columnWidth)&&l.default.warnToDevConsole("NaN columnWidth, something went wrong with TableRow layout."),a.isAction||a.special?e+a.columnWidth+c:e+a.columnWidth+c+t}),0)}function y(e){var t,a=e.appModel,n=e.tableSchema,o=e.table,l=e.width,d=e.excludedColumns,p=void 0===d?[]:d,f=e.columnOrder,y=e.columnWidthPreference,g=e.disableAllActions,w=e.dataContext;if(t=f&&Array.isArray(f)&&f.length?function(e){var t=e.tableSchema,a=e.appModel,n=e.table,o=e.excludedColumns,l=void 0===o?[]:o,s=e.columnOrder,u=e.disableAllActions,d=e.dataContext,c=s&&s.indexOf("**all other columns**"),p=i.default.clone(s);if(null!=c&&c>=0){var f=i.default.map(t.visibleAttributesExcept(p),(function(e){return e.name()}));p.splice.apply(p,[c,1].concat((0,r.default)(f)))}var m=t.findAttributesByNames(p),v=a.appTemplate.actions(),y=u?[]:v.actionsForTable(n.name(),a,void 0,d),g=i.default.mapValues(i.default.mapKeys(m,(function(e){return e.name()})),(function(e){return"Ref"!==e.type()?y.filter((function(t){return t.showInlineFor(e)})):[]})),w=[];return m.forEach((function(e){l.indexOf(e.name())>=0||e.isHidden()||e.isShowType()||h(e,w,0,0,0,g)})),w}({tableSchema:n,appModel:a,table:o,excludedColumns:p,columnOrder:f,disableAllActions:g,dataContext:w}):function(e){var t=e.tableSchema,a=e.appModel,n=e.table,r=e.excludedColumns,o=void 0===r?[]:r,l=e.disableAllActions,d=e.dataContext,c=[],p=t.visibleAttributesWithoutShowTypes();t.labelBasicAttribute()&&p.indexOf(t.labelBasicAttribute())>=0&&(c=i.default.union(c,[t.labelBasicAttribute()]));var f=t.keyAttribute();f&&(t.hasCompoundKey()&&f.isHidden()?c=i.default.union(c,t.keyAttributes()):f.isHidden()||c.push(f));var m=a.appTemplate.actions(),v=l?[]:m.actionsForTable(n.name(),a,void 0,d),y=i.default.mapValues(i.default.mapKeys(p,(function(e){return e.name()})),(function(e){return"Ref"!==e.type()?v.filter((function(t){return t.showInlineFor(e)})):[]})),g=p.filter((function(e){return 1===y[e.name()].length||s.TypeDisplaysApi.lookup(e).basePreferredWidth(e)<=56&&!e.isImageType()&&"Yes/No"!==e.type()})),w=u.default.reduceAttributesToUniqueTypes(g);c=i.default.union(c,w);var b=t.summaryFormulaAttributesByImportance();b.length&&(c=i.default.union(c,[b[0]])),c=i.default.union(c,p).filter((function(e){return-1===o.indexOf(e.name())&&!e.isHidden()}));var S=[];return c.forEach((function(e){h(e,S,0,0,0,y)})),S}({tableSchema:n,appModel:a,table:o,excludedColumns:p,disableAllActions:g,dataContext:w}),!t.length)return[];var b=l-20,S=function(e){var t=e.models,a=e.appModel,n=e.table,r=e.columnWidthPreference,i=e.containerWidth;return t.map((function(e){var t=e.isAction,o=e.attribute,l=e.action;return t?{isAction:!0,action:l,attribute:o,tightWidth:30,columnWidth:30,isCompact:!0}:m({attribute:o,appModel:a,table:n,columnWidthPreference:r,containerWidth:i})}))}({models:t,appModel:a,table:o,columnWidthPreference:y,containerWidth:b}),T=a.getSortHandleWidth();(function(e){var t=e.columns,a=e.width,n=e.sortHandleWidth,r=a-v(t,void 0===n?0:n),i=[],o=0,l=0;t.forEach((function(e){e.cushyWidth&&e.cushyWidth!==e.tightWidth&&(i.push(e),o+=e.tightWidth,l+=e.cushyWidth)}));var s=r/(l-o);s>1&&(s=1),i.forEach((function(e){e.columnWidth=Math.floor(e.tightWidth+(e.cushyWidth-e.tightWidth)*s)}))})({columns:S,width:b=Math.max(b,v(S,T)),sortHandleWidth:T}),function(e){var t=e.columns,a=e.width,n=e.sortHandleWidth,r=void 0===n?0:n;if(t.length){var i=t[t.length-1];if(!i.isCompact&&!i.attribute.shouldNotStretch()){var o=a-v(t.slice(0,-1),r)-c-r;i.columnWidth=Math.max(o,i.columnWidth)}}}({columns:S,width:b,sortHandleWidth:T});var C=8,R=l-v(S,T);return R>20&&(C=R-c),S.push({special:"drill-arrow",columnWidth:C}),S}function g(e){var t=e.tableSchema,a=e.attributeName,n=e.width,r=t.findAttributeByName(a);return r?[{attribute:r,TypeDisplay:s.TypeDisplaysApi.lookup(r),columnWidth:n-c-8-10,isCompact:!1,iconNavigationOnly:!0},{special:"drill-arrow",columnWidth:8}]:(l.default.warnToDevConsole("Could not find attribute named",a,"on schema",t),[])}var w={computeLayout:y,computeDrilldownLayout:g,totalWidths:v,rowHeight:d,columnPadding:c};t.default=w},526382:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(238416)),i=n(a(667294)),o=n(a(294184)),l=n(a(112963)),s=a(714611),u=function(e){var t,a=e.onSelect,n=e.text,u=e.expanded,d=e.index;return t=u?i.default.createElement("div",{className:"TextRow__drill-arrow",style:{float:"right",paddingRight:s.columnPadding}},i.default.createElement("i",{className:"fa fa-chevron-down"})):i.default.createElement("div",{className:"TextRow__drill-arrow",style:{float:"right",paddingLeft:s.columnPadding/2,paddingRight:s.columnPadding/2}},i.default.createElement("i",{className:"fa fa-angle-right"})),i.default.createElement(l.default,{spanMode:!0,navigationDelay:!0,onTap:a,asyncTap:!1,className:(0,o.default)("TextRow",(0,r.default)({},"TextRow__expanded",u)),"data-testonly-row-index":d},i.default.createElement("span",{className:"TextRow__text"},n),t)};t.default=u},563479:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.Badge=void 0;var r=n(a(238416)),i=n(a(667294)),o=a(695386),l=a(351101),s=a(803583),u=a(56749),d=n(a(294184)),c=a(557310),p=(0,o.makeStyles)((function(){return{container:{fontSize:"0.7rem",backgroundColor:(0,u.themeColor)("groupedByAggregateBackground"),borderRadius:4,color:(0,u.themeColor)("groupedByAggregateContent"),padding:"1px 2px 0px 4px",margin:"auto 10px",flexShrink:0},reactRootStyles:{padding:"0px 2px 0px 4px",display:"flex",alignItems:"center"}}}));t.Badge=function(e){var t,a=e.attribute,n=e.value,o=p(),u=(0,l.getAppModel)();return t=a?s.TypeDisplaysApi.lookup(a):s.TypeDisplaysApi.Text,i.default.createElement("div",{className:(0,d.default)("GroupedHeaderRow__aggregate",o.container,(0,r.default)({},o.reactRootStyles,c.ReactRootUIConfig.isReactRoot()))},i.default.createElement(t,{attribute:a,value:n,appModel:u}))}},49676:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.MobileActionSheet=void 0;var r=n(a(667294)),i=a(697211),o=(0,a(695386).makeStyles)((function(e){return{paper:{borderRadius:"".concat(e.spacing(1),"px ").concat(e.spacing(1),"px 0 0")},listItemIcon:{justifyContent:"center"},list:{paddingTop:e.spacing(2)}}}));t.MobileActionSheet=function(e){var t=e.open,a=e.listItemContents,n=e.onClose,l=o();return r.default.createElement(i.Drawer,{anchor:"bottom",open:t,onClose:n,classes:{paper:l.paper},id:"MobileActionSheet","data-testId":"mobile-action-sheet"},r.default.createElement(i.List,{classes:{root:l.list}},a.filter((function(e){var t=e.shouldHideListItem;return!(void 0!==t&&t)})).map((function(e){var t=e.id,a=e.key,n=e.icon,o=e.displayText,s=e.onClick,u=e.element;return r.default.createElement(i.ListItem,{button:!0,key:a,id:t,onClick:s},u||r.default.createElement(r.default.Fragment,null,r.default.createElement(i.ListItemIcon,{classes:{root:l.listItemIcon}},n),r.default.createElement(i.ListItemText,{primary:o})))}))))}},818576:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(314247)),p=a(973128),f=a(235049),h=a(351101);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,l.default)(a,e);var t=m(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e,t=this.props,n=t.value,r=t.attribute,i=t.actions,l=t.alignment,s=null===(e=this.currentUIState)||void 0===e?void 0:e.Root,p=null,m=d.default.createElement("span",{className:"AddressTypeDisplay__text"},n),v=l===h.DisplayMode.Centered?"auto":void 0;if(n&&!c.default.disabled&&"LatLong"===r.type()&&"deck"!==s&&(0,f.isConnected)()){var y=i&&i.length>0?i[0].name():null;p=d.default.createElement("div",{className:"GenericActionButton","data-testonly-action":y,style:{position:"relative",width:"100%",maxWidth:300,margin:v,marginTop:3,marginBottom:-18}},d.default.createElement("img",{src:c.default.getStaticImageURL(n,800,200),style:{objectFit:"cover",width:"100%",height:100,margin:"auto"}}),d.default.createElement("i",{className:"GenericActionButton__icon fa fa-map-marker",style:{position:"absolute",marginLeft:-3,marginTop:-16,top:"50%",left:"50%"}})),m=null}return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"AddressTypeDisplay","data-testonly-value":n},m,p))}}],[{key:"basePreferredWidth",value:function(){return 180}}]),a}(p.BaseTypeDisplay);t.default=v},118438:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(496486));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var f=function(e){(0,l.default)(a,e);var t=p(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"hasValue",value:function(){return c.default.trim(this.props.value)}},{key:"render",value:function(){var e=this.props.value;return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"AppTypeDisplay"},d.default.createElement("span",{className:"AppTypeDisplay__text"},e)))}}]),a}(a(973128).BaseTypeDisplay);t.default=f},120224:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=n(a(496486)),f=a(973128),h=n(a(112963)),m=n(a(901711)),v=a(894440),y=n(a(367397)),g=n(a(895466)),w=a(365914),b=n(a(143249)),S=a(166089),T=a(629503);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var R=function(e){(0,s.default)(a,e);var t=C(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).handleSelect=n.handleSelect.bind((0,o.default)(n)),n.onImageError=n.onImageError.bind((0,o.default)(n)),n.onFlattenResult=function(e,t){t&&n.setState({url:t})},n.handleRef=function(e){n.domNode=e},n}return(0,i.default)(a,[{key:"UNSAFE_componentWillMount",value:function(){(0,l.default)((0,d.default)(a.prototype),"UNSAFE_componentWillMount",this).call(this),this.updateState(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){(0,l.default)((0,d.default)(a.prototype),"UNSAFE_componentWillReceiveProps",this).call(this,e),this.updateState(e)}},{key:"componentDidMount",value:function(){this.updateState(this.props)}},{key:"getDomNodeWidth",value:function(){return this.domNode&&this.domNode.offsetWidth}},{key:"imageWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=(e.paddingLeft||0)+(e.paddingRight||0);return(e.inlineModeBlockWidth||e.width)-t}},{key:"imageHeight",value:function(e){return(e=e||this.props).inlineModeBlockHeight||e.height}},{key:"updateState",value:function(e){var t=e.table&&e.table.rootName(),a=g.default.from(e.value,t);if(a.isValid()&&a.nestedHandle()){var n=this.imageWidth(e),r=this.imageHeight(e);if(!n||!r){var i=this.getDomNodeWidth();n=n||i,r=r||i}if(n&&r)return void a.flatten(this.onFlattenResult,n,r)}var o=this.normalizeOriginalImageUrl(e.value);o!==this.state.url&&this.setState({url:o,imageErrored:!1})}},{key:"onImageError",value:function(){this.setState({imageErrored:!0})}},{key:"isBlock",value:function(){return!0}},{key:"allowTaps",value:function(){return(0,l.default)((0,d.default)(a.prototype),"allowTaps",this).call(this,arguments)&&!this.state.imageErrored}},{key:"handleSelect",value:function(){var e=this.refs.imageWithSpinner;!e||e.error||e.loading||S.AppGlobals.ViewManager.ShowImageView(e.state.src,this.originalImageUrl(),e.imageElement)}},{key:"normalizeOriginalImageUrl",value:function(e){var t=e||this.props.value;return t=(0,w.normalizeTextIconUrl)(t,this.formattingSettings),this.props.table?this.props.appModel.ResolveFile(t,this.props.table.rootName()):t}},{key:"originalImageUrl",value:function(){return this.state.url}},{key:"flexImageUrl",value:function(){var e,t=p.default.get(this,"props.appModel.AppTemplate.Behavior.FullOfflineCaching"),a=this.imageWidth();return!t&&a&&b.default.inRollout(this.props.appModel,"imageWithSpinner")?(e=a>600?768:2*a<600?2*Math.max(a,v.DECK_ROW_IMAGE_WIDTH):600,(T.Common.FlexImageUrl(this.state.url,e)||"").trim()):(T.Common.FlexImageUrl(this.state.url)||"").trim()}},{key:"additionalClasses",value:function(){return""}},{key:"addSolidBackgroundColor",value:function(){return!1}},{key:"imageDisplayType",value:function(e){return(e=e||this.props).imageDisplayType?"Full Image"===e.imageDisplayType?"full-centered":"Square Image"===e.imageDisplayType?"square":"Round Image"===e.imageDisplayType?"round":e.imageDisplayType:"full-centered"}},{key:"renderFormattingRules",value:function(){return{formattingRuleStyles:{},iconElements:[]}}},{key:"render",value:function(){var e,t=this.flexImageUrl();if(this.props.renderPlainImage)e=c.default.createElement("img",{src:t});else{var n=!this.props.onImageSize&&b.default.inRollout(this.props.appModel,"imageWithSpinner")?m.default:y.default;e=c.default.createElement(n,{src:t,className:"BaseImageTypeDisplay__spinner-image",formattingSettings:this.formattingSettings,cropMode:this.imageDisplayType(),solidBackgroundColor:this.addSolidBackgroundColor(),onImageSize:this.props.onImageSize,onImageError:this.onImageError,imageBorderRadius:this.props.imageBorderRadius,zeroImageLoadDelay:this.props.zeroImageLoadDelay,useLoadingSpinner:this.props.useLoadingSpinner,width:this.imageWidth(),height:this.imageHeight(),ref:"imageWithSpinner",isBasic:this.isBasic(),alignment:this.props.alignment})}var r="BaseImageTypeDisplay "+this.additionalClasses();return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement(h.default,{onTappableMount:this.handleRef,enabled:this.allowTaps(),navigationDelay:!0,onTap:this.handleSelect,className:r},e))}}],[{key:"basePreferredWidth",value:function(){return 50}},{key:"isImage",value:function(){return!0}},{key:"isBlock",value:function(){return!0}}]),a}(f.BaseTypeDisplay);t.default=R},973128:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTypeDisplay=void 0;var r=n(a(600861)),i=n(a(856690)),o=n(a(689728)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(496486)),p=n(a(294184)),f=n(a(173861)),h=n(a(150198)),m=n(a(593186)),v=a(300431);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e,t){var a=e.table,n=e.rowId;return a&&a.rootTable().lookupTableRow(n,t)},w=function(e){(0,l.default)(a,e);var t=y(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).state={},n}return(0,o.default)(a,[{key:"isBlock",value:function(){return!1}},{key:"isBasic",value:function(){return this.props.isBasic}},{key:"tableRow",get:function(){return g(this.props,this.pendingTransaction)}},{key:"formattingSettings",get:function(){var e=this.props.attribute,t=this.tableRow;return c.default.isNil(t)||c.default.isNil(e)?this.state.formattingSettings:t.getColumnFormatting(e.name())}},{key:"UNSAFE_componentWillMount",value:function(){this.updateFormattingRules(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.value===this.props.value&&e.rowId===this.props.rowId&&e.appModel.DataStamp===this.state.lastDataStamp||this.updateFormattingRules(e)}},{key:"displayMode",value:function(){return this.props.displayMode||"block"}},{key:"allowTaps",value:function(){return null==this.props.allowTaps||this.props.allowTaps}},{key:"updateFormattingRules",value:function(e){var t=g(e,this.pendingTransaction);if(c.default.isNil(t)){var a=null;if(e.table&&e.attribute&&e.appModel)a=e.appModel.appTemplate.formattingRules().getFormatting({tableOrSlice:e.table.name(),column:e.attribute.name(),rowKey:e.rowId,dataContext:e.dataContext});this.setState({formattingSettings:a,lastDataStamp:e.appModel.DataStamp})}else this.state.formattingSettings&&this.setState({formattingSettings:void 0,lastDataStamp:void 0})}},{key:"renderFormattingRules",value:function(){var e,t={},a="",n=[],r=this.formattingSettings;r&&(t=f.default.cssStylesForText(r),a=f.default.styleClassesForText(r),this.props.ignoreFormatRuleColors?t.color=e:e=r.highlightColor,n=r.icon.map((function(t,a){return d.default.createElement("i",{className:"BaseTypeDisplay__user-icon icon fa "+t,style:{color:e},key:a})})),!r.icon.length&&r.highlightColor&&n.unshift(d.default.createElement("span",{className:"BaseTypeDisplay__color-icon",style:{backgroundColor:r.highlightColor},key:"highlight-dot"})));return{formattingRuleClasses:a,formattingRuleStyles:t,iconElements:n,formattingSettings:r}}},{key:"render",value:function(e){var t=this.renderFormattingRules(),a=t.formattingRuleClasses,n=t.formattingRuleStyles,i=t.iconElements,o=t.formattingSettings,l=this.additionalClassNames?this.additionalClassNames():"",s=(0,p.default)(this.props.className,e.props.className,l,a,"BaseTypeDisplay",{"BaseTypeDisplay--minimal-view":this.props.minimalView,"BaseTypeDisplay--empty-value":!h.default.valueExists(this.props.value,this.props.attribute&&this.props.attribute.type()),"BaseTypeDisplay--disallow-taps":!this.allowTaps(),"BaseTypeDisplay--basic":this.props.isBasic}),u=i;Array.isArray(e.props.children)?u=u.concat(e.props.children):u.push(e.props.children);var f={lineHeight:this.props.height?this.props.height-1+"px":null,paddingRight:this.props.paddingRight?this.props.paddingRight+"px":null,paddingLeft:this.props.paddingLeft?this.props.paddingLeft+"px":null};return o&&o.italic&&!f.paddingRight&&(f.paddingRight="3px"),"flex"===this.displayMode()?(f.display="flex",f.width=this.props.width?this.props.width+"px":null,f.height=this.props.height?this.props.height+"px":null):"block"===this.displayMode()?(f.display="block",f.width=this.props.width?this.props.width+"px":null,f.height=this.props.height?this.props.height+"px":null):"inline-block"===this.displayMode()||"inline-flex"===this.displayMode()?(f.display=this.displayMode(),f.height=this.props.height?this.props.height+"px":null,f.verticalAlign=this.props.height?"top":"middle",this.isBlock()&&(f.width=this.props.inlineModeBlockWidth?this.props.inlineModeBlockWidth+"px":"1.6em",f.height||(f.height=this.props.inlineModeBlockHeight?this.props.inlineModeBlockHeight+"px":"1.6em"))):(f.verticalAlign="middle",this.isBlock()?(f.height=this.props.inlineModeBlockHeight?this.props.inlineModeBlockHeight+"px":"1.6em",f.width=this.props.inlineModeBlockWidth?this.props.inlineModeBlockWidth+"px":"1.6em",f.display="inline-block"):f.display="inline",this.props.width&&m.default.warnToDevConsole("TypeDisplay was given a width in inline mode"),this.props.height&&m.default.warnToDevConsole("TypeDisplay was given a height in inline mode")),this.isBasic()&&(f=null),d.default.cloneElement.apply(d.default,[e,{className:s,style:c.default.extend({},e.props.style,n,f),"data-testid":"base-type-display","data-testonly-column":this.props.attribute?this.props.attribute.name():"(no-attribute)"}].concat((0,r.default)(u)))}}],[{key:"baseTightWidth",value:function(e){return this.basePreferredWidth(e)}},{key:"basePreferredWidth",value:function(e){return 125}},{key:"isImage",value:function(){return!1}},{key:"isBlock",value:function(){return!1}}]),a}(v.ViewAwareComponent);t.BaseTypeDisplay=w},537430:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=a(973128),p=n(a(150198));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,l.default)(a,e);var t=f(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e,t,n=this.props,r=n.attribute,i=n.dataContext,l=n.value,s=r.booleanTypeLabels(i),c=s.yesLabel,f=s.noLabel,h=p.default.booleanValueFromWireFormat(l);return!0===h?(e=c,t="BooleanTypeDisplay--yes"):!1===h?(e=f,t="BooleanTypeDisplay--no"):(e=" ",t="BooleanTypeDisplay--blank"),(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"BooleanTypeDisplay "+t},d.default.createElement("span",{className:"BooleanTypeDisplay__value"},e)))}}],[{key:"basePreferredWidth",value:function(e){if(e){var t=e.booleanEvalTrees(),a=t.yesEvalTree,n=t.noEvalTree;if(a||n)return c.BaseTypeDisplay.basePreferredWidth(e)}return 22}}]),a}(c.BaseTypeDisplay);t.default=h},714738:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ColorTypeDisplayDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=a(973128),f=n(a(150198));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.ColorTypeDisplayDataTestIds=r,function(e){e.Span="color-type-display-span"}(r||(t.ColorTypeDisplayDataTestIds=r={}));var m=function(e){(0,s.default)(a,e);var t=h(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=f.default.getColor(this.props.value)||"";return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"ColorTypeDisplay"},c.default.createElement("span",{"data-testid":r.Span,"aria-label":this.props.value,className:"ColorTypeDisplay__value ColorTypeDisplay__value--"+e})))}}],[{key:"basePreferredWidth",value:function(){return 10}}]),a}(p.BaseTypeDisplay);t.default=m},726217:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CurrencyTypeDisplayDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(496486)),p=n(a(667294)),f=n(a(294184)),h=a(973128),m=n(a(150198));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.CurrencyTypeDisplayDataTestIds=r,function(e){e.Symbol="currency-type-display-symbol",e.Value="currency-type-display-value"}(r||(t.CurrencyTypeDisplayDataTestIds=r={}));var y=function(e){(0,s.default)(a,e);var t=v(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"numberPrecision",value:function(){return this.props.attribute.decimalDigits()}},{key:"numericDigits",value:function(){return this.props.attribute.numericDigits()}},{key:"showThousandsSeparator",value:function(){return this.props.attribute.showThousandsSeparator()}},{key:"currencySymbol",value:function(){return this.props.attribute.currencySymbol()||"$"}},{key:"render",value:function(){var e=this.currencySymbol(),t=!!c.default.get(this,"props.appModel.AppTemplate.Presentation.RightAlignNumeric"),n=!!c.default.get(this,"props.appModel.AppTemplate.Presentation.UseAccountingFormat"),i=this.props.value;"string"==typeof i&&0===i.indexOf(e)&&(i=i.substr(1));var o,s,u,h=m.default.formatLocalizedNumber(i,{precision:this.numberPrecision(),numericDigits:this.numericDigits(),useGrouping:this.showThousandsSeparator()});if(h&&n){o=p.default.createElement("span",{className:"CurrencyTypeDisplay__left-parens"},"("),s=p.default.createElement("span",{className:"CurrencyTypeDisplay__right-parens"},")");var v=Number(i);0===v&&(h="  -      "),(u=v<0)&&(h=h.replace("-",""))}var y=(0,f.default)({CurrencyTypeDisplay:!0,"CurrencyTypeDisplay--right-align":t,"CurrencyTypeDisplay--accounting-format":n,"CurrencyTypeDisplay--negative":u});return h?(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,p.default.createElement("div",{className:y},p.default.createElement("span",{className:"CurrencyTypeDisplay__symbol","data-testid":r.Symbol},e),o,p.default.createElement("span",{className:"CurrencyTypeDisplay__value","data-testid":r.Value},h),s)):(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,p.default.createElement("div",{className:y},p.default.createElement("span",{className:"CurrencyTypeDisplay__value","data-testid":r.Value},this.props.value)))}}],[{key:"basePreferredWidth",value:function(){return 100}}]),a}(h.BaseTypeDisplay);t.default=y},910880:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DateTimeTypeDisplayDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=a(973128),f=n(a(365914));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.DateTimeTypeDisplayDataTestIds=r,function(e){e.Value="date-time-type-display-span"}(r||(t.DateTimeTypeDisplayDataTestIds=r={}));var m=function(e){(0,s.default)(a,e);var t=h(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props.attribute.ignoreSeconds(),t=this.props.attribute.useLongDateFormat(),n=this.props.value?f.default.localizeDateTime(this.props.value,e,t):"";return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"DateTimeTypeDisplay"},c.default.createElement("span",{"data-testid":r.Value},n)))}}],[{key:"basePreferredWidth",value:function(){return 168}}]),a}(p.BaseTypeDisplay);t.default=m},752255:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DateTypeDisplayDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=a(973128),f=n(a(365914)),h=a(44617);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.DateTypeDisplayDataTestIds=r,function(e){e.Value="date-type-display-span"}(r||(t.DateTypeDisplayDataTestIds=r={}));var v=function(e){(0,s.default)(a,e);var t=m(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props.value?f.default.toLocaleDateString(this.props.value,this.props.attribute.useLongDateFormat()):"";return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"DateTypeDisplay"},c.default.createElement("span",{"data-testid":r.Value},e)))}}],[{key:"basePreferredWidth",value:function(){return h.dynamicRollouts.includeByOwnerId("QuickEditCalendarIconRollout")?90:80}}]),a}(p.BaseTypeDisplay);t.default=v},117017:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DecimalTypeDisplayDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(496486)),p=n(a(667294)),f=n(a(294184)),h=a(973128),m=n(a(150198));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.DecimalTypeDisplayDataTestIds=r,function(e){e.Value="decimal-type-display-span"}(r||(t.DecimalTypeDisplayDataTestIds=r={}));var y=function(e){(0,s.default)(a,e);var t=v(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"numberPrecision",value:function(){return this.props.attribute.decimalDigits()}},{key:"numericDigits",value:function(){return this.props.attribute.numericDigits()}},{key:"showThousandsSeparator",value:function(){return this.props.attribute.showThousandsSeparator()}},{key:"render",value:function(){var e=m.default.formatLocalizedNumber(this.props.value,{precision:this.numberPrecision(),numericDigits:this.numericDigits(),useGrouping:this.showThousandsSeparator()}),t=!!c.default.get(this,"props.appModel.AppTemplate.Presentation.RightAlignNumeric"),n=(0,f.default)({DecimalTypeDisplay:!0,"DecimalTypeDisplay--right-align":t});return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,p.default.createElement("div",{className:n},p.default.createElement("span",{className:"DecimalTypeDisplay__text","data-testid":r.Value},e)))}}],[{key:"basePreferredWidth",value:function(){return 60}}]),a}(h.BaseTypeDisplay);t.default=y},3030:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"addSolidBackgroundColor",value:function(){return!0}},{key:"additionalClasses",value:function(){return"DrawingTypeDisplay"}}]),a}(n(a(120224)).default);t.default=d},502956:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DurationTypeDisplayDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=a(973128),f=n(a(365914));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.DurationTypeDisplayDataTestIds=r,function(e){e.Value="duration-type-display-span"}(r||(t.DurationTypeDisplayDataTestIds=r={}));var m=function(e){(0,s.default)(a,e);var t=h(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props.attribute.ignoreSeconds(),t=this.props.value?f.default.toDurationString(this.props.value,e):"";return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"DurationTypeDisplay"},c.default.createElement("span",{"data-testid":r.Value},t)))}}],[{key:"basePreferredWidth",value:function(){return 84}}]),a}(p.BaseTypeDisplay);t.default=m},380053:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EmailTypeDisplayDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=a(973128);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.EmailTypeDisplayDataTestIds=r,function(e){e.Value="email-type-display-span"}(r||(t.EmailTypeDisplayDataTestIds=r={}));var h=function(e){(0,s.default)(a,e);var t=f(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e,t=null===(e=this.currentUIState)||void 0===e?void 0:e.Root,n=c.default.createElement("span",{className:"EmailTypeDisplay__text","data-testid":r.Value},this.props.value||"");if(this.props.value&&"deck"!==t){var i=this.props.value.split("@");2===i.length&&(n=c.default.createElement("span",{className:"EmailTypeDisplay__text","data-testid":r.Value},i[0],c.default.createElement("wbr",null),"@"+i[1]))}return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"EmailTypeDisplay"},n))}}],[{key:"basePreferredWidth",value:function(){return 180}},{key:"baseTightWidth",value:function(){return 100}}]),a}(p.BaseTypeDisplay);t.default=h},420210:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var p=function(e){(0,l.default)(a,e);var t=c(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.attribute,t=this.props.value;return e&&(t=e.localizeWireValue(t)),(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"TextTypeDisplay"},d.default.createElement("span",{className:"TextTypeDisplay__text"},t)))}}],[{key:"basePreferredWidth",value:function(){return 180}},{key:"baseTightWidth",value:function(){return 100}}]),a}(a(973128).BaseTypeDisplay);t.default=p},753611:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808)),u=n(a(667294)),d=a(973128),c=a(803583);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var f=function(e){(0,o.default)(a,e);var t=p(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"renderNestedAttribute",value:function(){var e=this.props.attribute.nestedAttribute(),t=this.props.value,a=c.TypeDisplaysApi.lookup(e,t);return u.default.createElement(a,Object.assign({},this.props,{value:t,attribute:e}))}},{key:"render",value:function(){return this.renderNestedAttribute()}}],[{key:"basePreferredWidth",value:function(e){return this.basestTypeDisplay(e).basePreferredWidth()}},{key:"baseTightWidth",value:function(e){return this.basestTypeDisplay(e).baseTightWidth()}},{key:"isBlock",value:function(e,t){return a.basestTypeDisplay(e,t).isBlock(e,t)}},{key:"basestTypeDisplay",value:function(e,t){var a=null==e?void 0:e.nestedAttribute();return a?c.TypeDisplaysApi.lookup(a,t):c.TypeDisplaysApi.Text}}]),a}(d.BaseTypeDisplay);t.default=f},58921:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=a(973128),p=a(365914),f=a(895466);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var m=function(e){(0,l.default)(a,e);var t=h(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.value;if((0,f.isImageHandle)(e))e="Uploaded file";else{var t=(0,p.getTableFileQueryParsed)(e).fileName||e;e=(0,p.getFileNameFromPath)(t)||e}return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"FileTypeDisplay"},d.default.createElement("span",{className:"FileTypeDisplay__text"},e)))}}],[{key:"basePreferredWidth",value:function(){return 24}}]),a}(c.BaseTypeDisplay);t.default=m},993446:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"additionalClasses",value:function(){return"ImageTypeDisplay"}}]),a}(n(a(120224)).default);t.default=d},729390:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(496486)),p=n(a(138138)),f=a(697211),h=a(973128),m=a(803444),v=a(365914),y=n(a(618583)),g=a(557310),w=a(166089);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e,t){return!(0,p.default)((0,v.stripEmptyItems)(e),(0,v.stripEmptyItems)(t))},T=function(e){(0,l.default)(a,e);var t=b(a);function a(){var e;return(0,r.default)(this,a),(e=t.apply(this,arguments)).shouldComponentUpdate=function(t,a){return S(t,e.props)||S(a,e.state)},e}return(0,i.default)(a,[{key:"isBlock",value:function(){return!1}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.value,i=n.attribute,l=n.appModel,s=n.dataContext,c=n.showListInline,p=n.allowedViewTypes,h=n.sidewaysScroll,w=void 0===h||h,b=i.listElementAttribute();if("Ref"===b.type()&&null!=r){var S=i.valueFromWireFormat(r),T=b.referencedTableName(),C=null,R="";if(c&&null!=s){var E;R="ListTypeDisplay--ref-table";var k=i.refListFilterDefaults(s);k||(E=i.refListFilter(s));var I=l.findTableCollection(T).tableSchema,A=a.chooseInlineViewType({tableSchema:I,tableName:T,allowedViewTypes:p}),D=A.viewState,M=A.viewType,x=A.viewControl;l.inRollout("enableGroupingForInlineTableView")||D&&D.GroupBy&&D.GroupBy.length>1&&(D.GroupBy=D.GroupBy.slice(-1));var N=new Set(["photo","backdrop","large"]),O=null===(e=(0,v.getJSONFromString)(null==D?void 0:D.Layout))||void 0===e?void 0:e.name,_=g.ReactRootUIConfig.isInDesktopExperience()&&"gallery"===M||"card"===M&&N.has(O),B=function(e){return d.default.createElement(d.default.Fragment,null,!_&&d.default.createElement(f.Divider,null),d.default.createElement(m.InlineView,{tableName:T,parentId:t.props.parentId,quickEditMode:t.props.quickEditMode,disableNavigation:t.props.disableNavigation,disableAllActions:t.props.disableAllActions,controlName:x?x.Name:void 0,viewType:M,viewState:D,height:t.props.height,clickOverride:t.props.clickOverride,width:e,onRowOpened:t.props.onRowOpened,maxRows:t.props.maxNestedRows,translucentMode:t.props.translucentMode,filterExpr:E,filterDefaults:k,searchQuery:t.props.searchQuery,sidewaysScroll:w,mapMode:"fixed",interactiveRowIds:t.props.interactiveRowIds,parentViewStateKey:t.viewStateKey}))};C=g.ReactRootUIConfig.isInDesktopExperience()?d.default.createElement(y.default,{allowContentGrowth:!0},B):B(this.props.width)}else C="".concat(i.displayName(s)," (").concat(S.length,")");return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"ListTypeDisplay ListTypeDisplay--ref "+R},d.default.createElement("span",{className:"ListTypeDisplay__text"},C)))}return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"ListTypeDisplay"},d.default.createElement("span",{className:"ListTypeDisplay__text"},this.props.value)))}}],[{key:"basePreferredWidth",value:function(){return 85}},{key:"chooseInlineViewType",value:function(e){var t,a,n=e.tableSchema,r=e.tableName,i=e.allowedViewTypes||["gallery","chart","map","deck","table","card"],o=w.AppGlobals.AppModel.FindControlsForTable(r,["gallery","deck","fastTable"],!0).filter((function(e){return c.default.includes(i,e.Action)})),l=c.default.sortBy(o,(function(e){var t=e.Action?i.indexOf(e.Action):-1;return"ref"!==e.Position?t+=10:"App owner"!==e.CreatedBy&&(t+=5),t})),s=null;return l.length?(s=l[0],t=w.AppGlobals.AppModel.NavStateForView(s,r),a=s.Action):(null==n?void 0:n.isPhotogenic())?(a="gallery",t={}):(a="table",t={}),{viewState:t,viewType:a,viewControl:s}}}]),a}(h.BaseTypeDisplay);t.default=T},937315:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(438456)),p=n(a(530653)),f=n(a(827856)),h=n(a(391036)),m=a(973128),v=a(150198);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var g=["a","b","strong","i","u","em","mark","small","del","ins","sub","sup","p","li","ol","ul","br","hr","blockquote","img","h1","h2","h3","h4","h5","h6","table","tbody","tr","td","th"],w=function(e){(0,l.default)(a,e);var t=y(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"additionalClassNames",value:function(){return"LongTextTypeDisplay"}},{key:"render",value:function(){var e,t=this.props,n=t.value,r=t.attribute,i=t.viewType,l=null===(e=this.currentUIState)||void 0===e?void 0:e.Root,s=d.default.createElement("div",{className:"TextTypeDisplay"},d.default.createElement("span",{className:"TextTypeDisplay__text"},n));if("detail"!==l&&"detail"!==i)return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,s);switch(r.longTextFormatting()){case v.LongTextFormatting.Markdown:return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"CommonLongTextRichTextDisplay LongTextMarkdownDisplay"},d.default.createElement(c.default,{skipHtml:!0},n)));case v.LongTextFormatting.HTML:return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("span",{className:"CommonLongTextRichTextDisplay LongTextHTMLDisplay"},(0,p.default)(f.default.sanitize((0,h.default)(n,{allowedTags:g,disallowedTagsMode:"escape",allowedSchemes:["http","https"]})))));default:return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,s)}}}],[{key:"basePreferredWidth",value:function(){return 180}},{key:"baseTightWidth",value:function(){return 100}}]),a}(m.BaseTypeDisplay);t.default=w},212286:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"numberPrecision",value:function(){return 0}}],[{key:"basePreferredWidth",value:function(){return 80}}]),a}(n(a(117017)).default);t.default=d},894761:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PercentTypeDisplayDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(496486)),p=n(a(667294)),f=n(a(294184)),h=a(973128);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.PercentTypeDisplayDataTestIds=r,function(e){e.Value="percent-type-display-span"}(r||(t.PercentTypeDisplayDataTestIds=r={}));var v=function(e){(0,s.default)(a,e);var t=m(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.attribute,n=e.value,i=t.normalizePercentValueToString(n),o=!!c.default.get(this,"props.appModel.AppTemplate.Presentation.RightAlignNumeric"),s=(0,f.default)({PercentTypeDisplay:!0,"PercentTypeDisplay--right-align":o});return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,p.default.createElement("div",{className:s},p.default.createElement("span",{className:"PercentTypeDisplay__text","data-testid":r.Value},i)))}}],[{key:"basePreferredWidth",value:function(){return 60}}]),a}(h.BaseTypeDisplay);t.default=v},817902:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var p=function(e){(0,l.default)(a,e);var t=c(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"PhoneTypeDisplay"},d.default.createElement("div",{className:"PhoneTypeDisplay__number"},d.default.createElement("span",{className:"PhoneTypeDisplay__value"},this.props.value))))}}],[{key:"basePreferredWidth",value:function(){return 125}},{key:"baseTightWidth",value:function(){return 105}}]),a}(a(973128).BaseTypeDisplay);t.default=p},799110:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=a(973128),p=n(a(294184)),f=a(557310);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var m=function(e){(0,l.default)(a,e);var t=h(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"fillPercent",value:function(){var e=0;switch(this.props.value&&this.props.value.toLowerCase()){case"empty":e=0;break;case"quarter":case"one quarter":e=.25;break;case"half":e=.5;break;case"three quarter":case"three quarters":e=.75;break;case"full":e=1}return e}},{key:"render",value:function(){var e,t=null===(e=this.currentUIState)||void 0===e?void 0:e.Root,n={},r={},i=this.formattingSettings;i&&(n={fill:i.textColor},r={fill:i.highlightColor});var l=50,s=this.fillPercent(),c="M ".concat(l," ").concat(l),h="L ".concat(l," 0"),m="A ".concat(l," ").concat(l," 0 ");return 0===s?m=null:s<=.25?m+="0 1 ".concat(100," ").concat(l):s<=.5?m+="0 1 ".concat(l," ").concat(100):s<=.75?m+="1 1 0 ".concat(l):m=null,(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"ProgressTypeDisplay",value:this.fillPercent()},d.default.createElement("svg",{className:(0,p.default)("ProgressTypeDisplay__canvas",{"ProgressTypeDisplay__canvas-deck-view":"deck"===t,"ProgressTypeDisplay__canvas-react-root":f.ReactRootUIConfig.isReactRoot()}),viewBox:"0 0 100 100",alt:this.props.value},d.default.createElement("circle",{className:s<=.75?"ProgressTypeDisplay__unfilled":"ProgressTypeDisplay__filled",style:n,cx:l,cy:l,r:l}),m?d.default.createElement("path",{className:"ProgressTypeDisplay__filled",style:r,d:"".concat(c," ").concat(h," ").concat(m," Z")}):"")))}}],[{key:"basePreferredWidth",value:function(){return 20}}]),a}(c.BaseTypeDisplay);t.default=m},670759:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.getPseudoTypeDisplayProperties=t.PseudoTypeDisplayTextLabel=t.PseudoTypeDisplayImageLabel=t.PseudoTypeDisplayIcon=t.PseudoTypeDisplay=void 0;var r=n(a(627424)),i=n(a(238416)),o=a(697211),l=n(a(294184)),s=a(700386),u=n(a(667294)),d=n(a(173861)),c=n(a(895466));t.getPseudoTypeDisplayProperties=function(e,t,a,n,r,i,o){var l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],s=null==t?void 0:t.lookupTableRow(n.keyValue,i),u=null==s?void 0:s.copy();u&&(u.values[a.name()]=e);var c=(null==u?void 0:u.getColumnFormatting(a.name()))||{icon:[]},p=d.default.cssStylesForText(c);l&&(p.fontSize=void 0);var f=d.default.styleClassesForText(c),h={style:p,className:f},m={};c.highlightColor&&(m.color=c.highlightColor);var v=[];c.icon&&(v=Array.isArray(c.icon)?c.icon:[c.icon]);var y=a.getImageLabel(e,i),g=o,w=a.localizeWireValue(e,{transaction:i,noRefKeyFallback:g});return{iconsArray:v,iconStyles:m,imageLabel:y,textLabel:w,formatRules:h}};var p=(0,o.makeStyles)((function(e){return{iconFormatRulesContainer:{display:"inline-flex",width:"auto",justifySelf:"center",alignSelf:"center",paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5)},iconFormatRules:{paddingLeft:e.spacing(.375),paddingRight:e.spacing(.375),display:"inline-flex",alignItems:"center","&:first-child":{paddingLeft:0},"&:last-child":{paddingRight:e.spacing(.75)}}}})),f=function(e){var t=e.iconsArray,a=e.iconStyles,n=p();return u.default.createElement("span",{className:n.iconFormatRulesContainer},t.map((function(e){return u.default.createElement("i",{key:e,className:(0,l.default)(n.iconFormatRules,"GenericActionButton__icon fa ".concat(e)),style:a})})))};t.PseudoTypeDisplayIcon=f;var h=(0,o.makeStyles)((function(e){return{avatarImageContainer:{display:"flex",justifyContent:"start",alignItems:"center",paddingRight:"2px"},squareImage:{width:"auto",height:"auto",maxWidth:"26px",maxHeight:"26px"},circularImage:{width:"26px",height:"26px !important"},leftMargin:{marginLeft:e.spacing(1)},rightMargin:{marginRight:e.spacing(1)},dropdownAvatarMarginAdjustment:{"& img":{left:"0 !important"}}}})),m=function(e){var t,a=e.imageLabel,n=e.leftMargin,r=e.rightMargin,s=e.isTableQuickEdit,d=h(),p=c.default.from(a).getUrlForImgSrc();if(!a||!p)return u.default.createElement(u.default.Fragment,null);var f=e.variant||"square";return u.default.createElement("div",{className:d.avatarImageContainer},u.default.createElement(o.Avatar,{src:p,variant:f,className:(0,l.default)((t={},(0,i.default)(t,d.squareImage,"square"===f),(0,i.default)(t,d.circularImage,"circle"===f),(0,i.default)(t,d.rightMargin,r),(0,i.default)(t,d.leftMargin,n),(0,i.default)(t,d.dropdownAvatarMarginAdjustment,s),t))}))};t.PseudoTypeDisplayImageLabel=m;var v=(0,o.makeStyles)((function(){return{pseudoTypeDisplayTextLabelContainer:{display:"flex",alignItems:"center",minWidth:"0"},pseudoTypeDisplayTextLabel:{height:"auto !important",paddingRight:"2px"},ellipsisOverflow:{textOverflow:"ellipsis",overflow:"hidden",width:"inherit",whiteSpace:"initial",lineHeight:"1.5em",maxHeight:"3em"},webkitOverflow:{"-webkit-box-orient":"vertical",wordBreak:"break-all",display:"-webkit-box"}}})),y=function(e){var t=e.formatRules,a=e.textLabel,n=v(),i=u.default.useRef(null),o=u.default.useState(!1),d=(0,r.default)(o,2),c=d[0],p=d[1];return u.default.useLayoutEffect((function(){var e,t=i.current;if(t&&t.parentElement){var a=t.getBoundingClientRect(),n=a.width,r=a.height,o=null===(e=t.parentElement)||void 0===e?void 0:e.scrollWidth,l=t.scrollHeight;p(n>=o+.25||l>r+.5)}}),[a,c]),u.default.createElement(s.ASTooltip,{title:c?a:"",placement:"bottom",arrow:!0,enterDelay:1e3,enterNextDelay:1e3,leaveDelay:250},u.default.createElement("div",Object.assign({},t,{className:(0,l.default)(null==t?void 0:t.className,n.pseudoTypeDisplayTextLabelContainer,"DesktopDropdownChipText")}),u.default.createElement("span",{ref:i,className:(0,l.default)(n.pseudoTypeDisplayTextLabel,n.ellipsisOverflow,n.webkitOverflow),style:{"-webkit-line-clamp":e.overflowLineCount||"1"}},a)))};t.PseudoTypeDisplayTextLabel=y;var g=(0,o.makeStyles)((function(e){return{renderDisplay:{display:"flex",alignItems:"center",paddingLeft:e.spacing(.5),paddingRight:e.spacing(2)}}}));t.PseudoTypeDisplay=function(e){var t=e.iconsArray,a=e.iconStyles,n=e.overflowLineCount,r=e.formatRules,i=e.textLabel,o=e.imageLabelProps,l=g();return u.default.createElement(u.default.Fragment,null,o&&u.default.createElement(m,Object.assign({},o)),u.default.createElement("div",{className:l.renderDisplay},u.default.createElement(f,{iconsArray:t,iconStyles:a}),u.default.createElement(y,{formatRules:r,textLabel:i||"",overflowLineCount:n})))}},366231:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=a(714611),c=a(803583),p=n(a(496486)),f=n(a(667294)),h=a(629503),m=n(a(571524)),v=a(557310),y=n(a(365914)),g=n(a(962553)),w=n(a(120224));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,l.default)(a,e);var t=b(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"getRefTableName",value:function(){return this.props.attribute.auxData().ReferencedTableName}},{key:"refTable",value:function(){return g.default.findByName(this.getRefTableName(),this.props.appModel)}},{key:"displayMode",value:function(){return this.props.displayMode||"flex"}},{key:"renderBrokenMode",value:function(){var e=m.default.IsEditorIFramePreview()?f.default.createElement("i",{className:"BaseTypeDisplay__system-icon BaseTypeDisplay__system-icon-error icon fa fa-exclamation-triangle"}):null;return f.default.createElement("div",{className:"RefTypeDisplay","data-testonly-row-id":this.props.value},p.default.trim(this.props.value),e)}},{key:"render",value:function(){var e,t,n=this,r=this.refTable(),i=r.table,l=r.tableSchema;if(!i||!l)return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,this.renderBrokenMode());var s=this.props,p=s.dataContext,m=s.value;if(p&&!v.ReactRootUIConfig.isReactRoot()){var g=l.keyAttribute().name();t=p.getTableRow(i,m,{keyAttrName:g})}else t=null===(e=i.lookupTableRow(this.props.value,this.pendingTransaction))||void 0===e?void 0:e.values;for(var b=l.labelAttributes(),S=!0,T=0;T<b.length&&t;T++){var C=t[b[T].name()];if(null!=C&&""!==C){S=!1;break}}if(S&&(b=[l.keyAttribute()]),!t||!b.length)return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,this.renderBrokenMode());var R,E=[],k=this.props.appModel;return b.forEach((function(e,a){var r,o,l=t[e.name()];if(l){var s;if("Ref"===e.type()){var u=k.findTableCollection(e.referencedTableName()).rootTable;u&&u.name()===n.props.table.rootName()&&(s=!0)}var p=s?c.TypeDisplaysApi.Text:c.TypeDisplaysApi.lookup(e,l);n.props.shouldNotRenderImagesForRefTypeDisplay&&p.prototype instanceof w.default||E.push(f.default.createElement(p,{attribute:e,value:l,table:i,className:e.isImageType()?"RefTypeDisplay__ImageLabel":"RefTypeDisplay__TextLabel",appModel:k,rowId:n.props.value,inlineModeBlockWidth:null!==(r=n.props.inlineModeBlockWidth)&&void 0!==r?r:n.props.height,inlineModeBlockHeight:null!==(o=n.props.inlineModeBlockHeight)&&void 0!==o?o:n.props.height,paddingRight:a<b.length-1?d.columnPadding:0,allowTaps:!1,verticallyCenterTextInTextTypeDisplay:n.props.verticallyCenterTextInTextTypeDisplay,key:e.name(),displayMode:"inline-flex",height:n.props.height}))}})),h.Common.RunningInTestFramework&&(R=y.default.removeNewlines(this.props.value)),(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,f.default.createElement("div",{className:"RefTypeDisplay","data-testonly-row-id":R},E))}}]),a}(a(973128).BaseTypeDisplay);t.default=S},839999:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(918698)),i=n(a(856690)),o=n(a(689728)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(496486)),p=n(a(294184)),f=a(973128),h=n(a(150198)),m=n(a(571524)),v=a(557310),y=a(629503);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var w=function(e){(0,l.default)(a,e);var t=g(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).onImageMount=function(e){e&&(m.default.IsIOSBrowser()||m.default.IsSafariBrowser())&&$(e).on("load",(function(){$("body").hide().show(0)}))},n}return(0,o.default)(a,[{key:"renderPageHeader",value:function(){var e=this.props,t=e.attribute,a=e.dataContext,n=e.suppressShowTypeStyles,r=void 0!==n&&n,i=this.props.showContent;null!=i&&""!==i||(i=t.displayNameField(a)||t.description(a)||"");var o,l=(0,p.default)("FormPageHeader","control-group",this.props.entryId,{DesktopDetailView:v.ReactRootUIConfig.isInDesktopExperience(),SuppressShowTypeStyles:r});return null!=i&&""!==i||(o={display:"none"}),d.default.createElement("div",{className:l,style:o,ref:"domNode",key:100,"data-testid":"form-page-header"},d.default.createElement("span",{className:"ShowContent"},i))}},{key:"renderSectionHeader",value:function(){var e=this.props,t=e.attribute,a=e.dataContext,n=e.showContent,r=(0,p.default)("ShowContent",{DesktopDetailView:v.ReactRootUIConfig.isInDesktopExperience()}),i=null!=n?n:t.displayNameField(a)||t.verboseName(a)||"";return d.default.createElement("span",{className:r,key:100},i)}},{key:"renderShowText",value:function(){var e=this.props,t=e.attribute,a=e.dataContext,n=e.showContent,r=null!=n?n:t.displayNameField(a)||t.verboseName(a)||"";return d.default.createElement("span",{className:"ShowContent",key:100},r)}},{key:"renderShowUrl",value:function(){var e=this.props,t=e.attribute,a=e.dataContext,n=e.showContent,i=h.default.urlValueFromWireFormat(n||""),o=i.url,l=t.displayNameField(a)||t.description(a)||i.linkText;return null!=n&&"object"===(0,r.default)(n)&&(o=n.url||"",l=n.linkText),d.default.createElement("a",{className:"ShowContent",target:"_blank",rel:"noopener noreferrer",href:o,key:100},l)}},{key:"renderShowImage",value:function(){var e=this.props.showContent||"",t=e;e.match(/^https:\/\/(?:www\.)?googledrive\.com\/.+\/.+$/)||e.match(/.+\.svg$/)||(e=y.Common.FlexImageUrl(this.props.appModel.ResolveFile(e,this.props.table.name())));var a=d.default.createElement("img",{className:"ShowContent",src:e,key:100,ref:this.onImageMount});return"https://www.appsheet.com/content/img/forms-addon/image_placeholder.png"===t&&(a=d.default.createElement("a",{href:"https://www.appsheet.com/help/forms",target:"_blank",rel:"noopener noreferrer",key:100},a)),a}},{key:"renderShowVideo",value:function(){var e=this.props.showContent||"";return"https://www.appsheet.com/content/img/forms-addon/video_placeholder.png"===e?d.default.createElement("a",{href:"https://www.appsheet.com/help/forms",target:"_blank",rel:"noopener noreferrer",key:100},d.default.createElement("img",{className:"ShowContent",src:y.Common.FlexImageUrl(e),ref:this.onImageMount})):e.indexOf("youtu")>=0?d.default.createElement("iframe",{className:"ShowContent ShowContentVideo",src:e,allowFullScreen:!0,frameBorder:"0",key:100,"data-testid":"show-content-iframe"}):d.default.createElement("video",{className:"ShowContent ShowContentVideo",src:e,controls:!0,frameBorder:"0",key:100,"data-testid":"show-content-video"})}},{key:"render",value:function(){var e=this.props,t=e.attribute,a=e.entryId,n=e.suppressShowTypeStyles,r=[];if(t.isPageHeader())return this.renderPageHeader();var i,o=["FormEntry","control-group","ShowTypeDisplay",a],l=this.renderFormattingRules(),s=l.formattingRuleClasses,u=l.formattingRuleStyles,p=l.iconElements;return""===s&&c.default.isEmpty(u)&&0===p.length||(o=o.concat(["CustomFormatting",s]),i=u),n&&o.push("SuppressShowTypeStyles"),t.isSectionHeader()?((r=p).push(this.renderSectionHeader()),o.push("SectionHeader")):t.isShowText()?((r=p).push(this.renderShowText()),o.push("ShowText")):t.isShowUrl()?((r=p).push(this.renderShowUrl()),o.push("ShowUrl")):t.isShowImage()?(r.push(this.renderShowImage()),o.push("ShowImage")):t.isShowVideo()&&(r.push(this.renderShowVideo()),o.push("ShowVideo")),d.default.createElement("div",{className:o.join(" "),ref:"domNode","data-testid":"show-type-display"},d.default.createElement("div",{className:"ShowTypeContent FormEntryContent",style:i},r))}}],[{key:"basePreferredWidth",value:function(){return 50}}]),a}(f.BaseTypeDisplay);t.default=w},967220:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"addSolidBackgroundColor",value:function(){return!0}},{key:"additionalClasses",value:function(){return"SignatureTypeDisplay"}}]),a}(n(a(120224)).default);t.default=d},683378:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TextTypeDisplayDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(294184)),p=n(a(667294)),f=a(973128);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.TextTypeDisplayDataTestIds=r,function(e){e.Value="text-type-display-span"}(r||(t.TextTypeDisplayDataTestIds=r={}));var m=function(e){(0,s.default)(a,e);var t=h(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,p.default.createElement("div",{className:"TextTypeDisplay"},p.default.createElement("span",{className:(0,c.default)("TextTypeDisplay__text",{"TextTypeDisplay__vertically-center-text":this.props.verticallyCenterTextInTextTypeDisplay}),"data-testid":r.Value,title:this.props.showTooltip?this.props.value:null},this.props.value)))}}],[{key:"basePreferredWidth",value:function(){return 180}},{key:"baseTightWidth",value:function(){return 100}}]),a}(f.BaseTypeDisplay);t.default=m},772089:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"additionalClasses",value:function(){return"ThumbnailTypeDisplay"}}]),a}(n(a(120224)).default);t.default=d},257632:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TimeTypeDisplayDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=a(973128),f=n(a(365914));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.TimeTypeDisplayDataTestIds=r,function(e){e.Value="time-type-display-span"}(r||(t.TimeTypeDisplayDataTestIds=r={}));var m=function(e){(0,s.default)(a,e);var t=h(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props.attribute.ignoreSeconds(),t=this.props.value?f.default.toLocaleTimeString(this.props.value,e):"";return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"TimeTypeDisplay"},c.default.createElement("span",{"data-testid":r.Value},t)))}}],[{key:"basePreferredWidth",value:function(){return 85}}]),a}(p.BaseTypeDisplay);t.default=m},885139:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(294184)),p=a(973128),f=n(a(150198));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var m=function(e){(0,l.default)(a,e);var t=h(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.attribute.valueFromWireFormat(this.props.value),t=e.linkText,n=f.default.normalizeUrlValue(e.url),r=!!t&&t!==n;return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"UrlTypeDisplay"},d.default.createElement("span",{className:(0,c.default)("UrlTypeDisplay__text",{"UrlTypeDisplay__ellipsis-text":!r})},t||n)))}}],[{key:"basePreferredWidth",value:function(){return 180}},{key:"baseTightWidth",value:function(){return 100}}]),a}(p.BaseTypeDisplay);t.default=m},223258:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=a(973128),p=n(a(112963)),f=a(895466);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var m=function(e){(0,l.default)(a,e);var t=h(a);function a(){return(0,r.default)(this,a),t.call(this)}return(0,i.default)(a,[{key:"handleSelect",value:function(){}},{key:"renderFormattingRules",value:function(){return{formattingRuleStyles:{},iconElements:[]}}},{key:"render",value:function(){var e=this.props.value,t=null;if(e)if((0,f.isImageHandle)(e)){var n="function"==typeof e.value?e.value():e.value;t=d.default.createElement("img",{src:"/jeenee_url?path=".concat(n),style:{maxWidth:"100%"}})}else t=e.indexOf("youtu")>=0?d.default.createElement("iframe",{src:e,allowFullScreen:!0,frameBorder:"0"}):d.default.createElement("video",{src:e+"#t=0.1",controls:!0,frameBorder:"0",preload:"metadata",style:{maxWidth:"100%"}});else t=d.default.createElement("div",null," ");return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement(p.default,{enabled:!0,navigationDelay:!0,onTap:this.handleSelect.bind(this),className:"VideoTypeDisplay"},t))}}],[{key:"basePreferredWidth",value:function(){return 50}},{key:"isImage",value:function(){return!0}}]),a}(c.BaseTypeDisplay);t.default=m},803583:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDisplaysApi=void 0;var r=n(a(150198)),i=n(a(593186)),o=n(a(683378)),l=n(a(937315)),s=n(a(753611)),u=n(a(420210)),d=n(a(212286)),c=n(a(818576)),p=n(a(910880)),f=n(a(894761)),h=n(a(117017)),m=n(a(726217)),v=n(a(885139)),y=n(a(58921)),g=n(a(993446)),w=n(a(3030)),b=n(a(967220)),S=n(a(772089)),T=n(a(752255)),C=n(a(257632)),R=n(a(502956)),E=n(a(380053)),k=n(a(817902)),I=n(a(714738)),A=n(a(799110)),D=n(a(118438)),M=n(a(729390)),x=n(a(366231)),N=n(a(537430)),O=n(a(839999)),_=n(a(223258)),B={Text:o.default,Enum:s.default,EnumList:u.default,LongText:l.default,MultiColumnKey:o.default,Name:o.default,ChangeCounter:d.default,Number:d.default,PostalCode:d.default,Address:c.default,XY:c.default,LatLong:c.default,ChangeLocation:c.default,DateTime:p.default,ChangeTimestamp:p.default,Percent:f.default,Decimal:h.default,Price:m.default,Url:v.default,File:y.default,Image:g.default,Drawing:w.default,Signature:b.default,Thumbnail:S.default,Video:_.default,Date:T.default,Time:C.default,Duration:R.default,Email:E.default,Phone:k.default,Color:I.default,Progress:A.default,App:D.default,List:M.default,Ref:x.default,"Yes/No":N.default,Show:O.default},P=Object.assign(Object.assign({},B),{lookup:function(e,t){if(t===r.default.SHEET_FORMULA_NEEDS_RECOMPUTE)return B.Text;if(null==e)return B.Text;var a=B[e.type()];return a||i.default.ReportError({errorMessage:"No TypeDisplay found for type",type:e.type()}),a||B.Text}});t.TypeDisplaysApi=P},617166:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=n(a(973935)),f=n(a(496486)),h=a(847494),m=n(a(150198)),v=n(a(315847)),y=n(a(638157)),g=a(166089),w=a(557310),b=a(44617),S=n(a(593186));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var C=function(e){(0,s.default)(a,e);var t=T(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state=n.initialState(),n.timer=null,n.onValue=n.onValue.bind((0,o.default)(n)),n.onChange=n.onChange.bind((0,o.default)(n)),n.onFocus=n.onFocus.bind((0,o.default)(n)),n.onBlur=n.onBlur.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"initialState",value:function(){var e="",t="",a=this.props,n=a.dataContext&&a.dataContext.rowData;if(n){var r=a.attribute.name(),i="_geo_"+r;e=n[r],t=n[i]}return{suggested:[],initialValue:e,initialGeo:t,focused:!1,resultCache:{},writeCache:{}}}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.geocodeAbortController)||void 0===e||e.abort(),this.geocodeAbortController=void 0}},{key:"focus",value:function(){this.renderReadOnly()||this.refs.inputWithAutocomplete.focus()}},{key:"geocode",value:function(e){var t=this;if(!v.default.disabled&&e===g.AppGlobals.AppState.CurrentUIState){var a=this.value();if(null!=a&&a.length>5&&a!==m.default.SHEET_FORMULA_NEEDS_RECOMPUTE){var n=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e===g.AppGlobals.AppState.CurrentUIState){var r=n.slice(0,5),i={suggested:r};if(n.length){var o={};o[a]=r,i.resultCache=f.default.extend(o,t.state.resultCache)}t.setState(i,(function(){t.renderReadOnly()||t.state.focused||!n.length||t.onValue(n[0].formattedAddress)}))}};if(a in this.state.resultCache)n(this.state.resultCache[a]);else{var r;if(this.props.table){var i=this.props.appModel.findTableCollection(this.props.table.name()).tableDefinition;i&&(r=i.LocaleName)}var o=v.default.region(r);console.log("geocoding",a),v.default.geocodeAddress(a,{region:o,interactive:!0}).then((function(e){var t=e.results;return n(t)})).catch(console.warn)}}}}},{key:"abortableGeocode",value:function(){var e=this;this.geocodeAbortController&&(this.geocodeAbortController.abort(),this.geocodeAbortController=void 0);var t=this.value();if(!(v.default.disabled||null==t||t.length<=5||t===m.default.SHEET_FORMULA_NEEDS_RECOMPUTE)){var a=null;if(t in this.state.resultCache)a=Promise.resolve(this.state.resultCache[t]);else{var n=new AbortController;this.geocodeAbortController=n,a=new Promise((function(e){return setTimeout(e,800)})).then((function(){if(void 0===n||n.signal.aborted)throw{aborted:!0};var a;if(e.props.table){var r=e.props.appModel.findTableCollection(e.props.table.name()).tableDefinition;r&&(a=r.LocaleName)}var i=v.default.region(a);return console.log("geocoding",t),v.default.geocodeAddress(t,{region:i,interactive:!0})})).then((function(e){if(void 0===n||n.signal.aborted)throw{aborted:!0};if(e.results)return e.results.slice(0,5);if("ZERO_RESULTS"===e.status)return[];throw e}))}a.then((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={suggested:a};if(a.length){var r={};r[t]=a,n.resultCache=f.default.extend(r,e.state.resultCache)}e.setState(n,(function(){e.renderReadOnly()||e.state.focused||!a.length||e.onValue(a[0].formattedAddress)}))})).catch((function(e){(null==e?void 0:e.aborted)||S.default.ReportErrorOnce({errorMessage:"Error geocoding in AddressTypeInput",result:e})}))}}},{key:"onChange",value:function(e){this.setState({transientValue:e.target.value})}},{key:"onFocus",value:function(e){(0,l.default)((0,d.default)(a.prototype),"onFocus",this).call(this,e),this.setState({focused:!0})}},{key:"onBlur",value:function(e){(0,l.default)((0,d.default)(a.prototype),"onChange",this).call(this,e.target.value,{fullValue:!0}),this.setState({focused:!1,transientValue:null})}},{key:"onValue",value:function(e){return(0,l.default)((0,d.default)(a.prototype),"onChange",this).call(this,e,{fullValue:!0})}},{key:"componentDidUpdate",value:function(e,t){if(this.state.transientValue){if(this.state.transientValue===t.transientValue)return}else if(t.transientValue){if(t.transientValue===this.props.value)return}else if(this.props.value===e.value)return;if(clearTimeout(this.timer),this.props.attribute.geocodingEnabled()){var a=this.value();if(a&&a.trim()){var n,r,i,o,l=this.state.suggested.filter((function(e){return e.formattedAddress===a})).pop();if(l){var s=l.latitude,u=l.longitude,d=s+", "+u,c=l.formattedAddress;n=f.default.get(this,"props.dataContext.rowData"),o="_longitude"+(r=this.props.attribute.name()),i="_geo_"+r,n["_latitude"+r]=s,n[o]=u,n[i]=d;var h=f.default.extend({},this.state.writeCache);return c in h||g.AppGlobals.AppModel.WriteGeocodeResults([{Address:c,LatLong:d}],(function(){h[c]=!0})),!this.renderReadOnly()&&this.state.focused||$(p.default.findDOMNode(this.refs.inputWithAutocomplete)).find("input").trigger("blur"),void this.setState({suggested:[],writeCache:h,initialGeo:d,initialValue:a})}if(a===this.state.initialValue&&""!==this.state.initialGeo)return;if(this.props.refreshId!==e.refreshId){var m="",v="";if((n=f.default.get(this,"props.dataContext.rowData"))&&(i="_geo_"+(r=this.props.attribute.name()),m=n[r],v=n[i]),m===a&&(this.setState({initialValue:m,initialGeo:v}),""!==v))return}w.ReactRootUIConfig.isReactRoot()&&b.dynamicRollouts.includeByOwnerId("UseNewAddressInputLogic")?this.abortableGeocode():this.timer=setTimeout(this.geocode.bind(this,this.currentUIState),800)}else this.state.suggested.length&&this.setState({suggested:[]})}}},{key:"render",value:function(){var e=this.value(),t=this.state.suggested.map((function(e){return e.formattedAddress}));return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"AddressTypeInput"},c.default.createElement(y.default,{type:"text",ref:"inputWithAutocomplete",noFilter:!0,value:e,values:t,readOnly:this.renderReadOnly(),onChange:this.onChange,onValue:this.onValue,onFocus:this.onFocus,onBlur:this.onBlur})))}}]),a}(h.BaseTypeInput);t.default=C},775381:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"renderReadOnly",value:function(){return!0}}]),a}(n(a(872865)).default);t.default=d},7975:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=n(a(112963)),f=a(847494),h=n(a(299119)),m=n(a(314247)),v=n(a(365914));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var g=function(e){(0,s.default)(a,e);var t=y(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).mapPane=null,n.state=n.initialState(e),n.onMapMount=function(e){e&&(n.mapPane=e,setTimeout((function(){n.mapPane===e&&n.setState(n.state)}),500))},n.onComponentMount=function(e){n._component=e,null==e&&(n.mapPane=null)},n.onOverlayTap=function(){n.defaultValue()&&n.setValue(n.defaultValue(),null,{fullValue:!0})},n.onClearTap=function(){document.activeElement.blur(),n.setValue("",null,{fullValue:!0})},n.onExpand=function(){setTimeout((function(){n.refs.modal.setAnchorElement(n._component),n.closeTimeout=setTimeout((function(){n.closeTimeout=null}),500),n.setState({modalOpen:!0})}),p.default.ACTIVE_DELAY+10)},n.onModalClose=function(){null==n.closeTimeout&&n.setState({modalOpen:!1,centerLat:null,centerLng:null})},n.onChange=n.onChange.bind((0,o.default)(n)),n.onBlur=n.onBlur.bind((0,o.default)(n)),n.onMapZoomChanged=n.onMapZoomChanged.bind((0,o.default)(n)),n.onMapDragEnd=n.onMapDragEnd.bind((0,o.default)(n)),n.onMapTypeChanged=n.onMapTypeChanged.bind((0,o.default)(n)),n.onModalClose=n.onModalClose.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"initialState",value:function(e){return this.highAccuracy=!0,{zoom:17,accuracy:null,available:!0,pending:!1}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.refreshId&&e.refreshId&&this.props.refreshId!==e.refreshId?(this.cancelPending({abort:!0}),this.setState(this.initialState(e))):this.value()&&!e.value&&this.setState(this.initialState(e))}},{key:"shouldComponentUpdate",value:function(e,t){if(this.props.value!==e.value||this.state.transientValue!==t.transientValue)return!0;if(v.default.compareObjs(this.state,t).length)return!0;var a=v.default.compareObjs(this.props,e);return 1!==a.length||"focused"!==a[0]}},{key:"cancelPending",value:function(e){this.state.pending&&("function"==typeof this._stopTrying&&(this._stopTrying(e),delete this._stopTrying),this.setState({pending:!1}))}},{key:"onChange",value:function(e){this.cancelPending({abort:!0}),this.setState({transientValue:e.target.value})}},{key:"onBlur",value:function(e){this.cancelPending(),this.setValue(e.target.value,this.state.accuracy,{fullValue:!0}),this.setState({transientValue:null})}},{key:"componentWillUnmount",value:function(){this.cancelPending({abort:!0})}},{key:"onPinDragStart",value:function(){}},{key:"onPinDragEnd",value:function(){}},{key:"onMapTypeChanged",value:function(e,t){var a=t.mapTypeId;this.state.mapType!==a&&this.setState({mapType:a})}},{key:"mapEventHandlers",value:function(){return{zoom_changed:this.onMapZoomChanged,dragend:this.onMapDragEnd,maptypeid_changed:this.onMapTypeChanged}}},{key:"onMapDragEnd",value:function(e,t){this.setState({zoom:t.getZoom(),centerLat:m.default.getCenterLat(t),centerLng:m.default.getCenterLng(t)})}},{key:"onMapZoomChanged",value:function(e,t){var a=this;clearTimeout(this._zoomTimer);var n=this.mapPane;this._zoomTimer=setTimeout((function(){if(n===a.mapPane){var e={zoom:t.getZoom()};a.state.modalOpen&&(e.centerLat=m.default.getCenterLat(t),e.centerLng=m.default.getCenterLng(t)),a.setState(e)}}),1e3)}},{key:"customMapType",value:function(){}},{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.setState({accuracy:t}),(0,l.default)((0,d.default)(a.prototype),"onChange",this).call(this,e,n)}},{key:"renderCornerButton",value:function(){return null}},{key:"renderMap",value:function(){return null}},{key:"renderModal",value:function(e){var t;return e&&this.state.modalOpen&&(t=c.default.createElement("section",{className:"BaseCoordinateTypeInputModal"},c.default.createElement("div",{className:"BaseCoordinateTypeInputModal__title"},this.props.attribute.displayName(this.props.dataContext)),c.default.createElement("div",{className:"BaseCoordinateTypeInputModal__contents",ref:"modalList",style:{height:"calc(100% - 50px - 54px)"}},e),c.default.createElement("div",{className:"BaseCoordinateTypeInputModal__bottom"},c.default.createElement(p.default,{className:"BaseCoordinateTypeInputModal__finish-button",navigationDelay:!0,onTap:this.onModalClose},this.props.appModel?this.props.appModel.MapActionName("Done"):"Done")))),c.default.createElement(h.default,{isOpen:!!t,onRequestClose:this.onModalClose,contentLabel:"map",ref:"modal"},t)}},{key:"extraClassNames",value:function(){return""}},{key:"defaultValue",value:function(){return""}},{key:"inlineMapOptions",value:function(){return{draggable:!1,scrollwheel:!1,disableDoubleClickZoom:!0,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,gestureHandling:"greedy"}}},{key:"modalMapOptions",value:function(){return{disableDefaultUI:!1,draggable:!0,scrollwheel:!0,disableDoubleClickZoom:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,gestureHandling:"greedy"}}},{key:"renderExpandButton",value:function(){return null}},{key:"render",value:function(){var e,t=String(this.value()||""),n="BaseCoordinateTypeInput BaseCoordinateBase "+this.extraClassNames();this.renderReadOnly()||(e=this.renderCornerButton());var r,i,o,s={paddingRight:this.renderReadOnly()?void 0:this.state.accuracy?"5em":"2.5em",color:this.state.pending?"#aaa":void 0},u=null,f=this.renderMap();f&&(this.state.modalOpen?(r=c.default.createElement("div",{className:"BaseCoordinateTypeInput__map-parent"}),u=f):(t&&this.props.attribute.validateValue(t)||(i=c.default.createElement(p.default,{className:"BaseCoordinateTypeInput__overlay",onTap:this.onOverlayTap},c.default.createElement("span",{className:"BaseCoordinateTypeInput__overlay-icon fa fa-map-marker"}))),i||(o=this.renderExpandButton()),r=c.default.createElement("div",{className:"BaseCoordinateTypeInput__map-parent"},f,o,i)));var h=this.renderModal(u);return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:n,ref:this.onComponentMount},c.default.createElement("input",{"aria-label":this.props.label,ref:"input",type:"text",style:s,className:"input-block-level BaseCoordinateInput",autoCorrect:"off",value:t,disabled:this.renderReadOnly(),onBlur:this.onBlur,onChange:this.onChange}),e,r,h))}}]),a}(f.BaseTypeInput);t.default=g},901816:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(496486)),p=n(a(667294)),f=n(a(973935)),h=a(847494),m=a(44617),v=a(557310),y=a(166089),g=n(a(571524)),w=n(a(593186)),b=n(a(150198)),S=n(a(962553)),T=n(a(605161)),C=n(a(944762)),R=n(a(388884));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var k=function(e){(0,s.default)(a,e);var t=E(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state=n.initialState(),n.onChange=n.onChange.bind((0,o.default)(n)),n.onScanResult=n.onScanResult.bind((0,o.default)(n)),n.addNewRef=n.addNewRef.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"initialState",value:function(){return{forceShowOther:!1,defaultedShowingOther:!1}}},{key:"onChange",value:function(e){var t,a="function"==typeof e.join?e.join(this.delimiter()):e||"";this.allowMultiSelect()&&this.useButtonSelect()&&(t={noAutoAdvance:!0,forceUpdate:!0}),this.props.onValueChange(a,t)}},{key:"onScanResult",value:function(e){var t=this,a=this.props,n=a.attribute,r=a.validOptions,i=a.appModel;if(this.allowMultiSelect())return w.default.ReportError({errorMessage:"Scanned input not supported with multiselect"});var o=this.options(),l=this.enumElementAttribute(),s=function(e){return alert(t.props.appModel.MapActionName(e))},u=o.indexOf(e);if(u>=0)return this.onChange(e);if(n&&n.allowOtherValues())return null==r||r.indexOf(e)>=0?this.onChange(e):s("The scan result didn't match any known entries.");if("Ref"===l.type()){var d=l.referencedTableName(),c=S.default.findByName(d,i).table;if(c)if((u=o.map((function(e){return c.rowLabelValue(e)})).indexOf(e))>=0)return this.onChange(o[u])}return s("The scan result didn't match any known entries.")}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.valueReadOnly()&&!$("#LaunchScreen").is(":visible")){var t=this.showScannerButton(),a=this.showNfcScannerButton();t&&!a&&g.default.InMobileWebView()?e.openCamera&&this.scannerButtonSelected():!t&&a&&g.default.InMobileWebView()?e.openCamera&&this.nfcScannerButtonSelected():e&&e.openListSelect&&this.refs.listSelect&&!this.scanOnly()&&this.refs.listSelect.onTap()}}},{key:"allowMultiSelect",value:function(){return!1}},{key:"allowOtherValues",value:function(e){return(e=e||this.props).attribute.allowOtherValues()}},{key:"autoCompleteOtherValues",value:function(e){return e=e||this.props,!!this.allowOtherValues(e)&&e.attribute.autoCompleteOtherValues()}},{key:"allowedValues",value:function(e){return e||(e=this.props),e.attribute.enumValues()||[]}},{key:"delimiter",value:function(){return b.default.listDelimiter}},{key:"componentDidUpdate",value:function(e,t){var a=this;this.state.forceShowOther&&!t.forceShowOther&&this.state.defaultedShowingOther===t.defaultedShowingOther&&setTimeout((function(){var e=f.default.findDOMNode(a.refs.otherInput);e&&e.focus()}),0)}},{key:"UNSAFE_componentWillMount",value:function(){this.cacheUniqueColumnValues();var e=this.allowedValues();null!=e&&0!==e.length||this.state.defaultedShowingOther||this.setState({forceShowOther:!0,defaultedShowingOther:!0})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.cacheUniqueColumnValues(e)}},{key:"cacheUniqueColumnValues",value:function(e){if(e=e||this.props,this.autoCompleteOtherValues(e)){var t=e.table;if(t){var a=this.allowedValues(e),n=this.props.refreshId+JSON.stringify(a),r=this._uniqueColumnValuesRefreshId!==n;if(!this._uniqueColumnValues||r){var i=a,o=e.attribute.name(),l=t?e.tableSchema.uniqueColumnValues(o,t.rowValues()):[];this._uniqueColumnValues=c.default.uniq(i.concat(l)),this._uniqueColumnValuesRefreshId=n}}}}},{key:"options",value:function(){return this.autoCompleteOtherValues()?this._uniqueColumnValues:this.allowedValues()}},{key:"enumElementAttribute",value:function(){return this.props.attribute.nestedAttribute()||this.props.attribute}},{key:"useButtonSelect",value:function(){if(this.tableMode())return!1;var e=this.props.attribute;if(e.isValidityEnum()&&e.hasAppFormula()&&m.dynamicRollouts.includeByOwnerId("TransactionRecomputeInfluenced"))return!1;var t=this.allowedValues();if(0===t.length)return!1;var a=this.allowMultiSelect(),n=this.showScannerButton()||this.showNfcScannerButton();return this.props.attribute.shouldUseButtonSelect(t,this.allowOtherValues(),a,n)}},{key:"useStackSelect",value:function(){return!this.tableMode()&&this.props.attribute.shouldUseStackSelect()}},{key:"referencedTableName",value:function(){return this.enumElementAttribute().referencedTableName()}},{key:"referencedTable",value:function(){var e=this.referencedTableName(),t=this.props.appModel;if(e&&t)return t.findTableCollection(e).table}},{key:"addNewRef",value:function(){var e,t=this,a=this.referencedTableName();if(null!=a&&""!==a){var n=function(){var e,n=t.props,r=n.table,i=n.tableRow,o=n.rowId,l=t.referencedTable();if(r&&l){var s=t.enumElementAttribute();if(v.ReactRootUIConfig.isReactRoot())t.launchRelatedForm(a,null,null,s,{referencedBy:{refColumnName:s.name(),tableName:r.rootName(),stableId:null!==(e=null==i?void 0:i.stableId)&&void 0!==e?e:o,multiselect:t.allowMultiSelect()}});else if("form"===t.props.viewType)y.AppGlobals.ViewManager.KnownHandlers.form.LaunchNestedForm(a,null,null,t.enumElementAttribute());else(t.props.appState||y.AppGlobals.AppState).PushViewForResult(t,"addNewRef","form",!1,{TableName:a})}};this.refs.listSelect?null===(e=this.refs)||void 0===e||e.listSelect.onFinish(null,n,{noAutoAdvance:!0}):n()}}},{key:"onPushViewResult",value:function(e,t){if("addNewRef"===e){var a=this.props,n=a.attribute,r=a.appModel,i=a.rowId,o=a.table,l=a.useTransactions,s=this.props,u=s.row,d=s.value;if(t.rowId!==d)if(this.tableMode());else{if(!u&&l){var p=null==o?void 0:o.lookupTableRow(i);u=p&&p.copy().rowState}if(u){var f=t.rowId;if("EnumList"===n.type()&&null!=f&&(d=n.valueFromWireFormat(d)||[],c.default.includes(d,f)||d.unshift(f),f=n.valueToWireFormat(d)),!u.updateAndValidate(n,f)){var h={tableName:o.name(),row:u.values(),appName:r.AppTemplate.Name,appId:r.AppTemplate.Id,appVersion:r.AppTemplate.Version,userSettings:r.GetUserSettings()};r.UpdateTableRow(h)}}}}}},{key:"render",value:function(){var e,t=this.allowedValues(),n=this.renderReadOnly(),r=this.useButtonSelect(),i=this.useStackSelect(),o=this.allowMultiSelect(),s=this.options(),u=this.props.value||"",c=this.props,f=c.attribute,h=c.appModel,y=c.dataContext,g=c.table,w=c.width,b=c.height,S=c.viewType,E=c.useTransactions;o?u=u?f.splitEnumListValue(u,s):[]:r&&(u=u?[u]:[]);var k=this.enumElementAttribute();if(r)return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,p.default.createElement("div",{className:"BaseEnumTypeInput"},p.default.createElement(C.default,{readOnly:n,selected:u,listAttribute:f,elementAttribute:k,options:t,multiselect:o,table:g,dataContext:y,appModel:h,width:w,onChange:this.onChange,stack:i})));var I=f.verboseName(y);f.evalTreeLookup("DisplayName")&&y&&(I=f.displayName(y)||I);var A=this.allowOtherValues(),D=!1,M=this.referencedTable();if(M){A=!1;var x=v.ReactRootUIConfig.isReactRoot()&&this.canLaunchRelatedForm(M.name()),N=E&&"form"===S;this.tableMode()||!M.allowsAdd()||N&&!x||(D=this.allowOtherValues())}return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,p.default.createElement("div",{className:"BaseEnumTypeInput"},v.ReactRootUIConfig.isInDesktopExperience()&&m.dynamicRollouts.includeByOwnerId("UseDropdownsOnDesktop")?p.default.createElement(R.default,{allowAdds:A,allowAddsThroughRef:D,addNewRefHandler:D?this.addNewRef:void 0,attribute:k,multiselect:o,options:s,label:I,savedSelection:u,table:g,tableSchema:M&&(null===(e=M)||void 0===e?void 0:e.tableSchema),onChange:this.onChange,readOnly:n,dataContext:y,appModel:h,isTableQuickEdit:this.tableMode(),transaction:this.pendingTransaction}):p.default.createElement(T.default,{typeInput:this,ref:"listSelect",title:I,readOnly:n,selected:u,listAttribute:f,options:s,optionAttribute:k,multiselect:o,allowAdds:A,allowAddRef:D,addNewRefHandler:D?this.addNewRef:void 0,table:g,dataContext:y,appModel:h,width:null,height:b,displayMode:"inline-block",renderInlineButtons:this.renderInlineButtons,getInputStyleWithInlineButtons:this.getInputStyleWithInlineButtons,onChange:this.onChange})))}}]),a}(h.BaseTypeInput);t.default=k},581827:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(856690)),o=n(a(689728)),l=n(a(366115)),s=n(a(441588)),u=n(a(861655)),d=n(a(994993)),c=n(a(73808)),p=n(a(496486)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=C(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294)),h=a(847494),m=n(a(571524)),v=n(a(593186)),y=n(a(895466)),g=n(a(112368)),w=n(a(365914)),b=a(263198),S=a(629503),T=a(646317);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(C=function(e){return e?a:t})(e)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var E=function(e){(0,u.default)(a,e);var t=R(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e))._fileUploadInputRef=(0,f.createRef)(),n.state=n.initialState(n.props),n.onFlattenResult=function(e,t){t&&n.setState({url:t})},n.onFileUploadUtilsMount=function(t){if(t){var a,r=e.attribute,i=e.pendingUploadRequests;if(i&&r&&null!=(a=i[r.name()])){v.default.logToDevConsole("restoring pending upload request with id ",a);var o=n.createUploadRequest(a);n.registerUploadRequest(a,o)}}else n.unregisterUploadRequest(n.state.requestId)},n.onImageMount=n.onImageMount.bind((0,l.default)(n)),n}return(0,o.default)(a,[{key:"preferredWidth",get:function(){}},{key:"fileUploadInput",get:function(){return this._fileUploadInputRef.current}},{key:"shouldUseIOSPlaceholder",value:function(){return m.default.InIOSWebView()&&m.default.InWKWebView()}},{key:"shouldUseIOSCache",value:function(){return m.default.InIOSWebView()&&m.default.InWKWebView()&&p.default.get(window,"AppModel.AppTemplate.Behavior.FullOfflineCaching")}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!this.renderReadOnly()&&e&&e.openCamera&&!this.isFileType()&&this.onPhotoControlClick()}},{key:"initialState",value:function(e){var t=e.attribute,a=e.pendingUploadRequests,n=(0,T.makeGuid)();return a&&t&&(n=a[t.name()]||n),{requestId:n}}},{key:"isFileType",value:function(){return!1}},{key:"UNSAFE_componentWillMount",value:function(){this.updateState(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updateState(e)}},{key:"updateState",value:function(e){var t=e.table?e.table.name():null,a=y.default.from(e.value,t),n={fileName:a.fileName()};this.isFileType()||(n.imageHandle=a,a.nestedHandle()?(n.url=a.cachedFlattened(),n.url||a.flatten(this.onFlattenResult)):n.url=S.Common.FlexImageUrl(a.resolve())),this.state.showIOSPlaceholder&&this.props.value!==e.value&&(n.showIOSPlaceholder=!1),this.setState(n)}},{key:"componentDidUpdate",value:function(){!this.props.value&&this.fileUploadInput&&this.fileUploadInput.value&&$(this.fileUploadInput).val(null)}},{key:"useNativePhotoInterface",value:function(){return!this.isFileType()&&(m.default.InIOSWebView()||m.default.InAndroidWebView()&&!m.default.IsUnsupportedAndroidVersion())}},{key:"useNativeFileInterface",value:function(){return this.isFileType()&&(m.default.InAndroidWebView()&&g.default.IsAndroidAppWithMinVersion(12.3)||m.default.InIOSWebView()&&g.default.IsIOSAppWithMinVersion(10.6))}},{key:"onImageMount",value:function(e){e&&(m.default.IsIOSBrowser()||m.default.IsSafariBrowser())&&$(e).on("load",(function(){$("body").hide().show(0)})),this.img=e}},{key:"createUploadRequest",value:function(e,t){var a=this;return{RequestId:e,preferredWidth:this.preferredWidth,CallbackFn:function(e){t&&e.setFileName(t),a.setImage(e)}}}},{key:"registerUploadRequest",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.cacheForAttribute,r=a.callback,i=void 0===r?w.default.noop:r;this.props.registerUploadRequest?this.props.registerUploadRequest(e,t,{cacheForAttribute:n,callback:i}):(S.Common.registerUploadRequest(e,t),i())}},{key:"unregisterUploadRequest",value:function(e){this.props.unregisterUploadRequest?this.props.unregisterUploadRequest(e,this.props.attribute.name()):S.Common.unregisterUploadRequest(e)}},{key:"startNativeInput",value:function(e){b.JeeneeBrowserAPI.takePhoto(e)}},{key:"onPhotoControlClick",value:function(){var e=this;if(!this.blockClick)if(this.cooldown(),this.unsupported())this.blockAlert||(this.blockAlert=!0,setTimeout((function(){e.blockAlert=!1}),1e4),alert("File upload is not supported on this device"));else if(this.useNativePhotoInterface()||this.useNativeFileInterface()){var t=this.state.requestId;v.default.AddTraceContext("photoControlClick (native)",{fileUploadUtilsId:t,type:this.props.attribute.type()});var a=this.createUploadRequest(t),n=this.props.attribute.name();this.registerUploadRequest(t,a,{cacheForAttribute:n,callback:function(){return e.startNativeInput(a)}})}else v.default.AddTraceContext("photoControlClick (webfile)"),this.fileUploadInput&&$(this.fileUploadInput).click()}},{key:"clearInput",value:function(){(0,s.default)((0,c.default)(a.prototype),"onChange",this).call(this,""),this.fileUploadInput&&$(this.fileUploadInput).val(null),this.cooldown()}},{key:"cooldown",value:function(){var e=this;this.blockClick=!0,setTimeout((function(){e.blockClick=!1}),500)}},{key:"setImage",value:function(e){var t;e=y.default.from(e,null===(t=this.props.table)||void 0===t?void 0:t.rootName()),this._lastUploadImage=e,(0,s.default)((0,c.default)(a.prototype),"onChange",this).call(this,e),this.shouldUseIOSPlaceholder()&&(this._showIOSPlaceholderOnError=!0)}},{key:"isBlank",value:function(){return null==this.props.value||""===this.props.value}},{key:"inputClick",value:function(e){this.blockClick&&(e.stopPropagation(),e.preventDefault())}},{key:"unsupported",value:function(){return m.default.InMobileWebView()&&this.isFileType()&&!this.useNativeFileInterface()}},{key:"onFileChosen",value:function(e){var t=e.target.value;if(v.default.AddTraceContext("BaseImageTypeInput.onFileChosen"),null!=t&&""!==t){var a="",n=t.match(/([^\\]*)$/);n&&n[1]&&(a=n[1]);var r=this.createUploadRequest(this.state.requestId,a);if(m.default.IsFileReaderEnabled()){var i=e.target.files[0],o=S.Common.makeFileInputHandle(i,this.isFileType(),this.preferredWidth);a&&o.setFileName(a),S.Common.processImage(o,(function(e){S.Common.finishImageRead(r,o)}),(function(e){v.default.ReportErrorOnce({errorMessage:"Failed to fetch image into in-memory cache",errorDetails:e})}))}}}},{key:"renderUploadUtils",value:function(){var e={};return(this.useNativePhotoInterface()||this.useNativeFileInterface()||this.unsupported())&&(e.left=-5e3),f.default.createElement("div",{id:"FileUploadUtils"+this.state.requestId,ref:this.onFileUploadUtilsMount,style:e,className:"FileUploadUtils"},f.default.createElement("div",{className:"FileUploadForm"},f.default.createElement("input",{"aria-label":this.props.label,className:"FileUploadInput",ref:this._fileUploadInputRef,onChange:this.onFileChosen.bind(this),onClick:this.inputClick.bind(this),type:"file",disabled:this.unsupported(),name:"imageInputFile",accept:this.isFileType()?"*/*":"image/*"})))}}]),a}(h.BaseTypeInput);t.default=E},325069:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseNumberInputDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(366115)),s=n(a(441588)),u=n(a(861655)),d=n(a(994993)),c=n(a(73808)),p=n(a(667294)),f=n(a(593302)),h=n(a(479833)),m=n(a(797398)),v=n(a(294184)),y=n(a(112963)),g=a(847494),w=n(a(249e3)),b=n(a(571524)),S=n(a(150198)),T=a(283002);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}t.BaseNumberInputDataTestIds=r,function(e){e.Input="base-number-type-input"}(r||(t.BaseNumberInputDataTestIds=r={}));var R=function(e){(0,u.default)(a,e);var t=C(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).state={},n.onChange=n.onChange.bind((0,l.default)(n)),n.onBlur=n.onBlur.bind((0,l.default)(n)),n.onWheel=n.onWheel.bind((0,l.default)(n)),n.executeSliderDrop=n.executeSliderDrop.bind((0,l.default)(n)),n.onScanResult=n.onScanResult.bind((0,l.default)(n)),n.renderInlineButtons=n.renderInlineButtons.bind((0,l.default)(n)),n.executePlus=n.executeStep.bind((0,l.default)(n),"plus"),n.executeMinus=n.executeStep.bind((0,l.default)(n),"minus"),n}return(0,o.default)(a,[{key:"renderInlineButtons",value:function(){if(this.tableMode())return null;var e=(0,s.default)((0,c.default)(a.prototype),"renderInlineButtons",this).call(this)||[];if(!e.length){var t=this.props.attribute.numberDisplayMode();this.renderReadOnly()||"Label"===t||(e.unshift(p.default.createElement(y.default,{key:"plus",className:"BaseNumberTypeInput__stepping-button-plus",onTap:this.executePlus},p.default.createElement("i",{className:"icon fa fa-fw fa-plus"}))),e.unshift(p.default.createElement(y.default,{key:"minus",className:"BaseNumberTypeInput__stepping-button-minus",onTap:this.executeMinus},p.default.createElement("i",{className:"icon fa fa-fw fa-minus"}))))}return e}},{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.valueReadOnly()){var t=this.showScannerButton()&&!this.useSlider(),a=this.showNfcScannerButton()&&!this.useSlider();t&&!a&&b.default.InMobileWebView()?e.openCamera&&this.scannerButtonSelected():!t&&a&&b.default.InMobileWebView()?e.openCamera&&this.nfcScannerButtonSelected():!this.scanOnly()&&this.refs.trueInput&&this.refs.trueInput.focus()}}},{key:"onScanResult",value:function(e){e&&this.commitChange(e),$(document.activeElement).trigger("blur"),$(this.refs.input).trigger("blur",{autoAdvance:!0})}},{key:"prefix",value:function(){return""}},{key:"step",value:function(){var e=this.props.attribute.auxData().StepValue;if(!e){var t=this.digits();e=String(Math.pow(.1,t).toFixed(t))}return e}},{key:"browserStep",value:function(){return this.step()}},{key:"sliderStep",value:function(){return Number(this.step())}},{key:"digits",value:function(){var e=this.props.attribute.auxData().DecimalDigits;return null==e?2:e}},{key:"minValue",value:function(){return this.props.attribute.auxData().MinValue}},{key:"browserMinValue",value:function(){return this.minValue()}},{key:"sliderMinValue",value:function(){return Number(this.minValue()||0)}},{key:"maxValue",value:function(){var e,t=this.props.attribute.auxData(),a=this.minValue()||0,n=this.step();if(n&&null!=t.MaxValue){e=new f.default(t.MaxValue).minus(a).div(n).round(void 0,0).times(n).plus(a).toString()}else e=t.MaxValue;return e}},{key:"browserMaxValue",value:function(){return this.maxValue()}},{key:"sliderMaxValue",value:function(){return Number(this.maxValue()||100)}},{key:"executeStep",value:function(e,t){var a=this,n=parseFloat(this.delocalizedValue());(0,m.default)(n)||(n=(0,m.default)(t)?t:0);var r,i=new f.default(n),o=new f.default(this.step()),l=i[e](o),s=this.minValue()||0,u="plus"===e?0:3,d=l.minus(s).div(o).round(void 0,u).times(o).plus(s),c=this.minValue(),p=this.maxValue();r=null!=c&&d.lt(c)?c.toString():null!=p&&d.gt(p)?p.toString():d.toString(),clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout((function(){var e=a.mounted?a.delocalizedValue():r;a.commitChange(e,{fullValue:!0,noAutoAdvance:!0,forceUpdate:!0})}),"detail"===this.props.viewType?1e3:250);var h=this.useTelType()?this.localizeValue(r):this.fromWireFormat(r);this.onChange(h),this.mounted&&$(this.refs.trueInput).blur()}},{key:"executeSliderDrop",value:function(e,t){var a=t.toString();this.commitChange(a)}},{key:"useTelType",value:function(e){return!this.useSlider()&&(b.default.IsDeviceWithNoDotOnNumericKeyboard()||this.renderReadOnly()||null!=e&&("Infinity"==e||isNaN(e)))}},{key:"shouldSelectAllOnFocus",value:function(){return!0}},{key:"localizedValue",value:function(){return this.state.transientValue&&this.useTelType()?this.state.transientValue:this.localizeValue(this.value())}},{key:"delocalizedValue",value:function(){var e=this.state.transientValue;return e&&this.useTelType()?this.delocalizeValue(e):this.value()}},{key:"getNumDigits",value:function(e){var t=e.toString().split(".")[1];return null!=t?t.length:0}},{key:"showThousandsSeparator",value:function(){return!1!==this.props.attribute.auxData().ShowThousandsSeparator}},{key:"localizeValue",value:function(e){if(null==e||""===e)return"";var t=Number(e);return this.useTelType()&&this.renderReadOnly()?S.default.formatLocalizedNumber(e,{precision:this.digits(),numericDigits:this.props.attribute.numericDigits(),useGrouping:this.showThousandsSeparator()}):this.useTelType()&&w.default.decimal().supported&&!isNaN(t)?"string"==typeof e&&null!=e.match(/^[-]?\d+[\.,]$/)?e:S.default.formatLocalizedNumber(e,{precision:this.getNumDigits(e),numericDigits:this.props.attribute.numericDigits(),useGrouping:this.showThousandsSeparator()}):e}},{key:"delocalizeValue",value:function(e){if(null==e||""===e)return"";if(this.useTelType()&&w.default.decimal().supported){var t=w.default.decimal().fromLocaleString(e);if(null!=t)return t}return e}},{key:"toWireFormat",value:function(e){return e}},{key:"fromWireFormat",value:function(e){return e}},{key:"sliderDisplayValue",value:function(e){return isNaN(e)?"?":(0,h.default)(e)}},{key:"onChange",value:function(e){var t=e&&e.type?e.target.value:e;this.setState({transientValue:t})}},{key:"onBlur",value:function(e){var t=this.delocalizeValue(e.target.value);(0,s.default)((0,c.default)(a.prototype),"onChange",this).call(this,t,{fullValue:!0}),this.setState({transientValue:null})}},{key:"onWheel",value:function(e){e.target.blur()}},{key:"commitChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fullValue:!0};(0,s.default)((0,c.default)(a.prototype),"onChange",this).call(this,e,t),this.mounted&&null!=this.state.transientValue&&this.setState({transientValue:null})}},{key:"useSlider",value:function(){return"Range"===this.props.attribute.numberDisplayMode()&&!this.tableMode()}},{key:"render",value:function(){var e,t,n,i,o=this.renderReadOnly();if(i=null!=this.state.transientValue?this.state.transientValue:this.localizedValue(),this.useTelType(i)?(e="tel",t=w.default.decimal().supported?w.default.decimal().pattern.source:void 0):e="number",!o)if(w.default.decimal().supported)n=w.default.decimal().toLocaleString(0,{minimumFractionDigits:this.digits()});else if(this.digits()>0){n="0.";for(var l=0;l<this.digits();l++)n+="0"}else n="0";var u=(0,v.default)("BaseNumberTypeInput",{PercentTypeInput:"Percent"===this.props.attribute.type()}),d=(0,v.default)("BaseNumberTypeInput__prefix",{PercentTypeInput__prefix:"Percent"===this.props.attribute.type()}),f=0,h=0,m=0;this.prefix()&&(f=this.prefix().replace(/&lrm;|\u200E|&rlm;|\u200F/gi,"").length,this.tableMode()?(h=.5,m=.5):(h=.65,m=1));var y=m+h*f,g={paddingLeft:y?"".concat(y,"em"):null},b=h*f,S={lineHeight:this.tableMode()&&this.props.height?"".concat(this.props.height,"px"):null,width:b?"".concat(b,"em"):null},C=this.prefix()?p.default.createElement("span",{className:d,style:S},this.prefix()):null;if(this.useSlider())return(0,s.default)((0,c.default)(a.prototype),"render",this).call(this,p.default.createElement("div",{className:u},p.default.createElement(T.Slider,{step:this.sliderStep(),min:this.sliderMinValue(),max:this.sliderMaxValue(),disabled:this.renderReadOnly(),value:parseFloat(this.value()),onChangeCommitted:this.executeSliderDrop,formStyle:this.props.formStyle,type:this.props.attribute.type(),valueDisplayFunction:this.sliderDisplayValue.bind(this)})));var R=this.renderInlineButtons(),E=this.getInputStyleWithInlineButtons(R);return(0,s.default)((0,c.default)(a.prototype),"render",this).call(this,p.default.createElement("div",{className:u},C,p.default.createElement("input",{"aria-label":this.props.label,"data-testid":r.Input,className:"input-block-level",style:Object.assign(Object.assign({},g),E),type:e,key:e,ref:"trueInput",autoCorrect:"off",step:this.browserStep(),min:this.browserMinValue(),max:this.browserMaxValue(),lang:w.default.language(),pattern:t,placeholder:n,disabled:o,value:i,onChange:this.onChange,onBlur:this.onBlur,onWheel:this.onWheel,onFocus:this.onFocus}),p.default.createElement("div",{className:"BaseNumberTypeInput__inline-buttons"},R)))}}]),a}(g.BaseTypeInput);t.default=R},323409:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(496486)),c=n(a(667294)),p=n(a(294184)),f=n(a(112963)),h=n(a(581827)),m=n(a(817218)),v=n(a(365914)),y=n(a(571524)),g=n(a(895466)),w=n(a(944762));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,l.default)(a,e);var t=b(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e))._isMounted=!1,n._reinitialize=!1,n._stateChanged=!1,n.baseImageHeight=100,n.baseImageWidth=100,n.canvasKey=0,n.canvasRef=c.default.createRef(),n.canvasValue="",n.clearMessage="",n.clearOnReset=!0,n.lockedIcon="fa-lock-alt",n.signaturePad=null,n.unlockedIcon="fa-unlocked-alt",n.onBackgroundImageLoad=function(){n.rescaleCanvas({forceRedraw:!0}),n.setState({imagePending:!1})},n.onBackgroundImageError=function(){n.retryWith&&n.img?setTimeout((function(){n.img.src=n.retryWith,delete n.retryWith})):n.setState({imagePending:!1})},n.onBackgroundImageMount=function(e){n.img=e,n.rescaleCanvas({forceRedraw:!0})},n.onUrlResult=function(e,t,a){t&&t!==n.state.backgroundImageSrc&&a===n.state.backgroundImageHandle&&n.setState({backgroundImageSrc:t})},n.handleResize=function(e){n.rescaleCanvas()},n.state=n.initialState(e),n}return(0,i.default)(a,[{key:"shouldUseIOSPlaceholder",value:function(){return!1}},{key:"focus",value:function(){}},{key:"initialState",value:function(e){return d.default.extend((0,o.default)((0,u.default)(a.prototype),"initialState",this).call(this,e),{locked:!0,backgroundImageHandle:null,backgroundImageSrc:"",canvasUrl:"",color:"black"})}},{key:"originalRowValue",value:function(e){var t,a=null===(t=(e=e||this.props).table)||void 0===t?void 0:t.name(),n=e.rowKey||e.rowId;if(null!=n&&e.table){var r=e.table.findRow(n);if(r){var i=r[e.attribute.name()];return i?g.default.from(i,a):i}}return null}},{key:"runInitialValue",value:function(e){var t,a=null===(t=(e=e||this.props).table)||void 0===t?void 0:t.name(),n=e.attribute.defaultExpressionEvalTree();if(n){var r=n.run(e.dataContext);return r?g.default.from(r,a):r}return null}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.initializeCanvas(),window.addEventListener("resize",this.handleResize)}},{key:"UNSAFE_componentWillMount",value:function(){this.updateState(this.props)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.signaturePad.off(),window.removeEventListener("resize",this.handleResize)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updateState(e)}},{key:"updateState",value:function(e){var t,a=this,n=this.state,r=n.locked,i=n.backgroundImageHandle,o=n.backgroundImageSrc,l=n.canvasUrl;if(this.props.refreshId!==e.refreshId){var s=this.initialState(e);r=s.locked,i=s.backgroundImageHandle,o=s.backgroundImageSrc,l=s.canvasUrl,this._lastUploadImage=null,this._reinitialize=!0}var u=e.value||"",d=null===(t=e.table)||void 0===t?void 0:t.name(),c=g.default.from(u,d),p=c.nestedHandle(),f=!1;if(u?c.isDataHandle()?(f=!0,i&&(p&&p.equals(i)?(l=c.resolve(),f=!1):i.equals(c)&&(l="",f=!1))):(l="",c.equals(i)||(this._reinitialize=!0,i=c)):(l="",null!=i&&(i=null,o="",this._reinitialize=!0)),f){var h=c.resolve(),m=g.default.from(this.runInitialValue(e),d).resolve(),v=g.default.from(this.originalRowValue(e),d).resolve();m&&m===h||v&&v===h?(l="",c.equals(i)||(this._reinitialize=!0,i=c)):(l=h,!p||i&&p.equals(i)||(i=p,this._reinitialize=!0))}this.setState({locked:r,backgroundImageHandle:i,backgroundImageSrc:o,canvasUrl:l},(function(){i&&(i.nestedHandle()?i.flatten(a.onUrlResult):i.getBase64OrWebUrl(a.onUrlResult))}))}},{key:"shouldComponentUpdate",value:function(e,t){if(this.props.value!==e.value)return!0;if(v.default.compareObjs(this.state,t).length)return this._stateChanged=!0,!0;var a=v.default.compareObjs(this.props,e);return 1!==a.length||"focused"!==a[0]}},{key:"componentDidUpdate",value:function(){(this._reinitialize||this.canvasValue&&this.canvasValue!==this.state.canvasUrl)&&(this._reinitialize=!1,this.canvasValue="",this.initializeCanvas())}},{key:"imageWidth",value:function(){return this.state.imageWidth||this.baseImageWidth}},{key:"imageHeight",value:function(){return this.state.imageHeight||this.baseImageHeight}},{key:"initializeCanvas",value:function(){var e=this;this.signaturePad&&this.teardownCanvas(),this.signaturePad=new m.default(this.canvasRef.current,{penColor:this.state.color,onEnd:function(){e.sendChanges()}}),this.rescaleCanvas({forceRedraw:!0})}},{key:"teardownCanvas",value:function(){this.signaturePad.off(),this.signaturePad=null}},{key:"redraw",value:function(){var e=this,t=this.state.canvasUrl;if(t){var a=new Image;t.match(/^data:/)?delete a.crossOrigin:a.crossOrigin="Anonymous",a.onload=function(){var t,n=null===(t=e.canvasRef.current)||void 0===t?void 0:t.getContext("2d");if(n){e.normalScaleCanvas();var r=v.default.computeImageSizing({mode:"cover",containerWidth:e.imageWidth(),containerHeight:e.imageHeight(),imageWidth:a.width,imageHeight:a.height,centerHorizontal:!0}),i=r.left,o=r.top,l=r.scaledWidth,s=r.scaledHeight;n.drawImage(a,i,o,l,s)}delete a.onload,delete a.onerror,delete a.src},a.src=t,this.signaturePad._isEmpty=!1}}},{key:"rescaleCanvas",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{forceRedraw:!1},a=this.canvasRef.current;if(a){var n=parseInt($(a).attr("width"),10),r=$(a).width(),i=n/r;null===(e=a.getContext("2d"))||void 0===e||e.setTransform(i,0,0,i,0,0);var o,l=this.img;if(l&&l.height&&l.width)o=l.height;else{var s=this.baseImageHeight/this.baseImageWidth;o=Math.floor(r*s)}this.state.imageWidth!==r||this.state.imageHeight!==o?(this.setState({imageWidth:r,imageHeight:o}),this.redraw()):t.forceRedraw&&this.redraw()}}},{key:"normalScaleCanvas",value:function(){var e,t;null===(t=null===(e=this.canvasRef.current)||void 0===e?void 0:e.getContext("2d"))||void 0===t||t.setTransform(1,0,0,1,0,0)}},{key:"handleResetTap",value:function(){this.clearOnReset?this.handleClearTap(!this.props.value):this.handleClearTap(!0)}},{key:"handleDeleteTap",value:function(){if(!this.renderReadOnly()){if(this.props.onValueChange){this._reinitialize=!0,this.props.onValueChange("",{noAutoAdvance:!0,forceUpdate:"form"===this.props.viewType})}this.setState({locked:!1})}}},{key:"handleClearTap",value:function(e){var t,a,n=this;if(!this.renderReadOnly()){var r=!1;if(!e){var i=this.props.value,o=null===(t=this.props.table)||void 0===t?void 0:t.name(),l=g.default.from(i,o),s="";if(i&&l.isDataHandle())s=null!==(a=l.nestedHandle())&&void 0!==a?a:"",this._lastClearedBackground=l.nestedHandle();else{var u=function(e){return"function"==typeof e.value?e.value():e},c=d.default.uniqBy([this._lastUploadImage,this.originalRowValue(),this._lastClearedBackground,this.runInitialValue(),""].filter((function(e){return null!=e})),u),p=c.map(u).indexOf(l.value());(s=p<0?c[0]:c[(p+1)%c.length])&&(r=!0)}this._reinitialize=!0,this.canvasKey++,this.props.onValueChange&&this.props.onValueChange(s,{noAutoAdvance:!0,forceUpdate:"form"===this.props.viewType})}setTimeout((function(){n._isMounted&&n.setState({locked:!1,imagePending:r})}),1)}}},{key:"handleLock",value:function(){this.setState({locked:!0})}},{key:"handleSave",value:function(){this.props.onValueChange&&this.props.onValueChange(this.props.value,{forceUpdate:!0}),this.handleLock()}},{key:"sendChanges",value:function(){var e,t=this.signaturePad.toDataURL();if(this.canvasValue=t,this.props.onValueChange){var a=null===(e=this.props.table)||void 0===e?void 0:e.name(),n=g.default.from({type:"Data",value:t},a);n.setNestedHandle(this.state.backgroundImageHandle),this.props.onValueChange(n,{noAutoAdvance:!0,forceUpdate:"form"===this.props.viewType})}}},{key:"setColor",value:function(e){this.signaturePad.penColor=e,this.signaturePad._ctx.fillStyle=e,this.setState({color:e})}},{key:"showPhotoControl",value:function(){return!1}},{key:"renderBlocker",value:function(e){var t=this,a=this.state.locked||this.renderReadOnly(),n="BaseScribbleTypeInput__blocker";e&&(n+=" BaseScribbleTypeInput__blocker-transparent");var r=e?null:function(){return t.handleResetTap()},i=this.props.appModel?this.props.appModel.MapActionName("Tap to unlock"):"Tap to unlock";return c.default.createElement(f.default,{className:n,preventDefault:!a,onTap:r},i)}},{key:"render",value:function(){var e,t,n=this,r=this.state.locked||this.renderReadOnly(),i=(0,p.default)(Object.assign({BaseScribbleTypeInput:!0,"BaseScribbleTypeInput--locked":r},this.classNames||null)),l=r?this.lockedIcon:this.unlockedIcon,s="";if(r)s=this.renderReadOnly()?"":this.clearMessage;else if("form"!==this.props.viewType&&!r){var h="Done";this.props.appModel&&(h=this.props.appModel.MapActionName("Done")),t=c.default.createElement(f.default,{className:"BaseScribbleTypeInput__save",onTap:function(){return n.handleSave()}},h)}var m=null===(e=this.props.table)||void 0===e?void 0:e.name(),v=g.default.from(this.props.value,m).resolve();this.canvasValue&&this.canvasValue!==v&&this.canvasKey++;var b=this.state.backgroundImageSrc,S=null;this.colors&&(S=c.default.createElement("div",{className:"BaseScribbleTypeInput__color-picker"},c.default.createElement(w.default,{readOnly:this.renderReadOnly(),selected:this.state.color?[this.state.color.toLowerCase()]:[],options:this.colors,listAttribute:this.props.attribute,elementAttribute:this.props.attribute,colorMode:!0,ignoreCase:!0,width:this.props.width,onChange:function(e){var t=e[0]||"";n.setColor(t)}})));var T=null;!r&&this.showPhotoControl()&&(T=c.default.createElement("div",{className:"BaseScribbleTypeInput__photo-control"},c.default.createElement(f.default,{className:"fa fa-camera BaseScribbleTypeInput__photo-control--button",onTap:this.onPhotoControlClick.bind(this)}),this.renderUploadUtils()));var C,R,E=c.default.createElement("div",{className:"BaseScribbleTypeInput__footer"},S,T),k=t||c.default.createElement(f.default,{className:"BaseScribbleTypeInput__lock",onTap:function(){return r?n.handleResetTap():n.handleLock()}},c.default.createElement("span",{className:"fa "+l}),s),I=this.state.imagePending?"fa-spinner fa-pulse":"fa-rotate-left";return I&&(C=c.default.createElement(f.default,{className:"BaseScribbleTypeInput__clear--button iconContainer",onTap:function(){return n.handleClearTap()},preventDefault:!0},c.default.createElement("i",{className:"fa "+I}))),b&&(this.retryWith=null,y.default.InIOSWebView()&&y.default.InWKWebView()&&d.default.get(window,"AppModel.AppTemplate.Behavior.FullOfflineCaching")&&0!==b.indexOf("appsheet")&&0!==b.indexOf("data:")&&(this.retryWith=b,b="appsheet-cache://url="+encodeURIComponent(b)),R=c.default.createElement("img",{ref:this.onBackgroundImageMount,src:b,onLoad:this.onBackgroundImageLoad,onError:this.onBackgroundImageError})),(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:i},c.default.createElement("div",{className:"BaseScribbleTypeInput__top-menu"},k,C),c.default.createElement("div",{className:"BaseScribbleTypeInput__canvas-container"},c.default.createElement("div",{className:"BaseScribbleTypeInput__image-container",style:{height:this.imageHeight()}},R),c.default.createElement("canvas",{key:this.canvasKey,className:"BaseScribbleTypeInput__canvas resizable",ref:this.canvasRef,width:this.imageWidth(),height:this.imageHeight()})),this.renderBlocker(),E))}}]),a}(h.default);t.default=S},847494:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTypeInput=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(496486)),c=n(a(667294)),p=n(a(294184)),f=n(a(112963)),h=n(a(571524)),m=n(a(593186)),v=a(263198),y=a(300431),g=a(166089);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var b=function(e){(0,l.default)(a,e);var t=w(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).getInputStyleWithInlineButtons=function(e){if(!e||!e.length)return{};var t=e.length;return{paddingRight:"".concat(45*t,"px")}},n.renderInlineButtons=n.renderInlineButtons.bind((0,o.default)(n)),n.scannerButtonSelected=n.scannerButtonSelected.bind((0,o.default)(n)),n.nfcScannerButtonSelected=n.nfcScannerButtonSelected.bind((0,o.default)(n)),n.onFocus=n.onFocus.bind((0,o.default)(n)),n.onChange=n.onChange.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"showScannerButton",value:function(){var e=this.props,t=e.attribute,a=e.appModel;return!this.valueReadOnly()&&t.isScannable()&&t.shouldShowScannerButtons()&&!a.appTemplate.scanningDisabled}},{key:"showNfcScannerButton",value:function(){var e=this.props.attribute;return!this.valueReadOnly()&&e.isNfcScannable()&&e.shouldShowScannerButtons()}},{key:"scannerButtonSelected",value:function(){this.onScanResult&&v.JeeneeBrowserAPI.openScanner(this.onScanResult)}},{key:"nfcScannerButtonSelected",value:function(){this.onScanResult&&v.JeeneeBrowserAPI.startNfcScan(this.onScanResult)}},{key:"tableMode",value:function(){return"table"===this.props.viewType}},{key:"renderInlineButtons",value:function(){if(this.tableMode())return null;var e=[];return this.showScannerButton()&&e.push(c.default.createElement(f.default,{className:"BaseTypeInput__scanner",key:0,title:"Open Scanner",onTap:this.scannerButtonSelected},c.default.createElement("i",{className:"icon fa fa-fw fa-qrcode"}))),this.showNfcScannerButton()&&e.push(c.default.createElement(f.default,{className:"BaseTypeInput__nfc-scanner",key:1,title:"Start NFC Scan",onTap:this.nfcScannerButtonSelected},c.default.createElement("i",{className:"icon fa fa-fw fa-wifi"}))),e}},{key:"onChange",value:function(e,t){this.valueReadOnly()||this.props.onValueChange&&this.props.onValueChange(e,t)}},{key:"shouldSelectAllOnFocus",value:function(){return!1}},{key:"onFocus",value:function(){if(!g.AppGlobals.AppModel||!g.AppGlobals.AppModel.inRollout("skipSetSelectionRange")){var e=this.refs.input||this.refs.trueInput;e&&"function"==typeof e.setSelectionRange&&this.shouldSelectAllOnFocus()&&d.default.includes(["text","search","url","tel","password"],e.type)&&e.setSelectionRange(0,e.value.length)}}},{key:"value",value:function(){return this.state&&null!=this.state.transientValue?this.state.transientValue:this.props.value}},{key:"valueReadOnly",value:function(){return!1===this.props.editable}},{key:"scanOnly",value:function(){var e=this.props,t=e.attribute,a=e.appModel;return!(!t||!a)&&(!a.allowScanOverride()&&(t.isScannable()||t.isNfcScannable()))}},{key:"renderReadOnly",value:function(){return this.valueReadOnly()||this.scanOnly()}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.valueReadOnly()){var t=this.showScannerButton(),a=this.showNfcScannerButton();t&&!a&&h.default.InMobileWebView()?e.openCamera&&this.scannerButtonSelected():!t&&a&&h.default.InMobileWebView()?e.openCamera&&this.nfcScannerButtonSelected():!this.scanOnly()&&this.refs.input&&("function"==typeof this.refs.input.focus?this.refs.input.focus():m.default.warnToDevConsole("input ref has no method 'focus'"))}}},{key:"render",value:function(e){var t,a=this.props.attribute,n=this.props.value,r=this.state&&this.state.transientValue,i=(0,p.default)(e.props.className,"BaseTypeInput",{"BaseTypeInput--invalid":!1===this.props.valid||null==r&&!a.validateValue(n),"BaseTypeInput--missingRequired":this.props.missingRequired||null!=r&&a.missingRequired(n),"BaseTypeInput--disabled":this.renderReadOnly()});return this.props.height&&this.props.appModel.inRollout("imageWithSpinner")&&(t={height:this.props.height}),c.default.cloneElement(e,{className:i,style:t})}}]),a}(y.ViewAwareComponent);t.BaseTypeInput=b,b.supportsValidOptions=!1},107221:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BooleanTypeInputDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=n(a(685490)),f=n(a(925465)),h=n(a(294184)),m=n(a(150198)),v=a(847494),y=n(a(944762)),g=a(56749),w=a(557310);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}t.BooleanTypeInputDataTestIds=r,function(e){e.Input="boolean-type-input"}(r||(t.BooleanTypeInputDataTestIds=r={}));var S=function(e){(0,s.default)(a,e);var t=b(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e,t,n=this,i="Y",o="N",s=m.default.booleanValueFromWireFormat(this.props.value);e=!0===s?[i]:!1===s?[o]:[];var u={flex:1,textAlign:"right"};if("Switch"===this.props.yesNoMode)t=c.default.createElement("div",{className:(0,h.default)({SwitchContainerSideBySide:"Side-by-side"===this.props.slideshowDisplayMode&&w.ReactRootUIConfig.isInDesktopExperience()})},c.default.createElement(p.default,{color:"primary",checked:!!s,onClick:function(){var e=s?o:i;n.props.onValueChange&&n.props.onValueChange(e)}}));else if("Checkbox"===this.props.yesNoMode){var v={};"compact"===this.props.viewMode&&(v.padding=0,v.width="20px"),t=c.default.createElement(f.default,{style:v,color:"primary",disabled:this.renderReadOnly(),checked:!!s,onClick:function(){var e=s?o:i;n.props.onValueChange&&n.props.onValueChange(e)}})}else u={},t=c.default.createElement(y.default,{readOnly:this.renderReadOnly(),selected:e,options:[o,i],largeText:!0,listAttribute:this.props.attribute,elementAttribute:this.props.attribute,table:this.props.table,dataContext:this.props.dataContext,appModel:this.props.appModel,width:this.props.width,onChange:function(e){n.props.onValueChange&&n.props.onValueChange(e[0]||"")}});return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{"data-testid":r.Input,className:"BooleanTypeInput BooleanTypeInput-".concat(this.props.yesNoMode),style:u},c.default.createElement(g.ASThemeProvider,null,t)))}}]),a}(v.BaseTypeInput);t.default=S},346516:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"renderReadOnly",value:function(){return!0}}]),a}(n(a(954797)).default);t.default=d},833494:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808)),u=n(a(138198)),d=n(a(190644));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var p=function(e){(0,o.default)(a,e);var t=c(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"renderReadOnly",value:function(){return!0}},{key:"isChangeTriggered",value:function(){return!0}},{key:"componentDidMount",value:function(){d.default.ifAvailable()}}]),a}(u.default);t.default=p},415664:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"renderReadOnly",value:function(){return!0}},{key:"isChangeTriggered",value:function(){return!0}}]),a}(n(a(948464)).default);t.default=d},641810:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=a(847494),p=n(a(944762));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,l.default)(a,e);var t=f(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=this,t=this.props.attribute.auxData().EnumValues||[];return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"ColorTypeInput"},d.default.createElement(p.default,{readOnly:this.renderReadOnly(),selected:this.props.value?[this.props.value.toLowerCase()]:[],options:t,listAttribute:this.props.attribute,elementAttribute:this.props.attribute,colorMode:!0,ignoreCase:!0,width:this.props.width,onChange:function(t){var a=t[0]||"";e.props.onValueChange&&e.props.onValueChange(a)}})))}}]),a}(c.BaseTypeInput);t.default=h},29975:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=n(a(730381)),f=a(847494),h=n(a(150198)),m=n(a(249e3)),v=n(a(365914));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var g=h.default.validators.DateTime,w="MM/DD/YYYY HH:mm:ss",b=function(e){(0,s.default)(a,e);var t=y(a);function a(e){var n;(0,r.default)(this,a),(n=t.call(this,e)).state={value:"",ISO:""};var i=new Date;i.setHours(12,0,0);var l=(0,p.default)(i).format(w);return n.placeholder=n.localizeValue(l),n.onChange=n.onChange.bind((0,o.default)(n)),n.onBlur=n.onBlur.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.updateISO(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updateISO(e)}},{key:"updateISO",value:function(e){if(e.value!==this.state.value){var t=null!=e.value?e.value:"",a="";if(null!=t&&""!==t&&g(t)){var n=new Date(t);a=v.default.getDateTimeString(n)}this.setState({value:t,ISO:a})}}},{key:"normalizeValue",value:function(e){var t,a="",n=e.match(/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d(?::[0-5]\d(?:\.\d+)?)?([+-][0-2]\d:[0-5]\d|Z)?$/);return n&&null==n[1]?(e=e.split(/\.\d{3}$/)[0],this.props.attribute.ignoreSeconds()&&e.match(/\d{2}:\d{2}:\d{2}$/)&&(e=e.replace(/\d{2}$/,"00")),t=v.default.getDateFromDateTimeString(e),a=e):null!=n&&(t=new Date(e),a=v.default.getDateTimeString(t)),{value:e,rawDate:t,iso:a}}},{key:"onChange",value:function(e){this.setState({transientValue:e.target.value})}},{key:"onBlur",value:function(e){var t=e.target.value,n="";if(t){var r=this.props.attribute,i=r.useLongDateFormat(),o=r.ignoreSeconds(),s=v.default.fromLocaleDateTimeString(t,i,o);n=this.props.attribute.valueToWireFormat(s)}(0,l.default)((0,d.default)(a.prototype),"onChange",this).call(this,n,{fullValue:!0}),this.setState({transientValue:null})}},{key:"isChangeTriggered",value:function(){return!1}},{key:"localizedValue",value:function(){return null!=this.state.transientValue?this.state.transientValue:this.localizeValue(this.props.value)}},{key:"localizeValue",value:function(e){if(null==e||""===e)return"";var t=(0,p.default)(e,w,!0).toDate();if(isNaN(t.getTime()))return e;var a=this.props.attribute,n=a.useLongDateFormat(),r=a.ignoreSeconds();return v.default.toLocaleDateTimeString(t,n,r)}},{key:"render",value:function(){return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("input",{"aria-label":this.props.label,type:"text",ref:"input",lang:m.default.language(),className:"DateTimeTypeInput input-block-level"+(this.isChangeTriggered()?" ChangeTriggeredValue":""),autoComplete:"off",autoCorrect:"off",disabled:this.renderReadOnly(),placeholder:this.placeholder,value:this.localizedValue(),onBlur:this.onBlur,onChange:this.onChange}))}}]),a}(f.BaseTypeInput);t.default=b},948464:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DateTimeInputDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(366115)),s=n(a(441588)),u=n(a(861655)),d=n(a(994993)),c=n(a(73808)),p=n(a(667294)),f=a(847494),h=n(a(150198)),m=n(a(571524)),v=n(a(365914)),y=n(a(29975)),g=a(166089);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}t.DateTimeInputDataTestIds=r,function(e){e.Input="date-time-type-input"}(r||(t.DateTimeInputDataTestIds=r={}));var b=h.default.validators.DateTime,S=function(e){(0,u.default)(a,e);var t=w(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).state={value:"",ISO:""},n.onChange=n.onChange.bind((0,l.default)(n)),n.onBlur=n.onBlur.bind((0,l.default)(n)),n}return(0,o.default)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.updateISO(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updateISO(e)}},{key:"updateISO",value:function(e){if(null==this.state.transientValue&&e.value!==this.state.value){var t=null!=e.value?e.value:"",a="";if(null!=t&&""!==t&&b(t)){var n=new Date(t);a=v.default.getDateTimeString(n)}var r={value:t,ISO:a};this.setState(r)}}},{key:"normalizeValue",value:function(e){var t,a="",n=e.match(/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d(?::[0-5]\d(?:\.\d+)?)?([+-][0-2]\d:[0-5]\d|Z)?$/);return n&&null==n[1]?(e=e.split(/\.\d{3}$/)[0],this.props.attribute.ignoreSeconds()&&e.match(/\d{2}:\d{2}:\d{2}$/)&&(e=e.replace(/\d{2}$/,"00")),t=v.default.getDateFromDateTimeString(e),a=e):null!=n&&(t=new Date(e),a=v.default.getDateTimeString(t)),{value:e,rawDate:t,iso:a}}},{key:"onChange",value:function(e){this.setState({transientValue:e.target.value});var t=e.nativeEvent.target;window.setTimeout((function(){t.defaultValue=""}),0)}},{key:"onBlur",value:function(e){var t=this,n=this.normalizeValue(e.target.value||""),r=n.value,i=n.rawDate,o=n.iso;if(o){var l=v.default.MDYHMSformat(i||null,!0);this.setState({ISO:o,value:l,transientValue:null},(function(){return(0,s.default)((0,c.default)(a.prototype),"onChange",t).call(t,l,{fullValue:!0})}))}else this.setState({ISO:"",value:r,transientValue:null},(function(){return(0,s.default)((0,c.default)(a.prototype),"onChange",t).call(t,r,{fullValue:!0})}))}},{key:"isChangeTriggered",value:function(){return!1}},{key:"step",value:function(){return this.props.attribute.ignoreSeconds()?60:1}},{key:"componentDidMount",value:function(){if(m.default.SupportsDateTimeInputs()&&this.refs.input){var e=this.refs.input.value;this.refs.input.value="",this.refs.input.defaultValue="",this.refs.input.value=e}}},{key:"componentDidUpdate",value:function(){this.refs.input&&(this.refs.input.defaultValue="")}},{key:"render",value:function(){var e;if(m.default.SupportsDateTimeInputs()){var t=this.state.transientValue;null==t&&(t=this.normalizeValue(this.state.ISO||this.state.value).value);var n=this.props.attribute.auxData(),i=n.MinValue,o=n.MaxValue,l=null===(e=g.AppGlobals.AppModel)||void 0===e?void 0:e.inRollout("DateTimeRespectsMinMax");return(0,s.default)((0,c.default)(a.prototype),"render",this).call(this,p.default.createElement("div",{className:"DateTimeTypeInput input-block-level"},p.default.createElement("input",{"aria-label":this.props.label,"data-testid":r.Input,type:"datetime-local",ref:"input",max:o&&l?o:"9999-12-31T00:00:00.0",min:l?i:"",step:this.step(),className:"DateTimeTypeInput input-block-level"+(this.isChangeTriggered()?" ChangeTriggeredValue":""),autoComplete:"off",autoCorrect:"off",disabled:this.renderReadOnly(),value:t,onBlur:this.onBlur,onChange:this.onChange}),p.default.createElement("div",{className:"DateTimeTypeInput__inline-buttons"},p.default.createElement("i",{className:"far fa-calendar-alt"}))))}return(0,s.default)((0,c.default)(a.prototype),"render",this).call(this,p.default.createElement(y.default,Object.assign({},this.props)))}}]),a}(f.BaseTypeInput);t.default=S},10428:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=n(a(730381)),f=a(847494),h=n(a(571524)),m=n(a(249e3)),v=n(a(365914)),y=a(44617);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var w=function(e){(0,s.default)(a,e);var t=g(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state={transientValue:null},n.onChange=n.onChange.bind((0,o.default)(n)),n.onBlur=n.onBlur.bind((0,o.default)(n)),n.inputRef=c.default.createRef(),n}return(0,i.default)(a,[{key:"shouldSelectAllOnFocus",value:function(){return this.useTextType()}},{key:"onChange",value:function(e){var t=e.target.value,a=this.state.transientValue||"";if(this.useTextType()&&m.default.date().supported){var n=m.default.date().dateFormat;if(a.length===t.length-1){var r=n.slice(0,t.length),i=a[a.length-1],o=t[t.length-1],l=n[t.length];if(o===i&&o!==l&&!/\w/.test(o))return;if(!/\w/.test(l))new RegExp(("^"+r).replace(/[DMY]/g,"\\d")).test(t)&&(t+=l)}}this.setState({transientValue:t});var s=e.nativeEvent.target;window.setTimeout((function(){s.defaultValue=""}),0)}},{key:"onBlur",value:function(e){var t=e.target.value;if(this.useTextType())t=this.delocalizeValue(t);else{var n=(0,p.default)(t,"YYYY-MM-DD").toDate();isNaN(n.getTime())||(t=v.default.MDYformat(n,!0))}(0,l.default)((0,d.default)(a.prototype),"onChange",this).call(this,t,{fullValue:!0}),this.setState({transientValue:null})}},{key:"isChangeTriggered",value:function(){return!1}},{key:"step",value:function(){return 1}},{key:"useTextType",value:function(){return!h.default.SupportsDateTimeInputs()||!y.dynamicRollouts.includeByOwnerId("QuickEditCalendarIconRollout")&&(this.props.quickEditMode&&!h.default.IsMobileBrowser())}},{key:"localizedValue",value:function(){if(null!=this.state.transientValue)return this.state.transientValue;var e=this.props.value;return null==e||""===e?"":this.localizeValue(e)}},{key:"localizeValue",value:function(e){if(null==e||""===e)return"";var t=m.default.date().momentFromWireFormat(e).toDate();return isNaN(t.getTime())?e:this.useTextType()?v.default.toLocaleDateString(t):v.default.YMDformat(t,!0)}},{key:"delocalizeValue",value:function(e){if(null==e||""===e)return"";if(this.useTextType()){var t=m.default.date().fromLocaleString(e);if(null!=t)return t}return e}},{key:"componentDidMount",value:function(){if(!this.useTextType()&&this.inputRef){var e=this.inputRef.current.value;this.inputRef.current.value="",this.inputRef.current.defaultValue="",this.inputRef.current.value=e}}},{key:"componentDidUpdate",value:function(){!this.useTextType()&&this.inputRef&&(this.inputRef.current.defaultValue="")}},{key:"render",value:function(){var e,t=null,n=this.localizedValue();if(this.useTextType()){e="text";var r=m.default.date();t=((null==r?void 0:r.dateFormat)||"mm/dd/yyyy").toLowerCase()}else e="date";return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"DateTypeInput input-block-level"},c.default.createElement("input",{"aria-label":this.props.label,type:e,ref:this.inputRef,max:"9999-12-31",lang:m.default.language(),step:this.step(),autoComplete:"off",autoCorrect:"off",value:n,placeholder:t,disabled:this.renderReadOnly(),onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur}),c.default.createElement("div",{className:"DateTypeInput__inline-buttons"},c.default.createElement("i",{className:"far fa-calendar-alt"}))))}}]),a}(f.BaseTypeInput);t.default=w},256023:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(689728)),i=n(a(856690)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,r.default)(a)}(n(a(325069)).default);t.default=d},168410:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ReactRootDrawingTypeInput=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808)),u=a(275433);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var c=function(e){(0,o.default)(a,e);var t=d(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).baseImageWidth=500,n.baseImageHeight=400,n.clearMessage="",n.clearOnReset=!1,n.colors=["black","red","orange","yellow","green","blue","purple"],n}return(0,i.default)(a,[{key:"showPhotoControl",value:function(){return!0}}]),a}(n(a(323409)).default),p=function(e){(0,o.default)(a,e);var t=d(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).baseImageWidth=500,n.baseImageHeight=400,n.clearMessage="",n.clearOnReset=!1,n.colors=["black","red","orange","yellow","green","blue","purple"],n}return(0,i.default)(a,[{key:"showPhotoControl",value:function(){return!0}}]),a}(u.ReactRootBaseScribbleTypeInput);t.ReactRootDrawingTypeInput=p;var f=c;t.default=f},726134:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=a(847494),f=n(a(365914));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var m=function(e){(0,s.default)(a,e);var t=h(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state=n.initialState(),n.onChange=n.onChange.bind((0,o.default)(n)),n.onBlur=n.onBlur.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"initialState",value:function(){return{transientValue:null}}},{key:"normalizeValue",value:function(e){var t=this.props.attribute.ignoreSeconds();return f.default.fromDurationString(e,t)}},{key:"onChange",value:function(e){this.setState({transientValue:e.target.value})}},{key:"onBlur",value:function(e){var t=this.normalizeValue(e.target.value);(0,l.default)((0,d.default)(a.prototype),"onChange",this).call(this,t,{fullValue:!0}),this.setState({transientValue:null})}},{key:"render",value:function(){var e=this.props.attribute.ignoreSeconds(),t=this.state.transientValue;return null==t&&(t=f.default.toDurationString(this.props.value,e)||""),(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"DurationTypeInput"},c.default.createElement("input",{"aria-label":this.props.label,type:"text",ref:"input",className:"input-block-level",placeholder:e?"hh:mm":"hh:mm:ss",autoCorrect:"off",value:t,disabled:this.renderReadOnly(),onBlur:this.onBlur,onChange:this.onChange})))}}]),a}(p.BaseTypeInput);t.default=m},811123:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=a(847494),p=a(697211),f=n(a(12330)),h=a(166089),m=a(338590),v=a(496486);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){return"string"==typeof e?e:e.label},w=function(e){(0,l.default)(a,e);var t=y(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).debouncedAutoComplete=(0,v.debounce)((function(e){var t,a;return(0,m.autoComplete)(e,null===(a=null===(t=h.AppGlobals.AppModel)||void 0===t?void 0:t.AppTemplate)||void 0===a?void 0:a.OwnerId).then((function(e){n.setState({candidates:e.suggestions})}))}),1e3,{leading:!0,trailing:!0,maxWait:3e3}),n.state=n.initialState(),n}return(0,i.default)(a,[{key:"initialState",value:function(){return{isOpen:!1,transientValue:null,candidates:[]}}},{key:"onValueChange",value:function(e){(0,o.default)((0,u.default)(a.prototype),"onChange",this).call(this,e,{fullValue:!0}),this.setState({transientValue:null})}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.isOpen,a=e.transientValue;t||null==a||(this.onValueChange(a),this.setState({transientValue:null}))}},{key:"render",value:function(){var e=this;return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement(f.default,{open:this.state.isOpen,freeSolo:!0,autoSelect:!0,disabled:this.renderReadOnly(),onChange:function(t,a,n){"select-option"!==n&&"blur"!==n||e.setState({transientValue:a.emailAddress})},onOpen:function(){e.setState({isOpen:!0})},onClose:function(){e.setState({isOpen:!1})},onInputChange:function(t,a,n){"reset"!==n&&(e.setState({transientValue:a}),e.debouncedAutoComplete(a))},value:this.value()||"",options:this.state.candidates,getOptionLabel:g,getOptionSelected:function(e,t){return g(e)===g(t)},className:"Control TextControl ComboBoxControl email-autocomplete",filterOptions:function(t){return t.filter((function(t){return-1!==t.emailAddress.indexOf(e.state.transientValue)}))},renderInput:function(t){return d.default.createElement(p.TextField,Object.assign({},t,{variant:"outlined",value:e.value()||"",inputProps:Object.assign(Object.assign({},t.inputProps),{style:{border:"none"}})}))}}))}}]),a}(c.BaseTypeInput);t.default=w},318887:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var f=function(e){(0,s.default)(a,e);var t=p(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state=n.initialState(),n.onChange=n.onChange.bind((0,o.default)(n)),n.onBlur=n.onBlur.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"initialState",value:function(){return{}}},{key:"onChange",value:function(e){this.setState({transientValue:e.target.value})}},{key:"onBlur",value:function(e){(0,l.default)((0,d.default)(a.prototype),"onChange",this).call(this,e.target.value,{fullValue:!0}),this.setState({transientValue:null})}},{key:"render",value:function(){var e=this.value()||"";return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"EmailTypeInput"},c.default.createElement("input",{"aria-label":this.props.label,type:"email",ref:"input",className:"input-block-level",autoCorrect:"off",value:e,disabled:this.renderReadOnly(),onBlur:this.onBlur,onChange:this.onChange})))}}]),a}(a(847494).BaseTypeInput);t.default=f},352565:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"allowMultiSelect",value:function(){return!0}}]),a}(n(a(901816)).default);t.default=d},923769:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"allowMultiSelect",value:function(){return!1}}]),a}(n(a(901816)).default);t.default=d},39333:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(656798)),c=a(263198);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var f=function(e){(0,l.default)(a,e);var t=p(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"isFileType",value:function(){return!0}},{key:"useNativePhotoInterface",value:function(){return!1}},{key:"startNativeInput",value:function(e){c.JeeneeBrowserAPI.chooseFile(e)}},{key:"preloadImage",value:function(){}},{key:"render",value:function(){return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this)}}]),a}(d.default);t.default=f},656798:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(918698)),i=n(a(856690)),o=n(a(689728)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=n(a(581827)),f=n(a(112963)),h=n(a(480952)),m=a(365914);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var y=function(e){(0,s.default)(a,e);var t=v(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"componentDidMount",value:function(){this.preloadImage()}},{key:"componentDidUpdate",value:function(){(0,l.default)((0,d.default)(a.prototype),"componentDidUpdate",this).call(this),this.preloadImage()}},{key:"preloadImage",value:function(){var e=this;this.isBlank()?this.preloaded=null:this.state.url&&this.state.url!==this.preloaded&&(this.preloaded=this.state.url,(0,h.default)(this.state.url,this.state.imageHandle,(function(t){e.img&&(e.img.src=t.src)})))}},{key:"render",value:function(){var e=this,t=this.props.value,n=null,i=null;if(!this.renderReadOnly()){var o="icon fa fa-fw ";o+=this.isFileType()?"fa-file-pdf":"fa-camera";var s=this.isFileType()?"Choose File":"Open Camera",u="PhotoInputControl InputControl"+(this.isBlank()?"":" ClearInput")+(this.unsupported()?" disabled":"");n=c.default.createElement(f.default,{onTap:function(){e.onPhotoControlClick()},className:u,title:s},c.default.createElement("i",{className:o})),i=this.renderUploadUtils()}var p=null;this.isFileType()||(p=c.default.createElement("img",{className:this.isBlank()?"EmptyImage":null,src:null,ref:this.onImageMount}));var h=t||"";if(this.isFileType())if(t&&"object"===(0,r.default)(t))h=this.state.fileName||this.props.appModel.MapActionName("Delete");else{var v=(0,m.getTableFileQueryParsed)(h).fileName||h;h=(0,m.getFileNameFromPath)(v)||h}else h=t?this.props.appModel.MapActionName("Clear"):"";var y=null;return!h||!this.isFileType()&&this.renderReadOnly()||(y=c.default.createElement("div",{className:"PhotoInputControlBase__selected"},c.default.createElement("span",{className:"FileName"},h),this.renderReadOnly()?null:c.default.createElement(f.default,{className:"ClearInput",onTap:this.clearInput.bind(this),title:this.isFileType()?"Clear File":"Clear Image"},c.default.createElement("i",{className:"icon fa fa-fw fa-close"})))),(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"PhotoInputControlBase"+(this.isFileType()?" FileInputControlBase":"")},n,p,y,i))}}]),a}(p.default);t.default=y},138198:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808)),u=n(a(496486)),d=n(a(667294)),c=n(a(112963)),p=n(a(7975)),f=n(a(302443)),h=n(a(314247)),m=n(a(190644)),v=n(a(571524)),y=n(a(368142)),g=a(235049);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var b=function(e){(0,o.default)(a,e);var t=w(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"extraClassNames",value:function(){return"LatLongTypeInput"}},{key:"defaultValue",value:function(){return(new f.default).toString()}},{key:"getLocation",value:function(){var e=this;if(!this.state.pending){if(this.highAccuracy&&v.default.IsMobileBrowser()){this._stopTrying=m.default.fetchAccurateLatLong((function(t){var a=t.coords.latitude,n=t.coords.longitude,r=Math.round(t.coords.accuracy),i=m.default.stringifyLatLng(a,n);e.setValue(i,r,{fullValue:!0}),delete e._stopTrying,e.setState({accuracy:r,available:!0,pending:!1})}),(function(){alert("Unable to get current location. Please enable Location service on your device and then restart the app."),delete e._stopTrying,e.setState({accuracy:null,available:!1,pending:!1})}),(function(t){var a=t.coords.latitude,n=t.coords.longitude,r=Math.round(t.coords.accuracy),i=m.default.stringifyLatLng(a,n);e.setValue(i,r,{fullValue:!0}),e.setState({accuracy:r,available:!0})}))}else m.default.fetchLatLong((function(t,a){var n=m.default.stringifyLatLng(t,a);e.setValue(n,null,{fullValue:!0}),$(e.refs.input).trigger("blur"),e.setState({available:!0,pending:!1})}),(function(){alert("Unable to get current location. Please enable Location service on your device and then restart the app."),e.setState({available:!1,pending:!1})}),{enableHighAccuracy:!0,maximumAge:0});this.setState({pending:!0})}}},{key:"onPinDragEnd",value:function(e){var t=e.latLng.lat(),a=e.latLng.lng(),n=new f.default(t,a).toString();this.setValue(n,null,{fullValue:!0}),this.cancelPending({abort:!0})}},{key:"renderCornerButton",value:function(){var e,t,a="LatLongInputControl InputControl"+(this.state.available?" LocationAvailable":null),n=this.state.pending?"fa-spinner fa-pulse":"fa-map-marker";return e=this.state.pending?this.cancelPending.bind(this):this.getLocation.bind(this),this.highAccuracy&&(t=d.default.createElement("div",{className:"LatLongTypeInput__accuracy"},this.state.accuracy?this.state.accuracy+"m":null)),d.default.createElement("div",{className:a},t,d.default.createElement(c.default,{onTap:e,title:"Insert Current Location"},d.default.createElement("div",{className:"iconContainer"},d.default.createElement("i",{className:"icon fa fa-fw "+n}))))}},{key:"renderMap",value:function(){if(h.default.disabled)return null;var e=this.props,t=this.value(),a=f.default.fromString(t),n=(0,g.isConnected)()&&window.navigator&&navigator.onLine;if(a&&n){var r,i,o=e.attribute.name(),l=u.default.clone(e.dataContext.rowData),s=e.table,c=e.tableSchema,p=[];return this.renderReadOnly()?p=u.default.compact([h.default.makeMapItem(l,s,c,o)]):(r={dragend:this.onPinDragEnd.bind(this),dragstart:this.onPinDragStart.bind(this)},i={latitude:a.latitude,longitude:a.longitude}),d.default.createElement(y.default,Object.assign({},this.props,{ref:this.onMapMount,centerLat:a.latitude,centerLng:a.longitude,items:p,zoom:this.state.zoom,mapType:this.state.mapType,mapColumn:o,draggablePinEventHandlers:r,draggablePinOptions:i,mapEventHandlers:this.mapEventHandlers(),showCurrentLocation:!1,mapOptions:{draggable:!1,scrollwheel:!1,disableDoubleClickZoom:!0,zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,gestureHandling:"greedy"}}))}return null}}]),a}(p.default);t.default=b},685083:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(496486)),c=n(a(667294)),p=a(847494),f=n(a(571524)),h=n(a(454852)),m=n(a(365914)),v=n(a(729390)),y=n(a(112963)),g=n(a(299119)),w=n(a(294184)),b=a(814394),S=a(166089),T=a(557310);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var R=function(e){(0,l.default)(a,e);var t=C(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state={textBoxValue:"",modalOpen:!1,rowId:null},n}return(0,i.default)(a,[{key:"renderReadOnly",value:function(){return!0}},{key:"shouldComponentUpdate",value:function(e,t){if(this.props.value!==e.value)return!0;if(m.default.compareObjs(this.state,t).length)return!0;var a=m.default.compareObjs(this.props,e);return 1!==a.length||"focused"!==a[0]}},{key:"relatedTableCollection",value:function(){var e=this.referencedTableName();return e?this.props.appModel.findTableCollection(e):{}}},{key:"isReverseDependentRef",value:function(){return this.props.attribute.isReverseDependentRef()}},{key:"referencedTableName",value:function(){return this.props.attribute.nestedAttribute().referencedTableName()}},{key:"allowAdds",value:function(){var e=this.props.appModel,t=this.relatedTableCollection().table;return!!(t&&t.allowsAdd(e)&&this.isReverseDependentRef()&&(T.ReactRootUIConfig.isReactRoot()?this.canLaunchRelatedForm(t.name()):"launchNestedForm"in this.props))&&e.appTemplate.actions().actionsAtTableScope(t.rootName(),e).filter((function(e){return"ADD_RECORD"===e.type()&&e.prominence()!==h.default.DO_NOT_DISPLAY})).length}},{key:"allowUpdates",value:function(){if(this.isReverseDependentRef()){var e=this.relatedTableCollection(),t=e.table,a=e.tableSchema;return!!(t&&a&&t.allowsUpdate(this.props.appModel)&&(T.ReactRootUIConfig.isReactRoot()?this.canLaunchRelatedForm(t.name()):"launchNestedForm"in this.props))}return!1}},{key:"maxNestedRows",value:function(){return null!=this.props.maxNestedRows?this.props.maxNestedRows:this.props.appModel.AppTemplate.Presentation&&this.props.appModel.AppTemplate.Presentation.MaxNestedRows||0}},{key:"onModalOpen",value:function(){f.default.IsMobileBrowser()||this.focusInput()}},{key:"onFinish",value:function(){this.setState({modalOpen:!1,rowId:null})}},{key:"focusInput",value:function(){this.refs.input&&this.refs.input.focus()}},{key:"textBoxChanged",value:function(e){var t=e.target.value;$(this.refs.modalList).scrollTop(0),this.setState({textBoxValue:t})}},{key:"clearTextBox",value:function(){$(this.refs.modalList).scrollTop(0),this.setState({textBoxValue:""}),this.focusInput()}},{key:"referenceRelationship",get:function(){var e,t=this.props,a=t.table,n=t.attribute,r=t.tableRow,i=(null!==(e=n.internalQualifier().Properties)&&void 0!==e?e:{}).ReferencingColumnName;return i&&a&&r&&T.ReactRootUIConfig.isReactRoot()?{hasReferenceTo:{refColumnName:i,referencedTableName:a.rootName(),referencedStableId:r.stableId}}:void 0}},{key:"launchAddForm",value:function(){var e=this.props,t=e.attribute,a=e.dataContext,n=e.launchNestedForm,r=T.ReactRootUIConfig.isReactRoot()?this.launchRelatedForm:n,i=this.relatedTableCollection().table;if(i&&null!=r){var o=a.getFilterDefaultValues(t);r(i.name(),null,o,t,this.referenceRelationship)}}},{key:"onRowSelected",value:function(e,t){this.allowUpdates()||this.allowAdds()&&d.default.includes(this.props.dataContext.pendingKeysForTable(e),t)?this.launchEditForm(t):this.viewSelectedRow(t)}},{key:"launchEditForm",value:function(e){var t=this,a=this.props,n=a.dataContext,r=a.attribute,i=a.launchNestedForm,o=this.relatedTableCollection().table,l=n.getFilterDefaultValues(r),s=T.ReactRootUIConfig.isReactRoot()?this.launchRelatedForm:i;if(o&&null!=s){var u=function(){return s(o.name(),e,l,r,t.referenceRelationship)};this.state.modalOpen?(clearTimeout(this.finishDelay),this.finishDelay=setTimeout((function(){t.onFinish(),u()}),100)):u()}}},{key:"viewSelectedRow",value:function(e){this.refs.modal.setAnchorElement(this.refs.inlineContainer),null!=e?this.setState({modalOpen:!0,rowId:e}):this.setState({modalOpen:!1,rowId:null})}},{key:"viewAllRows",value:function(){this.refs.modal.setAnchorElement(this.refs.inlineContainer),this.setState({modalOpen:!0,rowId:null})}},{key:"renderAddButton",value:function(){return c.default.createElement(y.default,{className:"ListTypeInput__button",navigationDelay:!0,onTap:this.launchAddForm.bind(this),key:"new"},this.props.appModel.MapActionName("New"))}},{key:"renderControls",value:function(e){var t=[];if(e>this.maxNestedRows()){var a="".concat(this.props.appModel.MapActionName("View")," (").concat(e,")");t.push(c.default.createElement(y.default,{className:"ListTypeInput__button",navigationDelay:!0,onTap:this.viewAllRows.bind(this),key:"view"},a))}this.allowAdds()&&t.push(this.renderAddButton());var n=(0,w.default)({ListTypeInput__controls:e>0,"ListTypeInput__controls-emptylist":0===e});return c.default.createElement("div",{className:n},t)}},{key:"renderModal",value:function(e){var t;if(this.referencedTableName()&&this.state.modalOpen){var a=this.props.appModel.findTableCollection(this.referencedTableName()),n=a.table,r=a.tableSchema;if(n&&r){var i=null==this.state.rowId,o=i?this.props.attribute.displayName(this.props.dataContext):n.labelTextForId(this.state.rowId)||this.state.rowId,l=i&&e>1,s=l&&this.state.textBoxValue?c.default.createElement(y.default,{className:"ListSelectPopup__input-clear",onTap:this.clearTextBox.bind(this)},c.default.createElement("i",{className:"fa fa-times-circle"})):null,u=l?c.default.createElement("div",{className:"ListSelectPopup__input"},c.default.createElement("input",{"aria-label":this.props.label,ref:"input",type:"text",className:"ListSelectPopup__input-box",value:this.state.textBoxValue,placeholder:this.props.appModel.MapActionName("Search"),disabled:!this.state.modalOpen,onChange:this.textBoxChanged.bind(this)}),s):null;t=c.default.createElement("section",{className:"ListTypeInputModal"},c.default.createElement("div",{className:"ListTypeInputModal__title"},o),u,c.default.createElement("div",{className:"ListTypeInputModal__contents",ref:"modalList",style:{height:u?"calc(100% - 50px - 40px - 54px)":"calc(100% - 50px - 54px)"}},i?this.renderListModal():this.renderDetailsModal(n)),c.default.createElement("div",{className:"ListTypeInputModal__bottom"},c.default.createElement(y.default,{className:"ListTypeInputModal__finish-button",navigationDelay:!0,onTap:this.onFinish.bind(this)},this.props.appModel?this.props.appModel.MapActionName("Done"):"Done")))}}return c.default.createElement(g.default,{isOpen:!!t,onRequestClose:this.onFinish.bind(this),onAfterOpen:this.onModalOpen.bind(this),contentLabel:"view selected",ref:"modal"},t)}},{key:"renderDetailsModal",value:function(e){var t,a,n,r,i,o,l=null===(t=e.lookupTableRow(this.state.rowId,this.pendingTransaction))||void 0===t?void 0:t.values;if(l){var s=S.AppGlobals.AppModel.FindControlsForTable(e.name(),"detail",!1),u=null;s.length&&(u=s[0]);var d=u&&this.props.appModel.NavStateForView(u,e.name());return c.default.createElement(b.SlideshowPage,{appModel:this.props.appModel,table:e,tableSchema:e.tableSchema,rowId:this.state.rowId,rowValues:l,width:g.default.contentWidth()-(f.default.scrollbarWidth()||0),fixedHeightMode:!1,slideshowDisplayMode:null!==(a=null==d?void 0:d.SlideshowDisplayMode)&&void 0!==a?a:void 0,headerColumns:null!==(n=null==d?void 0:d.headerColumns)&&void 0!==n?n:void 0,imageDisplayType:null!==(r=null==d?void 0:d.ImageDisplayType)&&void 0!==r?r:void 0,mainSlideshowImageColumn:null!==(i=null==d?void 0:d.mainSlideshowImageColumn)&&void 0!==i?i:void 0,columnOrder:null!==(o=null==d?void 0:d.ColumnOrder)&&void 0!==o?o:void 0,maxNestedRows:null==d?void 0:d.MaxNestedRows,disableAllActions:!0})}return null}},{key:"renderListModal",value:function(){return this.renderList(null,g.default.contentWidth()-(f.default.scrollbarWidth()||0))}},{key:"renderListInline",value:function(e){return e>0?c.default.createElement("div",{ref:"inlineContainer",className:"ListTypeInput__inline-container"},this.renderList(this.maxNestedRows(),this.props.width)):null}},{key:"renderList",value:function(e,t){return c.default.createElement(v.default,Object.assign({},this.props,{parentId:this.props.parentId,showListInline:!0,disableAllActions:!0,maxNestedRows:e,onRowOpened:this.onRowSelected.bind(this),searchQuery:this.state.modalOpen?this.state.textBoxValue:void 0,sidewaysScroll:!this.state.modalOpen,allowedViewTypes:["gallery","deck","table"],width:t,height:null}))}},{key:"render",value:function(){if(this.props.attribute.isListOfRefs()){var e=this.props.attribute.getValues(this.props.value).length,t=e;return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"ListTypeInput"},this.renderListInline(t),this.renderControls(e),this.renderModal(e)))}var n=this.props.attribute.localizeWireValue(this.props.value);return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"TextTypeInput"},c.default.createElement("input",{"aria-label":this.props.label,type:"text",ref:"input",className:"input-block-level",autoCorrect:"off",value:n,disabled:this.renderReadOnly(),onChange:this.onChange.bind(this)})))}}]),a}(p.BaseTypeInput);t.default=R},238359:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(861655)),s=n(a(994993)),u=n(a(441588)),d=n(a(73808)),c=n(a(667294)),p=a(847494);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,l.default)(a,e);var t=f(a);function a(e){var n,i;return(0,r.default)(this,a),(i=t.call(this,e)).onChange=function(e){i._expanded=!1,i.setState({transientValue:e.target.value})},i.onBlur=function(e){(0,u.default)((n=(0,o.default)(i),(0,d.default)(a.prototype)),"onChange",n).call(n,e.target.value,{fullValue:!0}),i.setState({transientValue:null})},i.onRef=function(e){i.textarea=e},i.state=i.initialState(),i}return(0,i.default)(a,[{key:"initialState",value:function(){return{height:20}}},{key:"focus",value:function(){!this.renderReadOnly()&&this.textarea&&this.textarea.focus()}},{key:"updateHeight",value:function(e){if(e){var t=!1;0===e.scrollHeight&&(t=!0,$(e).closest(".FormEntry").show()),this.state.height<e.scrollHeight?(this._expanded=!0,this.setState({height:e.scrollHeight})):this.state.height>20&&this.state.height>e.scrollHeight&&this.setState({height:20}),t&&$(e).closest(".FormEntry").hide()}}},{key:"componentDidMount",value:function(){this.updateHeight(this.textarea)}},{key:"componentDidUpdate",value:function(e){this._expanded&&this.props.value===e.value||this.updateHeight(this.textarea)}},{key:"render",value:function(){var e=this.value()||"",t={height:Math.min(256,this.state.height.toString())+"px",resize:"none",overflow:this.state.height>256?"auto":"hidden"};return(0,u.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"LongTextTypeInput"},c.default.createElement("textarea",{ref:this.onRef,"aria-label":this.props.label,className:"input-block-level",style:t,disabled:this.renderReadOnly(),value:e,onBlur:this.onBlur,onChange:this.onChange})))}}]),a}(p.BaseTypeInput);t.default=h},279839:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=a(101225),p=n(a(775916)),f=a(847494),h=n(a(571524)),m=n(a(249e3)),v=n(a(365914));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,l.default)(a,e);var t=y(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state={transientValue:null,hasTransientValue:!1},n}return(0,i.default)(a,[{key:"useInlinePicker",value:function(){return!h.default.IsMobileBrowser()}},{key:"getValue",value:function(){var e=this.state,t=e.hasTransientValue,a=e.transientValue;if(t)return a;var n=this.props.value;return null==n||""===n?null:m.default.date().momentFromWireFormat(n)}},{key:"onAccept",value:function(e){this.setState({transientValue:e});var t=v.default.MDYformat(e.toDate());(0,o.default)((0,u.default)(a.prototype),"onChange",this).call(this,t,{fullValue:!0})}},{key:"onChange",value:function(e){this.setState({transientValue:e,hasTransientValue:!0})}},{key:"onBlur",value:function(){var e=this.state,t=e.transientValue;if(e.hasTransientValue){if(null==(i=t)||i.parsingFlags().empty)(0,o.default)((0,u.default)(a.prototype),"onChange",this).call(this,"",{fullValue:!0});else{var n=t.toDate(),r=n?v.default.MDYformat(n,!0):n;(0,o.default)((0,u.default)(a.prototype),"onChange",this).call(this,r,{fullValue:!0})}var i;(null==t||t.isValid())&&this.setState({transientValue:null,hasTransientValue:!1})}}},{key:"isChangeTriggered",value:function(){return!1}},{key:"render",value:function(){var e=this,t=this.useInlinePicker()?"inline":"dialog",n=this.getValue(),r=m.default.date().dateFormat;return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"MaterialDateTypeInput input-block-level"},d.default.createElement(c.MuiPickersUtilsProvider,{utils:p.default},d.default.createElement(c.KeyboardDatePicker,{variant:t,value:n,format:r,onChange:function(t){return e.onChange(t)},onBlur:function(){return e.onBlur()},onAccept:function(t){return e.onAccept(t)},InputProps:{disableUnderline:!0,fullWidth:!0},InputAdornmentProps:{style:{position:"absolute",right:0}},PopoverProps:{anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"}},style:{width:"100%"},helperText:""}))))}}]),a}(f.BaseTypeInput);t.default=g},54592:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(689728)),i=n(a(856690)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,r.default)(a)}(n(a(872865)).default);t.default=d},891012:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var f=function(e){(0,s.default)(a,e);var t=p(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state=n.initialState(),n.onChange=n.onChange.bind((0,o.default)(n)),n.onBlur=n.onBlur.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"initialState",value:function(){return{}}},{key:"onChange",value:function(e){this.setState({transientValue:e.target.value})}},{key:"onBlur",value:function(e){(0,l.default)((0,d.default)(a.prototype),"onChange",this).call(this,e.target.value,{fullValue:!0}),this.setState({transientValue:null})}},{key:"render",value:function(){var e=this.value()||"";return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"NameTypeInput"},c.default.createElement("input",{"aria-label":this.props.label,type:"text",ref:"input",className:"input-block-level",autoCorrect:"on",value:e,disabled:this.renderReadOnly(),onBlur:this.onBlur,onChange:this.onChange})))}}]),a}(a(847494).BaseTypeInput);t.default=f},954797:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"digits",value:function(){return 0}},{key:"step",value:function(){var e=this.props.attribute.auxData().StepValue;return e||(e="1"),e}}]),a}(n(a(325069)).default);t.default=d},807668:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(496486)),c=n(a(593302));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var f=function(e){(0,l.default)(a,e);var t=p(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"toWireFormat",value:function(e){try{return new c.default(e).div(100).toString()}catch(t){return e}}},{key:"fromWireFormat",value:function(e){if(null==e||""===e)return"";var t=e.toString();if(d.default.endsWith(t,"%")){t=t.substr(0,t.length-1);var a=parseFloat(t);return isNaN(a)?null:a}try{return new c.default(t).times(100).toString()}catch(e){return"?"}}},{key:"sliderDisplayValue",value:function(e){var t=this.fromWireFormat(e);return"?"===t?t:t+"%"}},{key:"step",value:function(){var e=this.props.attribute.auxData().StepValue;if(null==e){var t=this.percentDigits();e=String(Math.pow(.1,t).toFixed(t))}else{if(null==e||0===e)return e;e/=100}return e}},{key:"browserStep",value:function(){return 100*Number(this.step())}},{key:"prefix",value:function(){return"%"}},{key:"percentDigits",value:function(){return this.digits()+2}},{key:"digits",value:function(){var e=this.props.attribute.auxData().DecimalDigits;return null==e?0:e}},{key:"localizeValue",value:function(e){return(0,o.default)((0,u.default)(a.prototype),"localizeValue",this).call(this,this.fromWireFormat(e))}},{key:"delocalizeValue",value:function(e){return this.toWireFormat((0,o.default)((0,u.default)(a.prototype),"delocalizeValue",this).call(this,e))}},{key:"value",value:function(){return this.state&&null!=this.state.transientValue?this.toWireFormat(this.state.transientValue):this.props.value}},{key:"minValue",value:function(){var e=(0,o.default)((0,u.default)(a.prototype),"minValue",this).call(this);return null==e||0===e?e:e/100}},{key:"browserMinValue",value:function(){return(0,o.default)((0,u.default)(a.prototype),"minValue",this).call(this)}},{key:"maxValue",value:function(){var e=(0,o.default)((0,u.default)(a.prototype),"maxValue",this).call(this);return null==e||0===e?e:Number(e)/100}},{key:"browserMaxValue",value:function(){return(0,o.default)((0,u.default)(a.prototype),"maxValue",this).call(this)}}]),a}(n(a(325069)).default);t.default=f},622444:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var f=function(e){(0,s.default)(a,e);var t=p(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state=n.initialState(),n.onChange=n.onChange.bind((0,o.default)(n)),n.onBlur=n.onBlur.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"initialState",value:function(){return{}}},{key:"onChange",value:function(e){this.setState({transientValue:e.target.value})}},{key:"onBlur",value:function(e){(0,l.default)((0,d.default)(a.prototype),"onChange",this).call(this,e.target.value,{fullValue:!0}),this.setState({transientValue:null})}},{key:"render",value:function(){var e=this.value()||"";return(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"PhoneTypeInput"},c.default.createElement("input",{"aria-label":this.props.label,type:"tel",ref:"input",className:"input-block-level",autoCorrect:"off",value:e,disabled:this.renderReadOnly(),onChange:this.onChange,onBlur:this.onBlur})))}}]),a}(a(847494).BaseTypeInput);t.default=f},526428:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"prefix",value:function(){return this.props.attribute.auxData().CurrencySymbol||""}}]),a}(n(a(325069)).default);t.default=d},359612:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"allowOtherValues",value:function(){return!1}},{key:"allowMultiSelect",value:function(){return!1}}]),a}(n(a(901816)).default);t.default=d},275433:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.ReactRootBaseScribbleTypeInput=void 0;var i=n(a(364687)),o=n(a(856690)),l=n(a(689728)),s=n(a(441588)),u=n(a(861655)),d=n(a(994993)),c=n(a(73808)),p=n(a(496486)),f=n(a(667294)),h=n(a(294184)),m=n(a(817218)),v=n(a(581827)),y=n(a(365914)),g=n(a(112963)),w=n(a(895466)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=I(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(593186)),S=a(166089),T=a(351101),C=a(714067),R=a(429815),E=a(515128),k=n(a(944762));function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(I=function(e){return e?a:t})(e)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var D=function(e,t,a,n){return new(a||(a=Promise))((function(r,i){function o(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}s((n=n.apply(e,t||[])).next())}))},M=function(){return w.default.from("")},x=function(e){(0,u.default)(a,e);var t=A(a);function a(e){var n;return(0,o.default)(this,a),(n=t.call(this,e))._isMounted=!1,n.baseImageHeight=100,n.baseImageWidth=100,n.canvasRef=f.default.createRef(),n.imageRef=f.default.createRef(),n.clearMessage="",n.clearOnReset=!0,n.lockedIcon="fa-lock-alt",n.signaturePad=null,n.unlockedIcon="fa-unlocked-alt",n.onBackgroundImageLoad=function(){n.rescaleCanvas()},n.handleResize=p.default.debounce((function(e){n.rescaleCanvas()}),1e3),n.state=n.initialState(e),n}return(0,l.default)(a,[{key:"preferredWidth",get:function(){var e,t=(0,R.getMaxImageResolution)(),a=null!==(e=this.state.imageWidth)&&void 0!==e?e:0;return t===C.NO_RESIZE_WIDTH?C.NO_RESIZE_WIDTH:Math.max(t,a)}},{key:"tapToUnlock",get:function(){return!0}},{key:"saveButtonMode",get:function(){return"form"!==this.props.viewType}},{key:"transaction",get:function(){return this.props.useTransactions?S.AppGlobals.AppModel.dataManager.currentTransaction:void 0}},{key:"canvasDataUrl",get:function(){var e,t;return null!==(t=null===(e=this.signaturePad)||void 0===e?void 0:e.toDataURL())&&void 0!==t?t:""}},{key:"shouldUseIOSPlaceholder",value:function(){return!1}},{key:"focus",value:function(){}},{key:"initialState",value:function(e){return p.default.extend((0,s.default)((0,c.default)(a.prototype),"initialState",this).call(this,e),{locked:!0,color:"black"})}},{key:"originalValueHandle",get:function(){var e=this.props,t=e.attribute,a=e.table,n=e.rowKey,r=e.rowId;if(this.state.transientValue)return w.default.from(this.props.value,null==a?void 0:a.name());var i=null==a?void 0:a.lookupTableRow(n||r,this.pendingTransaction);if(i){var o=this.transaction?this.transaction.getInitialRowValues(a.name(),i.stableId):i.values,l=null==o?void 0:o[t.name()];if(l)return w.default.from(l,null==a?void 0:a.name())}return null}},{key:"runInitialValueHandle",value:function(){var e=this.props,t=e.table,a=e.attribute,n=e.dataContext,r=null==t?void 0:t.name(),i=a.defaultExpressionEvalTree();if(i){var o=i.run(n);if(o)return w.default.from(o,r)}return M()}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.initializeCanvas(),this.rescaleCanvas(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.signaturePad.off(),window.removeEventListener("resize",this.handleResize)}},{key:"updateState",value:function(e){}},{key:"shouldComponentUpdate",value:function(e,t){if(this.props.value!==e.value)return!0;if(y.default.compareObjs(this.state,t).length)return!0;var a=y.default.compareObjs(this.props,e);return 1!==a.length||"focused"!==a[0]}},{key:"componentDidUpdate",value:function(){var e=this;this.flattenIfNeeded(this.valueHandle).then((function(t){var a;t&&e.imageRef.current&&(e.imageRef.current.src=t),(null===(a=e.signaturePad)||void 0===a?void 0:a.isEmpty())||e.initializeCanvas(),e.rescaleCanvas()}))}},{key:"imageWidth",value:function(){return this.state.imageWidth||this.baseImageWidth}},{key:"imageHeight",value:function(){return this.state.imageHeight||this.baseImageHeight}},{key:"initializeCanvas",value:function(){var e=this;this.signaturePad&&this.teardownCanvas(),this.signaturePad=new m.default(this.canvasRef.current,{penColor:this.state.color,onEnd:function(){return e.handleUserDrawEvent(e.canvasDataUrl)}})}},{key:"teardownCanvas",value:function(){this.signaturePad.off(),this.signaturePad=null}},{key:"valueHandle",get:function(){var e,t=this.value(),a=null===(e=this.props.table)||void 0===e?void 0:e.name();return w.default.from(t,a)}},{key:"setNextValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.sendChanges,n=void 0===a?!this.saveButtonMode:a;return D(this,void 0,void 0,i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.flattenIfNeeded(e);case 2:n?this.sendChanges(e):this.setState({transientValue:e});case 3:case"end":return t.stop()}}),t,this)})))}},{key:"rescaleCanvas",value:function(){var e,t,a;try{var n=this.canvasRef.current;if(!n)return;var r=parseInt(null!==(t=null===(e=n.attributes.getNamedItem("width"))||void 0===e?void 0:e.value)&&void 0!==t?t:"0"),i=parseFloat(window.getComputedStyle(n).width);if(r&&i){var o=r/i;null===(a=n.getContext("2d"))||void 0===a||a.setTransform(o,0,0,o,0,0);var l,s=this.imageRef.current;if(s&&s.height&&s.width)l=s.height;else{var u=this.baseImageHeight/this.baseImageWidth;l=Math.floor(i*u)}var d=Math.floor(i);this.state.imageWidth===d&&this.state.imageHeight===l||this.setState({imageWidth:d,imageHeight:l})}}catch(e){b.default.ReportErrorOnce({errorMessage:"Unexpected Error in rescaleCanvas",error:(0,E.asError)(e)})}}},{key:"normalScaleCanvas",value:function(){var e,t;null===(t=null===(e=this.canvasRef.current)||void 0===e?void 0:e.getContext("2d"))||void 0===t||t.setTransform(1,0,0,1,0,0)}},{key:"handleResetTap",value:function(){this.clearOnReset&&this.setNextValue(this.runInitialValueHandle()),this.handleUnlock()}},{key:"handleUndoTap",value:function(){var e,t=this.valueHandle,a=this.originalValueHandle,n=t.nestedHandle();t.equals(a)&&!t.equals(e=this.runInitialValueHandle())?this.setNextValue(e):n?this.setNextValue(n):t.isBlank()?this.setNextValue(null!=a?a:this.runInitialValueHandle()):this.setNextValue(M())}},{key:"handleUnlock",value:function(){var e=this;setTimeout((function(){e._isMounted&&e.setState({locked:!1})}))}},{key:"handleLock",value:function(){this.setState({locked:!0,transientValue:void 0})}},{key:"handleUserDrawEvent",value:function(e){var t=w.default.from(e);this.valueHandle.isBlank()||t.setNestedHandle(this.valueHandle),this.setNextValue(t)}},{key:"flattenIfNeeded",value:function(e){return new Promise((function(t){e.nestedHandle()&&null==e.cachedFlattened()?e.flatten((function(e,a){e?((0,b.errorToDevConsole)(e),t(void 0)):t(a)})):t(void 0)}))}},{key:"handleSave",value:function(){return D(this,void 0,void 0,i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setNextValue(this.valueHandle,{sendChanges:!0});case 2:this.handleLock();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"sendChanges",value:function(e){var t,a;null===(a=(t=this.props).onValueChange)||void 0===a||a.call(t,e,{noAutoAdvance:!0,forceUpdate:!0})}},{key:"setImage",value:function(e){this.setNextValue(e)}},{key:"setColor",value:function(e){this.signaturePad.penColor=e,this.signaturePad._ctx.fillStyle=e,this.setState({color:e})}},{key:"showPhotoControl",value:function(){return!1}},{key:"renderBlocker",value:function(){var e=this,t=this.state.locked||this.renderReadOnly(),a=(0,h.default)("BaseScribbleTypeInput__blocker",{"BaseScribbleTypeInput__blocker-transparent":!this.tapToUnlock}),n=this.tapToUnlock?function(){return e.handleResetTap()}:null,r=this.props.appModel?this.props.appModel.MapActionName("Tap to unlock"):"Tap to unlock";return f.default.createElement(g.default,{className:a,preventDefault:!t,onTap:n},r)}},{key:"renderBackgroundImage",value:function(){var e,t,a=this.valueHandle;if(!a.isBlank()){var n=a.nestedHandle()?null!==(e=a.cachedFlattened())&&void 0!==e?e:"":null!==(t=a.resolve())&&void 0!==t?t:"";return f.default.createElement("img",{ref:this.imageRef,src:n,onLoad:this.onBackgroundImageLoad})}}},{key:"render",value:function(){var e,t=this,n=this.state.locked||this.renderReadOnly(),r=(0,h.default)(Object.assign({BaseScribbleTypeInput:!0,"BaseScribbleTypeInput--locked":n,"BaseScribbleTypeInput--tap-to-unlock":n&&this.tapToUnlock},this.classNames||null)),i=n?this.lockedIcon:this.unlockedIcon,o="";if(n)o=this.renderReadOnly()?"":this.clearMessage;else if(this.saveButtonMode&&!n){var l=(0,T.mapActionName)("Done");e=f.default.createElement(g.default,{className:"BaseScribbleTypeInput__save",onTap:function(){return t.handleSave()}},l)}var u=this.colors&&f.default.createElement("div",{className:"BaseScribbleTypeInput__color-picker"},f.default.createElement(k.default,{readOnly:this.renderReadOnly(),selected:this.state.color?[this.state.color.toLowerCase()]:[],options:this.colors,listAttribute:this.props.attribute,elementAttribute:this.props.attribute,colorMode:!0,colorModeScaleToFit:!0,ignoreCase:!0,width:this.props.width,onChange:function(e){var a=e[0]||"";t.setColor(a)}})),d=!n&&this.showPhotoControl()&&f.default.createElement("div",{className:"BaseScribbleTypeInput__photo-control"},f.default.createElement(g.default,{className:"fa fa-camera BaseScribbleTypeInput__photo-control--button",onTap:this.onPhotoControlClick.bind(this)}),this.renderUploadUtils()),p=(null!=u?u:d)&&f.default.createElement("div",{className:"BaseScribbleTypeInput__footer"},u,d),m=e||f.default.createElement(g.default,{className:"BaseScribbleTypeInput__lock",onTap:function(){return n?t.handleResetTap():t.handleLock()}},f.default.createElement("span",{className:"fa "+i}),o),v=f.default.createElement(g.default,{className:"BaseScribbleTypeInput__clear--button iconContainer",onTap:function(){return t.handleUndoTap()},preventDefault:!0},f.default.createElement("i",{className:"fa fa-rotate-left"}));return(0,s.default)((0,c.default)(a.prototype),"render",this).call(this,f.default.createElement("div",{className:r},f.default.createElement("div",{className:"BaseScribbleTypeInput__top-menu"},m,v),f.default.createElement("div",{className:"BaseScribbleTypeInput__canvas-container"},f.default.createElement("div",{className:"BaseScribbleTypeInput__image-container",style:{height:this.imageHeight()}},this.renderBackgroundImage()),f.default.createElement("canvas",{className:"BaseScribbleTypeInput__canvas resizable",ref:this.canvasRef,width:this.imageWidth(),height:this.imageHeight()})),this.renderBlocker(),p))}}]),a}(v.default);t.ReactRootBaseScribbleTypeInput=x},61369:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(496486)),p=n(a(667294)),f=a(847494),h=a(166089),m=n(a(944762)),v=n(a(605161)),y=n(a(571524)),g=a(44617),w=a(557310),b=n(a(962553)),S=n(a(388884));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var C=function(e){(0,s.default)(a,e);var t=T(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).onChange=n.onChange.bind((0,o.default)(n)),n.onScanResult=n.onScanResult.bind((0,o.default)(n)),n.addNewRef=n.addNewRef.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"allowMultiSelect",value:function(){return!1}},{key:"onChange",value:function(e,t){var a=e||"";c.default.isArray(e)&&(a=e[0]||""),this.props.onValueChange(a,t)}},{key:"onScanResult",value:function(e){if(this.allowMultiSelect())return console.error("Scanned input not supported with multiselect");var t=this.options(),a=this.refAttribute(),n=t.indexOf(e);if(n>=0)return this.onChange(e);var r=a.referencedTableName(),i=b.default.findByName(r,this.props.appModel).table;return i&&(n=t.map((function(e){return i.rowLabelValue(e)})).indexOf(e))>=0?this.onChange(t[n]):alert(this.props.appModel.MapActionName("The scan result didn't match any known entries."))}},{key:"focus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.valueReadOnly()&&t){var n=t.openListSelect&&this.refs.listSelect&&!$("#LaunchScreen").is(":visible"),r=this.showScannerButton(),i=this.showNfcScannerButton();if(r&&!i&&y.default.InMobileWebView())t.openCamera&&this.scannerButtonSelected();else if(!r&&i&&y.default.InMobileWebView())t.openCamera&&this.nfcScannerButtonSelected();else if(!this.scanOnly()&&t.isFirstEntry){var o=window.InputHandler.gunScanHistory.pop();o&&(new Date).getTime()-o.timestamp.getTime()<1500?(0,l.default)((0,d.default)(a.prototype),"onChange",this).call(this,this.findMatchingKey(o.value),{fullValue:!0}):window.InputHandler.queuedKeys.length?window.InputHandler.gunScanCallbacks.push((function(t){(0,l.default)((0,d.default)(a.prototype),"onChange",e).call(e,e.findMatchingKey(t.value),{fullValue:!0})})):n&&!this.scanOnly()&&this.refs.listSelect.onTap()}else n&&!this.scanOnly()&&this.refs.listSelect.onTap()}}},{key:"findMatchingKey",value:function(e){var t=this.referencedTable().table,a=this.props.dataContext;if(e&&t){for(var n,r=this.options(),i=[],o=e.toLowerCase(),l=0;l<r.length;l++){var s=r[l];if(o===s.toLowerCase())return e;var u=t.rowLabelValue(s,{dataContext:a}).toLowerCase();o===u?n=s:u.indexOf(o)>=0&&i.push(s)}if(n)return n;if(1===i.length)return i[0]}return e}},{key:"addNewRef",value:function(){var e,t=this,a=this.referencedTableName();if(null!=a&&""!==a){var n=function(){var e,n=t.props,r=n.attribute,i=n.table,o=n.tableRow,l=n.rowId,s=t.referencedTable().table;i&&s&&(w.ReactRootUIConfig.isReactRoot()?t.launchRelatedForm(a,null,null,r,{referencedBy:{refColumnName:r.name(),tableName:i.rootName(),stableId:null!==(e=null==o?void 0:o.stableId)&&void 0!==e?e:l}}):"form"===t.props.viewType?h.AppGlobals.ViewManager.KnownHandlers.form.LaunchNestedForm(a,null,null,t.props.attribute):(t.props.appState||h.AppGlobals.AppState).PushViewForResult(t,"addNewRef","form",!1,{TableName:a}))};this.refs.listSelect?null===(e=this.refs)||void 0===e||e.listSelect.onFinish(null,n,{noAutoAdvance:!0}):n()}}},{key:"onPushViewResult",value:function(e,t){if("addNewRef"===e){var a=this.props,n=a.attribute,r=a.appModel,i=a.value,o=a.table,l=a.rowId,s=a.useTransactions,u=this.props.row;if(t.rowId!==i)if(this.tableMode());else{if(!u&&s){var d=null==o?void 0:o.lookupTableRow(l);u=d&&d.copy().rowState}if(u)if(!u.updateAndValidate(n,t.rowId)){var c={tableName:o.name(),row:u.values(),appName:r.AppTemplate.Name,appId:r.AppTemplate.Id,appVersion:r.AppTemplate.Version,userSettings:r.GetUserSettings()};r.UpdateTableRow(c)}}}}},{key:"options",value:function(){var e=[];if(this.props.validOptions)e=this.props.validOptions;else if(this.props.suggestedValues)e=this.props.suggestedValues;else if(this.props.dataContext){e=this.props.dataContext.findTableKeyValues(this.referencedTableName()).data}return e}},{key:"referencedTableName",value:function(){return this.refAttribute().referencedTableName()}},{key:"referencedTable",value:function(){var e=this.referencedTableName();return e?b.default.findByName(e,this.props.appModel):{}}},{key:"refAttribute",value:function(){return this.props.attribute}},{key:"pendingRowKeys",value:function(){return this.props.dataContext?this.props.dataContext.pendingKeysForTable(this.referencedTableName()):[]}},{key:"render",value:function(){var e=this.allowMultiSelect(),t=this.options();if(!t)return p.default.createElement("div",null);var n=this.referencedTableName();if(!n)return console.warn("No referencedTableName",this.refAttribute()),p.default.createElement("div",null);var r=this.props.value,i=this.props,o=i.attribute,s=i.table,u=i.useTransactions,c=i.viewType,f=i.dataContext,h=i.appModel,y=i.width,b=i.height;e&&(r=r?o.valueFromWireFormat(r):[]);var T=this.referencedTable().table;if(null==T)return console.warn("Ref input couldn't find referenced table named ",n),p.default.createElement("div",null);var C,R=w.ReactRootUIConfig.isReactRoot()&&this.canLaunchRelatedForm(n),E=u&&"form"===c,k=T.allowsAdd()&&!this.tableMode()&&(!E||R);return C="Buttons"!==o.auxData().InputMode||this.tableMode()?w.ReactRootUIConfig.isInDesktopExperience()&&g.dynamicRollouts.includeByOwnerId("UseDropdownsOnDesktop")?p.default.createElement(S.default,{appModel:h,dataContext:f,attribute:this.refAttribute(),allowAdds:!1,allowAddsThroughRef:k,addNewRefHandler:k?this.addNewRef:void 0,multiselect:e,options:t,table:s,tableSchema:null==T?void 0:T.tableSchema,label:o.displayName(f),savedSelection:r,onChange:this.onChange,readOnly:this.renderReadOnly(),isTableQuickEdit:this.tableMode(),transaction:this.pendingTransaction}):p.default.createElement(v.default,{typeInput:this,ref:"listSelect",title:o.displayName(f),readOnly:this.renderReadOnly(),selected:r,options:t,optionAttribute:this.refAttribute(),multiselect:e,allowAdds:!1,allowAddRef:k,addNewRefHandler:k?this.addNewRef:void 0,table:s,appModel:h,dataContext:f,renderInlineButtons:this.renderInlineButtons,getInputStyleWithInlineButtons:this.getInputStyleWithInlineButtons,onChange:this.onChange,height:b,preventImmediateClose:!window.APPSHEET_TEST_CONTEXT&&void 0}):p.default.createElement(m.default,{readOnly:this.renderReadOnly(),selected:[r],elementAttribute:this.refAttribute(),options:t,multiselect:e,table:s,dataContext:f,appModel:h,width:y,onChange:this.onChange}),(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,p.default.createElement("div",{className:"RefTypeInput"},C))}}]),a}(f.BaseTypeInput);C.supportsValidOptions=!0;var R=C;t.default=R},127373:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ReactRootSignatureTypeInput=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=a(275433);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var p=function(e){(0,l.default)(a,e);var t=c(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).baseImageWidth=500,n.baseImageHeight=200,n.clearMessage="",n.clearOnReset=!0,n.classNames={SignatureTypeInput:!0},n}return(0,i.default)(a,[{key:"renderBlocker",value:function(){var e=!!this.props.value;return(0,o.default)((0,u.default)(a.prototype),"renderBlocker",this).call(this,e)}}]),a}(n(a(323409)).default),f=function(e){(0,l.default)(a,e);var t=c(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).baseImageWidth=500,n.baseImageHeight=200,n.clearMessage="",n.clearOnReset=!0,n.classNames={SignatureTypeInput:!0},n}return(0,i.default)(a,[{key:"tapToUnlock",get:function(){return!this.props.value}}]),a}(d.ReactRootBaseScribbleTypeInput);t.ReactRootSignatureTypeInput=f;var h=p;t.default=h},872865:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TextTypeInputDataTestIds=void 0;var r,i=n(a(856690)),o=n(a(689728)),l=n(a(366115)),s=n(a(441588)),u=n(a(861655)),d=n(a(994993)),c=n(a(73808)),p=n(a(496486)),f=n(a(667294)),h=a(847494),m=n(a(571524));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}t.TextTypeInputDataTestIds=r,function(e){e.Input="text-type-input"}(r||(t.TextTypeInputDataTestIds=r={}));var y=function(e){(0,u.default)(a,e);var t=v(a);function a(e){var n;return(0,i.default)(this,a),(n=t.call(this,e)).state=n.initialState(),n.onChange=n.onChange.bind((0,l.default)(n)),n.onBlur=n.onBlur.bind((0,l.default)(n)),n.onScanResult=n.onScanResult.bind((0,l.default)(n)),n}return(0,o.default)(a,[{key:"initialState",value:function(){return{transientValue:null}}},{key:"onChange",value:function(e){this.setState({transientValue:e.target.value})}},{key:"onBlur",value:function(e){(0,s.default)((0,c.default)(a.prototype),"onChange",this).call(this,e.target.value,{fullValue:!0}),this.setState({transientValue:null})}},{key:"onScanResult",value:function(e){e&&(0,s.default)((0,c.default)(a.prototype),"onChange",this).call(this,e,{fullValue:!0}),$(document.activeElement).trigger("blur"),$(this.refs.input).trigger("blur",{autoAdvance:!0})}},{key:"focus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.valueReadOnly()){var n=this.showScannerButton(),r=this.showNfcScannerButton();if(n&&!r&&m.default.InMobileWebView())t.openCamera&&this.scannerButtonSelected();else if(!n&&r&&m.default.InMobileWebView())t.openCamera&&this.nfcScannerButtonSelected();else if(t.isFirstEntry){var i=window.InputHandler.gunScanHistory.pop(),o=p.default.get(window,"InputHandler.lastKeyupActiveElement.tagName");i&&(new Date).getTime()-i.timestamp.getTime()<1500?"INPUT"!==o?(0,s.default)((0,c.default)(a.prototype),"onChange",this).call(this,i.value,{fullValue:!0}):this.scanOnly()||(0,s.default)((0,c.default)(a.prototype),"focus",this).call(this):window.InputHandler.queuedKeys.length?window.InputHandler.gunScanCallbacks.push((function(t){(0,s.default)((0,c.default)(a.prototype),"onChange",e).call(e,t.value,{fullValue:!0})})):(0,s.default)((0,c.default)(a.prototype),"focus",this).call(this)}else this.scanOnly()||(0,s.default)((0,c.default)(a.prototype),"focus",this).call(this)}}},{key:"value",value:function(){var e=(0,s.default)((0,c.default)(a.prototype),"value",this).call(this);return null==e?"":String(e).replace(/[\r\n\t]+/g," ")}},{key:"shouldSelectAllOnFocus",value:function(){return!0}},{key:"render",value:function(){var e=this.renderInlineButtons(),t=this.getInputStyleWithInlineButtons(e);return(0,s.default)((0,c.default)(a.prototype),"render",this).call(this,f.default.createElement("div",{className:"TextTypeInput"},f.default.createElement("input",{"aria-label":this.props.label,"data-testid":r.Input,type:"text",ref:"input",style:t,className:"input-block-level",autoCorrect:"on",value:this.value(),disabled:this.renderReadOnly(),onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus}),f.default.createElement("div",{className:"TextTypeInput__inline-buttons"},e)))}}]),a}(h.BaseTypeInput);t.default=y},714788:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(689728)),i=n(a(856690)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,i.default)(this,a),t.apply(this,arguments)}return(0,r.default)(a)}(n(a(656798)).default);t.default=d},718415:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=a(847494),f=n(a(571524));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var m=function(e){(0,s.default)(a,e);var t=h(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state=n.initialState(),n.onChange=n.onChange.bind((0,o.default)(n)),n.onBlur=n.onBlur.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"initialState",value:function(){return{}}},{key:"useTextType",value:function(){return!f.default.SupportsDateTimeInputs()||f.default.IsIOSBrowser()&&!this.props.attribute.ignoreSeconds()}},{key:"normalizeValue",value:function(e){return this.props.attribute.ignoreSeconds()&&e&&e.match(/^\d{2}:\d{2}$/)&&(e+=":00"),e}},{key:"onChange",value:function(e){this.setState({transientValue:e.target.value});var t=e.nativeEvent.target;window.setTimeout((function(){t.defaultValue=""}),0)}},{key:"onBlur",value:function(e){var t=this.normalizeValue(e.target.value);(0,l.default)((0,d.default)(a.prototype),"onChange",this).call(this,t,{fullValue:!0}),this.setState({transientValue:null})}},{key:"componentDidMount",value:function(){if(!this.useTextType()&&this.refs.input){var e=this.refs.input.value;this.refs.input.value="",this.refs.input.defaultValue="",this.refs.input.value=e}}},{key:"componentDidUpdate",value:function(){this.refs.input&&(this.refs.input.defaultValue="")}},{key:"render",value:function(){var e=this.value()||"",t=this.props.attribute.ignoreSeconds();return t&&e&&e.match(/^\d{2}:\d{2}:/)&&(e=e.replace(/:.{0,2}?$/,"")),(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"TimeTypeInput"},c.default.createElement("input",{"aria-label":this.props.label,type:this.useTextType()?"text":"time",ref:"input",step:t?60:1,placeholder:"hh:mm"+(t?"":":ss"),className:"input-block-level",autoCorrect:"off",value:e,disabled:this.renderReadOnly(),onBlur:this.onBlur,onChange:this.onChange}),c.default.createElement("div",{className:"DateTypeInput__inline-buttons"},c.default.createElement("i",{className:"far fa-clock"}))))}}]),a}(p.BaseTypeInput);t.default=m},435555:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(366115)),l=n(a(441588)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=n(a(667294)),p=a(847494),f=n(a(150198));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var m=function(e){(0,s.default)(a,e);var t=h(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state=n.initialState(),n.onLinkTextChange=n.onLinkTextChange.bind((0,o.default)(n)),n.onUrlChange=n.onUrlChange.bind((0,o.default)(n)),n.onLinkTextBlur=n.onLinkTextBlur.bind((0,o.default)(n)),n.onUrlBlur=n.onUrlBlur.bind((0,o.default)(n)),n}return(0,i.default)(a,[{key:"initialState",value:function(){return{transientValue:null}}},{key:"value",value:function(){var e=this.state.transientValue;return null==e&&(e=this.props.attribute.valueFromWireFormat(this.props.value)),e}},{key:"onLinkTextChange",value:function(e){var t=e.target.value,a=this.value();a.linkText=t,this.setState({transientValue:a})}},{key:"onUrlChange",value:function(e){var t=e.target.value,a=this.value();a.url=t,this.setState({transientValue:a})}},{key:"onLinkTextBlur",value:function(){this.submitNormalized(this.value())}},{key:"onUrlBlur",value:function(){this.submitNormalized(this.value())}},{key:"submitNormalized",value:function(e){var t=e.linkText,n=e.url;n&&!n.match(/^\w+:\/\//)&&(n.match(/^\w+\.\w+$/)?n="http://www."+n:n.match(/^\w+\.\w+\.\w+$/)&&(n="http://"+n),e.url=n),""===t&&(e.linkText=n),e=f.default.valueToWireFormat(e,"Url",this.props.attribute.auxData()),(0,l.default)((0,d.default)(a.prototype),"onChange",this).call(this,e,{fullValue:!0}),this.setState({transientValue:null})}},{key:"render",value:function(){var e,t=this.value();return this.props.attribute.auxData().IsHyperLink&&(e=c.default.createElement("input",{"aria-label":this.props.label,type:"text",placeholder:"link text",className:"input-block-level",autoCorrect:"off",value:t.linkText,disabled:this.renderReadOnly(),onBlur:this.onLinkTextBlur,onChange:this.onLinkTextChange})),(0,l.default)((0,d.default)(a.prototype),"render",this).call(this,c.default.createElement("div",{className:"UrlTypeInput"},e,c.default.createElement("input",{"aria-label":this.props.label,type:"url",ref:"input",placeholder:"http://",className:"input-block-level",autoCorrect:"off",value:t.url,disabled:this.renderReadOnly(),onBlur:this.onUrlBlur,onChange:this.onUrlChange})))}}]),a}(p.BaseTypeInput);t.default=m},465678:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"allowMultiSelect",value:function(){return"EnumList"===this.props.attribute.type()}},{key:"allowOtherValues",value:function(){return this.props.suggestedValues&&!this.props.validOptions}},{key:"allowedValues",value:function(e){return e||(e=this.props),e.validOptions||e.suggestedValues||[]}}]),a}(n(a(901816)).default);t.default=d},932742:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(667294)),c=n(a(45697)),p=n(a(581827)),f=n(a(112963)),h=n(a(571524)),m=a(263198);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){(0,l.default)(a,e);var t=v(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"renderReadOnly",value:function(){return!h.default.InAndroidWebView()||(0,o.default)((0,u.default)(a.prototype),"renderReadOnly",this).call(this)}},{key:"startNativeInput",value:function(e){m.JeeneeBrowserAPI.takeVideo(e)}},{key:"renderUploadUtils",value:function(){var e=this,t="VideoInputControl PhotoInputControl InputControl",n=function(){return e.onPhotoControlClick()},r="Open camera";return this.renderReadOnly()&&(t+=" disabled",n=function(){},r=(0,o.default)((0,u.default)(a.prototype),"renderReadOnly",this).call(this)?"This column is not editable":"Video upload not available on this platform"),d.default.createElement(f.default,{onTap:n,className:t,title:r},d.default.createElement("i",{className:"icon fa fa-fw fa-video"}))}},{key:"renderThumbnail",value:function(){var e,t=this.props.value;return(null==t?void 0:t.value)?e="/jeenee_url?path=".concat(t.value()):"string"==typeof t&&(e=t),null==e||""===e?null:d.default.createElement("video",{src:e+"#t=0.1",controls:!0,preload:"metadata",style:{maxWidth:"100%"}})}},{key:"render",value:function(){return(0,o.default)((0,u.default)(a.prototype),"render",this).call(this,d.default.createElement("div",{className:"VideoInputControlBase"},this.renderUploadUtils(),this.renderThumbnail()))}}]),a}(p.default);y.propTypes={attribute:c.default.object.isRequired,tableSchema:c.default.object.isRequired,appModel:c.default.object,viewType:c.default.string,value:c.default.any,valid:c.default.bool,editable:c.default.bool,onValueChange:c.default.func};var g=y;t.default=g},5366:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=n(a(441588)),l=n(a(861655)),s=n(a(994993)),u=n(a(73808)),d=n(a(496486)),c=n(a(667294)),p=n(a(7975)),f=a(46239),h=n(a(314247)),m=n(a(112963)),v=n(a(368142));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,l.default)(a,e);var t=y(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).onOverlayTap=function(){n.defaultValue()&&(n.onExpand(),n.setValue(n.defaultValue(),null,{fullValue:!0}))},n}return(0,i.default)(a,[{key:"initialState",value:function(e){e=e||this.props;var t=(0,o.default)((0,u.default)(a.prototype),"initialState",this).call(this,e);return e.value&&e.attribute.validateValue(e.value)?t.zoom=3:t.zoom=f.ImageMapType.MIN_ZOOM,t}},{key:"focus",value:function(){}},{key:"defaultValue",value:function(){return"50, 50"}},{key:"customMapType",value:function(){var e=this,t=this.props.attribute;if(t){var a=this.props.baseImage;if(a){var n=f.ImageMapType.getForUrl(a);n.whenReady((function(a){e.props.attribute===t&&null==a&&e.state.customMapType!==n&&e.setState({customMapType:n})}))}}return this.state.customMapType}},{key:"onPinDragEnd",value:function(e,t,a){var n=this,r=e.latLng.lat(),i=e.latLng.lng(),o=f.ImageMapType.fromLatLngToXYString(r,i);this.state.modalOpen?this.setState({centerLat:h.default.getCenterLat(a),centerLng:h.default.getCenterLng(a)},(function(){n.setValue(o,null,{fullValue:!0})})):this.setValue(o,null,{fullValue:!0})}},{key:"renderCornerButton",value:function(){return this.value()&&!this.renderReadOnly()?c.default.createElement(m.default,{className:"BaseCoordinateTypeInput__input-clear",onTap:this.onClearTap},c.default.createElement("i",{className:"fa fa-times-circle"})):c.default.createElement("div",{className:"BaseCoordinateTypeInput__input-clear"})}},{key:"renderExpandButton",value:function(){return c.default.createElement(m.default,{className:"BaseCoordinateTypeInput__expand",onTap:this.onExpand},c.default.createElement("i",{className:"fa fa-expand"}))}},{key:"renderMap",value:function(){if(h.default.disabled)return null;var e,t,a,n,r=this.props,i=this.value(),o=r.attribute.name(),l=d.default.clone(r.dataContext.rowData),s=r.table,u=r.tableSchema,p=[],m=this.customMapType();if(!m)return null;var y=this.state.modalOpen?this.modalMapOptions():this.inlineMapOptions();if(i&&r.attribute.validateValue(i)){var g=f.ImageMapType.fromXYStringToLatLng(i);a=g.lat,n=g.lng,this.renderReadOnly()?p=d.default.compact([h.default.makeMapItem(l,s,u,o,a,n)]):(e={dragend:this.onPinDragEnd.bind(this),dragstart:this.onPinDragStart.bind(this)},t={latitude:a,longitude:n})}else y.zoomControl=!1;return c.default.createElement(v.default,Object.assign({},this.props,{ref:this.onMapMount,centerLat:null!=this.state.centerLat?this.state.centerLat:a,centerLng:null!=this.state.centerLng?this.state.centerLng:n,items:p,zoom:this.state.zoom,mapType:this.state.mapType,customMapType:m,mapColumn:o,draggablePinEventHandlers:e,draggablePinOptions:t,mapEventHandlers:this.mapEventHandlers(),showCurrentLocation:!1,blockLinkToMaps:!0,mapOptions:y}))}}]),a}(p.default);t.default=g},462485:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.TypeInputsApi=void 0;var i=n(a(617166)),o=n(a(138198)),l=n(a(5366)),s=n(a(10428)),u=n(a(718415)),d=n(a(948464)),c=n(a(726134)),p=n(a(641810)),f=n(a(923769)),h=n(a(352565)),m=n(a(685083)),v=n(a(359612)),y=n(a(954797)),g=n(a(256023)),w=n(a(807668)),b=n(a(526428)),S=n(a(346516)),T=n(a(415664)),C=n(a(833494)),R=Y(a(168410)),E=Y(a(127373)),k=n(a(656798)),I=n(a(932742)),A=n(a(714788)),D=n(a(39333)),M=n(a(872865)),x=n(a(238359)),N=n(a(891012)),O=n(a(318887)),_=n(a(811123)),B=n(a(622444)),P=n(a(775381)),L=n(a(465678)),V=n(a(54592)),F=n(a(61369)),H=n(a(435555)),W=n(a(107221)),U=a(166089),j=n(a(279839)),z=a(251347),G=a(557310);function K(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(K=function(e){return e?a:t})(e)}function Y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=K(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}var q={Address:i.default,LatLong:o.default,XY:l.default,Date:s.default,MaterialDateTypeInput:j.default,Time:u.default,DateTime:d.default,Duration:c.default,Color:p.default,Enum:f.default,EnumList:h.default,List:m.default,Progress:v.default,Number:y.default,Decimal:g.default,Percent:w.default,Price:b.default,ChangeCounter:S.default,ChangeTimestamp:T.default,ChangeLocation:C.default,Drawing:R.default,ReactRootDrawingTypeInput:R.ReactRootDrawingTypeInput,Signature:E.default,ReactRootSignatureTypeInput:E.ReactRootSignatureTypeInput,Image:k.default,Video:I.default,Thumbnail:A.default,File:D.default,Text:M.default,LongText:x.default,Name:N.default,Email:O.default,EmailAutoComplete:_.default,Phone:B.default,App:P.default,Validity:L.default,MultiColumnKey:V.default,Ref:F.default,Url:H.default,"Yes/No":W.default,PostalCode:M.default},$={lookup:function(e,t){var a=q[e];return"Date"===e&&U.AppGlobals.AppModel.inRollout("materialDatePicker")&&(a=q.MaterialDateTypeInput),"Signature"===e&&G.ReactRootUIConfig.isReactRoot()&&(a=q.ReactRootSignatureTypeInput),"Drawing"===e&&G.ReactRootUIConfig.isReactRoot()&&(a=q.ReactRootDrawingTypeInput),!t.isValidityEnum()&&!t.hasSuggestedValues()||a.supportsValidOptions?"Email"===e&&(z.dynamicRollouts.includeByOwnerId("GwsEmailAutoComplete")||z.dynamicRollouts.includeByOwnerId("GwsEmailAutoCompleteByTeam"))&&(a=q.EmailAutoComplete):a=q.Validity,a}};t.TypeInputsApi=$},735894:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedFileObject=function(e){var t=this,a=e.displayURL,n=(0,s.useState)(s.default.createElement(s.default.Fragment,null)),r=(0,i.default)(n,2),l=r[0],d=r[1];return(0,s.useEffect)((function(){(0,u.isAppSheetGetFileUrl)(a)&&function(e){return f(this,void 0,void 0,o.default.mark((function t(){var a,n;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v(),!m.hasOwnProperty(e)){t.next=3;break}return t.abrupt("return",m[e]);case 3:return t.next=5,fetch(e);case 5:return a=t.sent,t.t0=URL,t.next=9,a.blob();case 9:return t.t1=t.sent,n=t.t0.createObjectURL.call(t.t0,t.t1),t.abrupt("return",m[e]=n);case 12:case"end":return t.stop()}}),t)})))}(a).then((function(e){return f(t,void 0,void 0,o.default.mark((function t(){var a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:a=t.sent.headers.get("Content-Type"),/application\/pdf(;.*)?/.test(a)?d(s.default.createElement(c.ViewPdf,{url:e})):/image\/(jpeg|png|gif|tiff)(;.*)?/.test(a)&&d(s.default.createElement(h,{displayURL:e}));case 4:case"end":return t.stop()}}),t)})))})).catch((function(e){}))}),[a]),l};var i=n(a(627424)),o=n(a(364687)),l=n(a(496486)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294)),u=a(365914),d=a(307827),c=a(988739);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}var f=function(e,t,a,n){return new(a||(a=Promise))((function(r,i){function o(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}s((n=n.apply(e,t||[])).next())}))};function h(e){var t=e.displayURL;return s.default.createElement("div",{style:{height:"100%",maxWidth:"90%",margin:"0 auto",width:"fit-content"}},s.default.createElement("img",{src:t,style:{maxWidth:"100%",maxHeight:"100%"}}))}var m={},v=l.default.once((function(){d.onAppTemplateLoadCallbacks.add((function(){l.default.forOwn(m,(function(e,t){URL.revokeObjectURL(e),delete m[t]}))}))}))},260493:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.IfScreenIs=void 0;var r=n(a(667294)),i=a(874004);t.IfScreenIs=function(e){var t=(0,i.useWidescreen)();return t&&e.wide||!t&&e.narrow?r.default.createElement(r.default.Fragment,null,e.children):null}},988739:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.ViewPdf=function(e){var t=this,a=e.url,n=(0,s.useState)(null),r=(0,i.default)(n,2),d=r[0],c=r[1],f=(0,s.useState)(null),h=(0,i.default)(f,2),v=h[0],y=h[1],g=(0,s.useRef)(null);if((0,s.useEffect)((function(){null===d&&m(t,void 0,void 0,o.default.mark((function e(){var t,n,r,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(a);case 3:return n=e.sent,r=(null===(t=g.current)||void 0===t?void 0:t.clientWidth)||800,e.next=7,Promise.all(n.map((function(e){return T(e,r)})));case 7:i=e.sent,c(i),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),p.default.ReportError({errorMessage:"Caught error in ViewPdf",error:l.default.isError(e.t0)?e.t0:new Error("".concat(e.t0))}),y("Error displaying PDF");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))}),[a,g,d]),null!==v)return s.default.createElement("div",{style:{width:"100%",height:"100%",display:"grid"}},s.default.createElement("p",{style:{margin:"auto"}},v));if(null!==d)return s.default.createElement(S,{images:d});return s.default.createElement("div",{ref:g,style:{width:"100%",height:"100%",display:"grid"}},s.default.createElement(u.default,{style:{margin:"auto"}}))};var i=n(a(627424)),o=n(a(364687)),l=n(a(496486)),s=h(a(667294)),u=n(a(250113)),d=h(a(299299)),c=a(307827),p=n(a(593186));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}var m=function(e,t,a,n){return new(a||(a=Promise))((function(r,i){function o(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}s((n=n.apply(e,t||[])).next())}))};d.GlobalWorkerOptions.workerSrc="/pdf-worker";var v=null;function y(e){return m(this,void 0,void 0,o.default.mark((function t(){var a,n,r,i;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=d.getDocument({url:e,worker:null!=v?v:v=new d.PDFWorker}),t.next=3,a.promise;case 3:for(n=t.sent,r=[],i=0;i<n.numPages;++i)r.push(n.getPage(i+1));return t.abrupt("return",Promise.all(r));case 7:case"end":return t.stop()}}),t)})))}var g={},w=l.default.once((function(){c.onAppTemplateLoadCallbacks.add((function(){for(var e in g)delete g[e]}))}));function b(e){return m(this,void 0,void 0,o.default.mark((function t(){var a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w(),!g.hasOwnProperty(e)){t.next=3;break}return t.abrupt("return",g[e]);case 3:return t.next=5,y(e);case 5:return a=t.sent,t.abrupt("return",g[e]=a);case 7:case"end":return t.stop()}}),t)})))}function S(e){var t=e.images;return s.default.createElement("div",{style:{height:"100%",maxWidth:"800px",margin:"0 auto",overflow:"auto"}},t.map((function(e,t){return s.default.createElement("img",{key:t,src:e,style:{display:"block",maxWidth:"100%",marginBottom:"5px"}})})))}function T(e,t){return m(this,void 0,void 0,o.default.mark((function a(){var n,r,i,l,s;return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.getViewport({scale:1}).width,r=e.getViewport({scale:t/n}),i=document.createElement("canvas"),l=i.getContext("2d"),i.width=r.width,i.height=r.height,s=e.render({viewport:r,canvasContext:l}),a.next=9,s.promise;case 9:return a.abrupt("return",i.toDataURL());case 10:case"end":return a.stop()}}),a)})))}},57846:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.FilterAttributeButton=void 0;var r=n(a(667294)),i=n(a(285963)),o=a(697211),l=a(56749),s=a(698739);t.FilterAttributeButton=function(e){var t=e.tableSchema,a=e.attributeName,n=(0,s.useFilterContext)().openFilterEditor;return r.default.createElement(o.IconButton,{onClick:function(){var e=t.findAttributeByName(a);n(e)},"aria-label":"filter",style:{padding:"3px"}},r.default.createElement(i.default,{fontSize:"small",style:{verticalAlign:"middle",fontSize:"0.8125rem",color:(0,l.themeColor)("primaryText")}}))}},698739:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.useFilterContext=t.InlineFilterContextProvider=t.GlobalFilterContextProvider=t.FilterContext=void 0;var i=n(a(627424)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294)),l=a(616971),s=a(218546),u=a(318926),d=a(351101),c=a(692479),p=a(307074),f=a(29827),h=a(957831),m=a(343611),v=a(557310),y=a(319598),g=a(166089);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(w=function(e){return e?a:t})(e)}function b(){var e,t=null===(e=(0,h.getAppState)())||void 0===e?void 0:e.CurrentUIState,a=(0,h.getViewSpecificUIState)(),n=null==t?void 0:t.Root,r=null==a?void 0:a.TableName,i=null==a?void 0:a.UserDefinedFilters;return[(0,o.useMemo)((function(){return(0,y.getFilterQuery)(n,r,i)}),[n,r,i]),function(e){g.AppGlobals.StateChangeHandler.SetUserDefinedFilters(e.serialize())}]}function S(){throw new Error("singleton hook updated too soon")}function T(e){return(0,l.singletonHook)([e,S],(function(){return(0,o.useState)(e)}))}var C=T(!1),R=function(){var e=C(),t=(0,i.default)(e,2),a=t[0],n=t[1];return[a,function(e){n(e);var t=e?s.AppEventName.FilterDrawerOpened:s.AppEventName.FilterDrawerClosed;u.logger.logAppEvent(t)}]},E=T(void 0),k={query:new m.Query([]),filterEditorIsOpen:!1,setQuery:function(){throw new Error("setQuery called before filter context is ready")},openFilterEditor:function(){throw new Error("open called before filter context is ready")},closeFilterEditor:function(){throw new Error("close called before filter context is ready")},filterBarIsHidden:!0,contextIsReady:!1},I=o.default.createContext(k);t.FilterContext=I,I.displayName="FilterContext";t.useFilterContext=function(){var e,t=(0,o.useContext)(I),a=b(),n=(0,i.default)(a,2),r=n[0],l=n[1],s=(0,h.useTableSchema)(),u=E(),d=(0,i.default)(u,2),c=d[0],p=d[1],f=R(),m=(0,i.default)(f,2),g=m[0],w=m[1];return v.ReactRootUIConfig.isReactRoot()?t:{query:r,setQuery:l,tableSchema:s,attribute:c,filterEditorIsOpen:g,openFilterEditor:function(e){p(e),w(!0)},closeFilterEditor:function(){w(!1)},filterBarIsHidden:y.HIDE_FILTERS_FOR_VIEWS.has(null===(e=(0,h.getViewSpecificUIState)())||void 0===e?void 0:e.Root),contextIsReady:!0}};t.InlineFilterContextProvider=function(e){var t=e.tableName,a=e.viewType,n=e.inDashboard,r=e.children,l=(0,o.useRef)(!1),s=(0,p.useViewStateDispatch)(),u=(0,p.useViewStateSelector)(f.getMutableState),h=(0,o.useState)((0,y.getFilterQuery)(a,t,u.UserDefinedFilters)),m=(0,i.default)(h,2),v=m[0],g=m[1],w=(0,o.useState)(),b=(0,i.default)(w,2),S=b[0],T=b[1],C=(0,o.useState)(!1),R=(0,i.default)(C,2),E=R[0],A=R[1],D=(0,o.useState)(k),M=(0,i.default)(D,2),x=M[0],N=M[1];return(0,o.useEffect)((function(){if(l.current){if(v&&"dashboard"!==a&&!n){var e=v.serialize();s((0,c.replaceView)({ViewState:Object.assign(Object.assign({},u),{UserDefinedFilters:e})}))}}else l.current=!0}),[v]),(0,o.useEffect)((function(){var e,n=(null===(e=(0,d.getAppModel)())||void 0===e?void 0:e.findTableCollection(t)).tableSchema,r=y.HIDE_FILTERS_FOR_VIEWS.has(a);N({query:v.cloneAndRemoveEmptyFilters(),setQuery:g,tableSchema:n,attribute:S,filterEditorIsOpen:E,openFilterEditor:function(e){T(e),A(!0)},closeFilterEditor:function(){A(!1)},filterBarIsHidden:r,contextIsReady:!0})}),[t,a,v,S,E]),o.default.createElement(I.Provider,{value:x},r)};t.GlobalFilterContextProvider=function(e){var t,a=e.viewType,n=e.children,r=b(),l=(0,i.default)(r,2),s=l[0],u=l[1],d=(0,h.useTableSchema)(),c=E(),p=(0,i.default)(c,2),f=p[0],m=p[1],g=R(),w=(0,i.default)(g,2),S=w[0],T=w[1],C=(0,o.useState)(k),A=(0,i.default)(C,2),D=A[0],M=A[1],x=a||(null===(t=(0,h.getViewSpecificUIState)())||void 0===t?void 0:t.Root)||"";return(0,o.useEffect)((function(){M({query:s,setQuery:u,tableSchema:d,attribute:f,filterEditorIsOpen:S,openFilterEditor:function(e){m(e),T(!0)},closeFilterEditor:function(){T(!1)},filterBarIsHidden:y.HIDE_FILTERS_FOR_VIEWS.has(x),contextIsReady:!0})}),[s,d,f,S,x]),v.ReactRootUIConfig.isInDesktopExperience()?o.default.createElement(I.Provider,{value:D},n):o.default.createElement(o.default.Fragment,null,n)}},874004:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WIDESCREEN_BREAKPOINT=void 0,t.useWidescreen=function(){return(0,n.useWindowWidth)()>=768};var n=a(4355);t.WIDESCREEN_BREAKPOINT=768},146913:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eventTypes=t.default=t.ROW_SWIPED_RIGHT=t.ROW_SWIPED_LEFT=t.ROW_SELECTED=t.FORM_SAVED=t.FORM_CANCELED=void 0;var n=a(664583),r={name:"Row Selected"};t.ROW_SELECTED=r;var i={name:"Form Saved"};t.FORM_SAVED=i;var o={name:"Form Canceled"};t.FORM_CANCELED=o;var l={name:"Row Swiped Left"};t.ROW_SWIPED_LEFT=l;var s={name:"Row Swiped Right"};t.ROW_SWIPED_RIGHT=s;var u={ROW_SELECTED:r,FORM_SAVED:i,FORM_CANCELED:o,ROW_SWIPED_LEFT:l,ROW_SWIPED_RIGHT:s};t.eventTypes=u;var d={handle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=t.appModel;if(i){var o=t.sourceTable||t.table,l=o?o.rootName():null,s=e.action(i,l);if(s)return void(0,n.runAppAction)(s,t,a,r)}"function"==typeof a&&a({})}};t.default=d},386036:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(856690)),i=n(a(689728)),o=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"round",value:function(e,t){var a=Math.pow(10,t);return Math.round(e*a)/a}},{key:"gaussianElimination",value:function(e,t){for(var a=e,n=e.length-1,r=[t],i=0;i<n;i++){for(var o=i,l=i+1;l<n;l++)Math.abs(a[i][l])>Math.abs(a[i][o])&&(o=l);for(var s=i;s<n+1;s++){var u=a[s][i];a[s][i]=a[s][o],a[s][o]=u}for(var d=i+1;d<n;d++)for(var c=n;c>=i;c--)a[c][d]-=a[c][i]*a[i][d]/a[i][i]}for(var p=n-1;p>=0;p--){for(var f=0,h=p+1;h<n;h++)f+=a[h][p]*r[h];r[p]=(a[n][p]-f)/a[p][p]}return r}},{key:"linearRegression",value:function(e,t){for(var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=e.length,i=0,o=0,l=0,s=0,u=0;u<r;u++){var d=e[u],c=t[u];i+=d,o+=c,l+=d*c,s+=d*d}var p=(r*l-i*o)/(r*s-i*i),f=(o-p*i)/r;return function(e){return a.round(f+p*e,n)}}},{key:"exponentialRegression",value:function(e,t){for(var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=e.length,i=0,o=0,l=0,s=0,u=0,d=0;d<r;d++){var c=e[d],p=t[d];i+=p,o+=c*c*p,l+=p*Math.log(p),s+=c*p*Math.log(p),u+=c*p}var f=i*o-u*u,h=Math.exp((o*l-u*s)/f),m=(i*s-u*l)/f,v=this.round(h,n),y=this.round(m,n);return function(e){return a.round(v*Math.exp(y*e),n)}}},{key:"logarithmicRegression",value:function(e,t){for(var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=e.length,i=0,o=0,l=0,s=0,u=0;u<r;u++){var d=e[u],c=t[u];i+=Math.log(d),o+=c*Math.log(d),l+=c,s+=Math.pow(Math.log(d),2)}var p=(r*o-l*i)/(r*s-i*i),f=this.round(p,n),h=this.round((l-f*i)/r,n);return function(e){return a.round(a.round(h+f*Math.log(e),n),n)}}},{key:"powerRegression",value:function(e,t){for(var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=e.length,i=0,o=0,l=0,s=0,u=0;u<r;u++){var d=e[u],c=t[u];i+=Math.log(d),o+=Math.log(c)*Math.log(d),l+=Math.log(c),s+=Math.pow(Math.log(d),2)}var p=(r*o-i*l)/(r*s-Math.pow(i,2)),f=(l-p*i)/r,h=this.round(Math.exp(f),n),m=this.round(p,n);return function(e){return a.round(a.round(h*Math.pow(e,m),n),n)}}},{key:"polynomialRegression",value:function(e,t){for(var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=[],i=[],o=0,l=0,s=e.length,u=3,d=0;d<u;d++){for(var c=0;c<s;c++){var p=e[c],f=t[c];o+=Math.pow(p,d)*f}r.push(o),o=0;for(var h=[],m=0;m<u;m++){for(var v=0;v<s;v++){var y=e[v];l+=Math.pow(y,d+m)}h.push(l),l=0}i.push(h)}i.push(r);var g=this.gaussianElimination(i,u).map((function(e){return a.round(e,n)}));return function(e){return a.round(g.reduce((function(t,a,n){return t+a*Math.pow(e,n)}),0),n)}}}]),e}();t.default=o},702671:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(600861)),i=n(a(856690)),o=n(a(689728)),l=n(a(918698)),s=n(a(496486)),u=n(a(385857)),d=n(a(888861)),c=a(722188),p=n(a(21870)),f=n(a(498967)),h=a(692479),m=n(a(819433)),v=a(557310),y=a(166089),g=function(e,t,a,n){var r,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"==typeof Reflect?"undefined":(0,l.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(i<3?r(o):i>3?r(t,a,o):r(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o},w=Symbol(),b=function(){function e(t,a){(0,i.default)(this,e),this.inlineStack=[],this.props=t,this.viewStateKey=a}return(0,o.default)(e,[{key:"appModel",get:function(){return this.props.appModel||y.AppGlobals.AppModel}},{key:"DRILLDOWN_ALL_SYMBOL",value:function(){return w}},{key:"updateProps",value:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.filterExpr,r=a.filterDefaults;this.inlineStack.length>0&&null!=this.props&&((null==n?void 0:n.hash)!==(null===(e=this.props.filterExpr)||void 0===e?void 0:e.hash)||!s.default.isEqual(r,this.props.filterDefaults))&&(this.inlineStack=[]),null!=p.default.hashState&&"function"==typeof(null===(t=this.props.view)||void 0===t?void 0:t.name)&&(p.default.hashState.general.ControlName!==this.props.view.name()?(this.groupByValue=void 0,this.defaultValues=void 0,this.filterExprValue=void 0):(this.groupByValue=p.default.hashState.specific.GroupBy,this.defaultValues=p.default.hashState.specific.DefaultValues,this.filterExprValue=p.default.hashState.specific.FilterExpr)),this.props=a}},{key:"currentInlineItem",value:function(){return s.default.last(this.inlineStack)||{}}},{key:"inlineFilterValue",value:function(){return this.currentInlineItem().filterValue}},{key:"inlineFilterDefaults",value:function(){return this.currentInlineItem().filterDefaults}},{key:"inlineFilterDisplayValue",value:function(){return this.currentInlineItem().filterDisplayValue||this.inlineFilterValue()}},{key:"inlineSortBy",value:function(){return this.currentInlineItem().sortBy}},{key:"inlineFilterExpr",value:function(){return this.currentInlineItem().filterExpr}},{key:"inlinePosition",value:function(){return this.inlineStack.length}},{key:"getPreviousGroupByValue",value:function(e){var t=y.AppGlobals.AppState.getPreviousGroupByColumnName();return t&&e.length>0&&this.filterExpr()?e[0][t]:null}},{key:"annotateRows",value:function(e,t){var a=this.currentDrilldownColumn(),n=[],r=null,i=this.getRowLimitFromProps();if(t){r=[];for(var o=null,l=0,u=null,d=0,c=0;c<e.length;c++){var p=e[c],h=(null==o?void 0:o[t])?o[t].toString().toLowerCase():null,m=p[t]?p[t].toString().toLowerCase():null;if(!o||h!==m){if(null!=i&&i<=d)break;u=[],n.push(u),l=n.length-1,r.push(l)}u.push(p),r.push(l),(null==i||d<i)&&n.push(p),o=p,d++}}else if(a){var v=this.props.tableSchema.findAttributeByName(a);if(v&&"EnumList"===v.type()){for(var y=function(t){var r=e[t];v.getValues(r[a]).forEach((function(e){var t=s.default.extend({},r);t[a]=e,n.push(t)}))},g=0;g<e.length;g++)y(g);n=s.default.uniqBy(n,(function(e){return e[a]}),!0),f.default.sort(n,this.props.tableSchema.rowComparer([{Column:a,Order:"Ascending"}]))}else n=n.concat(e);n.length>1&&n.unshift(w)}else n=n.concat(null==i?e:e.slice(0,i));return{nearestHeadings:r,annotatedRows:n}}},{key:"drillUp",value:function(){this.inlineStack.pop()}},{key:"drillDownAll",value:function(e){var t=this.props.table,a=this.appModel,n=this.props.isInline,r=this.getSortByFromProps(),i=this.getGroupAggregateFromProps(),o=this.getControlNameFromProps(),l=this.getColumnOrderFromProps(),s=this.groupBy().slice(1);if(1===s.length&&"_RowNumber"===s[0].Column&&(s=[]),n){var u={filterValue:a.MapActionName("All"),filterExpr:this.filterExpr(),filterDefaults:this.filterDefaults(),groupBy:s};this.inlineStack.push(u)}else if(v.ReactRootUIConfig.isReactRoot())(0,m.default)().dispatch((0,h.mutateView)({ViewStateKey:this.viewStateKey,ViewState:{filterDefaults:this.filterDefaults(),GroupBy:s},options:{discardChildren:!0}}));else{var d=y.AppGlobals.AppState.KnownStates[e||"fastTable"].CreateRootState({TableName:t.name(),GroupBy:s,SortBy:r,ColumnOrder:l,groupAggregate:i,FilterExpr:this.filterExpr(),DefaultValues:this.filterDefaults(),ControlName:o});y.AppGlobals.AppState.PushState(d,!0)}}},{key:"drillDown",value:function(e,t,a){var n;if(this.drilldownMode()){var i,o=this.props.table,l=this.props.tableSchema,s=this.getSortByFromProps(),u=this.getGroupAggregateFromProps(),c=this.getColumnOrderFromProps(),p=this.getColumnWidthFromProps(),f=this.getControlNameFromProps(),g=this.filterExpr(),w=this.groupBy(),b=l.findAttributeByName(w[0].Column);if(!b)return;t=t||o.findRow(e);var S=b.name(),T=t[S],C=b.localizeWireValue(T);if(null===(n=null===window||void 0===window?void 0:window.AppState)||void 0===n?void 0:n.pendingFormState){var R=d.default.createColFilter(T,l,b);g=g?d.default.createAnd(R,g):R}else i=[].concat((0,r.default)(this.filterDefaults()),[{ColumnName:S,ColumnValue:T}]);var E=w.slice(1);if(v.ReactRootUIConfig.isReactRoot()||1!==E.length||"_RowNumber"!==E[0].Column||(E=[]),this.props.isInline){var k={sortBy:s,filterColumn:S,filterValue:T,filterDisplayValue:C,filterExpr:g,filterDefaults:i,groupBy:E};this.inlineStack.push(k)}else if(a||(a="fastTable"),v.ReactRootUIConfig.isReactRoot())(0,m.default)().dispatch((0,h.mutateView)({ViewStateKey:this.viewStateKey,ViewState:{filterDefaults:i,GroupBy:E},options:{discardChildren:!0}}));else{var I=y.AppGlobals.AppState.KnownStates[a].CreateRootState({TableName:o.name(),RowKey:null,GroupBy:E,SortBy:s,ColumnOrder:c,ColumnWidth:p,groupAggregate:u,DefaultValues:i,ControlName:f,FilterExpr:g});y.AppGlobals.AppState.PushState(I,!0)}}}},{key:"sort",value:function(e,t){var a=[{Column:e,Order:t}],n=[];if(this.props.isInline){var r=Object.assign({},this.currentInlineItem(),{sortBy:a,groupBy:n});this.inlineStack[this.inlinePosition()]=r}else if(v.ReactRootUIConfig.isReactRoot())(0,m.default)().dispatch((0,h.mutateView)({ViewState:{SortBy:a,GroupBy:n},ViewStateKey:this.viewStateKey}));else{var i=s.default.extend(y.AppGlobals.AppState.CurrentUIState,{FastTableUIState:s.default.extend(y.AppGlobals.AppState.CurrentUIState.FastTableUIState,{SortBy:a,GroupBy:n})});y.AppGlobals.AppState.ReplaceState(i)}}},{key:"getRowLimitFromProps",value:function(){return this.props.rowLimit?this.props.rowLimit:void 0}},{key:"getGroupAggregateFromProps",value:function(){return this.props.groupAggregate?this.props.groupAggregate:this.props.viewDefn?this.props.viewDefn.GroupAggregate:void 0}},{key:"getControlNameFromProps",value:function(){return this.props.controlName?this.props.controlName:this.props.view?this.props.view.name():void 0}},{key:"getSortByFromProps",value:function(){return this.props.sortBy?this.props.sortBy:this.props.viewDefn?this.props.viewDefn.SortBy:void 0}},{key:"getColumnOrderFromProps",value:function(){return this.props.sortBy?this.props.columnOrder:this.props.viewDefn?this.props.viewDefn.ColumnOrder:void 0}},{key:"getColumnWidthFromProps",value:function(){return this.props.columnWidth?this.props.columnWidth:this.props.viewDefn?this.props.viewDefn.ColumnWidth:void 0}},{key:"getFilterExprFromProps",value:function(){return this.props.filterExpr?this.props.filterExpr:this.filterExprValue?this.filterExprValue:void 0}},{key:"getFilterDefaultsFromProps",value:function(){return this.props.filterDefaults?this.props.filterDefaults:this.defaultValues?this.defaultValues:[]}},{key:"getSearchQueryFromProps",value:function(){return null!=this.props.searchQuery?this.props.searchQuery:p.default.searchQuery}},{key:"groupBy",value:function(){return v.ReactRootUIConfig.isInDesktopExperience()&&!this.props.isInline&&this.props.groupBy?this.props.groupBy.slice(-1):this.currentInlineItem().groupBy||this.props.groupBy||this.groupByValue||void 0}},{key:"sortBy",value:function(){return this.inlineSortBy()||this.getSortByFromProps()}},{key:"filterExpr",value:function(){return this.inlineFilterExpr()||this.getFilterExprFromProps()}},{key:"filterDefaults",value:function(){return this.inlineFilterDefaults()||this.getFilterDefaultsFromProps()||[]}},{key:"drilldownMode",value:function(){return this.groupBy()&&this.groupBy().length>1}},{key:"currentDrilldownColumn",value:function(){return this.drilldownMode()?this.groupBy()[0].Column:null}},{key:"alreadyDrilledColumns",value:function(){return this.props.isInline?s.default.compact(this.inlineStack.map((function(e){return e.filterColumn}))):this.filterDefaults().map((function(e){return e.ColumnName}))}},{key:"getDrilldownRows",value:function(){var e=new u.default(this.appModel,this.props.tableSchema);if(this.drilldownMode()){var t=this.groupBy()[0],a=t.Column,n=this.getSearchQueryFromProps();return this.props.table.queryRowValues({searchQuery:n,limit:this.getRowLimitFromProps(),uniqueBy:a,sortRules:[{Column:a,Order:t.Order}],filterExpr:this.filterExpr(),filterDefaults:this.filterDefaults()},this.appModel,e)}return[]}}]),e}();g([c.observable],b.prototype,"inlineStack",void 0),g([c.action],b.prototype,"drillUp",null),g([c.action],b.prototype,"drillDownAll",null),g([c.action],b.prototype,"drillDown",null),g([c.action],b.prototype,"sort",null);var S=b;t.default=S},338590:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.autoComplete=function(e,t){return l(this,void 0,void 0,r.default.mark((function a(){var n;return r.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(""!==(null!=e?e:"")){a.next=2;break}return a.abrupt("return",Promise.resolve({suggestions:[]}));case 2:return n="/directorydata/autoComplete?query="+encodeURIComponent(e)+"&ownerId="+t,a.next=5,(0,i.ajaxGet)(n).then((function(t){return{suggestions:t.suggestions.filter((function(t){return!!e&&-1!==t.emailAddress.indexOf(null!=e?e:"")}))}})).catch((function(e){return o.default.logToDevConsole("Unable to load auto complete results: there was an error contacting the server."),{suggestions:[]}}));case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}),a)})))};var r=n(a(364687)),i=a(635672),o=n(a(593186)),l=function(e,t,a,n){return new(a||(a=Promise))((function(r,i){function o(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}s((n=n.apply(e,t||[])).next())}))}},813917:(e,t,a)=>{"use strict";a(128594),a(538264),a(35449),a(557147);var n=a(419638);window.AppSheetJSVersion=n.JS_VERSION,window.AppSheetJSBuild=n.JS_BUILD},664583:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.runAppAction=void 0;var r=a(733366),i=n(a(606610)),o=a(557310),l=n(a(819433));t.runAppAction=function(){o.ReactRootUIConfig.isReactRoot()?(0,l.default)().dispatch(r.runAppActionThunk.apply(void 0,arguments)):i.default.run.apply(i.default,arguments)}},10311:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.getActionFormattingRules=function(e,t,a){var n=null,i=e.appTemplate.formattingRules();n=i.getFormatting({tableOrSlice:t.table(),rowKey:a,actionName:t.name()}),t.autoReferencedColumn()&&r.default.isEqual(n,{icon:[]})&&(n=i.getFormatting({tableOrSlice:t.table(),rowKey:a,column:t.autoReferencedColumn()}));return n};var r=n(a(496486))},873030:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.useStyles=t.NavBarIconButton=t.NavBarDivider=t.NavBarButtons=t.NavBarButton=void 0;var i=n(a(600861)),o=n(a(627424)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=M(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294)),s=a(697211),u=a(695386),d=n(a(285963)),c=a(56749),p=n(a(454852)),f=a(351101),h=a(700386),m=a(698739),v=n(a(962553)),y=a(307074),g=a(692479),w=a(557310),b=a(29827),S=a(398171),T=n(a(294184)),C=a(664583),R=n(a(819433)),E=n(a(385857)),k=a(250617),I=a(667274),A=a(49676),D=n(a(571524));function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(M=function(e){return e?a:t})(e)}var x=[p.default.DISPLAY_OVERLAY,p.default.DISPLAY_PROMINENTLY],N=[p.default.DISPLAY_OVERLAY,p.default.DISPLAY_PROMINENTLY,p.default.DISPLAY_INLINE];function O(e,t,a){var n,r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(0,f.getAppModel)(),l=v.default.findByName(e,o),s=null===(r=null===(n=l.table)||void 0===n?void 0:n.rootTable)||void 0===r?void 0:r.call(n);if(s){var u=t.map((function(e){return s.findRow(e)})).filter((function(e){return!!e}));return o.appTemplate.actions().actionsForRows(u,e,window.AppModel,i,a)}return[]}function _(e,t,a,n){var r;r=n&&(null==a?void 0:a.length)?O(e,a,t,!0):n?[]:a?O(e,a,t):function(e,t){var a=(0,f.getAppModel)();return a.appTemplate.actions().actionsAtTableScope(e,a,t)}(e,t);var i=n?N:x;return r.map((function(e){return{action:e,order:i.indexOf(e.prominence())}})).filter((function(e){var t=e.order,a=e.action;return-1!==t&&(n||a.prominence()===p.default.DISPLAY_OVERLAY||"DELETE_RECORD"===a.type()||a.isAutoCreated())})).sort((function(e,t){return e.order-t.order})).map((function(e){return e.action}))}function B(e,t,a,n,r){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=(0,f.getAppModel)(),l=v.default.findByName(t,o),s=l.table,u="navbar",d=function(e){var t=e.actionModifiedData,a=e.actionNavigatedApp;(t||a)&&(0,R.default)().dispatch((0,g.mutateView)({ViewStateKey:n,ViewState:{selected:void 0}}))};a&&a.length>1?(0,C.runAppAction)(e,{appModel:o,sourceLocationName:u,rowIds:a,sourceTable:null!=s?s:void 0,defaultValues:r},d,n):a&&1===a.length?(0,C.runAppAction)(e,{appModel:o,sourceLocationName:u,rowId:a[0],sourceTable:null!=s?s:void 0,defaultValues:r},i?d:void 0,n):(0,C.runAppAction)(e,{appModel:o,sourceLocationName:u,sourceTable:null!=s?s:void 0,defaultValues:r},void 0,n)}var P=(0,u.makeStyles)((function(e){return{primaryButton:{fontSize:"0.778rem",height:"100%","&+$primaryButton":{marginLeft:e.spacing(1)}},primaryButtonIcon:{"& > *:first-child":{fontSize:"0.778rem"}},primaryInnerLabel:{whiteSpace:"nowrap",maxWidth:"80px",textOverflow:"ellipsis",overflowX:"hidden"},secondaryButton:{borderRadius:"3px",border:"1px solid ".concat((0,c.themeColor)("mainBorderColor")),color:(0,c.themeColor)("themeTextColor"),padding:e.spacing(1),marginRight:e.spacing(1)},popupMenuButton:{marginRight:e.spacing(.5)},iconButton:{fontSize:"inherit",padding:e.spacing(.875),boxSizing:"content-box",width:"1em",height:"1em","& i":{fontWeight:500}},popupMenuItem:{fontSize:"0.778rem",color:(0,c.themeColor)("secondaryText"),display:"flex",alignItems:"center",padding:e.spacing(1,2)},popupMenuItemIcon:{fontSize:"1rem",color:(0,c.themeColor)("minorText"),marginRight:e.spacing(2)},divider:{alignSelf:"center",height:"calc(1rem + 4px)",margin:e.spacing(0,1)}}}));t.useStyles=P;var L=function(e){var t=P();return l.default.createElement(s.Button,Object.assign({size:"small",color:"primary",role:"button",disableElevation:!0},e,{className:(0,T.default)(t.primaryButton,e.className)}))};t.NavBarButton=L;var V=l.default.forwardRef((function(e,t){var a=P();return l.default.createElement(s.IconButton,Object.assign({},e,{role:"button",ref:t,className:(0,T.default)(a.iconButton,e.className)}))}));t.NavBarIconButton=V;var F=function(e){var t=P();return l.default.createElement(s.Divider,Object.assign({orientation:"vertical",className:"".concat(t.divider," navbar-divider"),flexItem:!0},e))};t.NavBarDivider=F;t.NavBarButtons=function(e){var t=e.type,a=void 0===t?w.ReactRootUIConfig.isInMobileExperience()?"appbar":"subnav":t,n=e.tableName,r=e.rowIds,u=e.extraActions,p=e.usedActions,v=e.allowSelectionMode,T=e.allowQuickEditMode,C=e.childrenOnly,R=e.children,M=e.filterDefaults,x=e.filterExpr,N=P(),O=(0,m.useFilterContext)(),H=O.filterBarIsHidden,W=O.openFilterEditor,U=(0,l.useContext)(y.ViewStateKey),j=(0,y.useReactAppSelector)(S.getAppModelHook),z=(0,y.useViewStateDispatch)(),G=(0,y.useReactAppDispatch)(),K=(0,y.useViewStateSelector)(b.getSelectedRowIds),Y=(0,y.useViewStateSelector)(b.getInSelectionMode),q=(0,y.useViewStateSelector)(b.getTableName),$=(0,y.useDataContext)(),Q=l.default.useState(null),X=(0,o.default)(Q,2),Z=X[0],J=X[1],ee=null!=r?r:K,te=null!=n?n:q;if(!j||!te)return null;var ae=function(){J(null)},ne=function(e,t){B(e,te,ee,U,t,Y),ae()},re=C?[]:[].concat((0,i.default)(_(te,$,ee,Y).filter((function(e){return!(null==u?void 0:u.includes(e))}))),(0,i.default)(u||[])).filter((function(e){return!(null==p?void 0:p.includes(e))})),ie=re[0],oe=re.filter((function(e){return e!==ie})),le=w.ReactRootUIConfig.isInDesktopExperience()?3:0,se=[].concat((0,i.default)(w.ReactRootUIConfig.isInMobileExperience()&&ie?[ie]:[]),(0,i.default)(oe.slice(0,le))),ue=oe.slice(le),de=[],ce=E.default.getDefaultValues(M,x);ue.length>0&&de.push(l.default.createElement(h.ASTooltip,{arrow:!0,placement:"bottom",title:j.MapActionName("More Actions"),key:"menu_tooltip"},l.default.createElement(V,{onClick:function(e){J(e.currentTarget)},classes:{root:N.popupMenuButton},key:"_popupMenuButton","aria-label":j.MapActionName("More Actions")},l.default.createElement("i",{className:"fa fa-ellipsis-v"}))));var pe=D.default.IsMobileBrowser()||D.default.InMobileWebView(),fe=w.ReactRootUIConfig.isInMobileExperience()&&pe?l.default.createElement(c.ASThemeProvider,null,l.default.createElement(A.MobileActionSheet,{open:Boolean(Z),onClose:ae,listItemContents:ue.map((function(e){return{key:e.name(),id:e.name(),icon:l.default.createElement("i",{className:"".concat(N.popupMenuItemIcon," ").concat(e.getFA5CompatibleIcon())}),displayText:e.displayName(j),onClick:function(){return ne(e,ce)}}}))})):l.default.createElement(c.ASThemeProvider,null,l.default.createElement(s.Menu,{key:"_popupMenu",anchorEl:Z,open:Boolean(Z),onClose:ae,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},elevation:3,keepMounted:!0},ue.map((function(e){return l.default.createElement(s.MenuItem,{key:e.name(),className:N.popupMenuItem,onClick:function(){return ne(e,ce)}},l.default.createElement("i",{className:"".concat(N.popupMenuItemIcon," ").concat(e.getFA5CompatibleIcon())}),e.displayName(j))}))));de.push.apply(de,(0,i.default)(se.map((function(e){return l.default.createElement(h.ASTooltip,{arrow:!0,placement:"bottom",title:e.displayName(j),key:"action_".concat(e.name())},l.default.createElement(V,{id:"navbar-".concat(e.table(),"-").concat(e.name()),"aria-label":e.name(),classes:{root:N.secondaryButton},onClick:function(){return B(e,te,ee,U,ce,Y)}},l.default.createElement("i",{className:e.getFA5CompatibleIcon()})))})).reverse())),ie&&w.ReactRootUIConfig.isInDesktopExperience()&&de.push(l.default.createElement(L,{variant:"appbar"===a?"outlined":"contained",color:"appbar"===a?"inherit":"primary",className:"navbar-primary-button","aria-label":ie.displayName(j),classes:{startIcon:N.primaryButtonIcon},onClick:function(){return B(ie,te,ee,U,ce,Y)},startIcon:l.default.createElement("i",{className:ie.getFA5CompatibleIcon()})},l.default.createElement(h.ASTooltip,{arrow:!0,placement:"bottom",title:ie.displayName(j),key:"action_".concat(ie.name())},l.default.createElement("div",{className:N.primaryInnerLabel},ie.displayName(j)))));var he=[];return H||Y||C||he.push(l.default.createElement(h.ASTooltip,{arrow:!0,placement:"bottom",title:(0,f.mapActionName)("Filter"),key:"filter_button"},l.default.createElement(V,{"aria-label":"filter",onClick:function(){return W()}},l.default.createElement(d.default,{fontSize:"inherit"})))),!v||Y||C||he.push(l.default.createElement(h.ASTooltip,{arrow:!0,placement:"bottom",title:(0,f.mapActionName)("Select Items"),key:"_multiselect"},l.default.createElement(V,{"aria-label":(0,f.mapActionName)("Select Items"),onClick:function(){return z((0,g.mutateView)({ViewState:{selected:Y?void 0:[]}}))}},l.default.createElement("i",{className:"fa fa-check-square"})))),T&&!Y&&U&&he.push(l.default.createElement(h.ASTooltip,{arrow:!0,placement:"bottom",title:(0,f.mapActionName)("Enable Edits"),key:"enable_edits"},l.default.createElement(V,{"aria-label":(0,f.mapActionName)("Enable Edits"),onClick:function(){return G((0,k.startEditMode)(U))}},l.default.createElement("i",{className:"far fa-edit"})))),"appbar"===a&&he.push(l.default.createElement(I.ReactAppSyncButton,{key:"_sync"})),Array.isArray(R)?he=he.concat(R):R&&he.push(R),l.default.createElement(c.ASThemeProvider,{header:"appbar"===a},de,de.length?l.default.createElement(F,null):null,he,fe)}},888641:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usePrevious=function(e){var t=(0,n.useRef)();return(0,n.useEffect)((function(){t.current=e}),[e]),t.current};var n=a(667294)},618583:(e,t,a)=>{"use strict";var n=a(564836),r=a(918698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(627424)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(667294));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}var s=function(e){var t=o.default.useRef(),a=function(e){var t=(0,o.useState)(e.current?e.current.offsetHeight:window.innerHeight),a=(0,i.default)(t,2),n=a[0],r=a[1],l=(0,o.useState)(e.current?e.current.offsetWidth:window.innerWidth),s=(0,i.default)(l,2),u=s[0],d=s[1];return(0,o.useEffect)((function(){var t=function(){e.current&&(r(e.current.offsetHeight),d(e.current.offsetWidth))};t();var a=new ResizeObserver(t);return e.current&&a.observe(e.current),function(){return a.disconnect()}})),{height:n,width:u}}(t),n=a.height,r=a.width;return o.default.createElement("div",{ref:t,style:{flex:"1 1 0",overflow:"hidden",position:"relative"},className:e.className},e.allowContentGrowth?e.children(r,n):o.default.createElement("div",{style:{position:"absolute",inset:0}},e.children(r,n)))};t.default=s},667274:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.useStyles=t.ReactAppSyncButton=void 0;var r=n(a(627424)),i=n(a(667294)),o=a(697211),l=n(a(359535)),s=a(700386),u=a(351101),d=a(398171),c=a(307074),p=a(289276),f=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},h=(0,o.makeStyles)((function(){return{disabledSpinnerButton:{color:"inherit !important"},syncButton:{padding:"1px",height:"32px",width:"32px",minWidth:"32px",borderTopRightRadius:"0",borderBottomRightRadius:"0",marginRight:"-1px"}}}));t.useStyles=h;t.ReactAppSyncButton=function(e){var t,a=f(e,[]),n=h(),m=(0,c.useReactAppDispatch)(),v=(0,c.useReactAppSelector)(d.getIsOnline),y=(0,c.useReactAppSelector)(d.getInSync),g=null!==(t=(0,c.useReactAppSelector)(d.getSyncProgressPercentage))&&void 0!==t?t:0,w=(0,c.useReactAppSelector)(d.getSyncTotalActions),b=i.default.useState(!1),S=(0,r.default)(b,2),T=S[0],C=S[1],R=i.default.createElement(l.default,{fontSize:"small"});return y&&(R=w<=2?i.default.createElement(o.CircularProgress,{size:"1rem",thickness:5,color:"inherit"}):i.default.createElement(o.CircularProgress,{size:"1rem",thickness:5,color:"inherit",variant:"determinate",value:g})),i.default.createElement(s.ASTooltip,{open:T&&!y,disableHoverListener:!0,disableFocusListener:!0,disableTouchListener:!0,title:(0,u.mapActionName)("Sync"),placement:"bottom",arrow:!0},i.default.createElement(o.Button,Object.assign({},a,{"data-testid":"SyncActionButton",onMouseEnter:function(){C(!0)},onMouseLeave:function(){C(!1)},disabled:!v||y,onClick:function(){m((0,p.reactAppSyncAction)({initiatedBy:"User"})),C(!1)},className:n.syncButton,"aria-label":(0,u.mapActionName)("Sync the app")}),R))}},521671:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.findExistingViewInViewStack=void 0;var r=a(692479),i=n(a(819433));t.findExistingViewInViewStack=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=(0,i.default)().getState().uiState.viewStack,l=null==e?void 0:e.FindControlsForTable(t,a)[0];return o.slice(0,n).find((function(e){return(0,r.isViewIdentifierEqual)(e.identifier,{Type:"Control",Name:(null==l?void 0:l.Name)||""})}))}},733366:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.runAppActionThunk=void 0;var r=n(a(606610)),i=(0,a(250617).checkForUnsavedChanges)((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(){r.default.run.apply(r.default,t)}}));t.runAppActionThunk=i},916230:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.gunScanKeyupListener=t.checkFlushKeys=t.SwipeElement=t.InputHandlerClass=t.FastClick=t.CloseModal=void 0,t.initializeInputHandler=function(){JeeneeNamespace.gunScanKeyupListener=r,JeeneeNamespace.checkFlushKeys=i,JeeneeNamespace.InputHandler=o};var r,i,o,l=n(a(496486)),s=n(a(571524)),u=n(a(112368)),d=n(a(593186)),c=n(a(365914)),p=a(318926),f=a(218546),h=a(892148),m=a(263198),v=a(166089);t.gunScanKeyupListener=r,t.checkFlushKeys=i,t.InputHandlerClass=o,t.gunScanKeyupListener=r=function(e){var t=window.InputHandler;try{if(e.key.length>2)return;t.lastKeyupActiveElement=document.activeElement,t.gunScanHistory=[],t.queuedKeys.push(e.key),i()}catch(e){var a=l.default.isError(e)?": "+e.message:"";d.default.warnToDevConsole("Error in keyUp handler for external scanner"+a)}},t.checkFlushKeys=i=l.default.debounce((function(){var e,t=window.InputHandler,a=t.queuedKeys;if(a.length>=4){var n=a.join("").toLowerCase(),r=(null===(e=v.AppGlobals.ViewManager.CurrentHandler())||void 0===e?void 0:e.Filter)&&!v.AppGlobals.AppModel.AppTemplate.Presentation.HideSystemButtons;document.activeElement&&!l.default.includes(["input","textarea","select"],document.activeElement.tagName.toLowerCase())&&(r?StateReflector.SetSearch(n):$(JeeneeNamespace).trigger("hw-barcode-scan",n))}t.gunScanHistory=[{timestamp:new Date,value:a.join("")}],t.gunScanCallbacks.forEach((function(e){e(t.gunScanHistory[0])})),t.gunScanCallbacks=[],t.queuedKeys=[]}),50);var y=function(e,t,a){this.$selectorRoot=e,this.selector=t,this.handler=a,this.hasStarted=!1;s.default.IsTouchEnabled()?e.on("touchstart.appsheet",t,this,this.handleEvent):e.on("click.appsheet",t,this,this.handleEvent)};t.FastClick=y,y.prototype.handleEvent=function(e){var t=e.data;switch(e.type){case"touchstart":t.onTouchStart(e,$(this));break;case"touchmove":t.onTouchMove(e,$(this));break;case"touchend":case"click":t.onClick(e,$(this))}},y.prototype.onTouchStart=function(e,t){var a=e.data;a.hasStarted=!0,this.$el=t,this.$selectorRoot.on("touchend.appsheet",this.selector,a,this.handleEvent),$("body").on("touchmove.appsheet",a,this.handleEvent),this.$el.addClass("fc-active"),null!=e&&null!=e.originalEvent&&null!=e.originalEvent.touches&&null!=e.originalEvent.touches[0]?(a.startX=e.originalEvent.touches[0].clientX,a.startY=e.originalEvent.touches[0].clientY):null!=e&&null!=e.originalEvent&&null!=e.originalEvent.changedTouches&&null!=e.originalEvent.changedTouches[0]&&(a.startX=e.originalEvent.changedTouches[0].clientX,a.startY=e.originalEvent.changedTouches[0].clientY)},y.prototype.onTouchMove=function(e){var t=e.data;null!=e&&null!=e.originalEvent&&null!=e.originalEvent.touches&&null!=e.originalEvent.touches[0]?(Math.abs(e.originalEvent.touches[0].clientX-t.startX)>10||Math.abs(e.originalEvent.touches[0].clientY-t.startY)>10)&&t.reset():null!=e&&null!=e.originalEvent&&null!=e.originalEvent.changedTouches&&null!=e.originalEvent.changedTouches[0]&&(Math.abs(e.originalEvent.changedTouches[0].clientX-t.startX)>10||Math.abs(e.originalEvent.changedTouches[0].clientY-t.startY)>10)&&t.reset()},y.prototype.onClick=function(e,t){var a=e.data;s.default.IsTouchEnabled()?this.hasStarted&&(a.reset(),a.runHandler(e,t)):a.runHandler(e,t)},y.prototype.reset=function(){this.hasStarted=!1,this.$selectorRoot.off("touchend.appsheet",this.selector),$("body").off("touchmove.appsheet",this.handleEvent),this.$el.removeClass("fc-active")},y.prototype.runHandler=function(e,t){this.isDisabled||(this.handler(e,t),this.isDisabled=!0,setTimeout(function(){this.isDisabled=!1}.bind(this),100))},$.fn.onFastClick=function(e,t){return new y(this,e,t),this};var g=function(e,t){if((e=e||$("#InfoPage.ActivePage .InfoScreen:visible")).length){"function"==typeof t?t():StateReflector.ShowUIState(!0);var a=e.data("OnClose");"function"==typeof a&&a(),setTimeout((function(){v.AppGlobals.ViewManager.HideInfoPage((function(){e.hide()}))}),100)}else"function"==typeof t&&t()};t.CloseModal=g;var w=function(e){this.$selectorRoot=e.$selectorRoot,this.selector=e.selector,this.denylist=e.denylist,this.leftSwipeHandler=e.leftSwipeHandler,this.rightSwipeHandler=e.rightSwipeHandler,this.noSwipeHandler=e.noSwipeHandler,this.suppressVerticalScroll=!1,this.suppressHorizontalScroll=!1;s.default.IsTouchEnabled()&&e.$selectorRoot.on("touchstart.appsheetswipe",e.selector,this,this.handleEvent)};t.SwipeElement=w,w.prototype.handleEvent=function(e){var t=e.data;switch(e.type){case"touchstart":t.onTouchStart(e,$(this));break;case"touchmove":t.onTouchMove(e,$(this));break;case"touchend":t.onTouchEnd(e,$(this))}},w.prototype.onTouchStart=function(e){var t=e.data;if(this.denylist){var a=e.target;do{if($(a).is(this.denylist))return}while(a=a.parentElement)}t.suppressVerticalScroll=!1,t.suppressHorizontalScroll=!1,$("body").on("touchend.appsheetswipe",t,this.handleEvent),$("body").on("touchmove.appsheetswipe",t,this.handleEvent),null!=e&&null!=e.originalEvent&&null!=e.originalEvent.touches&&null!=e.originalEvent.touches[0]?(t.startX=e.originalEvent.touches[0].clientX,t.startY=e.originalEvent.touches[0].clientY):null!=e&&null!=e.originalEvent&&null!=e.originalEvent.changedTouches&&null!=e.originalEvent.changedTouches[0]&&(t.startX=e.originalEvent.changedTouches[0].clientX,t.startY=e.originalEvent.changedTouches[0].clientY)},w.prototype.onTouchMove=function(e){var t=e.data;if(!t.suppressHorizontalScroll){if(!t.suppressVerticalScroll){var a=0,n=0;return null!=e&&null!=e.originalEvent&&null!=e.originalEvent.touches&&null!=e.originalEvent.touches[0]?(a=e.originalEvent.touches[0].clientX-t.startX,n=e.originalEvent.touches[0].clientY-t.startY):null!=e&&null!=e.originalEvent&&null!=e.originalEvent.changedTouches&&null!=e.originalEvent.changedTouches[0]&&(a=e.originalEvent.changedTouches[0].clientX-t.startX,n=e.originalEvent.changedTouches[0].clientY-t.startY),Math.abs(n)>10?(t.suppressHorizontalScroll=!0,void t.reset()):Math.abs(a)>10?(t.suppressVerticalScroll=!0,e.preventDefault(),void e.stopPropagation()):void 0}e.preventDefault()}},w.prototype.onTouchEnd=function(e,t){var a=e.data,n=0;null!=e&&null!=e.originalEvent&&null!=e.originalEvent.touches&&null!=e.originalEvent.touches[0]?n=e.originalEvent.touches[0].clientX-a.startX:null!=e&&null!=e.originalEvent&&null!=e.originalEvent.changedTouches&&null!=e.originalEvent.changedTouches[0]&&(n=e.originalEvent.changedTouches[0].clientX-a.startX),a.reset(),!a.suppressHorizontalScroll&&n>10?(e.stopPropagation(),e.preventDefault(),a.rightSwipeHandler(e,t)):!a.suppressHorizontalScroll&&n<-10?(e.stopPropagation(),e.preventDefault(),a.leftSwipeHandler(e,t)):a.noSwipeHandler&&a.noSwipeHandler(e,t)},w.prototype.reset=function(){$("body").off("touchend.appsheetswipe",this.handleEvent),$("body").off("touchmove.appsheetswipe",this.handleEvent)},$.fn.onSwipe=function(e,t,a,n){return new w({$selectorRoot:this,selector:e,rightSwipeHandler:t,leftSwipeHandler:a,noSwipeHandler:n}),this},t.InputHandlerClass=o=function(){this.KnownHandlers={};for(var e=0;e<JeeneeNamespace.Controllers.length;e++){var t=JeeneeNamespace.Controllers[e];this.KnownHandlers[t.Name]=new t.InputHandler}},o.prototype.Initialize=function(){var e=this,t="click.appsheet",a="click.appsheet";this.rootStateForViewType=function(e,t){var a=v.AppGlobals.AppState.KnownStates[e]||v.AppGlobals.AppState.KnownStates[v.AppGlobals.AppState.ControllerLookup[e]];return a?a.CreateRootState(t):(d.default.warnToDevConsole("rootStateForControl doesnt know what to do with view type",e),{})},this.rootStateForControl=function(t,a){a.ControlName=t.Name;var n=e.rootStateForViewType(t.Action,a);return n.ControlName=t.Name,n},(s.default.IsIOSBrowser()||s.default.IsAndroidBrowser())&&(a="click.appsheet"),this.ProcessSync=function(){(v.AppGlobals.AppModel.AppTemplate.IsPublic||v.AppGlobals.AppModel.AppTemplate.IsTeamPublic)&&v.AppGlobals.AppState.UserInformation.Id!==v.AppGlobals.AppModel.AppTemplate.OwnerId&&v.AppGlobals.AppModel.NumDelayedActions()>0?v.AppGlobals.ViewManager.ShowInfoDialog(v.AppGlobals.AppModel.MapActionName("Unable to save changes"),"Sample apps cannot be updated"):v.AppGlobals.StateChangeHandler.RefreshAppData({initiatedBy:"PushedChanges"})},this.ShareInfo=function(e){var t,a=e.subject,n=e.body,r=null!==(t=e.to)&&void 0!==t?t:"friend@gmail.com",i=l.default.trim(e.image);if(s.default.InAndroidWebView()&&!s.default.IsUnsupportedAndroidVersion())JeeneeAndroid.shareText(a,n);else if(s.default.InIOSWebView())m.JeeneeBrowserAPI.shareIOS(encodeURIComponent(n),"",encodeURIComponent(encodeURIComponent(i)));else{var o=v.AppGlobals.AppModel.IsWhitelabelApp(),u=c.default.mailToUrl(r,a,n,o);h.WindowWrapper.openInNewTab(u)}};this.switchToUrl=function(e,t){if(e&&"function"==typeof e.indexOf){var a=$("<a>").attr("href",e).get(0).href,n=a.match(/https?:\/\/(www\.)?(maps\.)?google\.com\/maps/),r=0===e.indexOf("mailto:")||0===e.indexOf("tel:")||0===e.indexOf("sms:"),i=0===e.indexOf("intent:"),o=t||n||0!==a.indexOf("http");if(s.default.InIOSWebView())if(r)h.WindowWrapper.location=e;else if(o&&u.default.IsIOSAppWithMinVersion(8.33))m.JeeneeBrowserAPI.openInNativeBrowserIOS({url:a});else{var l=encodeURIComponent(a);void 0===window.webkit&&(l=encodeURIComponent(l)),h.WindowWrapper.location="jeenee_method?TargetBlank?href="+l}else s.default.InAndroidWebView()?r||s.default.IsUnsupportedAndroidVersion()?h.WindowWrapper.location=e:i?JeeneeAndroid.externalLink(a):n&&u.default.IsAndroidAppWithMinVersion(6.3)?JeeneeAndroid.openMap(a):o&&u.default.IsAndroidAppWithMinVersion(9.73)?JeeneeAndroid.openInNativeBrowser(a):JeeneeAndroid.externalLink(a):h.WindowWrapper.openInNewTab(e)}},this.handleLinkClick=function(e,t,a){a.preventDefault(),null!=t&&""!==t&&"#"!==t&&t.indexOf("#")!==t.length-1&&(0===t.indexOf("mailto:")?d.default.AddTraceContext("EmailLink"):0===t.indexOf("tel:")?d.default.AddTraceContext("PhoneLink"):0===t.indexOf("sms:")?d.default.AddTraceContext("SMSLink"):d.default.AddTraceContext("ExternalLink"),this.switchToUrl(t,e.data("launchexternal")))};for(var n in $("#footer").off(".appsheet").onFastClick(".ViewChangeButton",(function(t,a){var n=a.data("control");if(d.default.AddTraceContext(".ViewChangeButton ",{control:n?n.Name:"NOT FOUND"}),p.logger.logAppEvent(f.AppEventName.ViewChangeButton),null!=n)!a.hasClass("DisabledButton")&&(v.AppGlobals.AppState.SetActiveControl(n,e.rootStateForControl),t.preventDefault());else{var r=a.get(0),i=r?r.innerText:"(none)",o=r?r.classList:"(none)",l=a.data("table"),s=a.data("tableDefn"),u={table:l?l.Name:"(none)",tableDefn:s?s.Name:"(none)"};d.default.ReportErrorOnce({errorMessage:"View control could not be found for ViewChangeButton",innerText:i,data:JSON.stringify(u),classList:o}),alert("Unable to load the selected view, please try relaunching the app")}})).onFastClick(".MenuEntryButton",(function(t,a){var n=a.data("control");d.default.AddTraceContext(".MenuEntryButton ",{control:n?n.Name:"NOT FOUND"}),p.logger.logAppEvent(f.AppEventName.MenuEntryButton),null!=n&&!a.hasClass("DisabledButton")&&(v.AppGlobals.AppState.SetActiveControl(n,e.rootStateForControl),t.preventDefault())})).onFastClick(".ActionButton.TableAction",(function(t,a){var n=a.data("control");d.default.AddTraceContext(".ActionButton",{control:n.Name}),p.logger.logAppEvent(f.AppEventName.ActionButton),v.AppGlobals.AppState.SetActiveControl(n,e.rootStateForControl)})).onFastClick("#FooterBackButton",(function(e){e.stopPropagation(),d.default.AddTraceContext("#FooterBackButton"),p.logger.logAppEvent(f.AppEventName.FooterBackButton),v.AppGlobals.AppState.ChoosePreviousState()})).onFastClick("#FooterSyncButton",(function(t){t.stopPropagation(),t.preventDefault(),d.default.AddTraceContext("#FooterSyncButton"),p.logger.logAppEvent(f.AppEventName.FooterSyncButton),e.ProcessSync()})).onFastClick("#FooterShareButton",(function(t,a){d.default.AddTraceContext("#FooterShareButton"),p.logger.logAppEvent(f.AppEventName.FooterShareButton),!a.hasClass("DisabledButton")&&(e.ShareInfo(v.AppGlobals.ViewManager.ConstructShareInfo(v.AppGlobals.AppModel.AppTemplate)),t.preventDefault(),t.stopImmediatePropagation())})),$("#FooterPopup").off(".appsheet"),function(){$(document).off(".appsheet").on("keydown.appsheet",".modal",(function(e){e.stopPropagation()})).onFastClick(".ImageViewControl",(function(e,t){d.default.AddTraceContext(".ImageViewControl"),e.preventDefault(),e.stopPropagation();var a=t.data("imageUrl");null!=a&&v.AppGlobals.ViewManager.ShowImageView(a,null,t[0])})),e.queuedKeys=[],e.gunScanHistory=[],e.gunScanCallbacks=[],document.body.addEventListener("keyup",r,!1),$(document).on(t,"a",(function(t){t.stopImmediatePropagation();var a=t.currentTarget.href,n=$(t.currentTarget);e.handleLinkClick(n,a,t)}));var a=$("#LaunchScreen");$("#InfoPage .InfoScreen").off(".appsheet").onFastClick(".OKButton",(function(e,t){e.stopPropagation();var a=t.closest(".InfoScreen");g(a)})),a.onFastClick(".CancelButton",(function(e,t){e.stopPropagation(),d.default.AddTraceContext("#LoadDialog #CancelButton"),p.logger.logAppEvent(f.AppEventName.LoadDialogCancelButton);var n=t.data("cancelButtonHandler");"function"==typeof n&&n(),StateReflector.ShowUIState(!0),setTimeout((function(){v.AppGlobals.ViewManager.HideInfoPage((function(){a.hide()}))}),100)}))}(),this.KnownHandlers){var i=this.KnownHandlers[n];"function"==typeof i.Init&&i.Init(t,a)}window.addEventListener("resize",l.default.debounce((function(){var e,t;if($("canvas.resizable").each((function(){Common.rescaleCanvas(this)})),null===(t=null===(e=document.activeElement)||void 0===e?void 0:e.tagName)||void 0===t?void 0:t.toLowerCase){var a=document.activeElement.tagName.toLowerCase();"input"!==a&&"textarea"!==a&&"select"!==a||window.setTimeout((function(){var e=$(document.activeElement),t=e.offset().top,a=$(".AppHeader").outerHeight()+30-t,n=t+e.outerHeight()-($(window).height()-70),r=a>0;if(r||n>0){for(var i,o=r?-a:n,l=e.parents().get();(i=l.pop())&&!(i&&i.scrollHeight>$(i).innerHeight()););$(i).scrollTop($(i).scrollTop()+o)}}),0)}}),200))},o.prototype.LogoutLogic=function(){window.InputHandler.CheckUnload((function(){v.AppGlobals.AppModel.ClearLocalState(),v.AppGlobals.AppState.SwitchToLoginPage(null,"Input handler logoutlogic method",v.AppGlobals.AppState.AppTemplate.Id)}))},o.prototype.CheckUnload=function(e){v.AppGlobals.AppModel.NumDelayedActions()+v.AppGlobals.AppModel.NumProcessingActions()>0?v.AppGlobals.ViewManager.ShowConfirmDialog(e):e()}},299912:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateChartType=void 0;var n=a(797311),r=a(183377);function i(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var l=[n.CHART_TYPE_BAR,n.CHART_TYPE_LINE,n.CHART_TYPE_SCATTER,n.CHART_TYPE_AREA,n.CHART_TYPE_PIE,n.CHART_TYPE_DOUGHNUT];t.calculateChartType=function(e){if(e.chartType!==n.CHART_TYPE_AUTO)return e.chartType;var t,a=function(e){return n.ALL_CHART_TYPES.filter((function(t){return t!==n.CHART_TYPE_AUTO&&(0,r.canEncodeChartAs)(e,t)}))}(e);if(1===a.length)return a[0];if(a.includes(n.CHART_TYPE_LINE)&&(1===(t=e.encodings.major).length&&"time"===t[0].field.type&&["","Year","Quarter","Month","Week","Day"].includes(t[0].aggregateFunc)))return n.CHART_TYPE_LINE;var o,s=i(l);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(a.includes(u))return u}}catch(e){s.e(e)}finally{s.f()}return null}},183377:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canEncodeChartAs=void 0;var n=a(797311),r=function(e){return"value"===e.field.type||"category"===e.field.type&&!!e.aggregateFunc||"synthetic"===e.field.type},i=function(e){var t=e.major,a=e.minor,n=e.color;return!(e.size.length>0||t.length>1||a.length>1&&n.length>0)&&(!!a.every(r)&&!(1===t.length&&!["category","time"].includes(t[0].field.type)))};t.canEncodeChartAs=function(e,t){switch(t){case n.CHART_TYPE_AUTO:return!0;case n.CHART_TYPE_BAR:case n.CHART_TYPE_LINE:return i(e.encodings);case n.CHART_TYPE_AREA:return a=e.encodings,r=a.major,o=a.minor,l=a.color,s=a.size,!(l.length>0&&l.some((function(e){return"value"===e.field.type})))&&i({major:r,minor:o,color:l,size:s,detail:[]});case n.CHART_TYPE_SCATTER:return function(e){var t=e.major,a=e.minor,n=e.size;return!(t.length>1||t.some((function(e){return"category"===e.field.type||"time"===e.field.type}))||a.length>1||a.some((function(e){return"category"===e.field.type}))||n.length>1)}(e.encodings);case n.CHART_TYPE_PIE:case n.CHART_TYPE_DOUGHNUT:return function(e){var t=e.major,a=e.minor;return!(t.length>0||a.length>1||a[0]&&"value"!==a[0].field.type&&"synthetic"!==a[0].field.type)}(e.encodings)}var a,r,o,l,s;return!1}},552179:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertSavedConfig=void 0;var n=a(797311),r={time:["","Year","Quarter","Month","Week","Day","Month Name","Quarter Number","Week Number","Day of Month","Day of Week"],value:["Sum","Count","Average","Unique"],category:["Unique","Count"],synthetic:[]},i=function(e,t){var a=n.sheetTypeToChartType[t[e.ColumnName]];return{aggregateFunc:e.AggregateFunc,trendline:e.Trendline,aggregateOptions:r[a]||[],field:{name:e.ColumnName,type:a,values:[]}}},o={Auto:"auto",Bar:"bar",Line:"line",Scatter:"scatter",Area:"area",Pie:"pie",Doughnut:"doughnut"};t.convertSavedConfig=function(e,t){var a,n,r,l,s,u,d,c,p=function(e){return e.reduce((function(e,t){return t.model?e[t.model.Name]=t.model.Type:e[t.Name]=t.Type,e}),{})}(t);return p["Record Count"]="Synthetic",{chartType:o[e.ChartType],flipXY:e.FlipXY,hideDataButton:e.HideDataButton,unstackBarChart:e.UnstackBarChart,hideTitle:e.HideTitle,hideLegend:e.Legend.Hide,disableClickThrough:e.DisableClickThrough,hideDataZoomFilter:e.HideDataZoomFilter,encodings:{major:null===(a=e.Encodings)||void 0===a?void 0:a.Major.map((function(e){return i(e,p)})),minor:null===(n=e.Encodings)||void 0===n?void 0:n.Minor.map((function(e){return i(e,p)})),detail:[],color:null===(r=e.Encodings)||void 0===r?void 0:r.Color.map((function(e){return i(e,p)})),size:null===(l=e.Encodings)||void 0===l?void 0:l.Size.map((function(e){return i(e,p)}))},sortBy:e.SortBy?{encodingKey:e.SortBy.EncodingKey,encodingIndex:e.SortBy.Index,direction:e.SortBy.SortDirection}:void 0,kpi:{showLastValue:null===(s=e.Legend.Kpi)||void 0===s?void 0:s.ShowLastValue,showPercentDiff:null===(u=e.Legend.Kpi)||void 0===u?void 0:u.ShowPercentDiff,isLowerValueBetter:null===(d=e.Legend.Kpi)||void 0===d?void 0:d.IsLowerValueBetter,useAccessibleColor:null===(c=e.Legend.Kpi)||void 0===c?void 0:c.UseAccessibleColor}}}},657269:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.AreaChartBuilder=void 0;var r=n(a(689728)),i=n(a(856690)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808)),u=a(74859),d=a(797311);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var p=function(e){(0,o.default)(a,e);var t=c(a);function a(){var e;return(0,i.default)(this,a),(e=t.apply(this,arguments)).createDataObject=function(t,a){return{name:e.generateColorSeries?a:e.fieldDict[a].displayName,type:d.CHART_TYPE_LINE,stack:"stack",areaStyle:{},data:t}},e}return(0,r.default)(a)}(u.BarChartBuilder);t.AreaChartBuilder=p},74859:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.BarChartBuilder=void 0;var r=n(a(600861)),i=n(a(238416)),o=n(a(689728)),l=n(a(856690)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=a(490056),p=a(708897),f=a(797311);function h(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var y=function(e,t){return e.aggregateFunc&&"synthetic"!==e.field.type?"".concat(t," (").concat(e.aggregateFunc,")"):t},g=function(e){(0,s.default)(a,e);var t=v(a);function a(e,n,o){var s,d,c,m;return(0,l.default)(this,a),(s=t.call(this,e,n,o)).colorField=null,s.minorCols=[],s.isTime=!1,s.isTimeBreakdown=!1,s.nullKeys=[],s.majorDimensionMap={},s.majorDimensionNames=[],s.canCreateChart=function(){return!!(s.encodings.major.length&&s.encodings.minor.length&&s.majorCol)},s.setBaseEchartConfig=function(){s.echartConfig={animation:!window.APPSHEET_TEST_CONTEXT,grid:{containLabel:!0},visualMap:[]}},s.addAxes=function(){var e,t=s.createMajorAxis(),a=s.createMinorAxis();s.echartConfig=Object.assign(Object.assign({},s.echartConfig),(e={},(0,i.default)(e,s.config.flipXY?"yAxis":"xAxis",t),(0,i.default)(e,s.config.flipXY?"xAxis":"yAxis",a),e)),s.echartConfig.xAxis.axisLabel.rotate=45,s.echartConfig.xAxis.nameRotate=90},s.addTooltips=function(){var e=[].concat((0,r.default)(s.encodings.major.map((function(e){return y(e,s.fieldDict[e.field.name].displayName)}))),(0,r.default)(s.encodings.minor.map((function(e){return y(e,s.fieldDict[e.field.name].displayName)}))),(0,r.default)(s.encodings.color.map((function(e){return y(e,s.fieldDict[e.field.name].displayName)}))));s.echartConfig.tooltip={confine:!0,formatter:function(t){return s.getBarLineAreaTooltips(t,e)}}},s.getBarLineAreaTooltips=function(e,t){return e.data.value?(s.encodings.minor.length>1?["".concat(t[0],": ").concat(e.data.value[0]),"".concat(e.seriesName,": ").concat(e.data.value[1])]:s.generateColorSeries?["".concat(t[0],": ").concat(e.data.value[0]),"".concat(t[1],": ").concat(e.data.value[1]),"".concat(t[2],": ").concat(e.seriesName)]:t.map((function(t,a){return"".concat(t,": ").concat(e.data.value[a])}))).join("<br/>"):""},s.addLegend=function(){s.echartConfig.legend={type:"scroll",show:!s.generateColorMap&&!s.config.hideLegend}},s.createGetRows=function(e){var t;return s.generateColorSeries&&(null===(t=s.colorField)||void 0===t?void 0:t.values)?function(t){return s.majorDimensionMap[t].filter((function(t){var a;return t[s.encodings.color[0].field.name]===(null===(a=s.colorField)||void 0===a?void 0:a.values[e])}))}:function(e){return s.majorDimensionMap[e]}},s.getSums=function(e,t){return s.majorDimensionNames.map((function(a){if(s.nullKeys.has(a))return null;var n=e(a);return n.some((function(e){return e[t.name]||0===e[t.name]}))?n.reduce((function(e,a){return e+Number(a[t.name])}),0):null}))},s.getCounts=function(e){return s.majorDimensionNames.map((function(t){return s.nullKeys.has(t)?null:e(t).length}))},s.getUnique=function(e,t){return s.majorDimensionNames.map((function(a){if(s.nullKeys.has(a))return null;var n=e(a).reduce((function(e,a){var n=a[t.name];return e[n]||(e[n]=[]),e[n].push(a),e}),{});return Object.keys(n).length}))},s.createDataForTime=function(e){var t=s.majorDimensionNames.map((function(e){return"null"===e?null:new Date(+e)}));return e.map((function(e,a){var n;return null===e?null:{name:null===(n=t[a])||void 0===n?void 0:n.toString(),value:s.config.flipXY?[e,t[a]]:[t[a],e]}})).filter((function(e){return null!==e}))},s.createDataForContinuousTime=function(e){return e.map((function(e,t){return null===e?null:{name:s.majorDimensionNames[t],value:s.config.flipXY?[e,s.majorDimensionNames[t]]:[s.majorDimensionNames[t],e]}})).filter((function(e){return null!==e}))},s.createDataForNonTime=function(e){return e.map((function(e,t){return{name:s.majorDimensionNames[t],value:s.config.flipXY?[e,s.majorDimensionNames[t]]:[s.majorDimensionNames[t],e]}}))},s.setCreateDataFunc=function(){s.isTime&&!s.isTimeBreakdown?s.createData=s.createDataForTime:s.isTime&&f.continuousTimeAggregateFuncs.includes(s.encodings.major[0].aggregateFunc)?s.createData=s.createDataForContinuousTime:s.createData=s.createDataForNonTime},s.getExtraForColorMap=function(e){return s.majorDimensionNames.map((function(t){if(s.nullKeys.has(t))return null;var a=e(t).map((function(e){return e[s.encodings.color[0].field.name]}));switch(s.encodings.color[0].aggregateFunc){case"Sum":return a.reduce((function(e,t){return Number(e)+Number(t)}),0);case"Average":return a.reduce((function(e,t){return Number(e)+Number(t)}),0)/a.length;case"Count":return a.length}return 0}))},s.createDataObject=function(e,t){return{name:s.generateColorSeries?t:s.fieldDict[t].displayName,type:f.CHART_TYPE_BAR,stack:s.generateColorSeries&&!s.config.unstackBarChart?"stack":void 0,areaStyle:void 0,data:e}},s.addData=function(){s.echartConfig.series=s.minorCols.map((function(e,t){var a=s.createGetRows(t),n=s.generateColorSeries?s.encodings.minor[0]:s.encodings.minor[t],r=[];if(n.aggregateFunc)switch(n.aggregateFunc){case"Sum":r=s.getSums(a,e);break;case"Count":r=s.getCounts(a);break;case"Average":var i=s.getSums(a,e)||{};r=s.getCounts(a).map((function(e,t){return null===e||null===i[t]?null:e?i[t]/e:0}));break;case"Unique":r=s.getUnique(a,e)}if(r=s.createData(r),s.generateColorMap){var o=s.getExtraForColorMap(a);r.forEach((function(e,t){e.value.push(o[t])}))}return s.createDataObject(r,s.colorField?s.colorField.values[t]:e.name)}))},s.addDataZoom=function(){var e=s.config.flipXY?"yAxisIndex":"xAxisIndex";s.echartConfig.dataZoom=s.config.hideDataZoomFilter?void 0:[(0,i.default)({type:"slider"},e,[0]),(0,i.default)({type:"inside"},e,[0])]},s.addColorMap=function(){var e=s.echartConfig.series[0].data.map((function(e){return e.value[e.value.length-1]}));s.echartConfig.visualMap.push({show:!s.config.hideLegend,min:Math.min.apply(Math,(0,r.default)(e)),max:Math.max.apply(Math,(0,r.default)(e))})},s.addExtra=function(){s.generateColorMap&&s.addColorMap()},s.addSort=function(){var e;if("minor"===(null===(e=s.config.sortBy)||void 0===e?void 0:e.encodingKey)){var t=s.majorDimensionNames.map((function(e,t){return{major:e,minor:s.echartConfig.series.map((function(e){return e.data[t]}))}})).sort((function(e,t){var a,n,r=s.config.flipXY?0:1;if(!s.config.sortBy)return 0;var i=s.generateColorSeries?e.minor.reduce((function(e,t){return e+t.value[r]}),0):e.minor[s.config.sortBy.encodingIndex].value[r],o=s.generateColorSeries?t.minor.reduce((function(e,t){return e+t.value[r]}),0):t.minor[s.config.sortBy.encodingIndex].value[r];return"Asc"===(null===(a=s.config.sortBy)||void 0===a?void 0:a.direction)?i-o:"Desc"===(null===(n=s.config.sortBy)||void 0===n?void 0:n.direction)?o-i:0}));s.config.flipXY?s.echartConfig.yAxis.data=t.map((function(e){return e.major})):s.echartConfig.xAxis.data=t.map((function(e){return e.major})),s.echartConfig.series.forEach((function(e,a){e.data=t.map((function(e){return e.minor[a]}))}))}},s.createMajorDimensionMap=function(){var e=s.encodings.major[0].aggregateFunc;return s.filteredDataset.reduce((function(t,a){var n=a[s.majorCol.name];return s.isTime&&(n=n?(0,f.getDateTimeKey)(new Date(n),e):"null"),t[n]||(t[n]=[]),t[n].push(a),t}),{})},s.getMajorDimensionNames=function(){var e,t=Object.keys(s.majorDimensionMap);return s.isTime?s.isTimeBreakdown?t=s.createTimeKeyRange():t.sort((function(e,t){return parseInt(e)-parseInt(t)})):"major"===(null===(e=s.config.sortBy)||void 0===e?void 0:e.encodingKey)&&t.sort((function(e,t){var a;return"Asc"===(null===(a=s.config.sortBy)||void 0===a?void 0:a.direction)?e.localeCompare(t):t.localeCompare(e)})),t},s.createTimeKeyRange=function(){var e,t=s.encodings.major[0].aggregateFunc,a=s.fieldDict[s.encodings.major[0].field.name],n=(0,f.generateDateTimeKeyRange)(a.values,t),r=h(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;s.majorDimensionMap[i]||(s.majorDimensionMap[i]=[],s.nullKeys.add(i))}}catch(e){r.e(e)}finally{r.f()}return n},s.createMajorAxis=function(){var e,t;return Object.assign(Object.assign({name:s.fieldDict[s.encodings.major[0].field.name].displayName},f.axisNameSettings),{type:s.isTimeBreakdown?"category":s.encodings.major[0].field.type,inverse:!(!s.isTime||"major"!==(null===(e=s.config.sortBy)||void 0===e?void 0:e.encodingKey)||"Desc"!==(null===(t=s.config.sortBy)||void 0===t?void 0:t.direction)),data:s.isTime&&!s.isTimeBreakdown?void 0:s.majorDimensionNames,axisLabel:{formatter:s.isTime&&!s.isTimeBreakdown?void 0:p.categoryLabelFormatter,rotate:0}})},s.createMinorAxis=function(){return Object.assign(Object.assign({name:s.encodings.minor.map((function(e){var t=e.field;return s.fieldDict[t.name].displayName})).join(" / ")},f.axisNameSettings),{type:"value",axisLabel:{rotate:0}})},s.canCreateChart()?(s.colorField=s.fieldDict[null===(c=null===(d=s.encodings.color[0])||void 0===d?void 0:d.field)||void 0===c?void 0:c.name]||null,s.minorCols=function(e,t){return e.minor.map((function(e){return t[e.field.name]})).filter(Boolean)}(s.encodings,s.fieldDict),s.generateColorSeries&&(null===(m=s.colorField)||void 0===m?void 0:m.values)&&(s.minorCols=Array(s.colorField.values.length).fill(0).map((function(){return s.minorCols[0]}))),s.isTime=s.encodings.major.some((function(e){return"time"===e.field.type})),s.isTimeBreakdown=s.isTime&&!!s.encodings.major[0].aggregateFunc,s.nullKeys=new Set,s.majorDimensionMap=s.createMajorDimensionMap(),s.majorDimensionNames=s.getMajorDimensionNames(),s.setCreateDataFunc(),s):(0,u.default)(s)}return(0,o.default)(a)}(c.BaseChartBuilder);t.BarChartBuilder=g},490056:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseChartBuilder=void 0;var r=n(a(689728)),i=n(a(856690)),o=(0,r.default)((function e(t,a,n){var r=this;(0,i.default)(this,e),this.getEchartConfig=function(){return r.echartConfig},this.canCreateChart=function(){return!1},this.setBaseEchartConfig=function(){r.echartConfig={}},this.addAxes=function(){},this.addTooltips=function(){},this.addLegend=function(){},this.addData=function(){},this.addDataZoom=function(){},this.addExtra=function(){},this.addSort=function(){},this.addTrendline=function(){},this.encodings=t.encodings,this.config=t,this.fieldDict=a,this.filteredDataset=n,this.echartConfig=[],this.generateColorSeries=1===this.encodings.minor.length&&1===this.encodings.color.length&&"category"===this.encodings.color[0].field.type,this.generateColorMap=1===this.encodings.minor.length&&1===this.encodings.color.length&&"value"===this.encodings.color[0].field.type,this.majorCol=this.encodings.major[0]&&a[this.encodings.major[0].field.name]}));t.BaseChartBuilder=o},708897:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.categoryLabelFormatter=void 0;t.categoryLabelFormatter=function(e){return(e=0===e||!1===e||e?"".concat(e):"").length>17?e.slice(0,17)+"...":e}},665920:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.DoughnutChartBuilder=void 0;var r=n(a(689728)),i=n(a(856690)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var d=function(e){(0,o.default)(a,e);var t=u(a);function a(){var e;return(0,i.default)(this,a),(e=t.apply(this,arguments)).getRadius=function(){return["40%","70%"]},e}return(0,r.default)(a)}(a(798800).PieChartBuilder);t.DoughnutChartBuilder=d},578400:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.createChartOption=void 0;var r,i=n(a(238416)),o=a(299912),l=a(74859),s=a(520570),u=a(657269),d=a(666076),c=a(798800),p=a(665920),f=a(797311),h=(r={},(0,i.default)(r,f.CHART_TYPE_BAR,l.BarChartBuilder),(0,i.default)(r,f.CHART_TYPE_LINE,s.LineChartBuilder),(0,i.default)(r,f.CHART_TYPE_AREA,u.AreaChartBuilder),(0,i.default)(r,f.CHART_TYPE_SCATTER,d.ScatterChartBuilder),(0,i.default)(r,f.CHART_TYPE_PIE,c.PieChartBuilder),(0,i.default)(r,f.CHART_TYPE_DOUGHNUT,p.DoughnutChartBuilder),r);t.createChartOption=function(e,t,a){var n=(0,o.calculateChartType)(e);if(!n)return{};var r=function(e){var t=e.reduce((function(e,t){return e[t.name]=t,e}),{});return t["Record Count"]=Object.assign(Object.assign({},e[0]),{name:"Record Count"}),t}(a),i=t.map((function(e,t){return e._i=t+1,e})),l=h[n];if(!l)return{};var s=new l(e,r,i);return s.canCreateChart()?(s.setBaseEchartConfig(),s.addAxes(),s.addTooltips(),s.addLegend(),s.addData(),s.addDataZoom(),s.addExtra(),s.addSort(),s.addTrendline(),s.getEchartConfig()):{}}},956791:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.createKPIToolTips=t.createKPITextStyle=t.KPILegendFormatter=void 0;var r=n(a(627424)),i=n(a(496486)),o=a(646514);t.KPILegendFormatter=function(e,t,a){var n,o,l=a.showLastValue,s=a.showPercentDiff,u=a.isLowerValueBetter,d=t.find((function(t){return t.name===e}))||{data:[]},c=d.data.length?null===(n=d.data[d.data.length-1])||void 0===n?void 0:n.value[1]:null,p=function(e,t,a){var n=a?["badText","goodText"]:["goodText","badText"],o=(0,r.default)(n,2),l=o[0],s=o[1];return isNaN(e)||isNaN(t)||e===t?{percentageClass:"neutralText",percentage:"0%"}:e>t?0===t?{percentageClass:l,percentage:"+100%"}:{percentageClass:l,percentage:"+".concat(i.default.round(e/t*100-100,2),"%")}:0===e?{percentageClass:s,percentage:"-100%"}:{percentageClass:s,percentage:"-".concat(i.default.round(t/e*100-100,2),"%")}}(c,d.data.length>=2?null===(o=d.data[d.data.length-2])||void 0===o?void 0:o.value[1]:null,u),f=p.percentageClass,h=p.percentage,m=["{header|".concat(e,"}")];return l&&m.push("{lastElement|".concat(i.default.round(c,2),"}")),s&&m.push("{".concat(f,"|").concat(h,"}")),m.join("\n")};t.createKPITextStyle=function(e){return{padding:[0,1],rich:{header:{color:o.GOOGLE_GREY_500,fontSize:12},lastElement:{color:o.GOOGLE_BLACK,fontSize:16},badText:{color:e?o.GOOGLE_ORANGE_500:o.GOOGLE_RED,fontSize:10},goodText:{color:e?o.GOOGLE_BLUE:o.GOOGLE_GREEN,fontSize:10},neutralText:{color:o.GOOGLE_BLACK,fontSize:10}}}};t.createKPIToolTips=function(e,t){return{show:!0,confine:!0,formatter:function(a){return e&&t?["Last value and","% difference","with previous value"].join("<br/>"):t?["% difference","with previous value"].join("<br/>"):"Last value"}}}},520570:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.LineChartBuilder=void 0;var r=n(a(689728)),i=n(a(856690)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808)),u=a(74859),d=a(956791),c=a(841692),p=a(797311);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var h=function(e){var t;return(null===(t=e.data)||void 0===t?void 0:t.length)>0&&e.data.every((function(e){return!e.value.some((function(e){return isNaN(e)}))}))},m=function(e){(0,o.default)(a,e);var t=f(a);function a(){var e;return(0,i.default)(this,a),(e=t.apply(this,arguments)).createDataObject=function(t,a){return{name:e.generateColorSeries?a:e.fieldDict[a].displayName,type:p.CHART_TYPE_LINE,stack:void 0,areaStyle:void 0,data:t}},e.addExtra=function(){e.config.kpi&&(e.config.kpi.showLastValue||e.config.kpi.showPercentDiff)&&(e.echartConfig.legend=Object.assign(Object.assign({},e.echartConfig.legend),{formatter:function(t){return(0,d.KPILegendFormatter)(t,e.echartConfig.series,e.config.kpi?e.config.kpi:{showLastValue:!1,showPercentDiff:!1,isLowerValueBetter:!1})},icon:"pin",textStyle:(0,d.createKPITextStyle)(e.config.kpi.useAccessibleColor),tooltip:(0,d.createKPIToolTips)(e.config.kpi.showLastValue,e.config.kpi.showPercentDiff)})),e.generateColorMap&&e.addColorMap()},e.addTrendline=function(){e.encodings.minor.some((function(e){return e.trendline}))&&(e.generateColorSeries?e.echartConfig.series.forEach((function(t){var a=t.data,n=t.name,r=[],i=[];a.forEach((function(e,t){var a=e.value;r.push(t),i.push(a[1])}));var o=(0,c.makeTrendline)({trendlineType:e.encodings.minor[0].trendline,labels:r,values:i});o&&h(o)&&e.echartConfig.series.push(Object.assign(Object.assign({},o),{name:"".concat(e.fieldDict[n].displayName," Trendline")}))})):e.encodings.minor.forEach((function(t){var a;if(t.trendline){var n=[],r=[],i=[];null===(a=e.echartConfig.series.find((function(a){return a.name===e.fieldDict[t.field.name].displayName})))||void 0===a||a.data.forEach((function(e,t){var a=e.value;n.push(t),i.push(a[0]),r.push(a[1])}));var o=(0,c.makeTrendline)({trendlineType:t.trendline,labels:n,values:r,domain:e.isTime?i:void 0});o&&h(o)&&e.echartConfig.series.push(Object.assign(Object.assign({},o),{name:"".concat(e.fieldDict[t.field.name].displayName," Trendline")}))}})))},e}return(0,r.default)(a)}(u.BarChartBuilder);t.LineChartBuilder=m},841692:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.makeTrendline=void 0;var r=n(a(386036)),i=a(797311);t.makeTrendline=function(e){var t=e.trendlineType,a=e.labels,n=e.values,o=e.domain,l=null;return t===i.TRENDLINE_LINEAR?l=r.default.linearRegression(a,n,2):t===i.TRENDLINE_EXPONENTIAL?l=r.default.exponentialRegression(a,n,2):t===i.TRENDLINE_LOGARITHMIC?l=r.default.logarithmicRegression(a,n,2):t===i.TRENDLINE_POWER?l=r.default.powerRegression(a,n,2):t===i.TRENDLINE_POLYNOMIAL&&(l=r.default.polynomialRegression(a,n,2)),l?{name:"Trend Line",smooth:!0,type:"line",showSymbol:!1,data:a.map((function(e,t){return{name:e,value:[o?o[t]:e,l&&l(e)]}})),stack:void 0,areaStyle:void 0}:null}},798800:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.PieChartBuilder=void 0;var r=n(a(689728)),i=n(a(856690)),o=n(a(861655)),l=n(a(994993)),s=n(a(73808)),u=n(a(496486)),d=a(490056),c=a(797311);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var f=function(e){(0,o.default)(a,e);var t=p(a);function a(){var e;return(0,i.default)(this,a),(e=t.apply(this,arguments)).canCreateChart=function(){return!(!e.encodings.minor.length||!e.encodings.color.length)},e.setBaseEchartConfig=function(){e.echartConfig={animation:!window.APPSHEET_TEST_CONTEXT,visualMap:[],series:[{type:c.CHART_TYPE_PIE,minShowLabelAngle:5,label:{show:!0,position:"outside",formatter:function(e){var t=e.name,a=e.value,n=e.percent;return["{bold|".concat(t,"}"),"{regular|".concat(n,"%}"),"{regular|".concat(a,"}")].join("\n")},rich:{regular:{fontSize:10,align:"middle"},bold:{fontSize:10,fontWeight:"bold",align:"middle"}}}}]}},e.addTooltips=function(){e.echartConfig.tooltip={confine:!0,show:!0}},e.addLegend=function(){e.echartConfig.legend={type:"scroll",show:!e.config.hideLegend}},e.addData=function(){var t=e.encodings.color[0].field.name,a=e.encodings.minor[0].field.name,n=e.filteredDataset.reduce((function(e,n){return e[n[t]]?e[n[t]].push(Number(n[a])):e[n[t]]=[Number(n[a])],e}),{}),r=[];switch(e.encodings.minor[0].aggregateFunc){case"Count":r=Object.keys(n).map((function(e){return{name:e,value:n[e].length}}));break;case"Sum":r=Object.keys(n).map((function(e){return{name:e,value:u.default.sum(n[e])}}));break;case"Average":r=Object.keys(n).map((function(e){return{name:e,value:u.default.round(u.default.mean(n[e]),2)}}))}e.echartConfig.series[0]=Object.assign(Object.assign({},e.echartConfig.series[0]),{radius:e.getRadius(),data:r})},e.addSort=function(){e.config.sortBy&&("minor"===e.config.sortBy.encodingKey?e.echartConfig.series[0].data.sort((function(t,a){var n;return"Asc"===(null===(n=e.config.sortBy)||void 0===n?void 0:n.direction)?t.value-a.value:a.value-t.value})):"color"===e.config.sortBy.encodingKey&&e.echartConfig.series[0].data.sort((function(t,a){var n;return"Asc"===(null===(n=e.config.sortBy)||void 0===n?void 0:n.direction)?a.name>t.name?1:-1:t.name>a.name?1:-1})))},e.getRadius=function(){return["0%","70%"]},e}return(0,r.default)(a)}(d.BaseChartBuilder);t.PieChartBuilder=f},666076:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.ScatterChartBuilder=void 0;var r=n(a(600861)),i=n(a(627424)),o=n(a(689728)),l=n(a(856690)),s=n(a(861655)),u=n(a(994993)),d=n(a(73808)),c=a(490056),p=a(708897),f=a(841692),h=a(797311);function m(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var g=function(e){(0,s.default)(a,e);var t=y(a);function a(e,n,o){var s;return(0,l.default)(this,a),(s=t.call(this,e,n,o)).yMin=0,s.yMax=0,s.xMin=0,s.xMax=0,s.valueKeys=[],s.sizeFrom=null,s.xValueList=[],s.yValueList=[],s.canCreateChart=function(){return!(!s.encodings.major.length||!s.encodings.minor.length)},s.setBaseEchartConfig=function(){s.echartConfig={animation:!window.APPSHEET_TEST_CONTEXT,grid:{containLabel:!0},visualMap:[]}},s.addAxes=function(){s.echartConfig=Object.assign(Object.assign({},s.echartConfig),{yAxis:Object.assign(Object.assign({name:s.fieldDict[s.encodings.minor[0].field.name].displayName},h.axisNameSettings),{type:"value",scale:!0}),xAxis:Object.assign(Object.assign({name:s.fieldDict[s.encodings.major[0].field.name].displayName},h.axisNameSettings),{nameRotate:90,type:"value",axisLabel:{rotate:60,formatter:p.categoryLabelFormatter},scale:!0})})},s.addTooltips=function(){s.echartConfig.tooltip={confine:!0,formatter:function(e){return e.data.rows?"Row Number(s): "+e.data.rows.join(", ")+"<br/>"+s.valueKeys.map((function(t,a){return"".concat(t,": ").concat(e.data.value[a])})).join("<br/>"):null}}},s.addLegend=function(){s.echartConfig.legend={type:"scroll",show:!s.config.hideLegend}},s.addData=function(){var e=s.generateColorSeries?s.fieldDict[s.encodings.color[0].field.name].values:[null];s.echartConfig.series=e.map((function(e){var t,a=s.createXYMap(e),n=[],r=m(Object.keys(a).map((function(e){return[e,a[e]]})));try{var o=function(){var e,a=(0,i.default)(t.value,2),r=a[0],o=a[1],l=m(Object.keys(o).map((function(e){return[e,o[e]]})));try{for(l.s();!(e=l.n()).done;){var u=(0,i.default)(e.value,2),d=u[0],c=u[1],p=[Number(r),Number(d)];s.encodings.size.length>0&&p.push(s.getSizeData(c)),s.generateColorMap&&p.push(s.getColorData(c)),s.xValueList.push(p[0]),s.yValueList.push(p[1]),n.push({name:s.fieldDict[s.encodings.major[0].field.name].displayName,rows:c.map((function(e){return e._i})),value:p})}}catch(e){l.e(e)}finally{l.f()}};for(r.s();!(t=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}return{name:e,type:h.CHART_TYPE_SCATTER,data:n,symbolSize:function(e){return 0!==s.encodings.size.length&&s.sizeFrom?(0,h.mapRange)(e[2],s.sizeFrom,[10,50]):10}}}))},s.addDataZoom=function(){s.echartConfig.dataZoom=s.config.hideDataZoomFilter?void 0:[{type:"slider",show:!0,yAxisIndex:[0],startValue:s.yMin,endValue:s.yMax},{type:"inside",show:!0,yAxisIndex:[0],startValue:s.yMin,endValue:s.yMax},{type:"slider",show:!0,xAxisIndex:[0],startValue:s.xMin,endValue:s.xMax},{type:"inside",show:!0,xAxisIndex:[0],startValue:s.xMin,endValue:s.xMax}]},s.addExtra=function(){if(s.echartConfig.yAxis=Object.assign(Object.assign({},s.echartConfig.yAxis),{min:s.yMin,max:s.yMax}),s.echartConfig.xAxis=Object.assign(Object.assign({},s.echartConfig.xAxis),{min:s.xMin,max:s.xMax}),s.generateColorMap){var e=s.echartConfig.series[0].data.map((function(e){return e.value[e.value.length-1]}));s.echartConfig.visualMap.push({type:"continuous",show:!s.config.hideLegend,dimension:s.echartConfig.series[0].data[0].value.length-1,min:Math.min.apply(Math,(0,r.default)(e)),max:Math.max.apply(Math,(0,r.default)(e))})}s.echartConfig.visualMap.forEach((function(e,t){e.bottom=150*t}))},s.addTrendline=function(){if(s.encodings.minor[0].trendline){var e=(0,f.makeTrendline)({trendlineType:s.encodings.minor[0].trendline,labels:s.xValueList,values:s.yValueList});s.echartConfig.series.push(e)}},s.createXYMap=function(e){var t=!1;return s.filteredDataset.filter((function(t){return!s.generateColorSeries||t[s.encodings.color[0].field.name]===e})).reduce((function(e,a){var n=Number(a[s.encodings.major[0].field.name]),r=Number(a[s.encodings.minor[0].field.name]);return(!t||n<s.xMin)&&(s.xMin=n),(!t||n>s.xMax)&&(s.xMax=n),(!t||r<s.yMin)&&(s.yMin=r),(!t||r>s.yMax)&&(s.yMax=r),t=!0,e[n]||(e[n]={}),e[n][r]||(e[n][r]=[]),e[n][r].push(a),e}),{})},s.getSizeData=function(e){var t=e.map((function(e){return e[s.encodings.size[0].field.name]})).map(h.convertToNullableNumeric).filter((function(e){return null!==e})),a=s.aggregateValues(t,s.encodings.size[0].aggregateFunc);return s.sizeFrom?a<s.sizeFrom[0]?s.sizeFrom[0]=a:a>s.sizeFrom[1]&&(s.sizeFrom[1]=a):s.sizeFrom=[a,a],a},s.getColorData=function(e){var t=e.map((function(e){return e[s.encodings.color[0].field.name]})).map(h.convertToNullableNumeric).filter((function(e){return null!==e}));return s.aggregateValues(t,s.encodings.color[0].aggregateFunc)},s.aggregateValues=function(e,t){var a=0;switch(t){case"Sum":a=e.reduce((function(e,t){return e+t}),0);break;case"Average":e.length&&(a=e.reduce((function(e,t){return e+t}),0)/e.length)}return a},s.canCreateChart()?(s.valueKeys=[n[s.encodings.major[0].field.name].displayName,n[s.encodings.minor[0].field.name].displayName],s.encodings.size.length>0&&s.valueKeys.push(n[s.encodings.size[0].field.name].displayName),s.generateColorMap&&s.valueKeys.push(n[s.encodings.color[0].field.name].displayName),s):(0,u.default)(s)}return(0,o.default)(a)}(c.BaseChartBuilder);t.ScatterChartBuilder=g},211305:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.transformColumnsToDataset=void 0;var r=n(a(496486)),i=a(797311),o=function(e,t){return r.default.uniq(t.map((function(t){return t[e]})))},l=r.default.memoize((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.map((function(e){return{name:e.Name||e.model.Name,displayName:a?e.displayName(a):void 0,type:i.sheetTypeToChartType[e.Type||e.model.Type]||"category",originalType:e.Type||e.model.Type,values:o(e.Name||e.model.Name,t)}}))}));t.transformColumnsToDataset=l},797311:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.sortNullableNumsOrDatesAsc=t.sortNullableNumsOrDates=t.sheetTypeToChartType=t.padLeadingZero=t.mapRange=t.isNullableNumeric=t.isNullableDate=t.isLeapYear=t.iconTypeForField=t.getWeek=t.getShortMonthName=t.getQuarter=t.getMonthName=t.getDayNameForNumber=t.getDayNameForDate=t.getDateTimeKey=t.generateDateTimeKeyRange=t.daysPerMonth=t.convertToNullableNumeric=t.convertToNullableDate=t.continuousTimeAggregateFuncs=t.cleanData=t.axisNameSettings=t.TRENDLINE_POWER=t.TRENDLINE_POLYNOMIAL=t.TRENDLINE_LOGARITHMIC=t.TRENDLINE_LINEAR=t.TRENDLINE_EXPONENTIAL=t.MONTH_NAMES=t.ENCODING_KEY_SIZE=t.ENCODING_KEY_MINOR=t.ENCODING_KEY_MAJOR=t.ENCODING_KEY_DETAIL=t.ENCODING_KEY_COLOR=t.DEFAULT_EDITOR_STATE=t.DAY_OF_WEEK_NAMES=t.DAYS_PER_MONTH_FOR_COMMON_YEAR=t.CHART_TYPE_SCATTER=t.CHART_TYPE_PIE=t.CHART_TYPE_LINE=t.CHART_TYPE_DOUGHNUT=t.CHART_TYPE_BAR=t.CHART_TYPE_AUTO=t.CHART_TYPE_AREA=t.BASE_SYNTHETIC_ENCODING=t.ALL_TRENDLINES=t.ALL_ENCODING_KEYS=t.ALL_CHART_TYPES=void 0;var r=n(a(627424));function i(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var l="auto";t.CHART_TYPE_AUTO=l;t.CHART_TYPE_BAR="bar";var s="line";t.CHART_TYPE_LINE=s;var u="scatter";t.CHART_TYPE_SCATTER=u;var d="area";t.CHART_TYPE_AREA=d;t.CHART_TYPE_PIE="pie";var c="doughnut";t.CHART_TYPE_DOUGHNUT=c;var p=[l,"bar",s,u,d,"pie",c];t.ALL_CHART_TYPES=p;var f="major";t.ENCODING_KEY_MAJOR=f;var h="minor";t.ENCODING_KEY_MINOR=h;t.ENCODING_KEY_DETAIL="detail";var m="color";t.ENCODING_KEY_COLOR=m;var v="size";t.ENCODING_KEY_SIZE=v;var y=[f,h,m,v];t.ALL_ENCODING_KEYS=y;var g="Linear";t.TRENDLINE_LINEAR=g;var w="Exponential";t.TRENDLINE_EXPONENTIAL=w;var b="Logarithmic";t.TRENDLINE_LOGARITHMIC=b;var S="Power";t.TRENDLINE_POWER=S;var T="Polynomial";t.TRENDLINE_POLYNOMIAL=T;var C=[g,w,b,S,T];t.ALL_TRENDLINES=C;t.sheetTypeToChartType={Decimal:"value",Number:"value",Percent:"value",Price:"value",Address:"category",App:"category",ChangeCounter:"category",ChangeLocation:"category",Color:"category",Drawing:"category",Email:"category",Enum:"category",EnumList:"category",File:"category",Image:"category",LatLong:"category",LongText:"category",Multicolumn:"category",Name:"category",Phone:"category",Progress:"category",Ref:"category",Signature:"category",Text:"category",Thumbnail:"category",URL:"category",Video:"category",XY:"category","Yes/No":"category",ChangeTimestamp:"time",Date:"time",DateTime:"time",Duration:"time",Time:"time",Synthetic:"synthetic"};t.continuousTimeAggregateFuncs=["Year","Quarter","Month","Week","Day"];t.axisNameSettings={nameLocation:"end",nameGap:7,nameTextStyle:{padding:-4,align:"left"}};var R=["January","February","March","April","May","June","July","August","September","October","November","December"];t.MONTH_NAMES=R;var E=[31,28,31,30,31,30,31,31,30,31,30,31];t.DAYS_PER_MONTH_FOR_COMMON_YEAR=E;var k=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];t.DAY_OF_WEEK_NAMES=k;t.DEFAULT_EDITOR_STATE={dataset:{rows:[],fields:[]},config:{chartType:"auto",encodings:{major:[],minor:[],detail:[],color:[],size:[]},flipXY:!1},draggingField:null,draggingEncoding:null};t.BASE_SYNTHETIC_ENCODING={field:{type:"synthetic",name:"Record Count",values:[]},aggregateOptions:[],aggregateFunc:"Count"};var I=function(e){return!isNaN(e)};t.isNullableNumeric=I;var A=function(e){return isNaN(e)||0!==e&&!e?null:+e};t.convertToNullableNumeric=A;var D=function(e){return!e||!!Date.parse(e)};t.isNullableDate=D;var M=function(e){return e?new Date(e):null};t.convertToNullableDate=M;var x=function(e,t,a){return null===e&&null===t?0:null===e?-1:null===t?1:"Asc"===a?+e-+t:+t-+e};t.sortNullableNumsOrDates=x;var N=function(e,t){return x(e,t,"Asc")};t.sortNullableNumsOrDatesAsc=N;var O=function(e){(e=new Date(e.getTime())).setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)};t.getWeek=O;var _=function(e){return Math.floor(e.getMonth()/3)+1};t.getQuarter=_;var B=function(e){return R[e.getMonth()]};t.getMonthName=B;var P=function(e){return B(e).slice(0,3)};t.getShortMonthName=P;var L=function(e){var t=e.getDate();switch(t){case 1:return"1st";case 2:return"2nd";case 3:return"3rd";default:return"".concat(t,"th")}};t.getDayNameForDate=L;var V=function(e){if(e>=4&&e<=20)return"".concat(e,"th");switch(e%10){case 1:return"".concat(e,"st");case 2:return"".concat(e,"nd");case 3:return"".concat(e,"rd");default:return"".concat(e,"th")}};t.getDayNameForNumber=V;var F=function(e){return e<10?"0".concat(e):"".concat(e)};t.padLeadingZero=F;var H=function(e,t){if(!e||isNaN(e.getTime()))return"null";switch(t){case"Year":return"".concat(e.getFullYear());case"Quarter":return"".concat(e.getFullYear()," Q").concat(_(e));case"Month":return"".concat(P(e)," ").concat(e.getFullYear());case"Week":return"".concat(e.getFullYear()," Week ").concat(O(e));case"Day":return"".concat(e.getFullYear(),"-").concat(F(e.getMonth()+1),"-").concat(F(e.getDate()));case"Quarter Number":return"Q".concat(_(e));case"Month Name":return B(e);case"Week Number":return"Week ".concat(O(e));case"Day of Month":return L(e);case"Day of Week":return k[e.getDay()];case"":return"".concat(e.getTime())}return"null"};t.getDateTimeKey=H;var W=function(e){return e%4==0&&(e%100!=0||e%400==0)};t.isLeapYear=W;t.daysPerMonth=function(e,t){return 1===e&&W(t)?29:E[e]};t.generateDateTimeKeyRange=function(e,t){if(e=e.map((function(e){return new Date(e)})),e.sort(N),!t)return e.map((function(e){return H(e,t)}));var a=e.filter(Boolean);if(0===a.length)return[];var n=a[0],r=a[a.length-1],i=new Date(n.getTime()),o=[];switch(t){case"Year":for(;i.getTime()<=r.getTime();)o.push(H(i,t)),i.setFullYear(i.getFullYear()+1,0,1);break;case"Quarter":for(;i.getTime()<=r.getTime();)o.push(H(i,t)),i.setFullYear(i.getFullYear(),i.getMonth()+3,1);break;case"Month":for(;i.getTime()<=r.getTime();)o.push(H(i,t)),i.setFullYear(i.getFullYear(),i.getMonth()+1,1);break;case"Week":for(;i.getTime()<=r.getTime();)o.push(H(i,t)),i.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()+7);break;case"Day":for(;i.getTime()<=r.getTime();)o.push(H(i,t)),i.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()+1);break;case"Quarter Number":o.push.apply(o,["Q1","Q2","Q3","Q4"]);break;case"Month Name":o.push.apply(o,R);break;case"Week Number":for(var l=1;l<=53;l++)o.push("Week ".concat(l));break;case"Day of Month":for(var s=1;s<=31;s++)o.push(V(s));break;case"Day of Week":o.push.apply(o,k)}return o};t.mapRange=function(e,t,a){if(t[0]===t[1])return a[0];var n=a[0]+(e-t[0])*(a[1]-a[0])/(t[1]-t[0]);return Math.max(Math.min(n,a[1]),a[0])};t.cleanData=function(e){if(!e.length)return{rows:[],fields:[]};e.forEach((function(e){var t,a=i(Object.keys(e).map((function(t){return[t,e[t]]})));try{for(a.s();!(t=a.n()).done;){var n=(0,r.default)(t.value,2),o=n[0],l=n[1];"string"==typeof l&&(e[o]=l.trim())}}catch(e){a.e(e)}finally{a.f()}}));var t=e.reduce((function(e,t){return Object.keys(t).forEach((function(a){e[a]||(e[a]={name:a,type:"category",values:[]}),e[a].values.push(t[a])})),e}),{}),a=Object.keys(t).map((function(e){return t[e]})).map((function(t){return"value"===t.type||t.values.every(I)?(t.values=t.values.map(A).sort(N),t.type="value",e.forEach((function(e){return e[t.name]=+e[t.name]}))):t.values.every(D)?(t.values=t.values.map(M).sort(N),t.type="time",e.forEach((function(e){return e[t.name]=M(e[t.name])}))):t.values=Array.from(new Set(t.values)).sort(),t})).sort((function(e,t){return e.name.localeCompare(t.name)}));return{rows:e,fields:a}};t.iconTypeForField=function(e){switch(e.type){case"category":case"synthetic":return"dot";case"value":return"hash";case"time":return"clock"}return"dot"}},748565:(e,t,a)=>{"use strict";var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.UndoIcon=void 0;var r=n(a(667294)),i=(0,a(697211).createSvgIcon)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.default.createElement("path",{d:"M14.1 8H7.83l2.59-2.59L9 4 4 9l5 5 1.41-1.41L7.83 10h6.27c2.15 0 3.9 1.57 3.9 3.5S16.25 17 14.1 17H7v2h7.1c3.25 0 5.9-2.47 5.9-5.5S17.35 8 14.1 8z"})),"UndoIcon");t.UndoIcon=i},50247:()=>{},793414:()=>{},70172:()=>{},302001:()=>{},633779:()=>{},166558:()=>{},782258:()=>{},275347:()=>{},831777:()=>{},634017:()=>{},159905:()=>{},464604:()=>{}}]);
//# sourceMappingURL=/cloud-sources/prod/bd8238abf556f3cfb783cd5287c507c3e318d7b3cba0be19fc4b6c0aa6b16d8a.map/